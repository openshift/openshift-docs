[[install-config-configuring-pvc-protection]]
= Configuring for Persistent Volume Claim Protection
{product-version}
:data-uri:
:icons:
:experimental:
:toc: macro
:toc-title:

toc::[]

== Overview
{product-title} can be configured to have
xref:../architecture/additional_concepts/storage.adoc#pvcprotection[Persistent Volume Claim Protection] feature enabled.

[NOTE]
====
Persistent Volume Claim Protection is an alpha feature and may change in a future release of {product-title}.
====

[[local-volume-enabling-local-volumes]]
=== Enable Persistent Volume Claim Protection
Enable the `PVCProtection` feature gate on all masters and nodes.

. Edit or create the master configuration file on all masters (*_/etc/origin/master/master-config.yaml_* by default) and add `PVCProtection=true` under the `apiServerArguments` and `controllerArguments` sections and add `PVCProtection` admission plugin configuration under the `admissionConfig` section:
+
[source, yaml]
----
admissionConfig:
  pluginConfig:
    PVCProtection:
      configuration:
        apiVersion: v1
        disable: false
        kind: DefaultAdmissionConfig
...
kubernetesMasterConfig:
...
  apiServerArguments:
    feature-gates:
    - PVCProtection=true
...
  controllerArguments:
    feature-gates:
    - PVCProtection=true
...
----

. On all nodes, edit or create the node configuration file (*_/etc/origin/node/node-config.yaml_* by default)  and add `PVCProtection=true` fetaure gate under `kubeletArguments`.
+
[source, yaml]
----
kubeletArguments:
   feature-gates:
     - PVCProtection=true
----

. On all masters and nodes, restart OpenShift for the changes to take effect.
