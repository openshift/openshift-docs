[[install-config-configuring-authentication-keystone]]
= Configuring the Keystone Identity Provider
{product-author}
{product-version}
:data-uri:
:icons:
:experimental:
:toc: macro
:toc-title:
:prewrap!:


toc::[]

== Overview

You can configure the {product-title} master configuration file to use the Ketstone identity provider for authentication within your cluster.


== Configuring Keystone Authentication


Set `KeystonePasswordIdentityProvider` in the `identityProviders` stanza to
validate user names and passwords against an OpenStack Keystone v3 server.
This enables shared authentication with an OpenStack server configured to store
users in an internal Keystone database.

To configure the Keystone identity provider:

include::install_config/authentication/configuring_authentication_allow_all.adoc[tag=configuring_authentication_common_steps1]

. Specify the `mappingMethod` parameter to determine how identities are mapped to users.
include::install_config/authentication/configuring_authentication_allow_all.adoc[tag=configuring_authentication_common_steps2]

. Specify the following values to configure Keystone authentication:
+
.Master Configuration Using `KeystonePasswordIdentityProvider`
====

----
oauthConfig:
  ...
  identityProviders:
  - challenge: true
    login: true
    mappingMethod: claim
    name: my_keystone_provider <1>
    provider:
      apiVersion: v1
      kind: KeystonePasswordIdentityProvider <2>
      domainName: default <3>
      url: http://keystone.example.com:5000 <4>
      ca: ca.pem <5>
      certFile: keystone.pem <6>
      keyFile: keystonekey.pem <7>
----
<1> This provider name is prefixed to provider user names to form an identity name.
<2> Specify *_KeystonePasswordIdentityProvider_* for the provider kind.
<3> Keystone domain name. In Keystone, usernames are domain-specific. Only a single domain is supported.
<4> The URL to use to connect to the Keystone server (required).
<5> Optional: Certificate bundle to use to validate server certificates for the configured URL.
<6> Optional: Client certificate to present when making requests to the configured URL.
<7> Key for the client certificate. Required if `certFile` is specified.
====

include::install_config/authentication/configuring_authentication_allow_all.adoc[tag=restart-after-config-master] 


