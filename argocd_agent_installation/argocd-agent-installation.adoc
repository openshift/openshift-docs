:_mod-docs-content-type: ASSEMBLY
include::_attributes/common-attributes.adoc[]
[id="argocd-agent-installation"]
= Installing Argo CD Agent

:context: argocd-agent-installation

toc::[]

[role="_abstract"]
The Argo CD Agent consists of two components, *Principal* and *Agent* that work together to synchronize applications between the control plane and workload clusters in a hub-and-spoke configuration. Install the Principal component by using Argo CD resources and the Agent component by using Helm charts to complete the Argo CD Agent setup.

For more information, see the Additional Resources section, which includes an architectural overview of the _Argo CD Agent architecture_.

[id="prerequisites_{context}"]
== Prerequisites

* You have installed the {gitops-title} Operator on two {OCP} clusters.
* You have installed the OpenShift CLI (`oc`).
* You have installed a `cluster-scoped Argo CD` instance on the hub cluster.
* You have configured `Apps in any namespace` feature on the hub cluster.
* You have installed `argocd-agentctl` CLI tool.
* You have installed `helm` CLI for your Agent setup. Ensure that the `helm` CLI version is greater than v3.8.0.
* You have read the key Argo CD terms required to understand the Principal and Agent components in the _Argo CD Terminologies_ section.

// Argo CD Agent Terminologies
include::modules/gitops-argocd-agent-terminologies.adoc[leveloffset=+1]

// Installing the Principal component
include::modules/gitops-argocd-agent-install-principal-component.adoc[leveloffset=+1]

// Setting up a spoke cluster environment
include::modules/gitops-setting-up-a-spoke-cluster-environment.adoc[leveloffset=+1]

// Installing the Argo CD Agent in managed mode by using a Helm chart
include::modules/gitops-installing-argocd-agent-in-managed-mode-by-using-helm-chart.adoc[leveloffset=+1]

// Installing the Argo CD Agent in autonomous mode by using a Helm chart
include::modules/gitops-installing-argocd-agent-in-autonomous-mode-by-using-helm-chart.adoc[leveloffset=+1]

// Verifying the Argo CD Agent installation in Managed Mode or Autonomous Mode
include::modules/gitops-verifying-argocd-agent-installation-in-managed-or-autonomous-mode.adoc[leveloffset=+1]

// Deploying Argo CD applications
include::modules/gitops-deploying-argocd-applications.adoc[leveloffset=+1]

// Deploying an Argo CD application in managed mode
include::modules/gitops-deploy-argocd-application-in-managed-mode.adoc[leveloffset=+2]

// Deploying an Argo CD application in autonomous mode
include::modules/gitops-deploy-argocd-application-in-autonomous-mode.adoc[leveloffset=+2]

// Troubleshooting Principal-Agent communication and deployment issues
include::modules/gitops-troubleshooting-argocd-principal-agent.adoc[leveloffset=+1]

[role="_additional-resources"]
[id="additional-resources_{context}"]
== Additional resources

* xref:../argo_cd_agent_architecture/argocd-agent-architecture-overview.adoc[Argo CD Agent architecture overview]

* xref:../argocd_applications/managing-apps-in-non-control-plane-namespaces.adoc[Apps in any namespaces]

* xref:../declarative_clusterconfig/configuring-an-openshift-cluster-by-deploying-an-application-with-cluster-configurations.adoc#using-argo-cd-instance-to-manage-cluster-scoped-resources_configuring-an-openshift-cluster-by-deploying-an-application-with-cluster-configurations[cluster-scoped Argo CD instance]

* link:https://developers.redhat.com/content-gateway/rest/browse/pub/cgw/openshift-gitops[argocd-agentctl CLI tool][argocd-agentctl CLI tool (Argo CD Agent upstream GitHub)]

* link:https://helm.sh/docs/intro/install/[Helm CLI, (Argo CD Agent upstream documentation)]

* link:https://argocd-agent.readthedocs.io/latest/configuration/principal/configuration/[Principal Component Configuration section, (Argo CD Agent upstream documentation)]

* link:https://argocd-agent.readthedocs.io/latest/configuration/agent/configuration/[Agent Component Configuration section, (Argo CD Agent upstream documentation)]

* link:https://argocd-agent.readthedocs.io/latest/user-guide/appprojects/[Creating AppProjects for Agents, (Argo CD Agent upstream documentation)]