:_mod-docs-content-type: ASSEMBLY
include::_attributes/common-attributes.adoc[]
[id="managing-secrets-securely-using-sscsid-with-gitops"]
= Managing secrets securely using Secrets Store CSI driver with {gitops-shortname}
:context: managing-secrets-securely-using-sscsid-with-gitops

toc::[]

This guide walks you through the process of integrating the Secrets Store Container Storage Interface (SSCSI) driver with the {gitops-shortname} Operator in {OCP} 4.14 and later.

// Overview of managing secrets using Secrets Store CSI driver with GitOps
include::modules/gitops-managing-secrets-using-sscsid-with-gitops-overview.adoc[leveloffset=+1]

The process of integrating the {OCP} SSCSI driver with the {gitops-shortname} Operator consists of the following procedures:

. xref:../securing_openshift_gitops/managing-secrets-securely-using-sscsid-with-gitops.adoc#gitops-storing-aws-secret-manager-resources-in-gitops-repository_managing-secrets-securely-using-sscsid-with-gitops[Storing AWS Secrets Manager resources in {gitops-shortname} repository]
. xref:../securing_openshift_gitops/managing-secrets-securely-using-sscsid-with-gitops.adoc#gitops-configuring-sscsi-driver-to-mount-secrets-from-aws-secrets-manager_managing-secrets-securely-using-sscsid-with-gitops[Configuring SSCSI driver to mount secrets from AWS Secrets Manager]
. xref:../securing_openshift_gitops/managing-secrets-securely-using-sscsid-with-gitops.adoc#gitops-configuring-gitops-managed-resources-to-use-mounted-secrets_managing-secrets-securely-using-sscsid-with-gitops[Configuring {gitops-shortname} managed resources to use mounted secrets]

// Benefits of managing secrets using Secrets Store CSI driver with {gitops-shortname}
include::modules/gitops-benefits-of-managing-secrets-using-sscsid-with-gitops-overview.adoc[leveloffset=+2]

// Secrets store providers
include::modules/gitops-secrets-store-providers.adoc[leveloffset=+2]

[id="prerequisites_{context}"]
== Prerequisites
* You have access to the cluster with `cluster-admin` privileges.
* You have access to the {OCP} web console.
* You have extracted and prepared the `ccoctl` binary.
* You have installed the `jq` CLI tool.
* Your cluster is installed on AWS and uses AWS Security Token Service (STS).
* You have configured AWS Secrets Manager to store the required secrets.
* link:https://docs.openshift.com/container-platform/latest/nodes/pods/nodes-pods-secrets-store.html#persistent-storage-csi-secrets-store-driver-install_nodes-pods-secrets-store[SSCSI Driver Operator is installed on your cluster].
* {gitops-title} Operator is installed on your cluster.
* You have a {gitops-shortname} repository ready to use the secrets.
* You are logged in to the Argo CD instance by using the Argo CD admin account.

// Storing AWS Secrets Manager resources in GitOps repository
include::modules/gitops-storing-aws-secret-manager-resources-in-gitops-repository.adoc[leveloffset=+1]

// Configuring SSCSI driver to mount secrets from AWS Secrets Manager
include::modules/gitops-configuring-sscsi-driver-to-mount-secrets-from-aws-secrets-manager.adoc[leveloffset=+1]

// Configuring GitOps managed resources to use mounted secrets
include::modules/gitops-configuring-gitops-managed-resources-to-use-mounted-secrets.adoc[leveloffset=+1]

[role="_additional-resources"]
[id="additional-resources_{context}"]
== Additional resources

* link:https://github.com/redhat-developer/gitops-operator/blob/bfdf81944ea60b1d62d7de7c223c3bea3e7363a6/docs/Integrate%20GitOps%20with%20Secrets%20Management.md#obtain-the-ccoctl-tool[Obtaining the `ccoctl` tool]
* link:https://docs.openshift.com/container-platform/latest/authentication/managing_cloud_provider_credentials/about-cloud-credential-operator.html[About the Cloud Credential Operator]
* link:https://docs.openshift.com/container-platform/latest/authentication/managing_cloud_provider_credentials/about-cloud-credential-operator.html#cco-determine-mode_about-cloud-credential-operator[Determining the Cloud Credential Operator mode]
* link:https://github.com/redhat-developer/gitops-operator/blob/bfdf81944ea60b1d62d7de7c223c3bea3e7363a6/docs/Integrate%20GitOps%20with%20Secrets%20Management.md#configure-your-aws-cluster-to-use-aws-security-token-service-sts[Configure your AWS cluster to use AWS STS]
* link:https://docs.aws.amazon.com/secretsmanager/latest/userguide/create_secret.html[Configuring AWS Secrets Manager to store the required secrets]
* link:https://docs.openshift.com/container-platform/latest/nodes/pods/nodes-pods-secrets-store.html#persistent-storage-csi-secrets-store-driver-overview_nodes-pods-secrets-store[About the Secrets Store CSI Driver Operator]
* link:https://docs.openshift.com/container-platform/latest/nodes/pods/nodes-pods-secrets-store.html#mounting-secrets-external-secrets-store[Mounting secrets from an external secrets store to a CSI volume]