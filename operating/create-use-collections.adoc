:_mod-docs-content-type: ASSEMBLY
[id="create-use-collections"]
= Creating and using deployment collections
include::modules/common-attributes.adoc[]
:context: create-use-collections

toc::[]

[role="_abstract"]

You can use collections in {product-title-short} to define and name a group of resources by using matching patterns. You can then configure system processes to use these collections.

Currently, collections are available only under the following conditions:

* Collections are available only for deployments.
* You can only use collections with vulnerability reporting. See "Vulnerability reporting" in the Additional resources section for more information.
* Deployment collections are only available to {product-title-short} customers if they are using the PostgreSQL database.
+
[NOTE]
====
By default, {product-title-managed-short} uses the PostgreSQL database, and it is also used by default when installing {product-title-short} release 4.0 and later. {product-title-short} customers using an earlier release than 3.74 can migrate to the PostgreSQL database with help from Red{nbsp}Hat.
====

[id="prerequisites_collections"]
== Prerequisites

A user account must have the following permissions to use the Collections feature:

* `WorkflowAdministration`: You must have *Read* access to view collections and *Write* access to add, change, or delete collections.
* `Deployment`: You need *Read Access* or *Read and Write Access* to understand how configured rules will match with deployments.

These permissions are included in the `Admin` system role. For more information about roles and permissions, see "Managing RBAC in {product-title-short}" in "Additional resources".

include::modules/object-collections.adoc[leveloffset=+1]

include::modules/access-object-collections.adoc[leveloffset=+1]

include::modules/create-object-collections.adoc[leveloffset=+1]

include::modules/create-collection-rules.adoc[leveloffset=+2]

include::modules/adding-attached-collections.adoc[leveloffset=+2]

include::modules/migrate-scope-collections.adoc[leveloffset=+1]

[id="API_support_collections"]
== Managing collections by using the API

You can configure collections by using the `CollectionService` API object. For example, you can use `CollectionService_DryRunCollection` to return a list of results equivalent to the live preview panel in the {product-title-short} portal. For more information, go to *Help* -> *API reference* in the {product-title-short} portal.

[role="_additional-resources"]
.Additional resources

* xref:../operating/manage-user-access/manage-role-based-access-control-3630.adoc#manage-role-based-access-control[Managing RBAC in {product-title-short}]
* xref:../operating/manage-vulnerabilities/vulnerability-reporting.adoc#vulnerability-reporting[Vulnerability reporting]
//The RH CloudForms docs use this site as a reference. Other suggestions welcome. Most of the Red{nbsp}Hat sites have a lot of info about using regex with grep, etc. that doesn't apply here.
* Using regular expression: link:https://www.regular-expressions.info/[Regular-Expressions.info]
