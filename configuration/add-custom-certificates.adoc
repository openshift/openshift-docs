[id="add-custom-cert"]
= Adding custom certificates
include::modules/common-attributes.adoc[]
:context: add-custom-cert

toc::[]

[role="_abstract"]
Learn how to use a custom TLS certificate with {product-title}. After you set up a certificate, users and API clients do not have to bypass the certificate security warnings when connecting to Central.


[id="add-custom-security-cert"]
== Adding a custom security certificate
You can apply a security certificate during the installation or on an existing {product-title} deployment.

//Prerequisites
include::modules/custom-cert-prerequisites.adoc[leveloffset=+2]

//During a new installation
[id="custom-cert-new-install"]
= Adding a custom certificate during a new installation

Depending on your installation method, you can add a custom certificate during the installation.

//Helm
include::modules/custom-cert-new-install-helm.adoc[leveloffset=+3]

//roxctl-cli
include::modules/custom-cert-new-install-roxctl.adoc[leveloffset=+3]

//Operator
include::modules/custom-cert-new-install-operator.adoc[leveloffset=+3]

[role="_additional-resources"]
.Additional resources
* xref:../installing/install-ocp-operator.adoc#central-configuration-options-operator_install-ocp-operator[Central configuration options]

//On an existing installation
include::modules/custom-cert-existing.adoc[leveloffset=+2]

//Updating certificates on an existing installation
include::modules/update-custom-certificate-central.adoc[leveloffset=+2]

//Restart Central
include::modules/restart-central-container.adoc[leveloffset=+3]

[id="configure-sensor-to-trust-cert"]
== Configuring Sensor to trust custom certificates
If you are using a custom certificate that is not trusted globally, you must configure the Sensor to trust your custom certificate.
Otherwise, you might get errors.
The specific type of error may vary based on your setup and the certificate you use.
Usually, it is an `x509 validation` related error.

[NOTE]
====
You do not need to configure the Sensor to trust your custom certificate if you are using a globally trusted certificate.
====
//Downloading the Sensor bundle
include::modules/download-sensor-bundle.adoc[leveloffset=+2]

//When deploying a new Sensor
include::modules/trust-cert-new-sensor.adoc[leveloffset=+2]

//On an existing Sensor
include::modules/trust-cert-existing-sensor.adoc[leveloffset=+2]

If you added the certificates to an existing sensor, you must restart the Sensor container.

//Restart Sensor
include::modules/restart-sensor-container.adoc[leveloffset=+3]
