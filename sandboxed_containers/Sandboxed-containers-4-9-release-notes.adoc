[id="Sandboxed-containers-4-9-release-notes"]
= {sandboxed-containers-first} {product-version} release notes
include::modules/common-attributes.adoc[]
:context: Sandboxed containers release-notes

toc::[]

These release notes track the development of {sandboxed-containers-first} in Red Hat {product-title}.

This product is currently in Technology Preview. {sandboxed-containers-first} is not intended for production use. Note the following scope of support on the Red Hat Customer Portal for features in Technology Preview:

link:https://access.redhat.com/support/offerings/techpreview[Technology Preview Features Support Scope]

In the table below, features are marked with the following statuses:

* *TP*: _Technology Preview_
* *GA*: _General Availability_
* *-*: _Not Available_
* *DEP*: _Deprecated_

.Technology Preview tracker
[cols="4,1,1,1",options="header"]
|====
|Feature |OCP 4.7 |OCP 4.8 |OCP 4.9

|OpenShift sandboxed containers
|-
|TP
|TP

|====

[id="ocp-4-9-about-this-release"]
== About this release

// Figure out what to put here

[id="Sanboxed-containers-4-9-new-features-and-enhancements"]
== New features and enhancements

FIPS mode is now automatically enabled for {sandboxed-containers-first}. {sandboxed-containers-first} deployed on an {product-title} cluster installed in FIPS mode will not taint the cluster's FIPS support. For more information, see

The {sandboxed-containers-operator} now includes a must-gather image, allowing you to collect custom resources and log files specific to this operator and the underlying runtime components for diagnostic purposes. For more information, see

You can now install the Sandboxed container operator in a disconnected environment. For more information, see

[id="ocp-4-9-bug-fixes"]
== Bug fixes

//Get list from Vadim

//examples:
//==== Cloud Compute

//* Previously, when a root volume was created for a new server, and that server was not successfully created, the automatic deletion for the volume was not triggered because there was no deletion of a server associated with the volume. In some situations, this led to the creation of many extra volumes, and caused errors if the volume quota was reached. With this release, newly created root volumes are deleted when server creation call fails.
//(link:https://bugzilla.redhat.com/show_bug.cgi?id=1943378[*BZ#1943378*])

//* Previously, when using the default value for `instanceType`, the Machine API created `m4.large` instances on AWS. This is different than the `m5.large` instance type for machines that are created by the {product-title} installer. With this release, the Machine API creates `m5.large` instances for new machines on AWS when the default value is specified.
//(link:https://bugzilla.redhat.com/show_bug.cgi?id=1953063[*BZ#1953063*])

[id="ocp-4-9-known-issues"]
== Known issues

// TODO: This known issue should carry forward to 4.8 and beyond! This needs some SME/QE review before being updated for 4.9.
* In {product-title} 4.1, anonymous users could access discovery endpoints. Later releases revoked this access to reduce the possible attack surface for security exploits because some discovery endpoints are forwarded to aggregated API servers. However, unauthenticated access is preserved in upgraded clusters so that existing use cases are not broken.
+
If you are a cluster administrator for a cluster that has been upgraded from {product-title} 4.1 to 4.8, you can either revoke or continue to allow unauthenticated access. It is recommended to revoke unauthenticated access unless there is a specific need for it. If you do continue to allow unauthenticated access, be aware of the increased risks.
+
[WARNING]
====
If you have applications that rely on unauthenticated access, they might receive HTTP `403` errors if you revoke unauthenticated access.
====
+
Use the following script to revoke unauthenticated access to discovery endpoints:
+
[source,bash]
----
## Snippet to remove unauthenticated group from all the cluster role bindings
$ for clusterrolebinding in cluster-status-binding discovery system:basic-user system:discovery system:openshift:discovery ;
do
### Find the index of unauthenticated group in list of subjects
index=$(oc get clusterrolebinding ${clusterrolebinding} -o json | jq 'select(.subjects!=null) | .subjects | map(.name=="system:unauthenticated") | index(true)');
### Remove the element at index from subjects array
oc patch clusterrolebinding ${clusterrolebinding} --type=json --patch "[{'op': 'remove','path': '/subjects/$index'}]";
done
----
+
This script removes unauthenticated subjects from the following cluster role bindings:
+
--
** `cluster-status-binding`
** `discovery`
** `system:basic-user`
** `system:discovery`
** `system:openshift:discovery`
--
+
(link:https://bugzilla.redhat.com/show_bug.cgi?id=1821771[*BZ#1821771*])

// TODO: This known issue should carry forward to 4.9 and beyond!
* The `oc annotate` command does not work for LDAP group names that contain an equal sign (`=`), because the command uses the equal sign as a delimiter between the annotation name and value. As a workaround, use `oc patch` or `oc edit` to add the annotation. (link:https://bugzilla.redhat.com/show_bug.cgi?id=1917280[*BZ#1917280*])

[id="ocp-4-9-asynchronous-errata-updates"]
== Asynchronous errata updates

Security, bug fix, and enhancement updates for {product-title} 4.9 are released as asynchronous errata through the Red Hat Network. All {product-title} 4.9 errata is https://access.redhat.com/downloads/content/290/[available on the Red Hat Customer Portal]. See the https://access.redhat.com/support/policy/updates/openshift[{product-title} Life Cycle] for more information about asynchronous errata.

Red Hat Customer Portal users can enable errata notifications in the account settings for Red Hat Subscription Management (RHSM). When errata notifications are enabled, users are notified via email whenever new errata relevant to their registered systems are released.

[NOTE]
====
Red Hat Customer Portal user accounts must have systems registered and consuming {product-title} entitlements for {product-title} errata notification emails to generate.
====

This section will continue to be updated over time to provide notes on enhancements and bug fixes for future asynchronous errata releases of {product-title} 4.9. Versioned asynchronous releases, for example with the form {product-title} 4.9.z, will be detailed in subsections. In addition, releases in which the errata text cannot fit in the space provided by the advisory will be detailed in subsections that follow.

[IMPORTANT]
====
For any {product-title} release, always review the instructions on xref:../updating/updating-cluster.adoc#updating-cluster[updating your cluster] properly.
====

[id="ocp-4-9-0-ga"]
=== #RHSA-2021:TBD1# - {product-title} #4.9.0# image release, bug fix, and security update advisory

Issued: #2021-10-18#

{product-title} release #4.9.0#, which includes security updates, is now available. The list of bug fixes that are included in the update is documented in the #link:https://access.redhat.com/errata/RHSA-2021:TBD1[RHSA-2021:TBD1]# advisory. The RPM packages that are included in the update are provided by the #link:https://access.redhat.com/errata/RHSA-2021:TBD2[RHSA-2021:TBD2]# advisory.

Space precluded documenting all of the container images for this release in the advisory. See the following article for notes on the container images in this release:

#link:https://access.redhat.com/solutions/TBD3[{product-title} 4.9.0 container image list]#
