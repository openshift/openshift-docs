:_mod-docs-content-type: ASSEMBLY
include::_attributes/common-attributes.adoc[]
[id="osc-installation"]
= Installing {osc-short-lower}
:context: osc-installation

toc::[]

You can install the {osc-short-lower} Operator by using the {product-title} web console.

:FeatureName: {osc-full-upper}
include::snippets/technology-preview.adoc[]

[id="prerequisites_osc-installation"]
== Prerequisites

* You have cluster administrator permissions on a {product-title} cluster.
* You have access to the {product-title} web console.
* You have installed the {clo}.
* You have installed the {loki-op}, and have created a `LokiStack` custom resource (CR).
* You have created a `ClusterLogging` CR that configures LokiStack as the log store.

[id="osc-installation-procedure"]
== Procedure
// placeholder procedure - may change by tech preview

. Install the link:https://sdk.operatorframework.io/docs/installation/[`operator-sdk` command].
. Create a namespace for {osc-short-lower} by running the following command:
+
[source,terminal]
----
$ oc create namespace korrel8r
----

. Install the Korrel8r Operator by running the following command:
+
[source,terminal]
----
$ operator-sdk -n korrel8r run bundle quay.io/korrel8r/operator-bundle:latest
----
+
.Example output
[source,terminal]
----
INFO[0015] Creating a File-Based Catalog of the bundle "quay.io/korrel8r/operator-bundle:latest"
INFO[0016] Generated a valid File-Based Catalog
INFO[0024] Created registry pod: quay-io-korrel8r-operator-bundle-latest
INFO[0024] Created CatalogSource: korrel8r-catalog
INFO[0024] OperatorGroup "operator-sdk-og" created
INFO[0024] Created Subscription: korrel8r-v0-0-7-sub
INFO[0040] Approved InstallPlan install-bblsw for the Subscription: korrel8r-v0-0-7-sub
INFO[0040] Waiting for ClusterServiceVersion "default/korrel8r.v0.0.7" to reach 'Succeeded' phase
INFO[0040]   Waiting for ClusterServiceVersion "default/korrel8r.v0.0.7" to appear
INFO[0042]   Found ClusterServiceVersion "default/korrel8r.v0.0.7" phase: Pending
INFO[0043]   Found ClusterServiceVersion "default/korrel8r.v0.0.7" phase: Installing
INFO[0064]   Found ClusterServiceVersion "default/korrel8r.v0.0.7" phase: Succeeded
INFO[0064] OLM has successfully installed "korrel8r.v0.0.7"
----

. In the *Administrator* perspective of the web console, navigate to *Operators* -> *Installed Operators*.
. In the *Provided APIs* column, click *Korrel8r*.
. In the *Korrel8RS* page, click *Create Korrel8r*.
. Use the default configuration and click *Create*.
. To enable the preview features in the Console plugin, annotate the `ClusterLogging` CR by running the following command:
+
[source,terminal]
----
$ oc patch -n openshift-logging --type merge --patch \
'{"metadata":{"annotations":{"logging.openshift.io/preview-korrel8r-console":"enabled"}}}' \
clusterlogging/instance
----

[id="osc-installation-removing"]
== Removing Korrel8r

* Delete the Operator and custom resource definitions (CRDs) by running the following command:
+
[source,terminal]
----
$ operator-sdk cleanup -n korrel8r korrel8r
----
+
.Example output
[source,terminal]
----
INFO[0001] subscription "korrel8r-v0-0-7-sub" deleted
INFO[0001] customresourcedefinition "korrel8rs.korrel8r.openshift.io" deleted
INFO[0001] clusterserviceversion "korrel8r.v0.0.7" deleted
INFO[0001] catalogsource "korrel8r-catalog" deleted
INFO[0001] operatorgroup "operator-sdk-og" deleted
INFO[0001] Operator "korrel8r" uninstalled
----
