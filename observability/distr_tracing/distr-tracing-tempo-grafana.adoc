:_mod-docs-content-type: ASSEMBLY
include::_attributes/common-attributes.adoc[]
[id="distr-tracing-tempo-grafana"]
= Intgegration of  {DTShortName} with Grafana.
:context: distr-tracing-tempo-grafana


== Grafana DataSource Integration

When the gateway is enabled, it leverages OpenShift's authentication and authorization mechanisms, allowing users to query different tenants. This prevents direct configuration of the datasource to communicate with Tempo, necessitating a method to authenticate against the gateway. There are two available options to achieve this.

=== Use Grafana with OpenShift based authentication

We can configure grafana to use OpenShift authentication instead of the native one, in this way grafana will be able to forward the Oauth token to the tempo gateway if we configure the datasource as a proxy.
In order to make this configuration possible we need to deploy Grafana with the oauth-proxy sidecar.
Here is a manifest example with this configuration:Grafana can be configured to use OpenShift authentication instead of its native authentication. This allows Grafana to forward the OAuth token to the Tempo Gateway when the data source is configured as a proxy.
To enable this configuration, Grafana must be deployed with the oauth-proxy sidecar. 

A manifest with an example of how to deploy Grafana with the sidecar can be found [here](https://raw.githubusercontent.com/os-observability/redhat-rhosdt-samples/972a6ad6f70a8ebebd22d9c02bbd8841aa1ace6b/tempo/grafana.yaml)



=== Using Static Service Token

If direct integration between Grafana and OpenShift authentication prove unfeasible due to architectural constraints, such as the use of an external Grafana instance or other operational limitations, an alternative authentication mechanism exists.

This method involves leveraging a ServiceAccount token, configured with an extended lifespan, to facilitate authentication with the gateway. While effective, it introduces a key consideration: all users authenticated through this mechanism within Grafana will inherently share the same access privileges. This shared access model consequently limits the granularity of access control, preventing the implementation of highly detailed, user-specific permissions. Therefore, organizations requiring robust, fine-grained access management may find this approach less suitable.


