:_mod-docs-content-type: ASSEMBLY
[id="upgrade-helm"]
= Upgrading using Helm charts
include::modules/common-attributes.adoc[]
:context: upgrade-helm

toc::[]

[role="_abstract"]
You must follow a specific upgrade path for {product-title-short} depending on the release of {product-title-short} that you are running. You must also back up your Central database before updating the Helm chart and peforming the upgrade.

[id="upgrading-from-374_{context}"]
== Upgrade sequence from {product-title-short} release 3.74 and earlier

When upgrading from earlier releases, follow this guidance:

* If the release for Central is earlier than 3.74, you must upgrade to the latest 3.74 patch before upgrading to a 4.x release. See the link:https://access.redhat.com/documentation/en-us/red_hat_advanced_cluster_security_for_kubernetes/3.74/html/upgrading/index[upgrade documentation for version 3.74] for information about upgrades from earlier versions to 3.74.
* To upgrade to release 4.5 or later from release 3.74, you must first upgrade to any latest patch of {product-title-short} version 4.0 through 4.4. Then you can upgrade to release 4.5 or later.

If you have installed {product-title-short} by using Helm charts, to upgrade to the latest version of {product-title-short} perform the following steps:

. Back up the Central database.
. Optionally, optimize Central's database and Persistent Volume Claims (PVC).
. Optionally, generate a `values-private.yaml` configuration file containing root certificates for the central-services Helm chart.
. Update the Helm chart.
. Run the `helm upgrade` command.

[IMPORTANT]
====
To ensure optimal functionality, use the same version for your secured-cluster-services Helm chart and central-services Helm chart.
====

include::modules/back-up-central-database.adoc[leveloffset=+1]

[role="_additional-resources"]
.Additional resources
* xref:../backup_and_restore/backing-up-acs.adoc#on-demand-backups-roxctl[On-demand backups by using the roxctl CLI]
* xref:../cli/installing-the-roxctl-cli.adoc#installing-the-roxctl-cli[Installing the roxctl CLI]

include::modules/helm-optimize-central-db-and-pvc.adoc[leveloffset=+1]

include::modules/helm-generate-root-certificates.adoc[leveloffset=+1]

include::modules/updating-helm-repository.adoc[leveloffset=+1]

[role="_additional-resources"]
== Additional resources
* xref:../installing/installing_ocp/install-central-ocp.adoc#install-using-helm-no-customizations-ocp[Installing Central using Helm charts]
* xref:../installing/installing_ocp/install-secured-cluster-ocp.adoc#installing-sc-helm[Installing {product-title-short} on secured clusters by using Helm charts]

include::modules/upgrade-helm-chart.adoc[leveloffset=+1]

include::modules/remove-central-attached-pv-overview.adoc[leveloffset=+1]

include::modules/remove-central-attached-pv-helm.adoc[leveloffset=+2]

include::modules/rollback-helm-upgrade.adoc[leveloffset=+1]
