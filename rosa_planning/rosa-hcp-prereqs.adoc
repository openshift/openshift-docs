:_mod-docs-content-type: ASSEMBLY
include::_attributes/attributes-openshift-dedicated.adoc[]
:context: rosa-hcp-prereqs
[id="rosa-hcp-prereqs"]
= Detailed requirements for deploying {hcp-title}

toc::[]

{product-title} (ROSA) provides a model that allows Red{nbsp}Hat to deploy clusters into a customerâ€™s existing Amazon Web Service (AWS) account.

Ensure that the following prerequisites are met before installing your cluster.

[id="rosa-hcp-customer-requirements_{context}"]
== Customer requirements for all {hcp-title} clusters

The following prerequisites must be complete before you deploy a {hcp-title} cluster.

include::modules/rosa-sts-aws-requirements-account.adoc[leveloffset=+2]
include::modules/rosa-sts-aws-requirements-support-req.adoc[leveloffset=+2]
include::modules/rosa-sts-aws-requirements-security-req.adoc[leveloffset=+2]

[role="_additional-resources"]
[id="additional-resources_hcp-aws-security-requirements_{context}"]
.Additional resources
//
// Commenting out until the ROSA/HCP migration is completed
//
//* xref:../rosa_planning/rosa-sts-aws-prereqs.adoc#rosa-hcp-firewall-prerequisites_rosa-hcp-prereqs[AWS firewall prerequisites]
//
* xref:../rosa_planning/rosa-hcp-prereqs.adoc#rosa-hcp-firewall-prerequisites_rosa-hcp-prereqs[AWS firewall prerequisites]

[id="rosa-hcp-ocm-requirements_{context}"]
== Requirements for using {cluster-manager}

The following configuration details are required only if you use {cluster-manager-url} to manage your clusters. If you use the CLI tools exclusively, then you can disregard these requirements.

include::modules/rosa-sts-aws-requirements-association-concept.adoc[leveloffset=+2]
include::modules/rosa-sts-aws-requirements-creating-association.adoc[leveloffset=+2]

[discrete]
[role="_additional-resources"]
[id="additional-resources_hcp-creating-association_{context}"]
== Additional resources
* See xref:../rosa_architecture/rosa-sts-about-iam-resources.adoc#rosa-sts-account-wide-roles-and-policies_rosa-sts-about-iam-resources[Account-wide IAM role and policy reference] for a list of IAM roles needed for cluster creation.

include::modules/rosa-sts-aws-requirements-creating-multi-association.adoc[leveloffset=+2]

include::modules/rosa-requirements-deploying-in-opt-in-regions.adoc[leveloffset=+1]
include::modules/rosa-setting-the-aws-security-token-version.adoc[leveloffset=+2]

[id="rosa-hcp-policy-iam_{context}"]
== Red{nbsp}Hat managed IAM references for AWS

Red{nbsp}Hat is not responsible for creating and managing Amazon Web Services (AWS) IAM policies, IAM users, or IAM roles. For information on creating these roles and policies, see the following sections on IAM roles.

* To use the `ocm` CLI, you must have an `ocm-role` and `user-role` resource. See xref:../rosa_planning/rosa-hcp-prepare-iam-roles-resources.adoc#rosa-hcp-prepare-iam-roles-resources[Required IAM roles and resources].

* If you have a single cluster, see xref:../rosa_architecture/rosa-sts-about-iam-resources.adoc#rosa-sts-account-wide-roles-and-policies_rosa-sts-about-iam-resources[Account-wide IAM role and policy reference].
* For each cluster, you must have the necessary operator roles. See xref:../rosa_architecture/rosa-sts-about-iam-resources.adoc#rosa-sts-operator-roles_rosa-sts-about-iam-resources[Cluster-specific Operator IAM role reference].

include::modules/rosa-aws-provisioned.adoc[leveloffset=+1]

[id="rosa-hcp-network-prereqs_{context}"]
== Networking prerequisites

include::modules/mos-network-prereqs-min-bandwidth.adoc[leveloffset=+2]

[id="aws-firewall-prerequisites_{context}"]
=== AWS firewall prerequisites

If you are using a firewall to control egress traffic from your {product-title}, you must configure your firewall to grant access to the certain domain and port combinations below. {product-title} requires this access to provide a fully managed OpenShift service.

include::modules/rosa-hcp-firewall-prerequisites.adoc[leveloffset=+2]

== Next steps
* xref:../rosa_planning/rosa-sts-required-aws-service-quotas.adoc#rosa-required-aws-service-quotas_rosa-sts-required-aws-service-quotas[Review the required AWS service quotas]

[role="_additional-resources"]
[id="additional-resources_hcp-aws-prerequisites_{context}"]
== Additional resources
* xref:../rosa_architecture/rosa_policy_service_definition/rosa-sre-access.adoc#rosa-sre-access[SRE and service account access]
* xref:../rosa_architecture/rosa_policy_service_definition/rosa-hcp-instance-types.adoc#rosa-hcp-instance-types[Instance types]