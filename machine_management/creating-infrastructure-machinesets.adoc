[id="creating-infrastructure-machinesets"]
= Creating infrastructure machines
include::modules/common-attributes.adoc[]
:context: creating-infrastructure-machinesets

toc::[]

You can create a machine set to host only infrastructure components. You create a custom machine config pool and apply a Kubernetes label to the machines so they are managed by that pool. These infrastructure nodes are not counted toward the total number of subscriptions that are required to run the environment.

[IMPORTANT]
====
Unlike earlier versions of {product-title}, you cannot move the infrastructure components to the master machines. To move the components, you must create a new machine set.
====

include::modules/infrastructure-components.adoc[leveloffset=+1]

[id="creating-infra-machines-with-label_{context}"]
== Creating machines to run infrastructure workloads

You cannot create infrastructure machines directly using a machine set; you must first provision the node as a compute machine, and then configure it to run infrastructure workloads.

include::modules/creating-infra-machines-from-compute.adoc[leveloffset=+2]
include::modules/creating-infra-machines.adoc[leveloffset=+2]

include::modules/converting-machine-api-infra-machines.adoc[leveloffset=+1]

See the xref:../machine_management/creating-infrastructure-machinesets.adoc#creating-infra-machines_creating-infrastructure-machinesets[Creating a machine config pool for infrastructure machines] section for more information on creating a custom machine config pool for your infra nodes.

[id="moving-resources-to-infrastructure-machinesets"]
== Moving resources to infrastructure machine sets

Some of the infrastructure resources are deployed in your cluster by default. You can move them to the infrastructure machine sets that you created.

include::modules/infrastructure-moving-router.adoc[leveloffset=+2]

include::modules/infrastructure-moving-registry.adoc[leveloffset=+2]

include::modules/infrastructure-moving-monitoring.adoc[leveloffset=+2]

.Additional resources

* See xref:../monitoring/configuring-the-monitoring-stack.adoc#moving-monitoring-components-to-different-nodes_configuring-the-monitoring-stack[the monitoring documentation] for the general instructions on moving {product-title} components.

include::modules/infrastructure-moving-logging.adoc[leveloffset=+2]
