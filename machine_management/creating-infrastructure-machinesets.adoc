:_mod-docs-content-type: ASSEMBLY
[id="creating-infrastructure-machinesets"]
= Creating infrastructure machine sets
include::_attributes/common-attributes.adoc[]
:context: creating-infrastructure-machinesets

toc::[]

[role="_abstract"]
You can use infrastructure machine sets to create machines that host only infrastructure components, such as the default router, the integrated container image registry, and the components for cluster metrics and monitoring. These infrastructure machines are not counted toward the total number of subscriptions that are required to run the environment.

In a production deployment, it is recommended that you deploy at least three machine sets to hold infrastructure components. {SMProductName} deploys Elasticsearch, which requires three instances to be installed on different nodes. Each of these nodes can be deployed to different availability zones for high availability. This configuration requires three different machine sets, one for each availability zone. In global Azure regions that do not have multiple availability zones, you can use availability sets to ensure high availability.

include::snippets/machine-user-provisioned-limitations.adoc[leveloffset=+1]

include::modules/infrastructure-components.adoc[leveloffset=+1]

include::modules/creating-infra-machine-sets-prod.adoc[leveloffset=+1]

include::modules/machineset-yaml-aws.adoc[leveloffset=+2]

include::modules/machineset-yaml-azure.adoc[leveloffset=+2]

[role="_additional-resources"]
.Additional resources
* xref:../machine_management/creating_machinesets/creating-machineset-azure.adoc#installation-azure-marketplace-subscribe_creating-machineset-azure[Using the Azure Marketplace offering]

include::modules/machineset-yaml-azure-stack-hub.adoc[leveloffset=+2]

include::modules/machineset-yaml-ibm-cloud.adoc[leveloffset=+2]

include::modules/machineset-yaml-gcp.adoc[leveloffset=+2]

include::modules/machineset-yaml-nutanix.adoc[leveloffset=+2]

include::modules/machineset-yaml-osp.adoc[leveloffset=+2]

include::modules/machineset-yaml-vsphere.adoc[leveloffset=+2]

include::modules/machineset-creating.adoc[leveloffset=+1]

include::modules/creating-an-infra-node.adoc[leveloffset=+1]

[role="_additional-resources"]
.Additional resources

* xref:../machine_management/creating-infrastructure-machinesets.adoc#moving-resources-to-infrastructure-machinesets_creating-infrastructure-machinesets[Moving resources to infrastructure machine sets]

include::modules/creating-infra-machines.adoc[leveloffset=+1]

[role="_additional-resources"]
.Additional resources

* xref:../architecture/control-plane.adoc#architecture-machine-config-pools_control-plane[Node configuration management with machine config pools]

include::modules/binding-infra-node-workloads-using-taints-tolerations.adoc[leveloffset=+1]

[role="_additional-resources"]
.Additional resources

* xref:../nodes/scheduling/nodes-scheduler-about.adoc#nodes-scheduler-about[Controlling pod placement using the scheduler]
* xref:../machine_management/creating-infrastructure-machinesets.adoc#moving-resources-to-infrastructure-machinesets_creating-infrastructure-machinesets[Moving resources to infrastructure machine sets]
* xref:../nodes/scheduling/nodes-scheduler-taints-tolerations.adoc#nodes-scheduler-taints-tolerations-about_nodes-scheduler-taints-tolerations[Understanding taints and tolerations]

include::modules/infra-machine-sets-moving.adoc[leveloffset=+1]

include::modules/infrastructure-moving-router.adoc[leveloffset=+2]

include::modules/infrastructure-moving-registry.adoc[leveloffset=+2]

include::modules/infrastructure-moving-monitoring.adoc[leveloffset=+2]

include::modules/nodes-pods-vertical-autoscaler-moving-vpa.adoc[leveloffset=+2]

include::modules/nodes-cluster-resource-override-move-infra.adoc[leveloffset=+2]

[role="_additional-resources"]
.Additional resources
* link:https://docs.redhat.com/en/documentation/monitoring_stack_for_red_hat_openshift/4.21/html/configuring_core_platform_monitoring/configuring-performance-and-scalability#moving-monitoring-components-to-different-nodes_configuring-performance-and-scalability[Moving monitoring components to different nodes]
