:_content-type: ASSEMBLY
[id="cpmso-using"]
= Managing control plane machines with the Control Plane Machine Set Operator
include::_attributes/common-attributes.adoc[]
:context: cpmso-using

toc::[]

The Control Plane Machine Set Operator automates several essential aspects of control plane management.

//Vertical resizing of the control plane
//include::modules/cpmso-feat-vertical-resize.adoc[leveloffset=+1]

//Updating the control plane configuration
include::modules/cpmso-feat-config-update.adoc[leveloffset=+1]

//Automatically updating the control plane configuration
include::modules/cpmso-feat-auto-update.adoc[leveloffset=+2]

//Testing changes to the control plane configuration
include::modules/cpmso-feat-test-changes.adoc[leveloffset=+2]

[id="cpmso-supported-features-aws_{context}"]
== Enabling Amazon Web Services features for control plane machines

You can enable Amazon Web Services (AWS) features on control plane machines by changing the configuration of your control plane machine set. When you save an update to the control plane machine set, the Control Plane Machine Set Operator updates the control plane machines according to your configured update strategy.

:context: cpmso-using-aws
//Restricting the API server to private (AWS control plane machine set version)
include::modules/private-clusters-setting-api-private.adoc[leveloffset=+2]
:context: cpmso-using

//Selecting a larger Amazon Web Services instance type for control plane machines
include::modules/cpms-changing-aws-instance-type.adoc[leveloffset=+2]

//Machine sets that enable the Amazon EC2 Instance Metadata Service
include::modules/machineset-imds-options.adoc[leveloffset=+2]

//Creating machines that use the Amazon EC2 Instance Metadata Service
include::modules/machineset-creating-imds-options.adoc[leveloffset=+3]

//Machine sets that deploy machines as Dedicated Instances
include::modules/machineset-dedicated-instances.adoc[leveloffset=+2]

//Creating Dedicated Instances by using machine sets
include::modules/machineset-creating-dedicated-instances.adoc[leveloffset=+3]

[id="cpmso-supported-features-azure_{context}"]
== Enabling Microsoft Azure features for control plane machines

You can enable Microsoft Azure features on control plane machines by changing the configuration of your control plane machine set. When you save an update to the control plane machine set, the Control Plane Machine Set Operator updates the control plane machines according to your configured update strategy.

:context: cpmso-using-azure
//Restricting the API server to private (Azure control plane machine set version)
include::modules/private-clusters-setting-api-private.adoc[leveloffset=+2]
:context: cpmso-using

//Selecting an Azure Marketplace image
include::modules/installation-azure-marketplace-subscribe.adoc[leveloffset=+2]

//Enabling Azure boot diagnostics
include::modules/machineset-azure-boot-diagnostics.adoc[leveloffset=+2]

//Machine sets that deploy machines on ultra disks as data disks
include::modules/machineset-azure-ultra-disk.adoc[leveloffset=+2]

[role="_additional-resources"]
.Additional resources
* link:https://docs.microsoft.com/en-us/azure/virtual-machines/disks-types#ultra-disks[Microsoft Azure ultra disks documentation]

//Creating machines on ultra disks by using machine sets
include::modules/machineset-creating-azure-ultra-disk.adoc[leveloffset=+3]

//Troubleshooting resources for machine sets that enable ultra disks
include::modules/machineset-troubleshooting-azure-ultra-disk.adoc[leveloffset=+3]

//Enabling customer-managed encryption keys for a machine set
include::modules/machineset-customer-managed-encryption-azure.adoc[leveloffset=+2]

// Accelerated Networking for Microsoft Azure VMs
include::modules/machineset-azure-accelerated-networking.adoc[leveloffset=+2]

//Not applicable for 4.12, possibly 4.13?
//[role="_additional-resources"]
//.Additional resources
//* xref:../../installing/installing_azure/installing-azure-customizations.adoc#machineset-azure-enabling-accelerated-networking-new-install_installing-azure-customizations[Enabling Accelerated Networking during installation]

// Enabling Accelerated Networking on an existing Microsoft Azure cluster
include::modules/machineset-azure-enabling-accelerated-networking-existing.adoc[leveloffset=+3]
