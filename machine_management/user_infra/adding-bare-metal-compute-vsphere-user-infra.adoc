:_mod-docs-content-type: ASSEMBLY
[id="adding-bare-metal-compute-vsphere-user-infra"]
= Adding bare-metal compute machines to a vSphere cluster
include::_attributes/common-attributes.adoc[]
:context: adding-bare-metal-compute-vsphere-user-infra

toc::[]

[role="_abstract"]
To support workloads requiring direct hardware access, extend your existing {vmw-first} cluster by adding bare-metal compute machines. This creates a hybrid architecture that combines a virtualized control plane with the performance of physical hardware.

This procedure supports clusters installed using installer-provisioned infrastructure, user-provisioned infrastructure, or the Assisted Installer.

:FeatureName: Bare-metal nodes on vSphere clusters
include::snippets/technology-preview.adoc[]

[IMPORTANT]
====
Bare-metal compute machines added to a {vmw-short} cluster are unmanaged by the Machine API. You cannot use compute machine sets or the cluster autoscaler to manage these compute machines. Lifecycle tasks such as provisioning and replacement must be performed manually.
====

== Prerequisites

* You have an existing {product-title} cluster installed on {vmw-short}.
* You have bare-metal hardware with network connectivity to the existing cluster's machine network.
* You have configured the network for the new bare-metal compute machines, including:
** DHCP: Persistent IP addresses and hostname reservations.
** DNS: Forward and reverse DNS resolution for the new hostnames.
* You have obtained the {op-system-first} ISO image that matches your cluster version. You can download this from the *Cluster Details* page on the {hybrid-console} or extract it from the cluster payload.

[WARNING]
====
To use this feature, you must explicitly disable the native {vmw-short} Container Storage Interface (CSI) driver for the entire cluster. This means existing {vmw-short} virtual machines will lose the ability to provision or attach {vmw-short} volumes. You must ensure that all workloads (virtual and physical) are migrated to an alternative storage solution before proceeding.
====

[role="_additional-resources"]
.Additional resources
* xref:../../migration_toolkit_for_containers/mtc-migrating-vms.adoc#mtc-migrating-vms[Migrating virtual machine storage]
* xref:../../storage/container_storage_interface/persistent-storage-csi-vsphere.adoc#persistent-storage-csi-vsphere-disable-storage-procedure_persistent-storage-csi-vsphere[Disabling and enabling storage on vSphere]

include::modules/bare-metal-vsphere-iso.adoc[leveloffset=+1]

include::modules/installation-approve-csrs.adoc[leveloffset=+1]