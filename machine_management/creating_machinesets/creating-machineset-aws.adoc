:_content-type: ASSEMBLY
[id="creating-machineset-aws"]

ifndef::openshift-rosa,openshift-dedicated[]
= Creating a compute machine set on AWS
include::_attributes/common-attributes.adoc[]
:context: creating-machineset-aws
endif::openshift-rosa,openshift-dedicated[]
ifdef::openshift-rosa,openshift-dedicated[]
= About compute machine sets on AWS
include::_attributes/common-attributes.adoc[]
:context: creating-machineset-aws
endif::openshift-rosa,openshift-dedicated[]


toc::[]

ifndef::openshift-rosa,openshift-dedicated[]
You can create a different compute machine set to serve a specific purpose in your {product-title} cluster on Amazon Web Services (AWS). For example, you might create infrastructure machine sets and related machines so that you can move supporting workloads to the new machines.

//[IMPORTANT] admonition for UPI
include::modules/machine-user-provisioned-limitations.adoc[leveloffset=+1]
endif::openshift-rosa,openshift-dedicated[]
ifdef::openshift-rosa,openshift-dedicated[]
Different compute machine sets serve a specific purpose in your {product-title} cluster on Amazon Web Services (AWS).
endif::openshift-rosa,openshift-dedicated[]

//Sample YAML for a compute machine set custom resource on AWS
include::modules/machineset-yaml-aws.adoc[leveloffset=+1]

// cannot create resource "machinesets"
ifndef::openshift-rosa,openshift-dedicated[]
//Creating a compute machine set
include::modules/machineset-creating.adoc[leveloffset=+1]
endif::openshift-rosa,openshift-dedicated[]

//cannot patch resource "machinesets"
ifndef::openshift-rosa,openshift-dedicated[]
//Machine sets that enable the Amazon EC2 Instance Metadata Service
include::modules/machineset-imds-options.adoc[leveloffset=+1]

//Creating machines that use the Amazon EC2 Instance Metadata Service
include::modules/machineset-creating-imds-options.adoc[leveloffset=+2]

//Machine sets that deploy machines as Dedicated Instances
include::modules/machineset-dedicated-instances.adoc[leveloffset=+1]

//Creating Dedicated Instances by using machine sets
include::modules/machineset-creating-dedicated-instances.adoc[leveloffset=+2]

//Machine sets that deploy machines as Spot Instances
include::modules/machineset-non-guaranteed-instance.adoc[leveloffset=+1]

//Creating Spot Instances by using compute machine sets
include::modules/machineset-creating-non-guaranteed-instances.adoc[leveloffset=+2]
endif::openshift-rosa,openshift-dedicated[]

// cannot get resource "machineconfigs"
ifndef::openshift-rosa,openshift-dedicated[]
//Adding a GPU node to a machine set (stesmith)
include::modules/nvidia-gpu-aws-adding-a-gpu-node.adoc[leveloffset=+1]
endif::openshift-rosa,openshift-dedicated[]

//  cannot create the required openshift-nfd namespaces
ifndef::openshift-rosa,openshift-dedicated[]
//Deploying the Node Feature Discovery Operator (stesmith)
include::modules/nvidia-gpu-aws-deploying-the-node-feature-discovery-operator.adoc[leveloffset=+1]
endif::openshift-rosa,openshift-dedicated[]
