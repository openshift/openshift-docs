[id="imagestreammapping-image-openshift-io-v1"]
= ImageStreamMapping [image.openshift.io/v1]
ifdef::product-title[]
include::modules/common-attributes.adoc[]
endif::[]

toc::[]


Description::
  ImageStreamMapping represents a mapping from a single image stream tag to a container image as well as the reference to the container image stream the image came from. This resource is used by privileged integrators to create an image resource and to associate it with an image stream in the status tags field. Creating an ImageStreamMapping will allow any user who can view the image stream to tag or pull that image, so only create mappings where the user has proven they have access to the image contents directly. The only operation supported for this resource is create and the metadata name and namespace should be set to the image stream containing the tag that should be updated.

Type::
  `object`

Required::
  - `image`
  - `tag`


== Specification

[cols="1,1,1",options="header"]
|===
| Property | Type | Description

| `.apiVersion`
| `string`
| APIVersion defines the versioned schema of this representation of an object. Servers should convert recognized schemas to the latest internal value, and may reject unrecognized values. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources

| `.image`
| `object`
| Image is an immutable representation of a container image and metadata at a point in time. Images are named by taking a hash of their contents (metadata and content) and any change in format, content, or metadata results in a new name. The images resource is primarily for use by cluster administrators and integrations like the cluster image registry - end users instead access images via the imagestreamtags or imagestreamimages resources. While image metadata is stored in the API, any integration that implements the container image registry API must provide its own storage for the raw manifest data, image config, and layer contents.

| `.kind`
| `string`
| Kind is a string value representing the REST resource this object represents. Servers may infer this from the endpoint the client submits requests to. Cannot be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds

| `.metadata`
| xref:../objects/index.adoc#objectmeta-meta-v1[`ObjectMeta meta/v1`]
| 

| `.tag`
| `string`
| Tag is a string value this image can be located with inside the stream.

|===
..image
Description::
  Image is an immutable representation of a container image and metadata at a point in time. Images are named by taking a hash of their contents (metadata and content) and any change in format, content, or metadata results in a new name. The images resource is primarily for use by cluster administrators and integrations like the cluster image registry - end users instead access images via the imagestreamtags or imagestreamimages resources. While image metadata is stored in the API, any integration that implements the container image registry API must provide its own storage for the raw manifest data, image config, and layer contents.

Type::
  `object`

Required::
  - `dockerImageLayers`



[cols="1,1,1",options="header"]
|===
| Property | Type | Description

| `apiVersion`
| `string`
| APIVersion defines the versioned schema of this representation of an object. Servers should convert recognized schemas to the latest internal value, and may reject unrecognized values. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources

| `dockerImageConfig`
| `string`
| DockerImageConfig is a JSON blob that the runtime uses to set up the container. This is a part of manifest schema v2.

| `dockerImageLayers`
| `array`
| DockerImageLayers represents the layers in the image. May not be set if the image does not define that data.

| `dockerImageLayers[]`
| `object`
| ImageLayer represents a single layer of the image. Some images may have multiple layers. Some may have none.

| `dockerImageManifest`
| `string`
| DockerImageManifest is the raw JSON of the manifest

| `dockerImageManifestMediaType`
| `string`
| DockerImageManifestMediaType specifies the mediaType of manifest. This is a part of manifest schema v2.

| `dockerImageMetadata`
| xref:../objects/index.adoc#rawextension-pkg-runtime[`RawExtension pkg/runtime`]
| DockerImageMetadata contains metadata about this image

| `dockerImageMetadataVersion`
| `string`
| DockerImageMetadataVersion conveys the version of the object, which if empty defaults to "1.0"

| `dockerImageReference`
| `string`
| DockerImageReference is the string that can be used to pull this image.

| `dockerImageSignatures`
| `array (string)`
| DockerImageSignatures provides the signatures as opaque blobs. This is a part of manifest schema v1.

| `kind`
| `string`
| Kind is a string value representing the REST resource this object represents. Servers may infer this from the endpoint the client submits requests to. Cannot be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds

| `metadata`
| xref:../objects/index.adoc#objectmeta-meta-v1[`ObjectMeta meta/v1`]
| 

| `signatures`
| `array`
| Signatures holds all signatures of the image.

| `signatures[]`
| `object`
| ImageSignature holds a signature of an image. It allows to verify image identity and possibly other claims as long as the signature is trusted. Based on this information it is possible to restrict runnable images to those matching cluster-wide policy. Mandatory fields should be parsed by clients doing image verification. The others are parsed from signature's content by the server. They serve just an informative purpose.

|===
..image.dockerImageLayers
Description::
  DockerImageLayers represents the layers in the image. May not be set if the image does not define that data.

Type::
  `array`




..image.dockerImageLayers[]
Description::
  ImageLayer represents a single layer of the image. Some images may have multiple layers. Some may have none.

Type::
  `object`

Required::
  - `name`
  - `size`
  - `mediaType`



[cols="1,1,1",options="header"]
|===
| Property | Type | Description

| `mediaType`
| `string`
| MediaType of the referenced object.

| `name`
| `string`
| Name of the layer as defined by the underlying store.

| `size`
| `integer`
| Size of the layer in bytes as defined by the underlying store.

|===
..image.signatures
Description::
  Signatures holds all signatures of the image.

Type::
  `array`




..image.signatures[]
Description::
  ImageSignature holds a signature of an image. It allows to verify image identity and possibly other claims as long as the signature is trusted. Based on this information it is possible to restrict runnable images to those matching cluster-wide policy. Mandatory fields should be parsed by clients doing image verification. The others are parsed from signature's content by the server. They serve just an informative purpose.

Type::
  `object`

Required::
  - `type`
  - `content`



[cols="1,1,1",options="header"]
|===
| Property | Type | Description

| `apiVersion`
| `string`
| APIVersion defines the versioned schema of this representation of an object. Servers should convert recognized schemas to the latest internal value, and may reject unrecognized values. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources

| `conditions`
| `array`
| Conditions represent the latest available observations of a signature's current state.

| `conditions[]`
| `object`
| SignatureCondition describes an image signature condition of particular kind at particular probe time.

| `content`
| `string`
| Required: An opaque binary string which is an image's signature.

| `created`
| xref:../objects/index.adoc#time-meta-v1[`Time meta/v1`]
| If specified, it is the time of signature's creation.

| `imageIdentity`
| `string`
| A human readable string representing image's identity. It could be a product name and version, or an image pull spec (e.g. "registry.access.redhat.com/rhel7/rhel:7.2").

| `issuedBy`
| `object`
| SignatureIssuer holds information about an issuer of signing certificate or key.

| `issuedTo`
| `object`
| SignatureSubject holds information about a person or entity who created the signature.

| `kind`
| `string`
| Kind is a string value representing the REST resource this object represents. Servers may infer this from the endpoint the client submits requests to. Cannot be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds

| `metadata`
| xref:../objects/index.adoc#objectmeta-meta-v1[`ObjectMeta meta/v1`]
| 

| `signedClaims`
| `object (string)`
| Contains claims from the signature.

| `type`
| `string`
| Required: Describes a type of stored blob.

|===
..image.signatures[].conditions
Description::
  Conditions represent the latest available observations of a signature's current state.

Type::
  `array`




..image.signatures[].conditions[]
Description::
  SignatureCondition describes an image signature condition of particular kind at particular probe time.

Type::
  `object`

Required::
  - `type`
  - `status`



[cols="1,1,1",options="header"]
|===
| Property | Type | Description

| `lastProbeTime`
| xref:../objects/index.adoc#time-meta-v1[`Time meta/v1`]
| Last time the condition was checked.

| `lastTransitionTime`
| xref:../objects/index.adoc#time-meta-v1[`Time meta/v1`]
| Last time the condition transit from one status to another.

| `message`
| `string`
| Human readable message indicating details about last transition.

| `reason`
| `string`
| (brief) reason for the condition's last transition.

| `status`
| `string`
| Status of the condition, one of True, False, Unknown.

| `type`
| `string`
| Type of signature condition, Complete or Failed.

|===
..image.signatures[].issuedBy
Description::
  SignatureIssuer holds information about an issuer of signing certificate or key.

Type::
  `object`




[cols="1,1,1",options="header"]
|===
| Property | Type | Description

| `commonName`
| `string`
| Common name (e.g. openshift-signing-service).

| `organization`
| `string`
| Organization name.

|===
..image.signatures[].issuedTo
Description::
  SignatureSubject holds information about a person or entity who created the signature.

Type::
  `object`

Required::
  - `publicKeyID`



[cols="1,1,1",options="header"]
|===
| Property | Type | Description

| `commonName`
| `string`
| Common name (e.g. openshift-signing-service).

| `organization`
| `string`
| Organization name.

| `publicKeyID`
| `string`
| If present, it is a human readable key id of public key belonging to the subject used to verify image signature. It should contain at least 64 lowest bits of public key's fingerprint (e.g. 0x685ebe62bf278440).

|===

== API endpoints

The following API endpoints are available:

* `/apis/image.openshift.io/v1/namespaces/{namespace}/imagestreammappings`
- `POST`: create an ImageStreamMapping


=== /apis/image.openshift.io/v1/namespaces/{namespace}/imagestreammappings

.Global path parameters
[cols="1,1,2",options="header"]
|===
| Parameter | Type | Description
| `namespace`
| `string`
| object name and auth scope, such as for teams and projects
|===

.Global guery parameters
[cols="1,1,2",options="header"]
|===
| Parameter | Type | Description
| `dryRun`
| `string`
| When present, indicates that modifications should not be persisted. An invalid or unrecognized dryRun directive will result in an error response and no further processing of the request. Valid values are: - All: all dry run stages will be processed
| `fieldManager`
| `string`
| fieldManager is a name associated with the actor or entity that is making these changes. The value must be less than or 128 characters long, and only contain printable characters, as defined by https://golang.org/pkg/unicode/#IsPrint.
| `pretty`
| `string`
| If &#x27;true&#x27;, then the output is pretty printed.
|===

HTTP method::
  `POST`

Description::
  create an ImageStreamMapping



.Body parameters
[cols="1,1,2",options="header"]
|===
| Parameter | Type | Description
| `body`
| xref:../image_apis/imagestreammapping-image-openshift-io-v1.adoc#imagestreammapping-image-openshift-io-v1[`ImageStreamMapping image.openshift.io/v1`]
| 
|===

.HTTP responses
[cols="1,1",options="header"]
|===
| HTTP code | Reponse body
| 200 - OK
| xref:../image_apis/imagestreammapping-image-openshift-io-v1.adoc#imagestreammapping-image-openshift-io-v1[`ImageStreamMapping image.openshift.io/v1`]
| 201 - Created
| xref:../image_apis/imagestreammapping-image-openshift-io-v1.adoc#imagestreammapping-image-openshift-io-v1[`ImageStreamMapping image.openshift.io/v1`]
| 202 - Accepted
| xref:../image_apis/imagestreammapping-image-openshift-io-v1.adoc#imagestreammapping-image-openshift-io-v1[`ImageStreamMapping image.openshift.io/v1`]
| 401 - Unauthorized
| Empty
|===


