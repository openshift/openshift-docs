:_mod-docs-content-type: ASSEMBLY
[id="getting-started-rhacs-cloud-ocp"]
= Getting started with RHACS Cloud Service
include::modules/common-attributes.adoc[]
:context: getting-started-rhacs-cloud-ocp

toc::[]

[role="_abstract"]

{rh-rhacscs-first} provides security services for your {osp} and Kubernetes clusters. See the link:https://access.redhat.com/articles/7045053[Red{nbsp}Hat Advanced Cluster Security for Kubernetes Support Matrix] for information about supported platforms for secured clusters.

.Prerequisites

* Ensure that you can access the *Advanced Cluster Security* menu option from the {cloud-console}.
+
[NOTE]
====
To access the {product-title-managed-short} console, you need your Red{nbsp}Hat Single Sign-On (SSO) credentials, or credentials for another identity provider if that has been configured. See xref:../cloud_service/getting-started-rhacs-cloud-ocp.adoc#default-access-acs-console[Default access to the ACS console].
====

[id="installation-overview-acs-cloud"]
== High-level overview of installation steps

The following sections provide an overview of installation steps and links to the relevant documentation.

[id="securing-rh-cloud-clusters"]
=== Securing {osp} clusters

You can secure {osp} clusters by using the {product-title-short} Operator, Helm charts, or the `roxctl` CLI.

[id="overview-installing-cloud-secured-clusters-osp-operator"]
==== Securing {osp} clusters by using the Operator

.Procedure

. Verify that the clusters you want to secure meet the xref:../cloud_service/acscs-default-requirements.adoc#acscs-default-requirements[default requirements].
. In the {cloud-console}, xref:../cloud_service/installing_cloud_ocp/cloud-create-instance-ocp.adoc#cloud-create-instance-ocp[create an *ACS Instance*].
. On each {osp} cluster you want to secure, xref:../cloud_service/installing_cloud_ocp/cloud-ocp-create-project.adoc#cloud-ocp-create-project[create a project named `stackrox`]. This project will contain the resources for {product-title-managed-short} secured clusters.
. Create the mechanism that the Central instance, also called Central, uses to set up communication with the secured clusters. You can either create an init bundle or a cluster registration secret (CRS). Perform one of these actions:
* In the ACS Console, xref:../cloud_service/installing_cloud_ocp/init-bundle-cloud-ocp-generate.adoc#init-bundle-cloud-ocp-generate[generate an init bundle]. The init bundle contains secrets that allow communication between {product-title-managed-short} secured clusters and Central.
* Log in to Central and use the `roxctl` CLI to xref:../cloud_service/installing_cloud_ocp/init-bundle-cloud-ocp-generate.adoc#roxctl-generate-init-bundle_init-bundle-cloud-ocp-generate[generate an init bundle].
* Log in to Central and use the `roxctl` CLI to xref:../cloud_service/installing_cloud_ocp/init-bundle-cloud-ocp-generate.adoc#crs-generate-roxctl_init-bundle-cloud-ocp-generate[generate a CRS].
. On each {osp} cluster, xref:../cloud_service/installing_cloud_ocp/init-bundle-cloud-ocp-apply#init-bundle-cloud-ocp-apply[apply the init bundle or CRS].
. On each {osp} cluster, xref:../cloud_service/installing_cloud_ocp/cloud-install-operator#cloud-install-operator[install the {product-title-short} Operator].
. On each {osp} cluster, xref:../cloud_service/installing_cloud_ocp/install-secured-cluster-cloud-ocp.adoc#installing-sc-operator-cloud-ocp[install secured cluster resources in the `stackrox` project] by using the Operator.
. xref:../cloud_service/installing_cloud_ocp/verify-installation-cloud-ocp.adoc#verify-installation-cloud-ocp[Verify installation] by ensuring that your secured clusters can communicate with the ACS instance.

[id="overview-installing-cloud-secured-clusters-osp-helm"]
==== Securing {osp} clusters by using Helm charts

.Procedure

. Verify that the clusters you want to secure meet the xref:../cloud_service/acscs-default-requirements.adoc#acscs-default-requirements[default requirements].
. In the {cloud-console}, xref:../cloud_service/installing_cloud_ocp/cloud-create-instance-ocp.adoc#cloud-create-instance-ocp[create an *ACS Instance*].
. On each {osp} cluster you want to secure, xref:../cloud_service/installing_cloud_ocp/cloud-ocp-create-project.adoc#cloud-ocp-create-project[create a project named `stackrox`]. This project will contain the resources for {product-title-managed-short} secured clusters.
. Create the mechanism that the Central instance, also called Central, uses to set up communication with the secured clusters. You can either generate an init bundle or a cluster registration secret (CRS). Perform only one of these actions:
* In the ACS Console, xref:../cloud_service/installing_cloud_ocp/init-bundle-cloud-ocp-generate.adoc#init-bundle-cloud-ocp-generate[generate an init bundle]. The init bundle contains secrets that allow communication between {product-title-managed-short} secured clusters and Central.
* Log in to Central and use the `roxctl` CLI to xref:../cloud_service/installing_cloud_ocp/init-bundle-cloud-ocp-generate.adoc#roxctl-generate-init-bundle_init-bundle-cloud-ocp-generate[generate an init bundle].
* Log in to Central and use the `roxctl` CLI to xref:../cloud_service/installing_cloud_ocp/init-bundle-cloud-ocp-generate.adoc#crs-generate-roxctl_init-bundle-cloud-ocp-generate[generate a CRS].
. On each {osp} cluster, run the `helm install` command to xref:../cloud_service/installing_cloud_ocp/install-secured-cluster-cloud-ocp.adoc#installing-sc-helm-cloud-ocp[install {product-title-short} by using Helm charts], specifying the path of the init bundle or CRS.
. xref:../cloud_service/installing_cloud_ocp/verify-installation-cloud-ocp.adoc#verify-installation-cloud-ocp[Verify installation] by ensuring that your secured clusters can communicate with the ACS instance.

[id="overview-installing-cloud-secured-clusters-osp-roxctl"]
==== Securing {osp} clusters by using the roxctl CLI, also called the manifest method

.Procedure

. Verify that the clusters you want to secure meet the xref:../cloud_service/acscs-default-requirements.adoc#acscs-default-requirements[default requirements].
. In the {cloud-console}, xref:../cloud_service/installing_cloud_ocp/cloud-create-instance-ocp.adoc#cloud-create-instance-ocp[create an *ACS Instance*].
. On each {osp} cluster you want to secure, xref:../cloud_service/installing_cloud_ocp/cloud-ocp-create-project.adoc#cloud-ocp-create-project[create a project named `stackrox`]. This project will contain the resources for {product-title-managed-short} secured clusters.
. Perform one of the following actions:
* In the ACS console, use the xref:../cloud_service/installing_cloud_ocp/install-secured-cluster-cloud-ocp.adoc#installing-manifest-web-portal_install-secured-cluster-cloud-ocp[legacy installation method] to create a cluster bundle.
* From a system that has access to the monitored cluster, xref:../cloud_service/installing_cloud_ocp/install-secured-cluster-cloud-ocp.adoc#manifest-roxctl_install-secured-cluster-cloud-ocp[generate the configuration and extract and run the sensor script from the cluster bundle].
. xref:../cloud_service/installing_cloud_ocp/verify-installation-cloud-ocp.adoc#verify-installation-cloud-ocp[Verify installation] by ensuring that your secured clusters can communicate with the ACS instance.

[id="securing-kubernetes-clusters"]
=== Securing Kubernetes clusters

You can secure Kubernetes clusters by using Helm charts or the `roxctl` CLI.

[id="overview-installing-cloud-secured-clusters-kube-helm"]
==== Securing Kubernetes clusters by using Helm charts

. Verify that the clusters you want to secure meet the xref:../cloud_service/acscs-default-requirements.adoc#acscs-default-requirements[default requirements].
. In the {cloud-console}, xref:../cloud_service/installing_cloud_other/cloud-create-instance-other.adoc#cloud-create-instance-other[create an *ACS Instance*].
. Create the mechanism that the Central instance, also called Central, uses to set up communication with the secured clusters. You can either create an init bundle or a cluster registration secret (CRS). Perform only one of these actions:
* In the ACS Console, xref:../cloud_service/installing_cloud_other/init-bundle-cloud-other-generate.adoc#portal-generate-init-bundle_init-bundle-cloud-other-generate[generate an init bundle]. The init bundle contains secrets that allow communication between {product-title-managed-short} secured clusters and Central.
* Log in to Central and xref:../cloud_service/installing_cloud_other/init-bundle-cloud-other-generate#roxctl-generate-init-bundle_init-bundle-cloud-other-generate[use the `roxctl` CLI to generate an init bundle].
* Log in to Central and use the `roxctl` CLI to xref:../cloud_service/installing_cloud_other/init-bundle-cloud-other-generate#crs-generate-roxctl_init-bundle-cloud-other-generate[generate a CRS].
. On each Kubernetes cluster, run the `helm install` command to xref:../cloud_service/installing_cloud_other/install-secured-cluster-cloud-other.adoc#install-secured-cluster-cloud-other[install by using Helm charts], specifying the path of the init bundle or CRS.
. xref:../cloud_service/installing_cloud_other/verify-installation-cloud-other.adoc#verify-installation-cloud-other[Verify installation] by ensuring that your secured clusters can communicate with the ACS instance.

[id="overview-installing-cloud-secured-clusters-kube-roxctl"]
==== Securing Kubernetes clusters by using the roxctl CLI, also called the manifest method

. Verify that the clusters you want to secure meet the xref:../cloud_service/acscs-default-requirements.adoc#acscs-default-requirements[default requirements].
. In the {cloud-console}, xref:../cloud_service/installing_cloud_other/cloud-create-instance-other.adoc#cloud-create-instance-other[create an *ACS Instance*].
. On each cluster you want to secure, create a namespace named `stackrox`. This namespace will contain the resources for {product-title-managed-short} secured clusters.
. Perform one of the following steps:
* In the ACS console, use the xref:../cloud_service/installing_cloud_other/install-secured-cluster-cloud-other.adoc#installing-manifest-web-portal_install-secured-cluster-cloud-other[legacy installation method] to create a cluster bundle.
* From a system that has access to the monitored cluster, xref:../cloud_service/installing_cloud_ocp/install-secured-cluster-cloud-ocp.adoc#manifest-roxctl_install-secured-cluster-cloud-ocp[generate the configuration and extract and run the sensor script from the cluster bundle].
. xref:../cloud_service/installing_cloud_ocp/verify-installation-cloud-ocp.adoc#verify-installation-cloud-ocp[Verify installation] by ensuring that your secured clusters can communicate with the ACS instance.


[id="default-access-acs-console"]
== Default access to the ACS Console

By default, the authentication mechanism available to users is authentication by using Red{nbsp}Hat Single Sign-On (SSO).
You cannot delete or change the Red{nbsp}Hat SSO authentication provider.
However, you can change the minimum access role and add additional rules, or add another identity provider.

[NOTE]
====
To learn how authentication providers work in ACS, see xref:../operating/manage-user-access/understanding-authentication-providers.adoc#understanding-authentication-providers[Understanding authentication providers].
====

A dedicated OIDC client of `sso.redhat.com` is created for each ACS Console. All OIDC clients share the same `sso.redhat.com` realm.
Claims from the token issued by `sso.redhat.com` are mapped to an ACS-issued token as follows:

* `realm_access.roles` to `groups`
* `org_id` to `rh_org_id`
* `is_org_admin` to `rh_is_org_admin`
* `sub` to `userid`

The built-in Red{nbsp}Hat SSO authentication provider has the required attribute `rh_org_id` set to the organization ID assigned to account of the user who created the {product-title-managed-short} instance.
This is the ID of the organizational account the user is a part of. This can be thought of as the "tenant" the user is under and owned by.
Only users with the same organizational account can access the ACS console by using the Red{nbsp}Hat SSO authentication provider.

[NOTE]
====
To gain more control over access to your ACS Console, configure another identity provider instead of relying on the Red{nbsp}Hat SSO authentication provider. For more information, see xref:../operating/manage-user-access/understanding-authentication-providers.adoc#authentication-provider-structure[Understanding authentication providers]. To configure the other authentication provider to be the first authentication option on the login page, its name should be lexicographically smaller than `Red{nbsp}Hat SSO`.
====

The minimum access role is set to `None`. Assigning a different value to this field gives access to the {product-title-managed-short} instance to all users with the same organizational account.

Other rules that are set up in the built-in Red{nbsp}Hat SSO authentication provider include the following:

* Rule mapping your `userid` to `Admin`
* Rules mapping administrators of the organization to `Admin`

You can add more rules to grant access to the ACS Console to someone else with the same organizational account. For example, you can use `email` as a key.
