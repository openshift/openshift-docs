[[dev-guide-templates-loading]]
= Loading Default Templates
{product-author}
{product-version}
:data-uri:
:icons:
:experimental:
:toc: macro
:toc-title:
:prewrap!:

toc::[]
{nbsp} +


The advanced installation method 
automatically creates a set of xref:../../dev_guide/templates/template_guide.adoc#dev-guide-templates-predef[predefined templates] 
in the `openshift` project, which is a default project to 
which all users have view access.

Use the `oc get templates` command to see if the templates have been loaded into your {product-title} project.

----
$ oc get template
NAME                    DESCRIPTION                                                                        PARAMETERS        OBJECTS
...
mariadb-ephemeral       MariaDB database service, without persistent storage. For more information ab...   7 (3 generated)   3
mariadb-persistent      MariaDB database service, with persistent storage. For more information about...   8 (3 generated)   4
mongodb-ephemeral       MongoDB database service, without persistent storage. For more information ab...   8 (3 generated)   3
mongodb-persistent      MongoDB database service, with persistent storage. For more information about...   9 (3 generated)   4
mysql-ephemeral         MySQL database service, without persistent storage. For more information abou...   8 (3 generated)   3
mysql-persistent        MySQL database service, with persistent storage. For more information about u...   9 (3 generated)   4
...
----

If the templates have not been loaded into your project, ask your administrator or follow the instructions below, if you have proper authority.

----
$ oc get templates
No resources found.
----


[[dev-guide-templates-loading-before]]
== Before You Begin

Before you consider performing the tasks in this topic, confirm if these image streams and templates are already 
registered in your {product-title} cluster by doing one of the following:

* Log into the web console and click Add to Project.

* List them for the openshift project using the CLI:
+
----
$ oc get templates -n openshift
----
+
Here, `openshift` is the default project.

If you used a method other than the advanced install, or if the default image streams and templates are ever removed or changed, 
you can follow this topic to create the default objects yourself. Otherwise, the following instructions are not necessary.

include::install_config/imagestreams_templates.adoc[tag=is-templates-before-you-begin]

[[dev-guide-templates-loading-prereqs]]
== Loading the Templates

If the default templates are not present in your {product-title} cluster, you can load them manually.

Before you can load the default templates:

- The
xref:../../install_config/registry/index.adoc#install-config-registry-overview[integrated Docker registry]
service must be deployed in your {product-title} installation.
- You must be able to run the `oc create` command with
xref:../../architecture/additional_concepts/authorization.adoc#roles[*cluster-admin* privileges],
because they operate on the default *openshift*
xref:../../architecture/core_concepts/projects_and_users.adoc#projects[project].
ifdef::openshift-origin[]
- You must have cloned the
https://github.com/openshift/openshift-ansible/tree/master/roles/openshift_examples/files[repository]
that contains the default image streams and templates:
+
----
$ cd ~
$ git clone https://github.com/openshift/openshift-ansible
----
endif::[]
ifdef::openshift-enterprise[]
- You must have installed the *atomic-openshift-utils* RPM package. See
xref:../../install_config/install/host_preparation.adoc#software-prerequisites[Software Prerequisites]
for instructions.
endif::[]
- Define shell variables for the directories containing image streams and templates. This significantly shortens the commands in the following sections. To do this:

ifdef::openshift-origin[]
----
$ IMAGESTREAMDIR=~/openshift-ansible/roles/openshift_examples/files/examples/v3.6/image-streams; \
    DBTEMPLATES=~/openshift-ansible/roles/openshift_examples/files/examples/v3.6/db-templates; \
    QSTEMPLATES=~/openshift-ansible/roles/openshift_examples/files/examples/v3.6/quickstart-templates
----
endif::[]
ifdef::openshift-enterprise[]
----
$ IMAGESTREAMDIR="/usr/share/ansible/openshift-ansible/roles/openshift_examples/files/examples/v3.7/image-streams"; \
    XPAASSTREAMDIR="/usr/share/ansible/openshift-ansible/roles/openshift_examples/files/examples/v3.7/xpaas-streams"; \
    XPAASTEMPLATES="/usr/share/ansible/openshift-ansible/roles/openshift_examples/files/examples/v3.7/xpaas-templates"; \
    DBTEMPLATES="/usr/share/ansible/openshift-ansible/roles/openshift_examples/files/examples/v3.7/db-templates"; \
    QSTEMPLATES="/usr/share/ansible/openshift-ansible/roles/openshift_examples/files/examples/v3.7/quickstart-templates"
----
endif::[]
[[dev-guide-templates-loading-is]]
== Creating Image Streams for {product-title} Images

include::install_config/imagestreams_templates.adoc[tag=installconfig_imagestreams_templates]

[[dev-guide-templates-loading-xpass]]
== Creating Image Streams for xPaaS Middleware Images

include::install_config/imagestreams_templates.adoc[tag=installconfig_imagestreams_xpass]

[[dev-guide-templates-loading-service]]
== Loading Database Service Templates

include::install_config/imagestreams_templates.adoc[tag=database-templates]

The database templates are located in 

By default, the templates build using a public source repository on
https://github.com[GitHub] that contains the necessary application code. In
order to be able to modify the source and build your own version of the
application, you must:

. Fork the repository referenced by the template's default
`SOURCE_REPOSITORY_URL` parameter.
. Override the value of the `SOURCE_REPOSITORY_URL` parameter when creating
from the template, specifying your fork instead of the default value.

By doing this, the build configuration created by the template will now point to
your fork of the application code, and you can modify the code and rebuild the
application at will.

ifdef::openshift-enterprise,openshift-origin[]
A walkthrough of this process using the web console is
provided in xref:../../getting_started/developers_console.adoc#getting-started-developers-console[Getting
Started for Developers: Web Console].
endif::[]

[NOTE]
====
Some of the Instant App and Quickstart templates define a database
xref:../../architecture/core_concepts/deployments.adoc#deployments-and-deployment-configurations[deployment configuration].
The configuration they define uses ephemeral storage for the database content.
These templates should be used for demonstration purposes only as all database
data will be lost if the database pod restarts for any reason.
====


[[dev-guide-templates-loading-quickstart]]
== Loading Instant App and Quickstart Templates

- xref:../../architecture/core_concepts/builds_and_image_streams.adoc#builds[Build configurations]
to build the application from source located in a GitHub public repository
- xref:../../architecture/core_concepts/deployments.adoc#deployments-and-deployment-configurations[Deployment configurations]
to deploy the application image after it is built.
- xref:../../architecture/core_concepts/pods_and_services.adoc#services[Services]
to provide load balancing for the application
xref:../../architecture/core_concepts/pods_and_services.adoc#pods[pods].
- xref:../../architecture/networking/routes.adoc#architecture-core-concepts-routes[Routes]
to provide external access to the application.

Some of the templates also define a database deployment and service so the
application can perform database operations.

[NOTE]
====
The templates which define a database use ephemeral storage for the database
content. These templates should be used for demonstration purposes only as all
database data will be lost if the database pod restarts for any reason.
====

Using these templates, you can easily instantiate full applications
using the various language images provided with {product-title}. You can also
customize the template parameters during instantiation so that the builds use you
own repository rather than the sample repository. This provides a
simple starting point for building new applications.

ifdef::openshift-enterprise,openshift-origin[]
To create the core Instant App and Quickstart templates:

----
$ oc create -f $QSTEMPLATES -n openshift
----
endif::[]

ifdef::openshift-enterprise[]
There is also a set of templates for creating applications using various xPaaS
Middleware products (xref:../../using_images/xpaas_images/eap.adoc#using-images-xpaas-images-eap[*JBoss EAP*],
xref:../../using_images/xpaas_images/jws.adoc#using-images-xpaas-images-jws[*JBoss JWS*],
xref:../../using_images/xpaas_images/a_mq.adoc#using-images-xpaas-images-a-mq[*JBoss A-MQ*],
xref:../../using_images/xpaas_images/fuse.adoc#using-images-xpaas-images-fuse[*JBoss Fuse Integration Services*],
xref:../../using_images/xpaas_images/decision_server.adoc#using-images-xpaas-images-decision-server[*Decision Server*], and
xref:../../using_images/xpaas_images/data_grid.adoc#using-images-xpaas-images-data-grid[*JBoss Data Grid*]), which can
be loaded by running:

----
$ oc create -f $XPAASTEMPLATES -n openshift
----

[NOTE]
====
The xPaaS Middleware templates require the
xref:../../install_config/imagestreams_templates.adoc#creating-image-streams-for-xpaas-middleware-images[xPaaS Middleware image streams],
which in turn require the relevant xref:../../install_config/imagestreams_templates.adoc#is-templates-xpaas-subs[xPaaS Middleware
subscriptions].
====

[NOTE]
====
The templates that define a database use ephemeral storage for the database
content. These templates should be used for demonstration purposes only as all
database data will be lost if the database pod restarts for any reason.
====
endif::[]

[[dev-guide-templates-loading-project]]
== Loading Templates into a Project
//tag::templates-loading-project[]
Once the templates are loaded into your {product-title} environment, you can add the templates to specific projects.

----
$ oc create -f $DBTEMPLATES -n <project-name>
$ oc create -f $QSTEMPLATES -n <project-name>
$ oc create -f $XPAASTEMPLATES -n <project-name>
----
//end::templates-loading-project[]
