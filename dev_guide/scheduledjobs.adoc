[[dev-guide-scheduledjobs]]
= Scheduled Jobs
{product-author}
{product-version}
:data-uri:
:icons:
:experimental:
:toc: macro
:toc-title:
:prewrap!:

toc::[]

== Overview
A scheduled job, builds on top of a regular xref:../dev_guide/jobs.adoc[job] by
allowing to specify a schedule how the job should be run.
ScheduledJobs are part of the Kubernetes API, which can be managed with `oc` commands like other
xref:../cli_reference/basic_cli_operations.adoc#object-types[object types].

See the http://kubernetes.io/docs/user-guide/scheduled-jobs/[Kubernetes documentation] for
more information about scheduled jobs.

[NOTE]
Scheduled Jobs are a tech preview feature backported from 3.4 with some
xref:#scheduledjob-known-issues[known issues].

[[creating-a-scheduledjob]]

== Creating a Scheduled Job

A scheduled job configuration consists of the following key parts:

- A schedule specified in link:https://en.wikipedia.org/wiki/Cron[cron format].
- A job template, that will be used when creating next job.
- An optional deadline, for starting the job if it missed schedule.
- An optional concurrency policy, specifying how to treat concurrent jobs within a scheduled job.
 If not specified this defaults to allow concurrent executions.
- An optional flag allowing to suspend a scheduled job.

The following is an example of a `*scheduledjob*` resource:

====
[source,yaml]
----
apiVersion: batch/v2alpha1
kind: ScheduledJob
metadata:
  name: pi
spec:
  schedule: */1 * * * ?    <1>
  jobTemplate:             <2>
    spec:
      template:
        spec:
          containers:
          - name: pi
            image: perl
            command: ["perl",  "-Mbignum=bpi", "-wle", "print bpi(2000)"]
          restartPolicy: Never
----

1. Schedule for the job, this particular one will run a job every minute.
2. Job template, very similar to the xref:../dev_guide/jobs.adoc#creating-a-job[job example].
====

[[scheduledjob-known-issues]]


== Known Issues

=== Unable to Edit a ScheduledJob

There is a link:https://bugzilla.redhat.com/show_bug.cgi?id=1378368[known issue]
when invoking `oc edit scheduledjob` due to an error that was already fixed in the
latest version, but due to significant code changes was not backported.

One possible solution is to use `oc patch` command instead of `oc edit`.


=== Unable to Change Concurrency Policy

There is a link:https://bugzilla.redhat.com/show_bug.cgi?id=1386463[known issue]
when changing concurrency policy that no new jobs are created after that operation.
The issues is still under investigation in the latest version.
