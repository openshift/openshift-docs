= Building Dependency Trees
{product-author}
{product-version}
:data-uri:
:icons:
:experimental:
:toc: macro
:toc-title:

toc::[]

== Overview
OpenShift includes an experimental command-line tool called *build-chain*. This
tool builds a dependency tree to identify which
link:../architecture/core_concepts/containers_and_images.html#docker-images[images]
would be  affected by updating an image in a specified
link:../architecture/core_concepts/builds_and_image_streams.html#image-streams[image
stream].

OpenShift uses image change triggers (in the
link:../dev_guide/builds.html#defining-a-buildconfig[BuildConfig]) to detect
when an image stream tag has been updated. The *build-chain* tool then
determines which
link:../architecture/core_concepts/builds_and_image_streams.html#builds[builds]
to trigger; it analyzes the output of those builds to determine if they will in
turn update another image stream tag. If they do, the tool continues to follow
the dependency tree. Lastly, it outputs a graph specifying the image stream tags
that would be impacted by an update to the top-level tag. The default output
syntax for this tool is set to a human-readable format and the DOT format is also
supported.

== Usage

The following table describes common *build-chain* usage and general syntax:

.Common build-chain Operations
[cols=".^5,.^5",options="header"]
|===

|Description |Syntax

|Build the dependency tree for the 'latest' tag in centos7.
|`openshift ex build-chain centos7`

|Build the dependency tree for 'v2' tag in dot format and visualize it via the dot utility.
|`openshift ex build-chain centos7:v2 -o dot | dot -T svg -o deps.svg`

|Build the dependency tree across all namespaces for the specified image stream tag found in 'test' namespace.
|`openshift ex build-chain centos7:v1 -n test --all`
|===

