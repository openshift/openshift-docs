:_mod-docs-content-type: ASSEMBLY
[id="understanding-multiple-networks"]
= Understanding multiple networks
include::_attributes/common-attributes.adoc[]
:context: understanding-multiple-networks

toc::[]

In Kubernetes, container networking is managed through networking plugins that implement the Container Network Interface (CNI). 

{product-title} uses the Multus CNI plugin, which enables the chaining of multiple CNI plugins. This setup allows you to define a default pod network during cluster installation, which handles standard network traffic. Additionally, you can define one or more custom networks based on available CNI plugins and attach them to your pods, offering flexibility for specialized network configurations such as routing or switching.

By creating multiple networks within a cluster, you gain greater flexibility in network design, as well as enhanced security, scalability, and workload isolation. Multiple networks allow you to configure network topologies tailored to your specific requirements, such as multi-tenancy, traffic isolation, and fine-grained connectivity control between workloads. Multiple networks can be implemented at the namespace level, and as both primary and secondary networks. For primary networks, user-defined networks (UDNs) and network attachment definitions (NADs) are available. For secondary networks, cluster administrators can use NADs or one of several CNI plugins that are available; support for secondary networks with UDN will be added in a future version of {product-title}. Additional CNIs available can be viewed under the "Additional networks in {product-title}" section.

[id="primary-networks_{context}"]
== Namespace-specific primary networks

In {product-title}, the term _primary network_ can refer to one of two things:

// The info about CUDN will be added in a separate PR now that SDN-4930 has been merged.

* Cluster-wide primary network. This network is global to the entire cluster. When configured, all namespaces use it unless overridden. This network is managed by OVN-Kubernetes, and are configured during cluster installation. {product-title} administrators can configure UDN to serve as the entire cluster's primary network. This option is not available for NADs. For more information about configuring UDN as your cluster-wide primary network, see. . . 

//xref will lead to CUDN content in a separate PR.

* Namespace-specific primary networks. When configuring namespace-specific primary networks, {product-title} administrators can choose between NADs or UDNs; {product-title} users are also provided the ability to configure multiple networks for a namespace with UDNs. A combination of NADs or UDNs can also be implemented within a deployment if warranted. For example, an administrator might choose to use a NAD for one namespace, and a UDN for another. 

The following sections provide more information about UDNs and NADs.

When configuring namespace-specific primary networks, {product-title} administrators can choose between NADs or UDNs; {product-title} users are also provided the ability to configure multiple networks for a namespace with UDNs. A combination of NADs or UDNs can also be implemented within a deployment if warranted. For example, an administrator might choose to use a NAD for one namespace, and a UDN for another. 

The following sections provide more information about UDNs and NADs.

[id="user-defined-networks_{context}"]
=== User-defined networks

User-defined networks offer enhanced customization and isolation by leveraging the `UserDefinedNetwork` custom resource (CR). Unlike NADs, which are only namespaced scope, UDNs offer administrators the ability to create and define additional networks at the cluster level. UDNs also offer both administrators and users the ability to define additional networks at the namespace level.

User-defined networks can be customized with Layer 2 or Layer 3 topology types, enabling a wide range of network architectures and topologies. 

[NOTE]
====
* Support for the Localnet topology will be added in a future version of {product-title}.
* Support for Layer 2, Layer 3, and Localnet topologies will be added for UDNs acting as secondary networks in a future version of {product-title}. 
====

Selecting UDN for your namespace's primary network offers greater network isolation, enabling workloads in different namespaces or tenants to operate in separate networks while maintaining security and operational efficiency. This flexibility allows users to configure network connectivity and routing based on the specific needs of their applications. 

For more information about user-defined networks, including the benefits, limitations, best practices, and configuration, see xref:../../networking/multiple_networks/primary_networks/about-user-defined-networks.adoc#about-user-defined-networks[About user-defined networks].

[id="network-attachment-definitions_{context}"]
=== Network attachment definitions

As an alternative to user-defined networks, you can also define more than one network with network attachment definitions (NADs) and the `NetworkAttachmentDefinition` CR. NADs allow administrators to define custom network topologies and connectivity options for pods. They cannot be implemented by {product-title} users. NADs provide support for Layer 2, Layer 3, and Localnet topologies, extending network capabilities and allowing for customizable pod networks. Unlike UDNs, however, NADs are only namespace scoped and cannot be implemented at the cluster-wide level.

Through the use of NADs, {product-title} administrators can design network topologies that meet unique security, performance, and isolation requirements. By combining NADs with network policies, users can achieve better traffic control and more secure multi-tenant environments. NADs also offer support for multi-homing configurations, allowing a pod to be connected to more than one network at a time. 

For more information about network attachment definitions, including benefits, approaches to management, and configuration, see xref:../../networking/multiple_networks/primary_networks/about-primary-nwt-nad.adoc#understanding-multiple-networks[Creating primary networks using a NetworkAttachmentDefinition].

[id="additional-networks-provided_{context}"]
== Additional networks in {product-title}

{product-title} provides the following CNI plugins for creating additional
networks in your cluster:

* *bridge*: xref:../../networking/multiple_networks/secondary_networks/creating-secondary-nwt-other-cni.adoc#nw-multus-bridge-object_configuring-additional-network-cni[Configure a bridge-based additional network] to allow pods on the same host to communicate with each other and the host.

* *host-device*: xref:../../networking/multiple_networks/secondary_networks/creating-secondary-nwt-other-cni.adoc#nw-multus-host-device-object_configuring-additional-network-cni[Configure a host-device additional network] to allow pods access to a physical Ethernet network device on the host system.

* *ipvlan*: xref:../../networking/multiple_networks/secondary_networks/creating-secondary-nwt-other-cni.adoc#nw-multus-ipvlan-object_configuring-additional-network-cni[Configure an ipvlan-based additional network] to allow pods on a host to communicate with other hosts and pods on those hosts, similar to a macvlan-based additional network. Unlike a macvlan-based additional network, each pod shares the same MAC address as the parent physical network interface.

* *vlan*: xref:../../networking/multiple_networks/secondary_networks/creating-secondary-nwt-other-cni.adoc#nw-multus-vlan-object_configuring-additional-network-cni[Configure a VLAN-based additional network] to allow VLAN-based network isolation and connectivity for pods.

* *macvlan*: xref:../../networking/multiple_networks/secondary_networks/creating-secondary-nwt-other-cni.adoc#nw-multus-macvlan-object_configuring-additional-network-cni[Configure a macvlan-based additional network] to allow pods on a host to communicate with other hosts and pods on those hosts by using a physical network interface. Each pod that is attached to a macvlan-based additional network is provided a unique MAC address.

* *TAP*: xref:../../networking/multiple_networks/secondary_networks/creating-secondary-nwt-other-cni.adoc#nw-multus-tap-object_configuring-additional-network-cni[Configure a TAP-based additional network] to create a tap device inside the container namespace. A TAP device enables user space programs to send and receive network packets.

* *SR-IOV*: xref:../../networking/hardware_networks/about-sriov.adoc#about-sriov[Configure an SR-IOV based additional network] to allow pods to attach to a virtual function (VF) interface on SR-IOV capable hardware on the host system.
