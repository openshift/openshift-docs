:_mod-docs-content-type: ASSEMBLY
[id="cidr-range-definitions"]
= CIDR range definitions
include::_attributes/common-attributes.adoc[]
ifdef::openshift-dedicated,openshift-rosa[]
include::_attributes/attributes-openshift-dedicated.adoc[]
endif::openshift-dedicated,openshift-rosa[]
:context: cidr-range-definitions

toc::[]

[role="_abstract"]
To ensure stable and accurate network routing in {product-title} clusters that use OVN-Kubernetes, define non-overlapping Classless Inter-Domain Routing (CIDR) subnet ranges. Establishing unique ranges prevents IP address conflicts so that internal traffic reaches its intended destination without interference.

[IMPORTANT]
====
For {product-title} 4.17 and later versions, clusters use `169.254.0.0/17` for IPv4 and `fd69::/112` for IPv6 as the default masquerade subnet. You must avoid these ranges. For upgraded clusters, there is no change to the default masquerade subnet.
====

The following subnet types and are mandatory for a cluster that uses OVN-Kubernetes:

* Join: Uses a join switch to connect gateway routers to distributed routers. A join switch reduces the number of IP addresses for a distributed router. For a cluster that uses the OVN-Kubernetes plugin, an IP address from a dedicated subnet is assigned to any logical port that attaches to the join switch.
* Masquerade: Prevents collisions for identical source and destination IP addresses that are sent from a node as hairpin traffic to the same node after a load balancer makes a routing decision.
* Transit: A transit switch is a type of distributed switch that spans across all nodes in the cluster. A transit switch routes traffic between different zones. For a cluster that uses the OVN-Kubernetes plugin, an IP address from a dedicated subnet is assigned to any logical port that attaches to the transit switch.

[NOTE]
====
You can change the join, masquerade, and transit CIDR ranges for your cluster as a postinstallation task.
====

ifdef::openshift-rosa,openshift-dedicated[]
When specifying subnet CIDR ranges, ensure that the subnet CIDR range is within the defined Machine CIDR. You must verify that the subnet CIDR ranges allow for enough IP addresses for all intended workloads depending on which platform the cluster is hosted.
endif::[]

OVN-Kubernetes, the default network provider in {product-title} 4.14 and later versions, internally uses the following IP address subnet ranges:

* `V4JoinSubnet`: `100.64.0.0/16`
* `V6JoinSubnet`: `fd98::/64`
* `V4TransitSwitchSubnet`: `100.88.0.0/16`
* `V6TransitSwitchSubnet`: `fd97::/64`
* `defaultV4MasqueradeSubnet`: `169.254.0.0/17`
* `defaultV6MasqueradeSubnet`: `fd69::/112`

[IMPORTANT]
====
The earlier list includes join, transit, and masquerade IPv4 and IPv6 address subnets. If your cluster uses OVN-Kubernetes, do not include any of these IP address subnet ranges in any other CIDR definitions in your cluster or infrastructure.
====

ifndef::openshift-rosa,openshift-dedicated[]
[role="_additional-resources"]
.Additional resources

* xref:../../networking/ovn_kubernetes_network_provider/configure-ovn-kubernetes-subnets.adoc#configure-ovn-kubernetes-subnets[Configuring OVN-Kubernetes internal IP address subnets]
endif::openshift-rosa,openshift-dedicated[]

include::modules/machine-cidr-description.adoc[leveloffset=+1]

ifndef::openshift-rosa,openshift-rosa-hcp,openshift-dedicated[]
[role="_additional-resources"]
.Additional resources

* xref:../../networking/networking_operators/cluster-network-operator.adoc#nw-operator-cr_cluster-network-operator[Cluster Network Operator configuration]
endif::[]

include::modules/service-cidr-description.adoc[leveloffset=+1]

include::modules/pod-cidr-description.adoc[leveloffset=+1]

ifdef::openshift-enterprise[]
[role="_additional-resources"]
.Additional resources
* xref:../../networking/networking_operators/cluster-network-operator.adoc#nw-operator-cr_cluster-network-operator[Cluster Network Operator configuration]
* xref:../../networking/configuring_network_settings/configuring-cluster-network-range.adoc#configuring-cluster-network-range[Configuring the cluster network range]
endif::openshift-enterprise[]

include::modules/host-prefix-description.adoc[leveloffset=+1]

// CIDR ranges for HCP
include::modules/hcp-cidr-ranges.adoc[leveloffset=+1]
