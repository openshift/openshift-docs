[id="enable-cluster-wide-proxy"]
= Configuring the cluster-wide proxy
include::modules/common-attributes.adoc[]
:context: config-cluster-wide-proxy

toc::[]

Production environments can deny direct access to the Internet and instead have an HTTP or HTTPS proxy available. You can configure {product-title} to use a proxy by xref:../networking/enable-cluster-wide-proxy.adoc#nw-proxy-configure-object_config-cluster-wide-proxy[modifying the Proxy object for existing clusters] or by configuring the proxy settings in the `install-config.yaml` file for new clusters.

[IMPORTANT]
====
The cluster-wide proxy is only supported if you used a user-provisioned infrastructure installation for a supported provider.
====

.Prerequisites

* Review the xref:../installing/install_config/configuring-firewall.adoc#configuring-firewall[sites that your cluster requires access to] and determine whether any of them must bypass the proxy. By default, all cluster egress traffic is proxied, including calls to the cloud provider API for the cloud that hosts your cluster. Add sites to the Proxy object's `spec.noProxy` field to bypass the proxy if necessary.
+
[NOTE]
====
The Proxy object's `status.noProxy` field is populated by default with the instance metadata endpoint (`169.254.169.254`) and with the values of the `networking.machineCIDR`, `networking.clusterNetwork.cidr`, and `networking.serviceNetwork` fields from your installation configuration.
====

include::modules/nw-proxy-configure-object.adoc[leveloffset=+1]

include::modules/nw-proxy-remove.adoc[leveloffset=+1]
