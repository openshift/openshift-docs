// Module included in the following assemblies:
//
// * networking/aws_load_balancer_operator/add-tls-termination-and-ddos-protection.adoc

:_content-type: PROCEDURE
[id="nw-adding-tls-termination-and-ddos-protection_{context}"]
= Adding the tls termination

You can route traffic for the domain example.com to pods of Service example-service and add TLS termination on the load balancer.

.Prerequisites

.Procedure

. Deploy the operator and create an instance of the resource `AWSLoadBalancerController`:
+
[source,yaml]
----
kind: AWSLoadBalancerController
group: networking.olm.openshift.io/v1alpha1 <1>
metadata:
  name: cluster <2>
spec:
  subnetTagging: auto
  ingressClass: tls-termination <3>
----

<1> Defines the resource group of the `AWSLoadBalancerControlller` resource.
<2> Defines the `aws-load-balancer-controller` instance.
<3> Defines the name of the default `IngressClass` that the provisioned `aws-load-balancer-controller` reconciles.

. Create an `Ingress` resource:
+
[source,yaml]
----
apiVersion: networking.k8s.io/v1
kind: Ingress
metadata:
  name: example
  annotations:
    alb.ingress.kubernetes.io/scheme: internet-facing <1>
    alb.ingress.kubernetes.io/certificate-arn: arn:aws:acm:us-west-2:xxxxx <2>
spec:
  ingressClassName: tls-termination <3>
  rules:
  - host: example.com
    http:
        paths:
          - path: /
            pathType: Exact
            backend:
              service:
                name: example-service
                port:
                  number: 80
----

<1> Controller provisions the load balancer for this ingress in a public subnet so that the load balancer is reachable over the internet.
<2> The Amazon Resource Name of the certificate that you attach to the loadbalancer.
<3> Defines `Ingress` class name.
