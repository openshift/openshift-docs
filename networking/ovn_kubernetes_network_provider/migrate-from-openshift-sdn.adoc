:_mod-docs-content-type: ASSEMBLY
[id="migrate-from-openshift-sdn"]
= Migrating from the OpenShift SDN network plugin
include::_attributes/common-attributes.adoc[]
:context: migrate-from-openshift-sdn
// Unique attribute for the version of the release notes.

toc::[]

As a cluster administrator, you can migrate to the OVN-Kubernetes network plugin from the OpenShift software-defined networking (SDN) plugin.

[WARNING]
====
If your cluster uses the OpenShift SDN network plugin, you cannot upgrade your cluster to {product-title} 4.17. You must initially migrate your cluster to the OVN-Kubernetes plugin and then upgrade your cluster to {product-title} 4.17.

Additionally, if your cluster uses a third-party container network interface (CNI) plugin, you cannot migrate your cluster to the OVN-Kubernetes network plugin. For a complete list of these CNI plugins, see link:https://access.redhat.com/articles/5436171[Certified OpenShift CNI Plug-ins] (Red{nbsp}Hat Knowledgebase).
====

The following methods exist for migrating from the OpenShift SDN network plugin to the OVN-Kubernetes plugin:

Ansible playbook::
The Ansible playbook method automates the offline migration method steps. This method has the same usage scenarios as the manual offline migration method.

Offline migration::
This is a manual process that includes some downtime. This method is primarily used for self-managed {product-title} deployments, and consider using this method when you cannot perform a limited live migration to the OVN-Kubernetes network plugin.

Limited live migration (Preferred method)::
This is an automated process that migrates your cluster from OpenShift SDN to OVN-Kubernetes.

[WARNING]
====
For the limited live migration method only, do not automate the migration from OpenShift SDN to OVN-Kubernetes with a script or another tool such as Red{nbsp}Hat Ansible Automation Platform. This might cause outages or crash your {product-title} cluster.
====

[role="_additional-resources"]
.Additional resources

* xref:../../networking/ovn_kubernetes_network_provider/about-ovn-kubernetes#about-ovn-kubernetes[About the OVN-Kubernetes network plugin]

// Limited live migration to the OVN-Kubernetes network plugin overview
include::modules/nw-ovn-kubernetes-live-migration-about.adoc[leveloffset=+1]

[role="_additional-resources"]
.Additional resources

* xref:../../updating/understanding_updates/understanding-update-channels-release.adoc#understanding-update-channels-release[Understanding update channels and releases]

* xref:../../release_notes/ocp-4-16-release-notes.adoc#ocp-4-16-asynchronous-errata-updates_release-notes[Asynchronous errata updates]

// How the live migration process works
include::modules/how-the-live-migration-process-works.adoc[leveloffset=+2]

// Migrating to the OVN-Kubernetes network plugin by using the limited live migration method
include::modules/nw-ovn-kubernetes-live-migration.adoc[leveloffset=+2]

// Checking cluster resources before initiating the limited live migration
include::modules/checking-cluster-resources-before-initiating-limited-live-migration.adoc[leveloffset=+3]

// Removing egress router pods before initiating the limited live migration
include::modules/removing-egress-router-pods-before-initiating-limited-live-migration.adoc[leveloffset=+3]

// Removing the NodeNetworkConfigurationPolicy (NNCP) custom resource (CR)
include::modules/removing-nncp-limited-live-migration.adoc[leveloffset=+3]

// Initiating the limited live migration process
include::modules/initiating-limited-live-migration.adoc[leveloffset=+3]

// Patching OVN-Kubernetes address ranges
include::modules/patching-ovnk-address-ranges.adoc[leveloffset=+3]

// Checking cluster resources after initiating the limited live migration
include::modules/checking-cluster-resources-after-initiating-limited-live-migration.adoc[leveloffset=+3]

// Checking limited live migration metrics
include::modules/nw-ovn-kubernetes-checking-live-migration-metrics.adoc[leveloffset=+2]

// Information about limited live migration metrics
include::modules/live-migration-metrics-information.adoc[leveloffset=+3]

[role="_additional-resources"]
[id="migrate-from-openshift-sdn-additional-resources"]
== Additional resources

* link:https://access.redhat.com/labs/ocpnc/[Red Hat OpenShift Network Calculator]

* xref:../../networking/networking_operators/cluster-network-operator.adoc#nw-operator-cr_cluster-network-operator[Configuration for the OVN-Kubernetes network plugin]

* xref:../../backup_and_restore/control_plane_backup_and_restore/backing-up-etcd.adoc#backup-etcd[Backing up etcd]

* xref:../../networking/network_security/network_policy/about-network-policy.adoc#about-network-policy[About network policy]

* xref:../../networking/changing-cluster-network-mtu.adoc#nw-cluster-mtu-change_changing-cluster-network-mtu[Changing the cluster MTU]

* xref:../../networking/changing-cluster-network-mtu.adoc#mtu-value-selection_changing-cluster-network-mtu[MTU value selection]

* xref:../../networking/network_security/network_policy/about-network-policy.adoc#nw-networkpolicy-optimize-ovn_about-network-policy[About network policy]

* xref:../../networking/ovn_kubernetes_network_provider/converting-to-dual-stack.adoc#converting-to-dual-stack[Converting to IPv4/IPv6 dual-stack networking]

* OVN-Kubernetes capabilities

- xref:../../networking/ovn_kubernetes_network_provider/configuring-egress-ips-ovn.adoc#configuring-egress-ips-ovn[Configuring an egress IP address]

- xref:../../networking/network_security/egress_firewall/configuring-egress-firewall-ovn.adoc#configuring-egress-firewall-ovn[Configuring an egress firewall for a project]

- link:https://access.redhat.com/solutions/7078619[OVN-Kubernetes egress firewall blocks process to deploy application as DeploymentConfig]

- xref:../../networking/ovn_kubernetes_network_provider/enabling-multicast.adoc#nw-ovn-kubernetes-enabling-multicast[Enabling multicast for a project]
* OpenShift SDN capabilities

- xref:../../networking/openshift_sdn/assigning-egress-ips.adoc#assigning-egress-ips[Configuring egress IPs for a project]

- xref:../../networking/openshift_sdn/configuring-egress-firewall.adoc#configuring-egress-firewall[Configuring an egress firewall for a project]

- xref:../../networking/openshift_sdn/enabling-multicast.adoc#enabling-multicast[Enabling multicast for a project]

- xref:../../networking/openshift_sdn/deploying-egress-router-layer3-redirection.adoc#deploying-egress-router-layer3-redirection[Deploying an egress router pod in redirect mode]

* xref:../../rest_api/operator_apis/network-operator-openshift-io-v1.adoc#network-operator-openshift-io-v1[Network [operator.openshift.io/v1]

// Offline migration to the OVN-Kubernetes network plugin overview
include::modules/nw-ovn-kubernetes-migration-about.adoc[leveloffset=+1]

[role="_additional-resources"]
.Additional resources

* xref:../../updating/understanding_updates/understanding-update-channels-release.adoc#understanding-update-channels-release[Understanding update channels and releases]

* xref:../../release_notes/ocp-4-16-release-notes.adoc#ocp-4-16-asynchronous-errata-updates_release-notes[Asynchronous errata updates]

// How the offline migration process works
include::modules/nw-network-plugin-migration-process.adoc[leveloffset=+2]

// Using an Ansible playbook to migrate to the OVN-Kubernetes network plugin
include::modules/nw-ovn-kubernetes-ansible-migration.adoc[leveloffset=+2]

[role="_additional-resources"]
.Additional resources

* xref:../../networking/ovn_kubernetes_network_provider/migrate-from-openshift-sdn.adoc#nw-ovn-kubernetes-ansible-migration-about_migrate-from-openshift-sdn[Patching OVN-Kubernetes address ranges]

* link:https://docs.redhat.com/en/documentation/red_hat_ansible_automation_platform/latest[Getting started with playbooks (Red Hat Ansible Automation Platform documentation)]

// Migrating to the OVN-Kubernetes network plugin by using the offline migration method
include::modules/nw-ovn-kubernetes-migration.adoc[leveloffset=+2]

//External IP behavior difference between SDN and OVN-K
include::modules/nw-external-ip-ovn-k.adoc[leveloffset=+1]

[role="_additional-resources"]
.Additional resources
* xref:../../networking/network_security/network_policy/about-network-policy.adoc#nw-networkpolicy-external-ip-ovn_about-network-policy[NetworkPolicy and external IPs in OVN-Kubernetes].
