[id='installing-and-upgrading-4']
= Installing and upgrading the Migration Toolkit for Containers
include::modules/common-attributes.adoc[]
:context: installing-and-upgrading-4
:installing-and-upgrading-4:

toc::[]

You can install and upgrade the {mtc-full} on {product-title} 4 in a connected or a restricted environment.

The {mtc-short} web console is installed on the target cluster by default. Alternatively, you can install the {mtc-short} web console on a link:https://access.redhat.com/articles/5064151[remote cluster], which is not the source or the target cluster.

== Installing and upgrading the {mtc-full} in a connected environment

You can install and upgrade the {mtc-full} ({mtc-short}) on {product-title} 4 in a connected environment.

Uppgrading {mtc-short} version 1.3 requires an additional procedure, xref:../migration/installing-and-upgrading-4.adoc#migration-upgrading-from-mtc-1-3_upgrading-4[updating the `MigPlan` custom resource manifest].

:installing-and-upgrading-4!:
:context: installing-4
:installing-4:
include::modules/migration-installing-upgrading-mtc-on-ocp-4.adoc[leveloffset=+2]
:installing-4!:
:context: upgrading-4
:upgrading-4:
include::modules/migration-installing-upgrading-mtc-on-ocp-4.adoc[leveloffset=+2]
include::modules/migration-upgrading-from-mtc-1-3.adoc[leveloffset=+2]
:upgrading-4!:

:context: installing-disconnected-4
:installing-disconnected-4:
[id='installing-mtc_{context}']
== Installing and upgrading the {mtc-full} in a restricted environment

You can install and upgrade the {mtc-full} ({mtc-short}) on {product-title} 4 in a restricted environment.

You must create a mirror Operator catalog image, push it to a local image registry, and then configure Operator Lifecycle Manager (OLM) to install the {mtc-full} Operator from the local registry.

Upgrading {mtc-short} version 1.3 requires an additional procedure, xref:../migration/installing-and-upgrading-4.adoc#migration-upgrading-from-mtc-1-3_upgrading-disconnected-4[updating the `MigPlan` custom resource manifest].

include::modules/olm-restricted-networks-configuring-operatorhub.adoc[leveloffset=+2]
include::modules/olm-pruning-index-image.adoc[leveloffset=+2]
include::modules/olm-mirroring-catalog.adoc[leveloffset=+2]
include::modules/olm-creating-catalog-from-index.adoc[leveloffset=+2]

include::modules/migration-installing-upgrading-mtc-on-ocp-4.adoc[leveloffset=+2]
:installing-disconnected-4!:

:context: upgrading-disconnected-4
:upgrading-disconnected-4:
include::modules/migration-installing-upgrading-mtc-on-ocp-4.adoc[leveloffset=+2]
include::modules/migration-upgrading-from-mtc-1-3.adoc[leveloffset=+2]
:upgrading-disconnected-4!:
