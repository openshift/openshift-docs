[id="updating-cluster-using-custom-mcp"]
= Using custom machine config pools to delay updates for nodes
include::modules/common-attributes.adoc[]
:context: updating-cluster-using-custom-mcp

toc::[]


You can use custom machine config pools (MCPs) to delay updates to specific nodes if you want to ensure that your mission critical applications stay available during the entire update process, even if the update process experiences a failure. 

During an update, the Machine Config Operator (MCO) cordons and drains nodes up to the specified `maxUnavailable` number of nodes, if configured. This marks the nodes as unschedulable and evicts all pods from the nodes. To avoid this, move the nodes from the worker MCP to a custom MCP that you pause before the update. This prevents those nodes from being cordoned, drained, and updated. When you want to update those nodes, unpause the MCP, which triggers the update. 

[NOTE]
====
It is not recommended to update the MCPs to different versions, for example, updating one MCP from 4.y.100 to 4.y.110 and another MCP to 4.y.120.
This scenario has not been tested and might result in an undefined cluster state.
====

This slow rollout of the update can be characterized as a _canary_ release.

include::modules/update-upgrading-mcp.adoc[leveloffset=+1]

