:_mod-docs-content-type: ASSEMBLY
[id="updating-cluster-prepare"]
= Preparing to update to {product-title} 4.13
include::_attributes/common-attributes.adoc[]
:context: updating-cluster-prepare

toc::[]

Learn more about administrative tasks that cluster admins must perform to successfully initialize an update, as well as optional guidelines for ensuring a successful update.

[id="rhel-micro-architecture-update-requirements"]
== {op-system-base} 9.2 micro-architecture requirement change

{product-title} is now based on the {op-system-base} 9.2 host operating system. The micro-architecture requirements are now increased to x86_64-v2, Power9, and Z14. See the link:https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html-single/9.0_release_notes/index#architectures[RHEL micro-architecture requirements documentation]. You can verify compatibility before updating by following the procedures outlined in this link:https://access.redhat.com/solutions/7052996[KCS article].

[IMPORTANT]
====
Without the correct micro-architecture requirements, the update process will fail. Make sure you purchase the appropriate subscription for each architecture. For more information, see link:https://access.redhat.com/products/red-hat-enterprise-linux#addl-arch[Get Started with Red Hat Enterprise Linux - additional architectures]
====

[id="kube-api-removals_{context}"]
== Kubernetes API deprecations and removals

{product-title} 4.13 uses Kubernetes 1.26, which removed several deprecated APIs.

A cluster administrator must provide a manual acknowledgment before the cluster can be updated from {product-title} 4.12 to 4.13. This is to help prevent issues after upgrading to {product-title} 4.13, where APIs that have been removed are still in use by workloads, tools, or other components running on or interacting with the cluster. Administrators must evaluate their cluster for any APIs in use that will be removed and migrate the affected components to use the appropriate new API version. After this evaluation and migration is complete, the administrator can provide the acknowledgment.

Before you can update your {product-title} 4.12 cluster to 4.13, you must provide the administrator acknowledgment.

// Removed Kubernetes APIs
include::modules/update-preparing-list.adoc[leveloffset=+2]

[id="evaluating-cluster-removed-apis"]
=== Evaluating your cluster for removed APIs

There are several methods to help administrators identify where APIs that will be removed are in use. However, {product-title} cannot identify all instances, especially workloads that are idle or external tools that are used. It is the responsibility of the administrator to properly evaluate all workloads and other integrations for instances of removed APIs.

// Reviewing alerts to identify uses of removed APIs
include::modules/update-preparing-evaluate-alerts.adoc[leveloffset=+3]

// Using APIRequestCount to identify uses of removed APIs
include::modules/update-preparing-evaluate-apirequestcount.adoc[leveloffset=+3]

// Using APIRequestCount to identify which workloads are using the removed APIs
include::modules/update-preparing-evaluate-apirequestcount-workloads.adoc[leveloffset=+3]

// Migrating instances of removed APIs
include::modules/update-preparing-migrate.adoc[leveloffset=+2]

// Providing the administrator acknowledgment
include::modules/update-preparing-ack.adoc[leveloffset=+2]

// Assessing the risk of conditional updates
include::modules/update-preparing-conditional.adoc[leveloffset=+1]

[role="_additional-resources"]
.Additional resources
* xref:../updating/understanding_updates/how-updates-work.adoc#update-evaluate-availability_how-updates-work[Evaluation of update availability]

// Best practices for cluster updates
include::modules/update-best-practices.adoc[leveloffset=+1]

[role="_additional-resources"]
.Additional resources
* xref:../updating/index.adoc#understanding_clusteroperator_conditiontypes_updating-clusters-overview[Understanding cluster Operator condition types]
