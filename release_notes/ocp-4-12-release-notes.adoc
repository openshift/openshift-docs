:_content-type: ASSEMBLY
[id="ocp-4-12-release-notes"]
= {product-title} {product-version} release notes
include::_attributes/common-attributes.adoc[]
:context: release-notes

toc::[]

Red Hat {product-title} provides developers and IT organizations with a hybrid cloud application platform for deploying both new and existing applications on secure, scalable resources with minimal configuration and management overhead. {product-title} supports a wide selection of programming languages and frameworks, such as Java, JavaScript, Python, Ruby, and PHP.

Built on {op-system-base-full} and Kubernetes, {product-title} provides a more secure and scalable multitenant operating system for today's enterprise-class applications, while delivering integrated application runtimes and libraries. {product-title} enables organizations to meet security, privacy, compliance, and governance requirements.

[id="ocp-4-12-about-this-release"]
== About this release

// TODO: Update with the relevant information closer to release.
{product-title} (link:https://access.redhat.com/errata/RHSA-2022:TODO[RHSA-2022:TODO]) is now available. This release uses link:https://github.com/kubernetes/kubernetes/blob/master/CHANGELOG/CHANGELOG-1.25.md[Kubernetes 1.25] with CRI-O runtime. New features, changes, and known issues that pertain to {product-title} {product-version} are included in this topic.

{product-title} {product-version} clusters are available at https://console.redhat.com/openshift. With the {cluster-manager-first} application for {product-title}, you can deploy OpenShift clusters to either on-premises or cloud environments.

// Double check OP system versions
{product-title} {product-version} is supported on {op-system-base-full} 8.4 and 8.5, as well as on {op-system-first} 4.12.

You must use {op-system} machines for the control plane, and you can use either {op-system} or {op-system-base} for compute machines.
//Removed the note per https://issues.redhat.com/browse/GRPA-3517

//TODO: Add the line below for EUS releases.
//{product-title} 4.6 is an Extended Update Support (EUS) release. More information on Red Hat OpenShift EUS is available in link:https://access.redhat.com/support/policy/updates/openshift#ocp4_phases[OpenShift Life Cycle] and link:https://access.redhat.com/support/policy/updates/openshift-eus[OpenShift EUS Overview].

//TODO: The line below is not true for 4.9 but should be used when it is next appropriate. Revisit in October 2022 timeframe.
//Version 4.6 going end of life in October 2022. For more information, see the link:https://access.redhat.com/support/policy/updates/openshift[Red Hat {product-title} Life Cycle Policy].


[id="ocp-4-12-add-on-support-status"]
== {product-title} layered and dependent component support and compatibility

The scope of support for layered and dependent components of {product-title} changes independently of the {product-title} version. To determine the current support status and compatibility for an add-on, refer to its release notes. For more information, see the link:https://access.redhat.com/support/policy/updates/openshift[Red Hat {product-title} Life Cycle Policy].

[id="ocp-4-12-new-features-and-enhancements"]
== New features and enhancements

This release adds improvements related to the following components and concepts.

[id="ocp-4-12-rhcos"]
=== {op-system-first}

[id="ocp-4-12-installation-and-upgrade"]
=== Installation and upgrade

[id="ocp-4-12-aws-load-balancer-customization"]
==== Specify the load balancer type in AWS during installation
Beginning with {product-title} {product-version}, you can specify either Network Load Balancer (NLB) or Classic as a persistent load balancer type in AWS during installation. Afterwards, if an Ingress Controller is deleted, the load balancer type persists with the lbType configured during installation.

For more information, see xref:../installing/installing_aws/installing-aws-network-customizations.adoc[Installing a cluster on AWS with network customizations].

[id="ocp-4-12-installation-and-upgrade-gcp-marketplace"]
==== Google Cloud Platform Marketplace offering
{product-title} is now available on the GCP Marketplace. Installing an {product-title} with a GCP Marketplace image lets you create self-managed cluster deployments that are billed on pay-per-use basis (hourly, per core) through GCP, while still being supported directly by Red Hat.

For more information about installing using installer-provisioned infrastructure, see xref:../installing/installing_gcp/installing-gcp-customizations.adoc#installation-gcp-marketplace_installing-gcp-customizations[Using a GCP Marketplace image]. For more information about installing a using user-provisioned infrastructure, see xref:../installing/installing_gcp/installing-gcp-user-infra.adoc#installation-creating-gcp-worker_installing-gcp-user-infra[Creating additional worker machines in GCP].

[id="ocp-4-12-gcp-azure-serial-console-logs"]
==== Troubleshooting bootstrap failures during installation on GCP and Azure
The installer now gathers serial console logs from the bootstrap and control plane hosts on GCP and Azure. This log data is added to the standard bootstrap log bundle.

For more information, see xref:../installing/installing-troubleshooting.adoc#installation-bootstrap-gather_installing-troubleshooting[Troubleshooting installation issues].

[id="ocp-4-12-ibm-cloud-vpc"]
==== IBM Cloud VPC general availability
IBM Cloud VPC is now generally available in {product-title} {product-version}.

For more information about installing a cluster, see xref:../installing/installing_ibm_cloud_public/preparing-to-install-on-ibm-cloud.adoc#preparing-to-install-on-ibm-cloud[Preparing to install on IBM Cloud VPC].

[id="ocp-4-12-admin-ack-upgrading"]
==== Required administrator acknowledgment when upgrading from {product-title} 4.11 to 4.12

{product-title} 4.12 uses Kubernetes 1.25, which removed xref:../release_notes/ocp-4-12-release-notes.adoc#ocp-4-12-removed-kube-1-25-apis[several deprecated APIs].

A cluster administrator must provide a manual acknowledgment before the cluster can be upgraded from {product-title} 4.11 to 4.12. This is to help prevent issues after upgrading to {product-title} 4.12, where APIs that have been removed are still in use by workloads, tools, or other components running on or interacting with the cluster. Administrators must evaluate their cluster for any APIs in use that will be removed and migrate the affected components to use the appropriate new API version. After this is done, the administrator can provide the administrator acknowledgment.

All {product-title} 4.11 clusters require this administrator acknowledgment before they can be upgraded to {product-title} 4.12.

For more information, see xref:../updating/updating-cluster-prepare.adoc#updating-cluster-prepare[Preparing to update to {product-title} 4.12].

[id="ocp-4-12-feature-set"]
==== Enabling a feature set when installing a cluster
Beginning with {product-title} {product-version}, you can enable a feature set as part of the installation process. A feature set is a collection of {product-title} features that are not enabled by default.

For more information about enabling a feature set during installation, see xref:../nodes/clusters/nodes-cluster-enabling-features.adoc#nodes-cluster-enabling[Enabling {product-title} features using feature gates].

[id="ocp-4-12-arm-on-azure"]
==== {product-title} on ARM
{product-title} {product-version} is now supported on ARM architecture-based Azure installer-provisioned infrastructure. AWS Graviton 3 processors are now available for cluster deployments and are also supported on {product-title} 4.11. For more information about instance availability and installation documentation, see xref:../installing/installing-preparing.adoc#supported-installation-methods-for-different-platforms[Supported installation methods for different platforms]

[id="ocp-4-12-oc-mirror-oci"]
==== Mirroring file-based catalog Operator images in OCI format with the oc-mirror CLI plug-in (Technology Preview)

Using the oc-mirror CLI plug-in to mirror file-based catalog Operator images in OCI format instead of Docker v2 format is now available as a link:https://access.redhat.com/support/offerings/techpreview[Technology Preview].

For more information, see xref:../installing/disconnected_install/installing-mirroring-disconnected.adoc#oc-mirror-oci-format_installing-mirroring-disconnected[Mirroring file-based catalog Operator images in OCI format].

[id="ocp-4-12-post-installation"]
=== Post-installation configuration

[id="ocp-4-12-web-console"]
=== Web console

[id="ocp-4-12-Administrator-perspective"]
==== Administrator Perspective

With this release, there are several updates to the *Administrator* perspective of the web console.

[id="ocp-4-12-developer-perspective"]
==== Developer Perspective

With this release, there are several updates to the *Developer* perspective of the web console. You can perform the following actions:

* Export your application in the ZIP file format to another project or cluster by using the *Export application* option on the *+Add* page.
* Create a Kafka event sink to receive events from a particular source and send them to a Kafka topic.
* Set the default resource preference in the *User Preferences* -> *Applications* page. In addition, you can select another resource type to be the default.
** Optionally, set another resource type from the *Add* page by clicking *Import from Git* -> *Advanced options* -> *Resource type* and selecting the resource from the drop-down list.
* Make the `status.HostIP` node IP address for pods visible in the *Details* tab of the *Pods* page.
* See the resource quota alert label on the *Topology* and *Add* pages whenever any resource reaches the quota. The alert label link takes you to the *ResourceQuotas* list page. If the alert label link is for a single resource quota, it takes you to the *ResourceQuota details* page.
** For deployments, an alert is displayed in the topology node side panel if any errors are associated with resource quotas. Also, a yellow border is displayed around the deployment nodes when the resource quota is exceeded.
* Customize the following UI items using the form or YAML view:
** Perspectives visible to users
** Quick starts visible to users
** Cluster roles accessible to a project
** Actions visible on the *+Add* page
** Item types in the *Developer Catalog*
* See the common updates to the *Pipeline details* and *PipelineRun details* page visualization by performing the following actions:
** Use the mouse wheel to change the zoom factor.
** Hover over the tasks to see the task details.
** Use the standard icons to zoom in, zoom out, fit to screen, and reset the view.
** *PipelineRun details* page only: At specific zoom factors, the background color of the tasks changes to indicate the error or warning status. You can hover over the tasks badge to see the total number of tasks and the completed tasks.

[id="ocp-4-12-helm-page-improvements"]
===== Helm page improvements

In {product-title} 4.12, you can do the following from the *Helm* page:

* Create Helm releases and repositories using the *Create* button.
* Create, update, or delete a cluster-scoped or a namespace-scoped Helm chart repository.
* View the list of the existing Helm chart repositories with their scope in the *Repositories* page.
* View the newly created Helm release in the *Helm Releases* page.

[id="ocp-4-12-oc"]
=== OpenShift CLI (oc)

[id="ocp-4-12-cli-krew"]
==== Managing plug-ins for the OpenShift CLI with Krew (Technology Preview)

Using Krew to install and manage plug-ins for the OpenShift CLI (`oc`) is now available as a link:https://access.redhat.com/support/offerings/techpreview[Technology Preview].

For more information, see xref:../cli_reference/openshift_cli/managing-cli-plugins-krew.adoc#managing-cli-plugin-krew[Managing CLI plug-ins with Krew].

[id="ocp-4-12-ibm-z"]
=== IBM Z and LinuxONE

[id="ocp-4-12-ibm-power"]
=== IBM Power

[id="ocp-4-12-images"]
=== Images

A new import value, `importMode`, has been added to the `importPolicy` parameter of image streams. The following fields are available for this value:

* `Legacy`: `Legacy` is the default value for `importMode`. When active, the manifest list is discarded, and a single sub-manifest is imported. The platform is chosen in the following order of priority:
+
. Tag annotations
. Control plane architecture
. Linux/AMD64
. The first manifest in the list

* `PreserveOriginal`: When active, the original manifest is preserved. For manifest lists, the manifest list and all of its sub-manifests are imported.


[id="ocp-4-12-security"]
=== Security and compliance

[id="ocp-4-12-networking"]
=== Networking

[id="ocp-4-12-ovn-kubernetes-default-network-plugin"]
==== OVN-Kubernetes is now the default networking plugin

When installing a new cluster the OVN-Kubernetes network plugin is the default networking plugin. For all prior versions of {product-title}, OpenShift SDN was the default networking plugin.

The OVN-Kubernetes network plugin includes a wider array of features than OpenShift SDN, including:

- Support for all existing OpenShift SDN features
- Support for xref:../networking/ovn_kubernetes_network_provider/converting-to-dual-stack.adoc#converting-to-dual-stack[IPv6 networks]
- Support for xref:../networking/ovn_kubernetes_network_provider/configuring-ipsec-ovn.adoc#configuring-ipsec-ovn[Configuring IPsec encryption]
- Complete support for the xref:../networking/network_policy/about-network-policy.adoc#about-network-policy[`NetworkPolicy` API]
- Support for xref:../networking/ovn_kubernetes_network_provider/logging-network-policy.adoc#logging-network-policy[audit logging of network policy events]
- Support for xref:../networking/ovn_kubernetes_network_provider/tracking-network-flows.adoc#tracking-network-flows[network flow tracking] in NetFlow, sFlow, and IPFIX formats
- Support for xref:../networking/ovn_kubernetes_network_provider/configuring-hybrid-networking.adoc#configuring-hybrid-networking[hybrid networks] for Windows containers
- Support for xref:../networking/hardware_networks/configuring-hardware-offloading.adoc#configuring-hardware-offloading[hardware offloading] to compatible NICs

For more information about OVN-Kubernetes, including a feature comparison matrix with OpenShift SDN, see xref:../networking/ovn_kubernetes_network_provider/about-ovn-kubernetes.adoc#about-ovn-kubernetes[About the OVN-Kubernetes network plugin].

For information on migrating to OVN-Kubernetes from OpenShift SDN, see xref:../networking/ovn_kubernetes_network_provider/migrate-from-openshift-sdn.adoc#migrate-from-openshift-sdn[Migrating from the OpenShift SDN network plugin].

[id="ocp-4-12-networking-metrics"]
==== Enhancements to networking metrics

The following metrics are now available for the OVN-Kubernetes network plugin:

* `ovn_controller_southbound_database_connected`
* `ovnkube_master_libovsdb_monitors`
* `ovnkube_master_network_programming_duration_seconds`
* `ovnkube_master_network_programming_ovn_duration_seconds`
* `ovnkube_master_egress_routing_via_host`
* `ovs_vswitchd_interface_resets_total`
* `ovs_vswitchd_interface_rx_dropped_total`
* `ovs_vswitchd_interface_tx_dropped_total`
* `ovs_vswitchd_interface_rx_errors_total`
* `ovs_vswitchd_interface_tx_errors_total`
* `ovs_vswitchd_interface_collisions_total`

The following metric has been removed:

* `ovnkube_master_skipped_nbctl_daemon_total`

[id="ocp-4-12-k8s-nmstate-support-for-vsphere"]
==== Kubernetes NMState in VMware vSphere now supported
Beginning with {product-title} {product-version}, you can configure the networking settings such as DNS servers or search domains, VLANs, bridges, and interface bonding using the Kubernetes NMState Operator on your VMware vSphere instance.

For more information, see xref:../networking/k8s_nmstate/k8s-nmstate-about-the-k8s-nmstate-operator.adoc[About the Kubernetes NMState Operator].

[id="ocp-4-12-k8s-nmstate-support-for-openstack"]
==== Kubernetes NMState in OpenStack now supported
Beginning with {product-title} {product-version}, you can configure the networking settings such as DNS servers or search domains, VLANs, bridges, and interface bonding using the Kubernetes NMState Operator on your OpenStack instance.

For more information, see xref:../networking/k8s_nmstate/k8s-nmstate-about-the-k8s-nmstate-operator.adoc[About the Kubernetes NMState Operator].

[id="ocp-4-12-nw-external-dns-operator"]
==== External DNS Operator

In {product-title} 4.12, the External DNS Operator modifies the format of the ExternalDNS wildcard TXT records on AzureDNS. The External DNS Operator replaces the asterisk with `any` in ExternalDNS wildcard TXT records. You must avoid the ExternalDNS wildcard A and CNAME records having `any` leftmost subdomain because this might cause a conflict.

The upstream version of `ExternalDNS` for {product-title} 4.12 is v0.13.1.

[id="ocp-4-12-nw-metrics-telemetry"]
==== Capturing metrics and telemetry associated with the use of routes and shards

In {product-title} 4.12, the Cluster Ingress Operator exports a new metric named `route_metrics_controller_routes_per_shard`. The `shard_name` label of the metric specifies the name of the shards. This metric gives the total number of routes that are admitted by each shard.

The following metrics are sent through telemetry.

.Metrics sent through telemetry
[cols="1,1,1",options="header"]
|===
| Name | Recording rule expression | Description

| `cluster:route_metrics_controller_routes_per_shard:min`
| `min(route_metrics_controller_routes_per_shard)`
| Tracks the minimum number of routes admitted by any of the shards

| `cluster:route_metrics_controller_routes_per_shard:max`
| `max(route_metrics_controller_routes_per_shard)`
| Tracks the maximum number of routes admitted by any of the shards

| `cluster:route_metrics_controller_routes_per_shard:avg`
| `avg(route_metrics_controller_routes_per_shard)`
| Tracks the average value of the `route_metrics_controller_routes_per_shard` metric

| `cluster:route_metrics_controller_routes_per_shard:median`
| `quantile(0.5, route_metrics_controller_routes_per_shard)`
| Tracks the median value of the `route_metrics_controller_routes_per_shard` metric

| `cluster:openshift_route_info:tls_termination:sum`
| `sum (openshift_route_info) by (tls_termination)`
| Tracks the number of routes for each `tls_termination` value. The possible values for `tls_termination` are `edge`, `passthrough` and `reencrypt`

|===

[id="ocp-4-12-nw-aws-load-balancer-operator"]
==== AWS Load Balancer Operator

In {product-title} 4.12, the AWS Load Balancer controller now implements the Kubernetes Ingress specification for multiple matches. If multiple paths within an Ingress match a request, the longest matching path takes the precedence. If two paths still match, paths with an exact path type take precedence over a prefix path type.

The AWS Load Balancer Operator sets the `EnableIPTargetType` feature gate to `false`. The AWS Load Balancer controller disables the support for services and ingress resources for `target-type` `ip`.

The upstream version of `aws-load-balancer-controller` for an {product-title} 4.12 is v2.4.4.

[id="ocp-4-12-nw-ingress-autoscaling"]
==== Ingress Controller Autoscaling (Technology Preview)

You can now use the {product-title} Custom Metrics Autoscaler Operator to dynamically scale the default Ingress Controller based on metrics in your deployed cluster, such as the number of worker nodes available. The Custom Metrics Autoscaler is available as a Technology Preview feature.

For more information, see xref:../networking/ingress-operator.adoc#nw-autoscaling-ingress-controller_configuring-ingress[Autoscaling an Ingress Controller].

[id="ocp-4-12-nw-ingress-haproxy-maxconn-default"]
==== HAProxy maxConnections default is now 50,000

In {product-title} 4.12, the default value for the `maxConnections` setting is now 50000. Previously starting with {product-title} 4.11, the default value for the `maxConnections` setting was 20000.

For more information, see xref:../networking/ingress-operator.adoc#nw-ingress-controller-configuration-parameters_configuring-ingress[Ingress Controller configuration parameters].

[id="ocp-4-12-nw-configure-dns-management"]
==== Configuration of an Ingress Controller for manual DNS management

You can now configure an Ingress Controller to stop automatic DNS management and start manual DNS management. Set the `dnsManagementPolicy` parameter to specify automatic or manual DNS management.

For more information, see xref:../networking/ingress-controller-dnsmgt.adoc#ingress-controller-dnsmgt[Configuring an Ingress Controller to manually manage DNS].

[id="ocp-4-12-networking-supported-hardware-for-sr-iov"]
==== Supported hardware for SR-IOV (Single Root I/O Virtualization)

{product-title} 4.12 adds support for the following SR-IOV devices:

* MT2892 Family [ConnectX&#8209;6{nbsp}Dx]
* MT42822 BlueField&#8209;2 in ConnectX&#8209;6 NIC mode
* Silicom STS Family

For more information, see xref:../networking/hardware_networks/about-sriov.adoc#supported-devices_about-sriov[Supported devices].

[id="ocp-4-12-multi-network-policy-supported-for-sr-iov"]
==== Multi-network-policy supported for SR-IOV (Technology Preview)

{product-title} 4.12 adds support for configuring multi-network policy for SR-IOV devices.

You can now configure multi-network for SR-IOV additional networks. Configuring SR-IOV additional networks is a Technology Preview feature and is only supported with kernel network interface cards (NICs).

For more information, see xref:../networking/multiple_networks/configuring-multi-network-policy.adoc#configuring-multi-network-policy[Configuring multi-network policy].

[id="ocp-4-12-switch-aws-load-balancer"]
==== Switch between AWS load balancer types without deleting the Ingress Controller

You can update the Ingress Controller to switch between an AWS Classic Load Balancer (CLB) and an AWS Network Load Balancer (NLB) without deleting the Ingress Controller.

For more information, see xref:../networking/configuring_ingress_cluster_traffic/configuring-ingress-cluster-traffic-aws.adoc[Configuring ingress cluster traffic on AWS].

[id="ocp-4-12-ipv6-gratuitous-ARPs-default-SR-IOV"]
==== IPv6 unsolicited neighbor advertisements and IPv4 gratuitous address resolution protocol now default on the SR-IOV CNI plugin

Pods created with the Single Root I/O Virtualization (SR-IOV) CNI plugin, where the IP address management CNI plugin has assigned IPs, now send IPv6 unsolicited neighbor advertisements and/or IPv4 gratuitous address resolution protocol by default onto the network. This enhancement notifies hosts of the new pod's MAC address for a particular IP to refresh ARP/NDP caches with the correct information.

For more information, see xref:../networking/hardware_networks/about-sriov.adoc#supported-devices_about-sriov[Supported devices].

[id="ocp-4-12-coredns-cache-tuning"]
==== Support for CoreDNS cache tuning

You can now configure the time-to-live (TTL) duration of both successful and unsuccessful DNS queries cached by CoreDNS.

For more information, see xref:../networking/dns-operator.adoc#nw-dns-cache-tuning_dns-operator[Tuning the CoreDNS cache].

[id="ocp-4-12-ovn-kubernetes-supports-configuration-internal-subnet"]
==== OVN-Kubernetes supports configuration of internal subnet

Previously, the subnet that OVN-Kubernetes uses internally was `100.64.0.0/16` for IPv4 and `fd98::/48` for IPv6 and could not be modified. To support instances when these subnets overlap with existing subnets in your infrastructure, you can now change these internal subnets to avoid any overlap.

For more information, see xref:../networking/cluster-network-operator.adoc#nw-operator-cr-cno-object_cluster-network-operator[Cluster Network Operator configuration object]

[id=ocp-4-12-egress-ip-support]
==== Egress IP support on {rh-openstack-first}

{rh-openstack}, paired with {product-title}, now supports automatic attachment and detachment of Egress IP addresses. The traffic from one or more pods in any number of namespaces has a consistent source IP address for services outside of the cluster. This support applies to OpenShift SDN and OVN-Kubernetes as default network providers.

[id="ocp-4-12-openshift-sdn-ovn-kubernetes-feature-migration-support"]
==== OpenShift SDN to OVN-Kubernetes feature migration support

If you plan to migrate from the OpenShift SDN network plugin to the OVN-Kubernetes network plugin, your configurations for the following capabilities are automatically converted to work with OVN-Kubernetes:

* Egress IP addresses
* Egress firewalls
* Multicast

For more information about how the migration to OVN-Kubernetes works, see xref:../networking/ovn_kubernetes_network_provider/migrate-from-openshift-sdn.adoc#migrate-from-openshift-sdn[Migrating from the OpenShift SDN cluster network provider].

[id="ocp-4-12-egress-firewall-audit-logging"]
==== Egress firewall audit logging

For the OVN-Kubernetes network plugin, egress firewalls support audit logging using the same mechanism that network policy audit logging uses. For more information, see xref:../networking/ovn_kubernetes_network_provider/logging-network-policy.adoc#logging-network-policy[Logging for egress firewall and network policy rules].

[id="ocp-4-12-announce-IP-from-node-subset-metallb"]
==== Advertise MetalLB from a given address pool from a subset of nodes
With this update, in BGP mode, you can use the node selector to advertise the MetalLB service from a subset of nodes, using a specific pool of IP addresses. This feature was introduced as a Technology Preview feature in {product-title} 4.11 and is now generally available in {product-title} 4.12 for BGP mode only. L2 mode remains a Technology Preview feature.

For more information, see xref:../networking/metallb/about-advertising-ipaddresspool.adoc#nw-metallb-advertise-ip-pools-to-node-subset_about-advertising-ip-address-pool[Advertising an IP address pool from a subset of nodes].

[id="ocp-4-12-ne-metallb-deployment-specs"]
==== Additional deployment specifications for MetalLB
This update provides additional deployment specifications for MetalLB. When you use a custom resource to deploy MetalLB, you can use these additional deployment specifications to manage how MetalLB `speaker` and `controller` pods deploy and run in your cluster. For example, you can use MetalLB deployment specifications to manage where MetalLB pods are deployed, define CPU limits for MetalLB pods, and assign runtime classes to MetalLB pods.

For more information about deployment specifications for MetalLB, see xref:../networking/metallb/metallb-operator-install.adoc#nw-metallb-operator-deployment-specifications-for-metallb_metallb-operator-install[Deployment specifications for MetalLB].

[id="overriding-default-node-ip-selection-logic"]
==== Node IP selection improvements 

Previously, the `nodeip-configuration` service on a cluster host selected the IP address from the interface that the default route used. If multiple routes were present, the service would select the route with the lowest metric value. As a result, network traffic could be distributed from the incorrect interface. 

With {product-title} 4.12, a new interface has been added to the `nodeip-configuration` service, which allows users to create a hint file. The hint file contains a variable, `NODEIP_HINT`, that overrides the default IP selection logic and selects a specific node IP address from the subnet `NODEIP_HINT` variable. Using the `NODEIP_HINT` variable allows users to specify which IP address is used, ensuring that network traffic is distributed from the correct interface. 

For more information, see xref:../support/troubleshooting/troubleshooting-network-issues.html#overriding-default-node-ip-selection-logic_troubleshooting-network-issues[Optional: Overriding the default node IP selection logic]. 

[id="ocp-4-12-storage"]
=== Storage

[id="ocp-4-12-registry"]
=== Registry

[id="ocp-4-12-olm"]
=== Operator lifecycle

[id="ocp-4-12-osdk"]
=== Operator development

[id="ocp-4-12-osdk-security-context-config"]
==== Configuring the security context of a catalog pod

You can configure the security context of a catalog pod by using the `--security-context-config` flag on the `run bundle` and `bundle-upgrade` subcommands. The flag enables seccomp profiles to comply with pod security admission. The flag accepts the values of `restricted` and `legacy`. If you do not specify a value, the seccomp profile defaults to `restricted`. If your catalog pod cannot run with restricted permissions, set the flag to `legacy`, as shown in the following example:

[source,terminal]
----
$ operator-sdk run bundle \
  --security-context-config=legacy
----

[id="ocp-4-12-osdk-bundle-validate-removed-kube-1-25-apis"]
==== Validating bundle manifests for APIs removed in Kubernetes 1.25

You can now check bundle manifests for APIs removed from Kubernetes 1.25 by using the Operator Framework suite of tests with the `bundle validate` subcommand.

For example:

[source,terminal]
----
$ operator-sdk bundle validate .<bundle_dir_or_image> \
  --select-optional suite=operatorframework \
  --optional-values=k8s-version=1.25
----

If your Operator requests permission to use any of the APIs removed from Kubernetes 1.25 the command displays a warning message.

If any of the API versions removed from Kubernetes 1.25 are included in your Operator's cluster service version (CSV), the command displays an error message.

See xref:../release_notes/ocp-4-12-release-notes.adoc#ocp-4-12-removed-kube-1-25-apis[Beta APIs removed from Kubernetes 1.25] and the xref:../operators/operator_sdk/osdk-cli-ref.adoc#osdk-cli-ref-bundle-validate[Operator SDK CLI reference] for more information.

[id="ocp-4-12-jenkins"]
=== Jenkins

[id="ocp-4-12-machine-api"]
=== Machine API

[id="ocp-4-12-mapi-control-plane-machine-sets"]
==== Control plane machine sets

{product-title} 4.12 introduces control plane machine sets. Control plane machine sets provide management capabilities for control plane machines that are similar to what compute machine sets provide for compute machines. For more information, see xref:../machine_management/control_plane_machine_management/cpmso-about.adoc#cpmso-about[Managing control plane machines].

[id="ocp-4-12-mapi-autoscaler-verbosity"]
==== Specifying cluster autoscaler log level verbosity

{product-title} now supports setting the log level verbosity of the cluster autoscaler by setting the `logVerbosity` parameter in the `ClusterAutoscaler` custom resource. For more information, see the xref:../machine_management/applying-autoscaling.adoc#cluster-autoscaler-cr_applying-autoscaling[`ClusterAutoscaler` resource definition].

[id="ocp-4-12-azure-boot-diagnostics"]
==== Enabling Azure boot diagnostics

{product-title} now supports enabling boot diagnostics on Azure machines that your machine set creates. For more information, see "Enabling Azure boot diagnostics" for xref:../machine_management/creating_machinesets/creating-machineset-azure.adoc#machineset-azure-boot-diagnostics_creating-machineset-azure[compute machines] or xref:../machine_management/control_plane_machine_management/cpmso-using.adoc#machineset-azure-boot-diagnostics_cpmso-using[control plane machines].

[id="ocp-4-12-machine-config-operator"]
=== Machine Config Operator

[id="ocp-4-12-nodes"]
=== Nodes

[id="ocp-4-12-updating-interface-specific-list"]
==== Updating the interface-specific safe list (Technology Preview)

{product-title} now supports updating the default interface-specific safe `sysctls`.

You can add or remove `sysctls` from the predefined list.
When you add `sysctls`, they can be set across all nodes.
Updating the interface-specific safe `sysctls` list is a Technology Preview feature only.

For more information, see xref:../nodes/containers/nodes-containers-sysctls.adoc#updating-interface-specific-safe-sysctls-list_nodes-containers-using[Updating the interface-specific safe sysctls list].

[id="ocp-4-12-node-cron-job-time-zone"]
==== Cron job time zones (Technology Preview)

Setting a time zone for a cron job schedule is now offered as a link:https://access.redhat.com/support/offerings/techpreview[Technology Preview]. If a time zone is not specified, the Kubernetes controller manager interprets the schedule relative to its local time zone.

For more information, see xref:../nodes/jobs/nodes-nodes-jobs.adoc#nodes-nodes-jobs-creating-cron_nodes-nodes-jobs[Creating cron jobs].

[id="ocp-4-12-node-cgroups-v2"]
==== Linux Control Group version 2 promoted to Technology Preview

{product-title} support for link:https://www.kernel.org/doc/html/latest/admin-guide/cgroup-v2.html[Linux Control Group version 2] (cgroup v2) has been promoted to Technology Preview. cgroup v2 is the next version of the kernel link:https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/6/html/resource_management_guide/ch01[control groups]. cgroups v2 offers multiple improvements, including a unified hierarchy, safer sub-tree delegation, new features such as link:https://www.kernel.org/doc/html/latest/accounting/psi.html[Pressure Stall Information], and enhanced resource management and isolation. For more information, see xref:../nodes/clusters/nodes-cluster-cgroups-2.adoc#nodes-cluster-cgroups-2[Enabling Linux Control Group version 2 (cgroup v2)].

[id="ocp-4-12-node-cgroups-crun"]
==== crun container runtime (Technology Preview)

{product-title} now supports the crun container runtime in Technology Preview. You can switch between the crun container runtime and the default container runtime as needed by using a `ContainerRuntimeConfig` custom resource (CR). For more information, see xref:../nodes/containers/nodes-containers-using.adoc#nodes-containers-runtimes[About the container engine and container runtime].

[id="ocp-4-11-logging"]
=== Logging

[id="ocp-4-12-monitoring"]
=== Monitoring

The monitoring stack for this release includes the following new and modified features.

[id="ocp-4-12-monitoring-updates-to-monitoring-stack-compnents-and-dependencies"]
==== Updates to monitoring stack components and dependencies
This release includes the following version updates for monitoring stack components and dependencies:

* kube-state-metrics to 2.6.0
* node-exporter to 1.4.0
* prom-label-proxy to 0.5.0
* Prometheus to 2.39.1
* prometheus-adapter to 0.10.0
* prometheus-operator to 0.60.1
* Thanos to 0.28.1

[id="ocp-4-12-monitoring-changes-to-alerting-rules"]
==== Changes to alerting rules

[NOTE]
====
Red Hat does not guarantee backward compatibility for recording rules or alerting rules.
====

* *New*
** Added the `TelemeterClientFailures` alert, which triggers when a cluster tries and fails to submit Telemetry data at a certain rate over a period of time. The alert fires when the rate of failed requests reaches 20% of the total rate of requests within a 15-minute window.
* *Changed*
** The `KubeAggregatedAPIDown` alert now waits 900 seconds rather than 300 seconds before sending a notification.
** The `NodeClockNotSynchronising` and `NodeClockSkewDetected` alerts now only evaluate metrics from the `node-exporter` job.
** The `NodeRAIDDegraded` and `NodeRAIDDiskFailure` alerts now include a device label filter to match only the value returned by `mmcblk.p.+|nvme.+|sd.+|vd.+|xvd.+|dm-.+|dasd.+`.
** The `PrometheusHighQueryLoad` and `ThanosQueryOverload` alerts now also trigger when a high querying load exists on the query layer.

[id="ocp-4-12-monitoring-new-option-to-specify-pod-topology-spread-constraints-for-monitoring-components"]
==== New option to specify pod topology spread constraints for monitoring components
You can now use pod topology spread constraints to control how Prometheus, Thanos Ruler, and Alertmanager pods are spread across a network topology when {product-title} pods are deployed in multiple availability zones.

[id="ocp-4-12-monitoring-new-option-to-improve-data-consistency-for-prometheus-adapter"]
==== New option to improve data consistency for Prometheus Adapter
You can now configure an optional kubelet service monitor for Prometheus Adapter (PA) that improves data consistency across multiple autoscaling requests.
Enabling this service monitor eliminates the possibility that two queries sent at the same time to PA might yield different results because the underlying PromQL queries executed by PA might be on different Prometheus servers.

[id="ocp-4-12-monitoring-update-to-alertmanager-configuration-for-additional-secret-keys"]
==== Update to Alertmanager configuration for additional secret keys
With this release, if you configure an Alertmanager secret to hold additional keys and if the Alertmanager configuration references these keys as files (such as templates, TLS certificates, or tokens), your configuration settings must point to these keys by using an absolute path rather than a relative path.
These keys are available under the `/etc/alertmanager/config` directory.
In earlier releases of {product-title}, you could use relative paths in your configuration to point to these keys because the Alertmanager configuration file was located in the same directory as the keys.

[IMPORTANT]
====
If you are upgrading to {product-title} {product-version} and have specified relative paths for additional Alertmanager secret keys that are referenced as files, you must change these relative paths to absolute paths in your Alertmanager configuration.
Otherwise, alert receivers that use the files will fail to deliver notifications.
====


[id="ocp-4-12-scalability-and-performance"]
=== Scalability and performance

[id="ocp-4-12-rsp-workload-hints"]
==== Disabling realtime using workload hints removes Receive Packet Steering from the cluster
At the cluster level by default, a systemd service sets a Receive Packet Steering (RPS) mask for virtual network interfaces. The RPS mask routes interrupt requests from virtual network interfaces according to the list of reserved CPUs defined in the performance profile. At the container level, a `CRI-O` hook script also sets an RPS mask for all virtual network devices.

With this update, if you set `spec.workloadHints.realTime` in the performance profile to `False`, the system also disables both the systemd service and the `CRI-O` hook script which set the RPS mask. The system disables these RPS functions because RPS is typically relevant to use cases requiring low-latency, realtime workloads only.

To retain RPS functions even when you set `spec.workloadHints.realTime` to `False`, see the _RPS Settings_ section of the Red Hat Knowledgebase solution link:https://access.redhat.com/solutions/5532341[Performance addons operator advanced configuration].

For more information about configuring workload hints, see xref:../scalability_and_performance/cnf-low-latency-tuning.adoc#cnf-understanding-workload-hints_cnf-master[Understanding workload hints].

[id="ocp-4-12-tuned"]
==== Tuned profile

The `tuned` profile now defines the `fs.aio-max-nr` `sysctl` value by default, improving asynchronous I/O performance for default node profiles.

[id="tuning-of-power-states"]
==== Power-saving configurations

In {product-title} {product-version}, by enabling C-states and OS-controlled P-states, you can use different power-saving configurations for critical and non-critical workloads. You can apply the configurations through the new `perPodPowerManagement` workload hint, and the `cpu-c-states.crio.io` and `cpu-freq-governor.crio.io` CRI-O annotations. For more information about the feature, see xref:../scalability_and_performance/cnf-low-latency-tuning.adoc#node-tuning-operator-pod-power-saving-config_cnf-master[Power-saving configurations].

[id="scalability-and-performance-sno-additional-worker-node"]
==== {sno-caps} cluster expansion with worker nodes

In {product-title} {product-version}, you can expand your existing {sno} clusters with additional worker nodes to increase available resources. For more information about {sno} expansion, see xref:../scalability_and_performance/ztp_far_edge/ztp-sno-additional-worker-node.adoc#ztp-additional-worker-sno_sno-additional-worker[Single-node OpenShift cluster expansion with worker nodes].

[id="ocp-4-12-insights-operator"]
=== Insights Operator

[id="ocp-4-12-auth"]
=== Authentication and authorization

[id="ocp-4-12-notable-technical-changes"]
== Notable technical changes

{product-title} {product-version} introduces the following notable technical changes.

// Note: use [discrete] for these sub-headings.

[discrete]
[id="ocp-4-12-auth-aws-sts-endpoints"]
=== AWS Security Token Service regional endpoints

The Cloud Credential Operator utility (`ccoctl`) now creates secrets that use regional endpoints for the xref:../authentication/managing_cloud_provider_credentials/cco-mode-sts.adoc[AWS Security Token Service (AWS STS)]. This approach aligns with AWS recommended best practices.

[discrete]
[id="ocp-4-12-auth-ccoctl-gcp-del-dir"]
=== Credentials requests directory parameter for deleting GCP resources with the Cloud Credential Operator utility

With this release, when you xref:../installing/installing_gcp/uninstalling-cluster-gcp.adoc#cco-ccoctl-deleting-sts-resources_uninstalling-cluster-gcp[delete GCP resources with the Cloud Credential Operator utility], you must specify the directory containing the files for the component `CredentialsRequest` objects.

[discrete]
[id="ocp-4-12-psa-restricted-enforcement"]
=== Future restricted enforcement for pod security admission

Currently, pod security violations are shown as warnings and logged in the audit logs, but do not cause the pod to be rejected.

Global restricted enforcement for pod security admission is currently planned for the next minor release of {product-title}. When this restricted enforcement is enabled, pods with pod security violations will be rejected.

To prepare for this upcoming change, ensure that your workloads match the pod security admission profile that applies to them. Workloads that are not configured according to the enforced security standards defined globally or at the namespace level will be rejected. The `restricted-v2` SCC admits workloads according to the link:https://kubernetes.io/docs/concepts/security/pod-security-standards/#restricted[Restricted] Kubernetes definition.

If you are receiving pod security violations, see the following resources:

* See xref:../authentication/understanding-and-managing-pod-security-admission.adoc#security-context-constraints-psa-alert-eval_understanding-and-managing-pod-security-admission[Identifying pod security violations] for information about how to find which workloads are causing pod security violations.

* See xref:../authentication/understanding-and-managing-pod-security-admission.adoc#security-context-constraints-psa-synchronization_understanding-and-managing-pod-security-admission[Security context constraint synchronization with pod security standards] to understand when pod security admission label synchronization is performed. Pod security admission labels are not synchronized in certain situations, such as the following situations:
** The workload is running in a system-created namespace that is prefixed with `openshift-`.
** The workload is running on a pod that was created directly without a pod controller.

* If necessary, you can set a custom admission profile on the namespace or pod by setting the `pod-security.kubernetes.io/enforce` label.

[discrete]
[id="ocp-4-12-operator-sdk-1-25-1"]
==== Operator SDK 1.26.0

{product-title} 4.12 supports Operator SDK 1.26.0. See xref:../cli_reference/osdk/cli-osdk-install.adoc#cli-osdk-install[Installing the Operator SDK CLI] to install or update to this latest version.

[NOTE]
====
Operator SDK 1.26.0 supports Kubernetes 1.25.

For more information, see xref:../release_notes/ocp-4-12-release-notes.adoc#ocp-4-12-removed-kube-1-25-apis[Beta APIs removed from Kubernetes 1.25] and xref:../release_notes/ocp-4-12-release-notes.adoc#ocp-4-12-osdk-bundle-validate-removed-kube-1-25-apis[Validating bundle manifests for APIs removed from Kubernetes 1.25].
====

If you have Operator projects that were previously created or maintained with Operator SDK 1.22.0, update your projects to keep compatibility with Operator SDK 1.26.0.

* xref:../operators/operator_sdk/golang/osdk-golang-updating-projects.adoc#osdk-upgrading-projects_osdk-golang-updating-projects[Updating Go-based Operator projects]

* xref:../operators/operator_sdk/ansible/osdk-ansible-updating-projects.adoc#osdk-upgrading-projects_osdk-ansible-updating-projects[Updating Ansible-based Operator projects]

* xref:../operators/operator_sdk/helm/osdk-helm-updating-projects.adoc#osdk-upgrading-projects_osdk-helm-updating-projects[Updating Helm-based Operator projects]

* xref:../operators/operator_sdk/helm/osdk-hybrid-helm-updating-projects.adoc#osdk-upgrading-projects_osdk-hybrid-helm-updating-projects[Updating Hybrid Helm-based Operator projects]

* xref:../operators/operator_sdk/java/osdk-java-updating-projects.adoc#osdk-upgrading-projects_osdk-java-updating-projects[Updating Java-based Operator projects]

[id="ocp-4-12-deprecated-removed-features"]
== Deprecated and removed features

Some features available in previous releases have been deprecated or removed.

Deprecated functionality is still included in {product-title} and continues to be supported; however, it will be removed in a future release of this product and is not recommended for new deployments. For the most recent list of major functionality deprecated and removed within {product-title} {product-version}, refer to the table below. Additional details for more functionality that has been deprecated and removed are listed after the table.

In the following tables, features are marked with the following statuses:

* _General Availability_
* _Deprecated_
* _Removed_

[discrete]
=== Operator deprecated and removed features

.Operator deprecated and removed tracker
[cols="4,1,1,1",options="header"]
|====
|Feature |4.10 |4.11 | 4.12

|SQLite database format for Operator catalogs
|Deprecated
|Deprecated
|Deprecated

|====

[discrete]
=== Images deprecated and removed features

.Images deprecated and removed tracker
[cols="4,1,1,1",options="header"]
|====
|Feature |4.10 |4.11 | 4.12

|`ImageChangesInProgress` condition for Cluster Samples Operator
|Deprecated
|Deprecated
|Deprecated

|`MigrationInProgress` condition for Cluster Samples Operator
|Deprecated
|Deprecated
|Deprecated

|Removal of Jenkins images from install payload
|General Availability
|Removed
|Removed

|====

[discrete]
=== Monitoring deprecated and removed features

.Monitoring deprecated and removed tracker
[cols="4,1,1,1",options="header"]
|====
|Feature |4.10 |4.11 | 4.12

|Grafana component in monitoring stack
|Deprecated
|Removed
|Removed

|Access to Prometheus and Grafana UIs in monitoring stack
|Deprecated
|Removed
|Removed

|====

[discrete]
=== Installation deprecated and removed features

.Installation deprecated and removed tracker
[cols="4,1,1,1",options="header"]
|====
|Feature |4.10 |4.11 | 4.12

|vSphere 6.7 Update 2 or earlier
|Deprecated
|Removed
|Removed

|vSphere 7.0 Update 1 or earlier
|General Availability
|Deprecated
|Deprecated

|VMware ESXi 6.7 Update 2 or earlier
|Deprecated
|Removed
|Removed

|VMware ESXi 7.0 Update 1 or earlier
|General Availability
|Deprecated
|Deprecated

|CoreDNS wildcard queries for the `cluster.local` domain
|General Availability
|General Availability
|Deprecated

|====

[discrete]
=== Updating clusters deprecated and removed features

.Updating clusters deprecated and removed tracker
[cols="4,1,1,1",options="header"]
|====
|Feature |4.10 |4.11 | 4.12

|Virtual hardware version 13
|Deprecated
|Removed
|Removed

|====

[discrete]
=== Storage deprecated and removed features

.Storage deprecated and removed tracker
[cols="4,1,1,1",options="header"]
|====
|Feature |4.10 |4.11 | 4.12

|`Snapshot.storage.k8s.io/v1beta1` API endpoint
|Deprecated
|Removed
|Removed

|Persistent storage using FlexVolume
|Deprecated
|Deprecated
|Deprecated

|====

[discrete]
=== Authentication and authorization deprecated and removed features

.Authentication and authorization deprecated and removed tracker
[cols="4,1,1,1",options="header"]
|====
|Feature |4.10 |4.11 | 4.12

|Automatic generation of service account token secrets
|General Availability
|Removed
|Removed

|====

[discrete]
=== Specialized hardware and driver enablement deprecated and removed features

.Specialized hardware and driver enablement deprecated and removed tracker
[cols="4,1,1,1",options="header"]
|====
|Feature |4.10 |4.11 | 4.12

|Special Resource Operator (SRO)
|General Availability
|General Availability
|Deprecated

|====

[discrete]
=== Multi-architecture deprecated and removed features

.Multi-architecture deprecated and removed tracker
[cols="4,1,1,1",options="header"]
|====
|Feature |4.10 |4.11 | 4.12

|IBM POWER8 all models (`ppc64le`)
|General Availability
|General Availability
|Deprecated

|IBM IBM POWER9 AC922 (`ppc64le`)
|General Availability
|General Availability
|Deprecated

|IBM IBM POWER9 IC922 (`ppc64le`)
|General Availability
|General Availability
|Deprecated

|IBM IBM POWER9 LC922 (`ppc64le`)
|General Availability
|General Availability
|Deprecated

|IBM z13 all models (`s390x`)
|General Availability
|General Availability
|Deprecated

|IBM LinuxONE Emperor (`s390x`)
|General Availability
|General Availability
|Deprecated

|IBM LinuxONE Rockhopper (`s390x`)
|General Availability
|General Availability
|Deprecated

|AMD64 (x86_64) v1 CPU
|General Availability
|General Availability
|Deprecated

|====

[id="ocp-4-12-deprecated-features"]
=== Deprecated features

[id="ocp-4-12-rhv-deprecations"]
==== Red Hat Virtualization (RHV) as a host platform for {product-title} will be deprecated

Red Hat Virtualization (RHV) will be deprecated in an upcoming release of {product-title}. Support for {product-title} on RHV will be removed from a future {product-title} release, currently planned as {product-title} 4.14.

[id="ocp-4-12-ne-deprecations"]
==== Wildcard DNS queries for the `cluster.local` domain are deprecated

CoreDNS will stop supporting wildcard DNS queries for names under the `cluster.local` domain. These queries will resolve in {product-title} {product-version} as they do in earlier versions, but support will be removed from a future {product-title} release.

[id="ocp-4-12-z13-power8-x86v1-deprecations"]
==== Specific hardware models on `ppc64le`, `s390x`, and `x86_64` v1 CPU architectures are deprecated

In {product-title} 4.12, support for {op-system} functionality is deprecated for: 

* IBM POWER8 all models (ppc64le)
* IBM POWER9 AC922 (ppc64le)
* IBM POWER9 IC922 (ppc64le)
* IBM POWER9 LC922 (ppc64le)
* IBM z13 all models (s390x)
* LinuxONE Emperor (s390x)
* LinuxONE Rockhopper (s390x)
* AMD64 (x86_64) v1 CPU

While these hardware models remain fully supported in {product-title} 4.12, Red Hat recommends that you use later hardware models.

[id="ocp-4-12-removed-features"]
=== Removed features

[id="ocp-4-12-removed-kube-1-25-apis"]
==== Beta APIs removed from Kubernetes 1.25

Kubernetes 1.25 removed the following deprecated APIs, so you must migrate manifests and API clients to use the appropriate API version. For more information about migrating removed APIs, see the link:https://kubernetes.io/docs/reference/using-api/deprecation-guide/#v1-25[Kubernetes documentation].

.APIs removed from Kubernetes 1.25
[cols="2,2,2,1",options="header",]
|===
|Resource |Removed API |Migrate to |Notable changes

|`CronJob`
|`batch/v1beta1`
|`batch/v1`
|No

|`EndpointSlice`
|`discovery.k8s.io/v1beta1`
|`discovery.k8s.io/v1`
|link:https://kubernetes.io/docs/reference/using-api/deprecation-guide/#endpointslice-v125[Yes]

|`Event`
|`events.k8s.io/v1beta1`
|`events.k8s.io/v1`
|link:https://kubernetes.io/docs/reference/using-api/deprecation-guide/#event-v125[Yes]

|`HorizontalPodAutoscaler`
|`autoscaling/v2beta1`
|`autoscaling/v2`
|No

|`PodDisruptionBudget`
|`policy/v1beta1`
|`policy/v1`
|link:https://kubernetes.io/docs/reference/using-api/deprecation-guide/#poddisruptionbudget-v125[Yes]

|`PodSecurityPolicy`
|`policy/v1beta1`
|link:https://kubernetes.io/docs/concepts/security/pod-security-admission/[Pod Security Admission] ^[1]^
|link:https://kubernetes.io/docs/reference/using-api/deprecation-guide/#psp-v125[Yes]

|`RuntimeClass`
|`node.k8s.io/v1beta1`
|`node.k8s.io/v1`
|No

|===
[.small]
1. For more information about pod security admission in {product-title}, see xref:../authentication/understanding-and-managing-pod-security-admission.adoc#understanding-and-managing-pod-security-admission[Understanding and managing pod security admission].

[id="ocp-4-12-future-removals"]
=== Future Kubernetes API removals

The next minor release of {product-title} is expected to use Kubernetes 1.26. Currently, Kubernetes 1.26 is scheduled to remove several deprecated APIs.

See the link:https://kubernetes.io/docs/reference/using-api/deprecation-guide/#v1-26[Deprecated API Migration Guide] in the upstream Kubernetes documentation for the list of planned Kubernetes API removals.

See link:https://access.redhat.com/articles/6955985[Navigating Kubernetes API deprecations and removals] for information about how to check your cluster for Kubernetes APIs that are planned for removal.

[id="ocp-4-12-bug-fixes"]
== Bug fixes
//Bug fix work for TELCODOCS-750
[discrete]
[id="ocp-4-12-bare-metal-hardware-bug-fixes"]
==== Bare Metal Hardware Provisioning

* In recent versions of server firmware the time between server operations has increased. This causes timeouts during installer-provisioned infrastructure (IPI) installations when the {product-title} installation program waits for a response from the Baseboard Management Controller (BMC). The new `python3-sushy` release increases the number of server side attempts to contact the BMC. This update accounts for the extended waiting time and avoids timeouts during installation. (link:https://issues.redhat.com/browse/OCPBUGS-4097[*OCPBUGS-4097*])

* Before this update, the Ironic provisioning service did not support Baseboard Management Controllers (BMC) that use weak eTags combined with strict eTag validation. By design, if the BMC provides a weak eTag, Ironic returns two eTags: the original eTag and the original eTag converted to the strong format for compatibility with BMC that do not support weak eTags. Although Ironic can send two eTags, BMC using strict eTag validation reject such requests due to the presence of the second eTag. As a result, on some older server hardware, bare-metal provisioning failed with the following error: `HTTP 412 Precondition Failed`. In {product-title} 4.12 and later, this behavior changes and Ironic no longer attempts to send two eTags in cases where a weak eTag is provided. Instead, if a Redfish request dependent on an eTag fails with an eTag validation error, Ironic retries the request with known workarounds. This minimizes the risk of bare-metal provisioning failures on machines with strict eTag validation. (link:https://issues.redhat.com/browse/OCPBUGS-3479[*OCPBUGS#3479*])

[discrete]
[id="ocp-4-12-builds-bug-fixes"]
==== Builds

[discrete]
[id="ocp-4-12-cloud-compute-bug-fixes"]
==== Cloud Compute

* Previously, instances were not set to respect the GCP infrastructure default option for automated restarts. As a result, instances could be created without using the infrastructure default for automatic restarts. This sometimes meant that instances were terminated in GCP but their associated machines were still listed in the `Running` state because they did not automatically restart. With this release, the code for passing the automatic restart option has been improved to better detect and pass on the default option selection from users. Instances now use the infrastructure default properly and are automatically restarted when the user requests the default functionality. (link:https://issues.redhat.com/browse/OCPBUGS-4504[*OCPBUGS-4504*])

* Previously, the GCP machine controller reconciled the state of machines every 10 hours. Other providers set this value to 10 minutes so that changes that happen outside of the Machine API system are detected within a short period. The longer reconciliation period for GCP could cause unexpected issues such as missing certificate signing requests (CSR) approvals due to an external IP address being added but not detected for an extended period. With this release, the GCP machine controller is updated to reconcile every 10 minutes to be consistent with other platforms and so that external changes are picked up sooner. (link:https://issues.redhat.com/browse/OCPBUGS-4499[*OCPBUGS-4499*])

* Previously, due to a deployment misconfiguration for the Cluster Machine Approver Operator, enabling the `TechPreviewNoUpgrade` feature set caused errors and sporadic Operator degradation. Because clusters with the `TechPreviewNoUpgrade` feature set enabled use two instances of the Cluster Machine Approver Operator and both deployments used the same set of ports, there was a conflict that lead to errors for single-node topology. With this release, the Cluster Machine Approver Operator deployment is updated to use a different set of ports for different deployments. (link:https://issues.redhat.com/browse/OCPBUGS-2621[*OCPBUGS-2621*])

* Previously, the scale from zero functionality in Azure relied on a statically compiled list of instance types mapping the name of the instance type to the number of CPUs and the amount of memory allocated to the instance type. This list grew stale over time. With this release, information about instance type sizes is dynamically gathered from the Azure API directly to prevent the list from becoming stale. (link:https://issues.redhat.com/browse/OCPBUGS-2558[*OCPBUGS-2558*])

* Previously, Machine API termination handler pods did not start on spot instances. As a result, pods that were running on tainted spot instances did not receive a termination signal if the instance was terminated. This could result in loss of data in workload applications. With this release, the Machine API termination handler deployment is modified to tolerate the taints and pods running on spot instances with taints now receive termination signals.
(link:https://issues.redhat.com/browse/OCPBUGS-1274[*OCPBUGS-1274*])

* Previously, error messages for Azure clusters did not explain that it is not possible to create new machines with public IP addresses for a disconnected install that uses only the internal publish strategy. With this release, the error message is updated for improved clarity. (link:https://issues.redhat.com/browse/OCPBUGS-519[*OCPBUGS-519*])

* Previously, the Cloud Controller Manager Operator did not check the `cloud-config` configuration file for AWS clusters. As a result, it was not possible to pass additional settings to the AWS cloud controller manager component by using the configuration file. With this release, the Cloud Controller Manager Operator checks the infrastructure resource and parses references to the `cloud-config` configuration file so that users can configure additional settings. (link:https://bugzilla.redhat.com/show_bug.cgi?id=2104373[*BZ#2104373*])

* Previously, when Azure added new instance types and enabled accelerated networking support on instance types that previously did not have it, the list of Azure instances in the machine controller became outdated. As a result, the machine controller could not create machines with instance types that did not previously support accelerated networking, even if they support this feature on Azure. With this release, the required instance type information is retrieved from Azure API before the machine is created to keep it up to date so the machine controller is able to create machines with new and updated instance types. This fix also applies to any instance types that are added in the future. (link:https://bugzilla.redhat.com/show_bug.cgi?id=2108647[*BZ#2108647*])

* Previously, the cluster autoscaler did not respect the AWS, IBM Cloud, and Alibaba Cloud topology labels for the CSI drivers when using the Cluster API provider. As a result, nodes with the topology label were not processed properly by the autoscaler when attempting to balance nodes during a scale-out event. With this release, the autoscaler's custom processors are updated so that it respects this label. The autoscaler can now balance similar node groups that are labeled by the AWS, IBM Cloud, or Alibaba CSI labels. (link:https://bugzilla.redhat.com/show_bug.cgi?id=2001027[*BZ#2001027*])

* Previously, Power VS cloud providers were not capable of fetching the machine IP address from a DHCP server. Changing the IP address did not update the node, which caused some inconsistencies, such as pending certificate signing requests. With this release, the Power VS cloud provider is updated to fetch the machine IP address from the DHCP server so that the IP addresses for the nodes are consistent with the machine IP address. (link:https://bugzilla.redhat.com/show_bug.cgi?id=2111474[*BZ#2111474*])

* Previously, machines created in early versions of {product-title} with invalid configurations could not be deleted. With this release, the webhooks that prevent the creation of machines with invalid configurations no longer prevent the deletion of existing invalid machines. Users can now successfully remove these machines from their cluster by manually removing the finalizers on these machines. (link:https://bugzilla.redhat.com/show_bug.cgi?id=2101736[*BZ#2101736*])

* Previously, short DHCP lease times, caused by `NetworkManager` not being run as a daemon or in continuous mode, caused machines to become stuck during initial provisioning and never become nodes in the cluster. With this release, extra checks are added so that if a machine becomes stuck in this state it is deleted and recreated automatically. Machines that are affected by this network condition can become nodes after a reboot from the Machine API controller. (link:https://bugzilla.redhat.com/show_bug.cgi?id=2115090[*BZ#2115090*])

* Previously, when creating a new `Machine` resource using a machine profile that does not exist in IBM Cloud, the machines became stuck in the `Provisioning` phase. With this release, validation is added to the IBM Cloud Machine API provider to ensure that a machine profile exists, and machines with an invalid machine profile are rejected by the Machine API. (link:https://bugzilla.redhat.com/show_bug.cgi?id=2062579[*BZ#2062579*])

* Previously, the Machine API provider for AWS did not verify that the security group defined in the machine specification exists. Instead of returning an error in this case, it used a default security group, which should not be used for {product-title} machines, and successfully created a machine without informing the user that the default group was used. With this release, the Machine API returns an error when users set either incorrect or empty security group names in the machine specification. (link:https://bugzilla.redhat.com/show_bug.cgi?id=2060068[*BZ#2060068*])

* Previously, the Machine API provider Azure did not treated user-provided values for instance types as case sensitive. This led to false-positive errors when instance types were correct but did not match the case. With this release, instance types are converted to the lowercase characters so that users get correct results without false-positive errors for mismatched case. (link:https://bugzilla.redhat.com/show_bug.cgi?id=2085390[*BZ#2085390*])

* Previously, there was no check for nil values in the annotations of a machine object before attempting to access the object. This situation was rare, but caused the machine controller to panic when reconciling the machine. With this release, nil values are checked and the machine controller is able to reconcile machines without annotations. (link:https://bugzilla.redhat.com/show_bug.cgi?id=2106733[*BZ#2106733*])

* Previously, the cluster autoscaler metrics for cluster CPU and memory usage would never reach, or exceed, the limits set by the `ClusterAutoscaler` resource. As a result, no alerts were fired when the cluster autoscaler could not scale due to resource limitations. With this release, a new metric called `cluster_autoscaler_skipped_scale_events_count` is added to the cluster autoscaler to more accurately detect when resource limits are reached or exceeded. Alerts will now fire when the cluster autoscaler is unable to scale the cluster up because it has reached the cluster resource limits. (link:https://bugzilla.redhat.com/show_bug.cgi?id=1997396[*BZ#1997396*])

* Previously, when the Machine API provider failed to fetch the machine IP address, it would not set the internal DNS name and the machine certificate signing requests were not automatically approved. With this release, the Power VS machine provider is updated to set the server name as the internal DNS name even when it fails to fetch the IP address. (link:https://bugzilla.redhat.com/show_bug.cgi?id=2111467[*BZ#2111467*])

* Previously, the Machine API vSphere machine controller set the `PowerOn` flag when cloning a VM. This created a `PowerOn` task that the machine controller was not aware of. If that `PowerOn` task failed, machines were stuck in the `Provisioned` phase but never powered on. With this release, the cloning sequence is altered to avoid the issue. Additionally, the machine controller now retries powering on the VM in case of failure and reports failures properly. (link:https://bugzilla.redhat.com/show_bug.cgi?id=2087981[*BZ#2087981*], link:https://issues.redhat.com/browse/OCPBUGS-954[*OCPBUGS-954*])

* With this release, AWS security groups are tagged immediately instead of after creation. This means that fewer requests are sent to AWS and the required user privileges are lowered. (link:https://bugzilla.redhat.com/show_bug.cgi?id=2098054[*BZ#2098054*], link:https://issues.redhat.com/browse/OCPBUGS-3094[*OCPBUGS-3094*])

[discrete]
[id="ocp-4-12-cluster-version-operator-bug-fixes"]
==== Cluster Version Operator

[discrete]
[id="ocp-4-12-console-Metal3-bug-fixes"]
==== Console Metal3 Plug-in

[discrete]
[id="ocp-4-12-dns-bug-fixes"]
==== Domain Name System (DNS)

[discrete]
[id="ocp-4-12-image-registry-bug-fixes"]
==== Image Registry

[discrete]
[id="ocp-4-12-installer-bug-fixes"]
==== Installer

* Previously, the number of supported user-defined tags was 8, and reserved {product-title} tags were 2 for AWS resources. With this release, the number of supported user-defined tags is now 25 and reserved {product-title} tags are 25 for AWS resources. You can now add up to 25 user tags during installation. (link:https://issues.redhat.com/browse/CFE-592[*CFE#592*])

[discrete]
[id="ocp-4-12-kube-api-server-bug-fixes"]
==== Kubernetes API server

[discrete]
[id="ocp-4-12-kube-scheduler-bug-fixes"]
==== Kubernetes Scheduler

[discrete]
[id="ocp-4-12-machine-config-operator-bug-fixes"]
==== Machine Config Operator

[discrete]
[id="ocp-4-12-compliance-operator-bug-fixes"]
==== Compliance Operator

[discrete]
[id="ocp-4-12-management-console-bug-fixes"]
==== Management Console

* Previously, the *Operator details* page attempted to display multiple error messages, but the error message component can only display a single error message at a time. As a result, relevant error messages were not displayed. With this update, the *Operator details* page displays only the first error message so the user sees a relevant error. (link: https://issues.redhat.com/browse/OCPBUGS-3927[*OCPBUGS-3927*])

* Previously, the product name for Azure Red Hat OpenShift was incorrect in Customer Case Management (CCM). As a result, the console had to use the same incorrect product name to correctly populate the fields in CCM. Once the product name in CCM was updated, the console needed to be updated as well. With this update, the same, correct product name as CCM is correctly populated with the correct Azure product name when following the link from the console. (link: https://issues.redhat.com/browse/OCPBUGS-869[*OCPBUGS-869*])

* Previously, when a plug-in page resulted in an error, the error did not reset when navigating away from the error page, and the error persisted after navigating to a page that was not the cause of the error. With this update, the error state is reset to its default when a user navigates to a new page, and the error no longer persists after navigating to a new page. (link: https://issues.redhat.com/browse/OCPBUGS-523[*OCPBUGS-523*])

* Previously, the *_View it here_* link in the *Operator details* pane for installed Operators was incorrectly built when *_All Namespaces_* was selected. As a result, the link attempted to navigate to the *Operator details* page for a cluster service version (CSV) in *All Projects*, which is an invalid route. With this update, the *_View it here_* link to use the namespace where the CSV is installed now builds correctly and the link works as expected. (link:https://issues.redhat.com/browse/OCPBUGS-184[*OCPBUGS-184*])

* Previously, line numbers with more than five digits resulted in a cosmetic issue where the line number overlays the vertical divider between the line number and the line contents making it harder to read. With this update, the amount of space available for line numbers was increased to account for longer line numbers, and the line number no longer overlays the vertical divider. (link: https://issues.redhat.com/browse/OCPBUGS-183[*OCPBUGS-183*])

[discrete]
[id="ocp-4-12-monitoring-bug-fixes"]
==== Monitoring

[discrete]
[id="ocp-4-12-networking-bug-fixes"]
==== Networking

[discrete]
[id="ocp-4-12-ne-perf-improvements"]
==== Networking performance improvements

[discrete]
[id="ocp-4-12-node-bug-fixes"]
==== Node

[discrete]
[id="ocp-4-12-openshift-cli-bug-fixes"]
==== OpenShift CLI (oc)

[discrete]
[id="ocp-4-12-Kubernetes-controller-manage-bug-fixes"]
==== Kubernetes Controller Manager

[discrete]
[id="ocp-4-12-olm-bug-fixes"]
==== Operator Lifecycle Manager (OLM)

[discrete]
[id="ocp-4-12-openshift-operator-sdk-bug-fixes"]
==== Operator SDK

[discrete]
[id="ocp-4-12-openshift-api-server-bug-fixes"]
==== OpenShift API server

[discrete]
[id="ocp-4-12-rhcos-bug-fixes"]
==== {op-system-first}

[discrete]
[id="ocp-4-12-performance-addon-operator-bug-fixes"]
==== Performance Addon Operator

[discrete]
[id="ocp-4-12-routing-bug-fixes"]
==== Routing

[discrete]
[id="ocp-4-12-scalability-and-performance-bug-fixes"]
==== Scalability and performance

[discrete]
[id="ocp-4-12-storage-bug-fixes"]
==== Storage

[discrete]
[id="ocp-4-12-web-console-developer-perspective-bug-fixes"]
==== Web console (Developer perspective)

[id="ocp-4-12-technology-preview"]
== Technology Preview features

Some features in this release are currently in Technology Preview. These experimental features are not intended for production use. Note the following scope of support on the Red Hat Customer Portal for these features:

link:https://access.redhat.com/support/offerings/techpreview[Technology Preview Features Support Scope]

In the following tables, features are marked with the following statuses:

* _Technology Preview_
* _General Availability_
* _Not Available_
* _Deprecated_

[discrete]
=== Networking Technology Preview features

.Networking Technology Preview tracker
[cols="4,1,1,1",options="header"]
|====
|Feature |4.10 |4.11 | 4.12

|PTP single NIC hardware configured as boundary clock
|Technology Preview
|General Availability
|General Availability

|PTP dual NIC hardware configured as boundary clock
|Not Available
|Technology Preview
|Technology Preview

|PTP events with boundary clock
|Technology Preview
|General Availability
|General Availability

|Pod-level bonding for secondary networks
|Technology Preview
|General Availability
|General Availability

|External DNS Operator
|Technology Preview
|Technology Preview
|Technology Preview

|AWS Load Balancer Operator
|Not Available
|Technology Preview
|Technology Preview

|Cloud controller manager for VMware vSphere
|Technology Preview
|Technology Preview
|Technology Preview

|====

[discrete]
=== Storage Technology Preview features

.Storage Technology Preview tracker
[cols="4,1,1,1",options="header"]
|====
|Feature |4.10 |4.11 | 4.12

|Shared Resources CSI Driver and Build CSI Volumes in OpenShift Builds
|Technology Preview
|Technology Preview
|Technology Preview

|CSI volume expansion
|Technology Preview
|General Availability
|General Availability

|CSI Azure File Driver Operator
|Technology Preview
|General Availability
|General Availability

|CSI automatic migration
(AWS EBS, Azure file, GCP disk, VMware vSphere)
|Technology Preview
|Technology Preview
|Technology Preview

|CSI automatic migration
(Azure Disk, OpenStack Cinder)
|Technology Preview
|General Availability
|General Availability

|CSI inline ephemeral volumes
|Technology Preview
|Technology Preview
|Technology Preview

|CSI generic ephemeral volumes
|Not Available
|General Availability
|General Availability

|Shared Resource CSI Driver
|Technology Preview
|Technology Preview
|Technology Preview

|GCP Filestore
|Not Available
|Not Available
|Technology Preview

|Automatic device discovery and provisioning with Local Storage Operator
|Technology Preview
|Technology Preview
|Technology Preview

|====

[discrete]
=== Installation Technology Preview features

.Installation Technology Preview tracker
[cols="4,1,1,1",options="header"]
|====
|Feature |4.10 |4.11 | 4.12

|Adding kernel modules to nodes with kvc
|Technology Preview
|Technology Preview
|Technology Preview

|IBM Cloud VPC clusters
|Technology Preview
|Technology Preview
|General Availability

|Selectable Cluster Inventory
|Technology Preview
|Technology Preview
|Technology Preview

|Multi-architecture clusters
|Not Available
|Technology Preview
|Technology Preview

|Disconnected mirroring with the oc-mirror CLI plug-in
|Technology Preview
|General Availability
|General Availability

|Mount shared entitlements in BuildConfigs in RHEL
|Technology Preview
|Technology Preview
|Technology Preview

|Agent-based Installer
|Not Available
|Not Available
|General Availability

|====

[discrete]
=== Node Technology Preview features

.Nodes Technology Preview tracker
[cols="4,1,1,1",options="header"]
|====
|Feature |4.10 |4.11 | 4.12

|Non-preempting priority classes
|Technology Preview
|Technology Preview
|Technology Preview

|Node Health Check Operator
|Technology Preview
|General Availability
|General Availability

|Linux Control Group version 2 (cgroup v2)
|Not Available
|Not Available
|Technology Preview

|crun container runtime
|Not Available
|Not Available
|Technology Preview

|====

[discrete]
=== Multi-Architecture Technology Preview features

.Multi-Architecture Technology Preview tracker
[cols="4,1,1,1",options="header"]
|====
|Feature |4.10 |4.11 | 4.12

|`kdump` on `x86_64` architecture
|Technology Preview
|General Availability
|General Availability

|`kdump` on `arm64` architecture
|Not Available
|Technology Preview
|Technology Preview

|`kdump` on `s390x` architecture
|Technology Preview
|Technology Preview
|Technology Preview

|`kdump` on `ppc64le` architecture
|Technology Preview
|Technology Preview
|Technology Preview

|IBM Secure Execution on {ibmzProductName} and LinuxONE
|Not Available
|Not Available
|Technology Preview

|====

[discrete]
=== Serverless Technology Preview features

.Serverless Technology Preview tracker
[cols="4,1,1,1",options="header"]
|====
|Feature |4.10 |4.11 | 4.12

|Serverless functions
|Technology Preview
|Technology Preview
|Technology Preview

|====

[discrete]
=== Specialized hardware and driver enablement Technology Preview features

.Specialized hardware and driver enablement Technology Preview tracker
[cols="4,1,1,1",options="header"]
|====
|Feature |4.10 |4.11 | 4.12

|Driver Toolkit
|Technology Preview
|Technology Preview
|General Availability

|Special Resource Operator (SRO)
|Technology Preview
|Technology Preview
|Not Available

|====

[discrete]
=== Web console Technology Preview features

.Web console Technology Preview tracker
[cols="4,1,1,1",options="header"]
|====
|Feature |4.10 |4.11 | 4.12

|Multicluster console
|Technology Preview
|Technology Preview
|Technology Preview

|Dynamic Plug-ins
|Technology Preview
|Technology Preview
|General Availability

|====

[discrete]
=== Scalability and performance Technology Preview features

.Scalability and performance Technology Preview tracker
[cols="4,1,1,1",options="header"]
|====
|Feature |4.10 |4.11 | 4.12

|Hyperthreading-aware CPU manager policy
|Technology Preview
|Technology Preview
|Technology Preview

|Node Observability Operator
|Not Available
|Technology Preview
|Technology Preview

|====

[discrete]
=== Operator Technology Preview features

.Operator Technology Preview tracker
[cols="4,1,1,1",options="header"]
|====
|Feature |4.10 |4.11 | 4.12

|Hybrid Helm Operator
|Technology Preview
|Technology Preview
|Technology Preview

|Java-based Operator
|Not Available
|Technology Preview
|Technology Preview

|Platform Operator
|Not Available
|Not Available
|Technology Preview

|Multi-cluster Engine Operator
|Technology Preview
|Technology Preview
|Technology Preview

|Node Observability Operator
|Not Available
|Not Available
|Technology Preview

|Network Observability Operator
|Not Available
|Not Available
|General Availability

|====

[discrete]
=== Monitoring Technology Preview features

.Monitoring Technology Preview tracker
[cols="4,1,1,1",options="header"]
|====
|Feature |4.10 |4.11 | 4.12

|Alert routing for user-defined projects monitoring
|Technology Preview
|General Availability
|General Availability

|Alerting rules based on platform monitoring metrics
|Not Available
|Technology Preview
|Technology Preview

|====

[discrete]
=== {rh-openstack-first} Technology Preview features

.{rh-openstack} Technology Preview tracker
[cols="4,1,1,1",options="header"]
|====
|Feature |4.10 |4.11 | 4.12

|Support for {rh-openstack} DCN
|Technology Preview
|Technology Preview
|Technology Preview

|Support for external cloud providers for clusters on {rh-openstack}
|Technology Preview
|Technology Preview
|General Availability

|OVS hardware offloading for clusters on {rh-openstack}
|Technology Preview
|General Availability
|General Availability

|====

[discrete]
=== Architecture Technology Preview features

.Architecture Technology Preview tracker
[cols="4,1,1,1",options="header"]
|====
|Feature |4.10 |4.11 | 4.12

|Hosted control planes for {product-title}
|Not Available
|Technology Preview
|Technology Preview

|Hosted control planes for Amazon Web Services (AWS)
||Not Available
|Technology Preview
|Technology Preview

|====

[discrete]
=== Machine management Technology Preview features

.Machine management Technology Preview tracker
[cols="4,1,1,1",options="header"]
|====
|Feature |4.10 |4.11 | 4.12

|Managing machines with the Cluster API
|Not Available
|Technology Preview
|Technology Preview

|Cron job time zones
|Not Available
|Not Available
|Technology Preview

|Cloud controller manager for Alibaba Cloud
|Technology Preview
|Technology Preview
|Technology Preview

|Cloud controller manager for Amazon Web Services
|Technology Preview
|Technology Preview
|Technology Preview

|Cloud controller manager for Google Cloud Platform
|Technology Preview
|Technology Preview
|Technology Preview

|Cloud controller manager for Microsoft Azure
|Technology Preview
|Technology Preview
|Technology Preview

|Cloud controller manager for {rh-openstack-first}
|Technology Preview
|Technology Preview
|General Availability

|Custom Metrics Autoscaler Operator
|Not Available
|Technology Preview
|Technology Preview

|====

[id="ocp-4-12-known-issues"]
== Known issues

// TODO: This known issue should carry forward to 4.8 and beyond! This needs some SME/QE review before being updated for 4.11. Need to check if KI should be removed or should stay.
* In {product-title} 4.1, anonymous users could access discovery endpoints. Later releases revoked this access to reduce the possible attack surface for security exploits because some discovery endpoints are forwarded to aggregated API servers. However, unauthenticated access is preserved in upgraded clusters so that existing use cases are not broken.
+
If you are a cluster administrator for a cluster that has been upgraded from {product-title} 4.1 to 4.8, you can either revoke or continue to allow unauthenticated access. Unless there is a specific need for unauthenticated access, you should revoke it. If you do continue to allow unauthenticated access, be aware of the increased risks.
+
[WARNING]
====
If you have applications that rely on unauthenticated access, they might receive HTTP `403` errors if you revoke unauthenticated access.
====
+
Use the following script to revoke unauthenticated access to discovery endpoints:
+
[source,bash]
----
## Snippet to remove unauthenticated group from all the cluster role bindings
$ for clusterrolebinding in cluster-status-binding discovery system:basic-user system:discovery system:openshift:discovery ;
do
### Find the index of unauthenticated group in list of subjects
index=$(oc get clusterrolebinding ${clusterrolebinding} -o json | jq 'select(.subjects!=null) | .subjects | map(.name=="system:unauthenticated") | index(true)');
### Remove the element at index from subjects array
oc patch clusterrolebinding ${clusterrolebinding} --type=json --patch "[{'op': 'remove','path': '/subjects/$index'}]";
done
----
+
This script removes unauthenticated subjects from the following cluster role bindings:
+
--
** `cluster-status-binding`
** `discovery`
** `system:basic-user`
** `system:discovery`
** `system:openshift:discovery`
--
+
(link:https://bugzilla.redhat.com/show_bug.cgi?id=1821771[*BZ#1821771*])

// TODO: This known issue should be removed when RHCOS images begin using RHEL 9. RHEL 9 prevents this issue from occurring.
* Intermittently, an IBM Cloud VPC cluster might fail to install because some worker machines do not start. Rather, these worker machines remain in the `Provisioned` phase.
+
There is a workaround for this issue. From the host where you performed the initial installation, delete the failed machines and run the installation program again.
+
. Verify that the status of the internal application load balancer (ALB) for the master API server is `active`.
.. Identify the cluster's infrastructure ID by running the following command:
+
[source,terminal]
----
$ oc get infrastructure/cluster -ojson | jq -r '.status.infrastructureName'
----
.. Log into the IBM Cloud account for your cluster and target the correct region for your cluster.
.. Verify that the internal ALB status is `active` by running the following command:
+
[source,terminal]
----
$ ibmcloud is lb <cluster_ID>-kubernetes-api-private  --output json | jq -r '.provisioning_status'
----
. Identify the machines that are in the `Provisioned` phase by running the following command:
+
[source,terminal]
----
$ oc get machine -n openshift-machine-api
----
+
.Example output
[source,terminal]
----
NAME                                    PHASE         TYPE       REGION    ZONE        AGE
example-public-1-x4gpn-master-0         Running       bx2-4x16   us-east   us-east-1   23h
example-public-1-x4gpn-master-1         Running       bx2-4x16   us-east   us-east-2   23h
example-public-1-x4gpn-master-2         Running       bx2-4x16   us-east   us-east-3   23h
example-public-1-x4gpn-worker-1-xqzzm   Running       bx2-4x16   us-east   us-east-1   22h
example-public-1-x4gpn-worker-2-vg9w6   Provisioned   bx2-4x16   us-east   us-east-2   22h
example-public-1-x4gpn-worker-3-2f7zd   Provisioned   bx2-4x16   us-east   us-east-3   22h
----
. Delete each failed machine by running the following command:
+
[source,terminal]
----
$ oc delete machine <name_of_machine> -n openshift-machine-api
----
. Wait for the deleted worker machines to be replaced, which can take up to 10 minutes.
. Verify that the new worker machines are in the `Running` phase by running the following command:
+
[source,terminal]
----
$ oc get machine -n openshift-machine-api
----
+
.Example output
[source,terminal]
----
NAME                                    PHASE     TYPE       REGION    ZONE        AGE
example-public-1-x4gpn-master-0         Running   bx2-4x16   us-east   us-east-1   23h
example-public-1-x4gpn-master-1         Running   bx2-4x16   us-east   us-east-2   23h
example-public-1-x4gpn-master-2         Running   bx2-4x16   us-east   us-east-3   23h
example-public-1-x4gpn-worker-1-xqzzm   Running   bx2-4x16   us-east   us-east-1   23h
example-public-1-x4gpn-worker-2-mnlsz   Running   bx2-4x16   us-east   us-east-2   8m2s
example-public-1-x4gpn-worker-3-7nz4q   Running   bx2-4x16   us-east   us-east-3   7m24s
----
. Complete the installation by running the following command. Running the installation program again ensures that the cluster's `kubeconfig` is initialized properly:
+
[source,terminal]
----
$ ./openshift-install wait-for install-complete
----
+
(link:https://issues.redhat.com/browse/OCPBUGS-1327[*OCPBUGS#1327*])

// TODO: This known issue should carry forward to 4.9 and beyond!
* The `oc annotate` command does not work for LDAP group names that contain an equal sign (`=`), because the command uses the equal sign as a delimiter between the annotation name and value. As a workaround, use `oc patch` or `oc edit` to add the annotation. (link:https://bugzilla.redhat.com/show_bug.cgi?id=1917280[*BZ#1917280*])

* Due to the inclusion of old images in some image indexes, running `oc adm catalog mirror` and `oc image mirror` might result in the following error: `error: unable to retrieve source image`. As a temporary workaround, you can use the `--skip-missing` option to bypass the error and continue downloading the image index. For more information, see link:https://access.redhat.com/solutions/6975305[Service Mesh Operator mirroring failed].

* There is a known issue with Nutanix installation where the installation fails if you use 4096-bit certificates with Prism Central 2022.x. Instead, use 2048-bit certificates. (link:https://access.redhat.com/solutions/6976743[*KCS*])

* Deleting the bidirectional forwarding detection (BFD) profile and removing the `bfdProfile` added to the border gateway protocol (BGP) peer resource does not disable the BFD. Instead, the BGP peer starts using the default BFD profile. To disable BFD from a BGP peer resource, delete the BGP peer configuration and recreate it without a BFD profile. (link:https://bugzilla.redhat.com/show_bug.cgi?id=2050824[*BZ#2050824*])

* Due to an unresolved metadata API issue, you cannot install clusters that use bare-metal workers on {rh-openstack} 16.1. Clusters on {rh-openstack} 16.2 are not impacted by this issue. (link:https://bugzilla.redhat.com/show_bug.cgi?id=2033953[*BZ#2033953*])

[id="ocp-4-12-asynchronous-errata-updates"]
== Asynchronous errata updates

Security, bug fix, and enhancement updates for {product-title} {product-version} are released as asynchronous errata through the Red Hat Network. All {product-title} {product-version} errata is https://access.redhat.com/downloads/content/290/[available on the Red Hat Customer Portal]. See the https://access.redhat.com/support/policy/updates/openshift[{product-title} Life Cycle] for more information about asynchronous errata.

Red Hat Customer Portal users can enable errata notifications in the account settings for Red Hat Subscription Management (RHSM). When errata notifications are enabled, users are notified through email whenever new errata relevant to their registered systems are released.

[NOTE]
====
Red Hat Customer Portal user accounts must have systems registered and consuming {product-title} entitlements for {product-title} errata notification emails to generate.
====

This section will continue to be updated over time to provide notes on enhancements and bug fixes for future asynchronous errata releases of {product-title} {product-version}. Versioned asynchronous releases, for example with the form {product-title} {product-version}.z, will be detailed in subsections. In addition, releases in which the errata text cannot fit in the space provided by the advisory will be detailed in subsections that follow.

[IMPORTANT]
====
For any {product-title} release, always review the instructions on xref:../updating/updating-cluster-within-minor.adoc#updating-cluster-within-minor[updating your cluster] properly.
====

//Update with relevant advisory information
[id="ocp-4-12-0-ga"]
=== RHSA-2022:xxx - {product-title} 4.12.0 image release, bug fix, and security update advisory

Issued: TBD

{product-title} release 4.12.0, which includes security updates, is now available. The list of bug fixes that are included in the update is documented in the link:https://access.redhat.com/errata/RHSA-2022:xxxx[RHSA-2022:xxxx] advisory. The RPM packages that are included in the update are provided by the link:https://access.redhat.com/errata/RHSA-2022:xxxx[RHSA-2022:xxxx] advisory.

Space precluded documenting all of the container images for this release in the advisory. See the following article for notes on the container images in this release:

You can view the container images in this release by running the following command:

[source,terminal]
----
$ oc adm release info 4.12.0 --pullspecs
----
//replace 4.y.z for the correct values for the release. You do not need to update oc to run this command.
