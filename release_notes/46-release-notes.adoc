:_mod-docs-content-type: ASSEMBLY
[id="release-notes-46"]
= Red{nbsp}Hat Advanced Cluster Security for Kubernetes 4.6
include::modules/common-attributes.adoc[]
:context: release-notes-46

toc::[]

{rh-rhacs-first} is an enterprise-ready, Kubernetes-native container security solution that protects your vital applications across the build, deploy, and runtime stages of the application lifecycle.
{product-title} deploys into your infrastructure and integrates with your DevOps tools and workflows. This integration provides better security and compliance, enabling DevOps and InfoSec teams to operationalize security.

.Release dates
[options="header"]
|====

|{product-title-short} version |Released on

|`4.6.0` | 3 December 2024

|====

[id="about-this-release-450_{context}"]
== About release 4.6.0

{product-title-short} 4.6 includes the following new features, improvements, and updates:

Architecture::

* xref:../release_notes/46-release-notes.adoc#arm-support-secured-clusters_release-notes-46[Support for ARM architecture in secured clusters (Technology Preview)]

Compliance::

* xref:../release_notes/46-release-notes.adoc#certifications_release-notes-46[Certifications for {product-title-managed}]
* xref:../release_notes/46-release-notes.adoc#compliance-reporting-updates_release-notes-46[Compliance reporting (Technology Preview)]

Documentation::

* xref:../release_notes/46-release-notes.adoc#api-docs_release-notes-46[API documentation available publicly]
* xref:../release_notes/46-release-notes.adoc#using-feature-flags_release-notes-46[Feature flag documentation]

Network::

* xref:../release_notes/46-release-notes.adoc#network-graph-external-IP_release-notes-46[Visualizing external entities in the network graph] (Technology Preview)

Platform::

* xref:../release_notes/46-release-notes.adoc#microsoft-sentinel-notifier_release-notes-46[Microsoft Sentinel notifier]
* xref:../release_notes/46-release-notes.adoc#s3-clone-support-backup_release-notes-46[Support for backups using non-AWS S3 compatible providers]

Policy::

* xref:../release_notes/46-release-notes.adoc#policy-as-code_release-notes-46[Support for policy as code (Technology Preview)]

Vulnerability Management::

* xref:../release_notes/46-release-notes.adoc#scanner-v4-csaf-vex_release-notes-46[Scanner V4 use of CSAF-VEX for vulnerability data]
* xref:../release_notes/46-release-notes.adoc#scanner-v4-rhcos_release-notes-46[Scanner V4 support for {op-system} (Technology Preview)]
* xref:../release_notes/46-release-notes.adoc#vulnerability-management-updates_release-notes-46[Vulnerability Management page updates]

[id="new-features_{context}"]
== New features

This release adds improvements related to the following components and concepts:

[id="arm-support-secured-clusters_{context}"]
=== Support for ARM architecture in secured clusters (Technology Preview)

:FeatureName: Support for ARM architecture in secured clusters
include::snippets/technology-preview.adoc[]

{product-title-short} now provides support for ARM architecture in {product-title-short} secured clusters only. This architecture provides enhanced flexibility and performance for secured clusters, including the following benefits:

* Efficient power consumption
* Better handling of resource-intensive tasks
* Cost-effective scaling

For more information, see xref:../installing/acs-high-level-overview.adoc#installation-methods-for-different-architectures_acs-high-level-overview[Installation methods for different architectures]. The {product-title-short} Central component is not supported on ARM.

[id="scanner-v4-csaf-vex_{context}"]
=== Scanner V4 use of CSAF-VEX for vulnerability data

Red{nbsp}Hat is switching to Common Security Advisory Framework (CSAF) Vulnerability Exploitability eXchange (VEX) vulnerability data as standardized security advisory formats to communicate vulnerabilities affecting Red{nbsp}Hat products. In particular, the VEX profile describes which Red{nbsp}Hat products and components are impacted or known not to be impacted by a specific vulnerability identified by the Common Vulnerability and Exposures (CVE) ID. This format also describes vulnerability data with greater detail than before. {product-title-short} now uses the Red{nbsp}Hat CSAF-VEX vulnerability data source if you have Scanner V4 configured for vulnerability scanning.

For more information about Red{nbsp}Hat security data and VEX, see the following sources:

* link:https://www.redhat.com/en/blog/future-red-hat-security-data[The future of Red Hat security data]
* link:https://www.redhat.com/en/blog/red-hat-vex-files-cves-are-now-generally-available[Red Hat VEX files for CVEs are now generally available]

For more information on Scanner V4 and CSAF-VEX, see the following documentation:

* xref:../operating/examine-images-for-vulnerabilities.adoc#about-scanner-v4_examine-images-for-vulnerabilities[About Scanner V4]
* xref:../architecture/acs-architecture.adoc#vulnerability-sources_acs-architecture[Scanner V4 sources]

[id="scanner-v4-rhcos_{context}"]
=== Scanner V4 support for {op-system} (Technology Preview)

:FeatureName: Scanner V4 support for {op-system}
include::snippets/technology-preview.adoc[]

{product-title-short} now supports scanning of {op-system-first} nodes with Scanner V4. For more information, see xref:../operating/manage-vulnerabilities/scan-rhcos-node-host.adoc#rhcos-enable-node-scan-scannerv4_scan-rhcos-node-host[Enabling RHCOS node scanning with Scanner V4].

[id="policy-as-code_{context}"]
=== Support for policy as code (Technology Preview)

:FeatureName: Policy as code
include::snippets/technology-preview.adoc[]

With this release, {product-title-short} adds the ability to manage {product-title-short} policies as Kubernetes custom resources, enabling GitOps workflows such as Argo CD. For more information, see xref:../operating/manage_security_policies/custom-security-policies.adoc#policy-as-code-about_custom-security-policies[Managing policies as code].

[id="compliance-reporting-updates_{context}"]
=== Compliance reporting (Technology Preview)

:FeatureName: Compliance reporting
include::snippets/technology-preview.adoc[]

Compliance reporting is available as a Technology Preview for all OpenShift clusters running Compliance Operator version 1.6 or later. With this feature, you can more easily access the compliance results of a given scan schedule in a CSV file.

Compliance reporting provides the following options:

* Generating the report on-demand directly by using the {product-title-short} portal or the API
* Sending the report periodically by email every time a scan is scheduled
* Creating email notifiers when creating a scan configuration as a destination to send on-demand reports
* Generating an on-demand report for a given scan configuration, which {product-title-short} sends to any notifiers configured on that scan configuration

For more information, see xref:../operating/manage-compliance/scheduling-compliance-scans-and-assessing-profile-compliance.adoc#scheduling-compliance-scans-and-assessing-profile-compliance[Scheduling compliance scans and assessing profile compliance].

[id="network-graph-external-IP_{context}"]
== Visualizing external entities in the network graph (Technology Preview)

:FeatureName: Visualizing external entities
include::snippets/technology-preview.adoc[]
:!FeatureName:

The network graph now provides additional insights into connections to external entities. With this update, you can view specific IP addresses associated with these external connections, offering a more comprehensive overview of network activity.

To configure {product-title-short} to collect this information for a cluster, you modify the secured cluster's runtime configuration by using a ConfigMap. For more information, see xref:../operating/visualizing-external-entities.adoc#visualizing-external-entities[Visualizing external entities].

[id="microsoft-sentinel-notifier_{context}"]
=== Microsoft Sentinel notifier added

{product-title-short} has added a Microsoft Sentinel notifier to send alerts and audit logs to Azure Log Analytics Workspace. For more information, see xref:../integration/integrating-with-microsoft-sentinel-notifier.adoc#integrating-with-microsoft-sentinel-notifier[Integrating with Microsoft Sentinel notifier].

[id="s3-clone-support-backup_{context}"]
=== Support for backups using non-AWS S3 compatible providers

{product-title-short} has added a new external backup integration for non-AWS S3 compatible providers. For more information, see xref:../integration/integrate-with-s3-api-compatible-services.adoc#integrate-with-s3-api-compatible-services[Integrating with S3 API compatible services].

[id="vulnerability-management-updates_{context}"]
=== Vulnerability Management page updates

The *Vulnerability Management* page has updates and improvements, including the following changes:

CVE published date::

{product-title-short} now reports the CVE published date in vulnerability management data shown in the portal and obtained from the API. This field uses the first published date for the CVE that is obtained from vendor-specific security data feeds, when those are available. If data from the vendor is missing, data from the National Vulnerability Database (NVD) is used to populate the CVE published date field.

Hiding unwanted display columns::

{product-title-short} now provides the ability to hide unwanted columns in tables by using column management. Starting with the Workload CVEs section of {product-title-short}, a button is displayed above the table containing the text "Columns" and provides a count of the number of columns that are enabled. You can click this button to open a menu to hide unwanted columns. These settings are saved per table in your browser and remain in place across separate sessions.

[id="certifications_{context}"]
== Certifications

{product-title-managed} is certified according to the following global standards for security, compliance, and data protection:

* ISO/IEC 27001:2022
* ISO/IEC 27017:2015
* ISO/IEC 27018:2019
* PCI DSS 4.0
* SOC 2 Type 2
* SOC 2 Type 3

[id="notable-technical-changes_{context}"]
== Notable technical changes

This release contains the following changes:

Secured cluster upgrade behavior enhancements::

 The following changes were made to the upgrade functionality on secured clusters:

* {product-title-managed-short}: Secured clusters that were deployed by using the `roxctl` CLI, also called the manifest method, can now be automatically upgraded by using the cluster upgrader.
* {product-title-short} Central:
** Messages and errors for the secured cluster upgrader are now simpler and clearer.
** Typical failure scenarios for cluster upgrader are now documented. For more information, see xref:../upgrading/upgrade-roxctl.adoc#troubleshooting-upgrader_upgrade-roxctl[Troubleshooting the cluster upgrader].

Flag for diagnostic bundles to include only database information::

The `roxctl central debug download-diagnostics` command that is used to create diagnostic bundles for troubleshooting has a new flag, `--with-database-only`. The flag generates only database metrics in the diagnostic bundle. This flag is helpful when you only need database information to diagnose performance issues in large clusters.

Additional changes::

* Automatic sensing within the Helm charts for detecting OpenShift clusters has been changed. Automatic sensing now depends on the `project.openshift.io/v1` object `APIVersion`.
* Sensor now stores pull secrets by secret name and registry host instead of only by registry host. This change reduces delegated scanning authentication failures when multiple secrets exist for the same registry within a namespace and more closely aligns with Kubernetes secrets handling. To disable this feature and cause secrets to be stored by only registry host, set `ROX_SENSOR_PULL_SECRETS_BY_NAME` to `false`.
* The endpoint `/v2/compliance/scan/configurations/reports/run` method has changed from `PUT` to `POST`.

[id="documentation-updates-450_{context}"]
== Documentation updates

Documentation updates include the following:

[id="using-feature-flags_{context}"]
=== Feature flag documentation

Documentation has been added to show you how to manage features that are enabled as Technology Preview features. For more information, see xref:../configuration/managing-preview-features.adoc#managing-feature-flags_managing-preview-features[Managing feature flags].


[id="api-docs_{context}"]
=== API documentation available publicly

Previously, API documentation was only available by clicking *?* and selecting *API Reference* to view the API documentation in the product. The API documentation is now publicly available; see the link:https://docs.redhat.com/en/documentation/red_hat_advanced_cluster_security_for_kubernetes/4.5/html/api_reference/index[API Reference].
// Change link to 4.6 version when available (is not available immediately at the time of 4.6 release, must be published after release).

[id="deprecated-and-removed-features_{context}"]
== Deprecated and removed features

Some features available in earlier releases have been deprecated or removed.

Deprecated functionality is still included in {product-title-short} and continues to be supported; however, it will be removed in a future release of this product and is not recommended for new deployments.
For the most recent list of major functionality deprecated and removed, see the following table.
Additional removed or deprecated functionality is available after the table.

In the table, features are marked with the following statuses:

* GA: General Availability
* TP: Technology Preview
* DEP: Deprecated
* REM: Removed
* NA: Not applicable

.Deprecated and removed features tracker
[cols="4,1,1,1",options="header"]
|===
|Feature |{product-title-short} 4.4 |{product-title-short} 4.5 |{product-title-short} 4.6

| API token authentication for {cloud-redhat-com}^[1]^
| GA
| GA
| DEP

|`definitions.stackrox.io`
| DEP
| DEP
| DEP

| Google Container Registry integration^[2]^
| GA
| GA
| DEP

|Kernel support packages and driver download functionality ^[3]^
|NA
|DEP
|DEP

|Reporting of Istio vulnerabilities
|DEP
|DEP
|DEP

|`rhacs-collector-slim*` images^[4]^
|NA
|DEP
|DEP

|`stackrox-db` Central PVC^[5]^
|GA
|GA
|REM

|StackRox Scanner
|GA
|GA
|DEP

|`/v1/availableAuthProviders` endpoint
|GA
|DEP
|DEP

|`/v1/clustercves/suppress` APIs^[6,7]^
|DEP
|DEP
|DEP

|`/v1/clustercves/unsuppress` APIs^[6,7]^
|DEP
|DEP
|DEP

|`/v1/cve/requests` APIs^[8]^
|DEP
|DEP
|REM

|`/v1/nodecves/suppress` APIs^[6,7]^
|DEP
|DEP
|DEP

|`/v1/nodecves/unsuppress` APIs^[6,7]^
|DEP
|DEP
|DEP

|`/v1/summary/counts` endpoint
|NA
|DEP
|DEP

|`/v1/tls-challenge` endpoint
|DEP
|DEP
|DEP

|Vulnerability Management (1.0) menu item^[9]^
|DEP
|DEP
|DEP

|Vulnerability Report Creator permission
|DEP
|DEP
|DEP

|===

. API token authentication has been deprecated by {cloud-redhat-com}. The corresponding cloud source integration now uses service accounts for authentication.
. The Google Container Registry integration is now deprecated in response to the link:https://cloud.google.com/artifact-registry/docs/transition/transition-from-gcr[deprecation of Container Registry] by Google. Users should use Artifact Registry as a registry replacement and Scanner V4 as a scanner replacement.
. Kernel support packages and driver download functionality are deprecated.
. The `rhacs-collector-slim*` images have been deprecated. `rhacs-collector` images used to contain kernel modules and eBPF probes, but those items are no longer needed by {product-title-short}. The `rhacs-collector* `image and the `rhacs-collector-slim*` images are now functionally the same. The `rhacs-collector-slim*` image is planned for removal in a future release.
. The Central PVC stackrox-db is removed and existing volumes are released. The following flags for configuring Central attached persistent storage have been removed from `roxctl`:
* `roxctl central generate k8s pvc` and `roxctl central generate openshift pvc` no longer have the flags `--name`, `--size`, and `--storage-class`.
* `roxctl central generate k8s hostpath` and `roxctl central generate openshift hostpath` no longer have the flags `--hostpath`, `--node-selector-key`, and `--node-selector-value`.
. This object is controlled by a feature flag and can be enabled or disabled by using the `ROX_VULN_MGMT_LEGACY_SNOOZE` environment variable.
. The format for specifying duration in JSON requests to `v1/nodecves/suppress`, `v1/clustercves/suppress`, and `v1/imagecves/suppress` has changed to the ProtoJSON format. Only a numeric value representing seconds with optional fractional seconds for nanosecond precision and followed by the `s` suffix is supported. For example, `0.300s`, `-5400s`, or `9900s`. The previously valid time units of `ns`, `us`, `µs`, `ms`, `m`, and `h` are no longer supported.
. The `/v1/cve/requests` API for managing vulnerability exceptions is removed. Use the new `/v2/vulnerability-exceptions/` API.
. The *Dashboard* view under *Vulnerability Management* is deprecated. Use the *Workload CVEs*, *Exception Management*, *Platform CVEs*, and *Node CVEs* views as alternatives.


[id="deprecated-features_{context}"]
=== Deprecated features

The following section provides information about additional deprecated features:

* To unify the response data for stream and unary API requests, the following changes were made:
** The `error` field returned for failed unary API requests is deprecated. Use the `message` field to retrieve error information instead of the `error` field. The `message` field has the same information as the `error` field.
** In this release, Red{nbsp}Hat removed the following fields in the returned error response for gRPC stream APIs:
*** `grpcCode`
*** `httpCode`
*** `httpStatus`
+
With this release, the response includes the new `code` field that includes the `grpcCode` data.

[id="bug-fixes_{context}"]
== Bug fixes in version 4.6.0

*Release date*: 2 December 2024

* Before this release, the timestamp data displayed incorrectly when viewing affected images in the *First discovered* column of the *Workload CVE* single page view. This update resolves the issue.

* Before this release, the *Vulnerability Management* window that contains CVEs with an unknown severity displayed incorrect CVE counts when viewing an image. This update resolves the issue.

* In runtime monitoring, process names and arguments could cause serialization problems when containing invalid UTF-8 characters. This resulted in error messages in the collector logs. Those characters are now filtered and replaced with a `?` when necessary.

* Previously, when using delegated scanning, newer image metadata and layers were pulled incorrectly for an older image referenced by tag when the image registry contents had changed since deployment. Now, the metadata and layers pulled are based on the digest of the image provided by the container runtime when available, instead of just the tag.

include::modules/image-versions.adoc[leveloffset=+1]
