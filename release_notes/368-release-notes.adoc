[id="release-notes-368"]
= Red Hat Advanced Cluster Security for Kubernetes 3.68
include::modules/common-attributes.adoc[]
:context: release-notes-368

toc::[]

{product-title} ({product-title-short}) 3.68 includes feature enhancements, bug fixes, scale improvements, and other changes.

*Release date:* February 2, 2022

[id="new-features-368"]
== New features

[id="vulnerability-triage-workflows"]
=== Vulnerability triage workflows
{product-title} 3.68 includes the ability to triage vulnerabilities in a variety of ways to support your vulnerability management process.
See xref:../operating/manage-vulnerabilities.adoc#vulnerability-management-proccess_acs-operating-manage-vulnerabilities[Managing vulnerabilities] for more information.

[id="report-scheduling"]
=== Report scheduling for vulnerabilities
{product-title} 3.68 includes the ability to schedule reports for vulnerabilities which helps you to send scheduled communications to key stakeholders to assist in the vulnerability management process. See xref:../operating/manage-vulnerabilities.adoc#vulnerability-management-reporting_acs-operating-manage-vulnerabilities[Reporting vulnerabilities to teams] for more information.

[id="use-aws-ecr-assumeroles"]
=== Use AWS AssumeRoles
AWS AssumeRoles allows you to define roles with specific permissions and then granting users access to those roles. With {product-title} 3.68 you can use AssumeRoles when you intigrate with Amazon ECR.
For more details, see xref:../integration/integrate-with-image-registries.adoc#use-assumerole-with-ecr[Using AssumeRole with Amazon ECR].

[id="output-format-enhancements"]
=== Enhancements for CI outputs
Red Hat has improved the usability of {product-title} CI integrations. CI outputs now show additional detailed information about the vulnerabilities and the security policies responsible for broken builds.
For more details, see xref:../cli/getting-started-cli.adoc#configuring-output-format[Configuring output format].

[id="automount-service-account-token-policy-criteria"]
=== Automount Service Account Token policy criteria
Kubernetes automatically provisions a service account during pod creation and mounts the account's secret token within the pod at runtime.
Many containerized applications do not require direct access to the service account. If a threat actor compromises an application, they might obtain the account token to further compromise the server.
Therefore, when an application does not need to access the service account directly, administrators must ensure that the pod specifications disable the default behaviour. You can now use the *Automount Service Account Token* policy criteria to find the pods that have the service account mounted.

[id="important-bug-fixes-368"]
== Important bug fixes

* *ROX-8709*: Previously, searching for CVEs with a specific severity did not returned any results. This issue has been fixed.
* *ROX-8983*: Previously, when configuring the *Manage Watches* feature, if you added more than 12 images to the watch list, the image list did not display properly. This issue has been fixed.
* *ROX-8276*: Previously, when the {product-title-short} Operator accessed the `central-htpasswd` secret, it created a false positive policy violation for the *OpenShift: Advanced Cluster Security Central Admin Secret Accessed* default policy. This issue has been fixed.

[id="resolved-in-version-3681"]
=== Resolved in version 3.68.1

Release date: February 14, 2022

* *ROX-9243*: In {product-title-short} 3.68.0, Central would sometimes stop responding if the vulnerability data was not available.
This issue has been fixed.
Central now reports an error for such cases.

[id="security-update"]
== Security update
In earlier versions of {product-title}, the `write` permission for the `APIToken` resource allowed users to create API tokens for any role, including the `admin` role. This issue has been fixed.

[id="important-system-changes-368"]
== Important system changes


[id="changes-in-version-3681"]
=== Changes in version 3.68.1

Release date: February 14, 2022

{product-title-short} 3.68.1 includes stability improvements for the automatic registry integrations to handle failure and reduce the load on registries more effectively. {product-title-short} 3.68.1 also includes a new `ROX_DISABLE_AUTOGENERATED_REGISTRIES` environment variable. You can set its value to `true` to ignore all new registry integrations from Sensors.

[id="chnages-in-version-3680"]
=== Changes in version 3.68.0

Release date: February 2, 2022

* {product-title-short} 3.68 includes updates for the `Log4Shell` vulnerability detection policy. With this update this policy also detects CVE-2021-45046, and it includes the updated remediation based on the latest guidance by the Apache Logging security team.
* Before this release, snoozing CVEs required `write` permission for the `Images` resource. Beginning with {product-title-short} 3.68:
** To snooze CVEs, you must have `write` permission for the `VulnerabilityManagementRequests` resource.
** To approve requests, you must have `write` permission for the `VulnerabilityManagementApprovals` resource.
* When you upgrade to {product-title-short} 3.68, roles that include `write` access on the `Images` resource will have `write` permissions for both  `VulnerabilityManagementRequests` and `VulnerabilityManagementApprovals` resource.
Red Hat recommends updating the roles to only include the least amount of resources required for each role.
* If you installed {product-title} using Helm, this update disabled the cluster configuration options in the {product-title-short} portal. You can continue to use Helm configuration files.
* {product-title-short} 3.68 sends notifications for every runtime policy violation rather than sending notifications only the first encountered violation. This is the default behavior. To change it, you must set the `NOTIFY_EVERY_RUNTIME_EVENT` to `false`.
+
[IMPORTANT]
====
Red Hat will remove this environment variable in future releases. Contact the support team for any related inquiries.
====
* Red Hat has moved the following images to new repositories:
+
[%header,cols="1,2,2"]
|===
|Image
|Old repository
|New repository

m|main
m|registry.redhat.io/rh-acs/main
m|registry.redhat.io/advanced-cluster-security/rhacs-main-rhel8

m|collector
|`registry.redhat.io/rh-acs/collector`, with the `-latest` tag.
m|registry.redhat.io/advanced-cluster-security/rhacs-collector-rhel8

m|collector-slim
|`registry.redhat.io/rh-acs/collector-slim`, with the `-slim` tag.
m|registry.redhat.io/advanced-cluster-security/rhacs-collector-slim-rhel8

m|scanner
m|registry.redhat.io/rh-acs/scanner
m|registry.redhat.io/advanced-cluster-security/rhacs-scanner-rhel8

m|scanner-db
m|registry.redhat.io/rh-acs/scanner-db
m|registry.redhat.io/advanced-cluster-security/rhacs-scanner-db-rhel8

|===

* Tags of the `scanner`, `scanner-db`, and `collector` images, including the `collector-slim` variant, are now identical to the `main` image tag.
In addition, all these tags now match the version of {product-title}.
For example, a scanner image for {product-title-short} 3.68.0 is now identified as `registry.redhat.io/advanced-cluster-security/rhacs-scanner-rhel8:3.68.0` and `stackrox.io/scanner:3.68.0`. Make sure you follow the same versioning scheme when you upgrade manually.
* Red Hat has changed the image names for `collector-slim`. `-slim` is no longer part of the image tag. Collector Slim image for the release 3.68.0 is identified as `registry.redhat.io/advanced-cluster-security/rhacs-collector-slim-rhel8:3.68.0` and `collector.stackrox.io/collector-slim:3.68.0`.
* Scanner DB image at `registry.redhat.io/advanced-cluster-security/rhacs-scanner-db-rhel8` is now based on `rhel8/postgresql-12`.
* The `roxctl` CLI includes a new `--image-defaults` option for the `roxctl helm output` and `roxctl central generate` commands. It allows selecting the default registry from which container images are taken for deploying central and scanner.
* Red Hat has deprecated the `--rhacs` option for the `roxctl helm output` command. Use `--rhacs-image-defaults` option instead.
* By default, the `roxctl helm output` command now uses the images from `registry.redhat.io` rather than `stackrox.io`.

[id="image-versions-368"]
== Image versions

[IMPORTANT]
====
Beginning with {product-title-short} 3.68, Red Hat has updated the image versioning convention for the `Scanner`, `Scanner DB`, and `Collector` images.
As a result, the version numbers for these images now match the version numbers for the `Main` image.
In addition, due to the change in image repository names in `registry.redhat.io`, if you mirror {product-title-short} image repositories, you must verify your mirroring is set up to mirror images from the new locations.
====

[%header,cols="1,1,2"]
|===
| Image | Description | Current version

| Main
| Includes Central, Sensor, Admission Controller, and Compliance.
Also includes `roxctl` for use in continuous integration (CI) systems.
| `registry.redhat.io/advanced-cluster-security/rhacs-main-rhel8:3.68.1`

| Scanner
| Scans images and nodes.
| `registry.redhat.io/advanced-cluster-security/rhacs-scanner-rhel8:3.68.1`

| Scanner DB
| Stores image scan results and vulnerability definitions.
| `registry.redhat.io/advanced-cluster-security/rhacs-scanner-db-rhel8:3.68.1`

| Collector
| Collects runtime activity in Kubernetes or {ocp} clusters.
| `registry.redhat.io/advanced-cluster-security/rhacs-collector-rhel8:3.68.1`
  `registry.redhat.io/advanced-cluster-security/rhacs-collector-slim-rhel8:3.68.1`
|===
