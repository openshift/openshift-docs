[id="368-release-notes"]
= Red Hat Advanced Cluster Security for Kubernetes 3.68
include::modules/common-attributes.adoc[]
:context: 368-release-notes

toc::[]

{product-title} ({product-title-short}) 3.68 includes feature enhancements, bug fixes, scale improvements, and other changes.

*Release date:* January 31, 2022

[id="new-features"]
== New features

[id="vulnerability-triage-workflows"]
=== Vulnerability triage workflows
{product-title} 3.68 now comes with the ability to triage vulnerabilities in a variety of ways.
//TODO: Reference new content.

[id="report-scheduling"]
=== Report scheduling for vulnerabilities
{product-title} 3.68 now comes with the ability to schedule reports for vulnerabilities.

[id="use-aws-ecr-assumeroles"]
=== Use AWS ECR AssumeRoles
AWS AssumeRoles allows you to define roles with specific permissions and then granting users access to those roles. {product-title} 3.68 includes the ability to use AWS ECR AssumeRoles to configure roles and grant various levels of access to users.
//TODO:For more details, see xref:../operating/use-aws-ecr-assumeroles.adoc[Use AWS ECR AssumeRoles in {product-title}].

[id="output-format-enhancements"]
=== Enhancements for CI outputs
Red Hat has improved the usability of {product-title} CI integrations. CI outputs now show additional detailed information about the vulnerabilities and the security policies responsible for broken builds.

[id="inactive-software-components"]
=== Inactive Software Component Identification
Red Hat has improved the ability of users to identify if a software package that is being used inside of a container image is inactive, which helps users to triage if a software package may be able to be removed as a hardening step or vulnerability remediation.

[IMPORTANT]
====
*Known Issue*: When the same software package is installed in multiple layers in a docker image {product-title-short} may incorrectly identify the state of that package.
====

[id="important-bug-fixes"]
== Important bug fixes

* *ROX-8709*: Previously, searching for CVE's with a specific severity did not returned any results. This issue has been fixed.
* *ROX-8983*: Previously, when configuring the *Manage Watches* feature, if you added more than 12 images to the watch list, the image list would not display properly. This issue has been fixed.
* *ROX-8276*: Previously, when the {product-title-short} Operator accessed the `central-htpasswd` secret, it would create a false positive policy violation for the *OpenShift: Advanced Cluster Security Central Admin Secret Accessed* default policy. This issue has been fixed.

[id="security-update"]
== Security update
In previous versions of {product-title}, the `write` permission for the `APIToken` resource allowed users to create API tokens for any role, including the `admin` role. 

[id="important-system-changes"]
== Important system changes

* {product-title-short} 3.68 includes updates for the `Log4Shell` vulnerability detection policy. Now this policy also detects CVE-2021-45046 and it includes the updated remediation based on the latest guidance by the Apache Logging security team.
* The default gRPC port in Scanner's configuration map is now changed to `8443`.

//TODO: rewrite following
- Prior to this release, CVEs could be snoozed using global write access on `Images`. Starting this release, requests to snooze CVEs can be created only using `VulnerabilityManagementRequests` global write access and requests can be approved only using `VulnerabilityManagementApprovals` global write access. Roles with write access on `Images`, created prior to this release, are provided with both the newly added permissions. We recommend updating the roles to only include the least amount of resources required for each role. All new roles must be explicitly supplied with `VulnerabilityManagementRequests` and/or `VulnerabilityManagementApprovals` permissions in order to use CVE snoozing functionality.
- Editing the cluster configuration in the UI is now disabled for Helm-based installations.
- By default, notifications will be sent for every runtime policy violation instead of only the first encountered violation. If this is undesired, setting an environment variable `NOTIFY_EVERY_RUNTIME_EVENT` to `false` will restore the previous behavior. Please note that the environment variable will be removed in a future release, so please notify the ACS team if you have a valid use case.
- Certain ACS images were moved to new repositories:
** main: from `registry.redhat.io/rh-acs/main` to `registry.redhat.io/advanced-cluster-security/rhacs-main-rhel8`
** collector: from `registry.redhat.io/rh-acs/collector` (with `-latest` tag) to `registry.redhat.io/advanced-cluster-security/rhacs-collector-rhel8`
** collector (slim): from `registry.redhat.io/rh-acs/collector` (with `-slim` tag) to `registry.redhat.io/advanced-cluster-security/rhacs-collector-slim-rhel8`
** scanner: from `registry.redhat.io/rh-acs/scanner` to `registry.redhat.io/advanced-cluster-security/rhacs-scanner-rhel8`
** scanner-db: from `registry.redhat.io/rh-acs/scanner-db` to `registry.redhat.io/advanced-cluster-security/rhacs-scanner-db-rhel8`
- Tags of `scanner`, `scanner-db`, and `collector` (including slim variant) images are now identical to the tag of `main` image (same as product version) for the released images. For example, a scanner image for ACS 3.68.0 is now identified as following `registry.redhat.io/advanced-cluster-security/rhacs-scanner-rhel8:3.68.0` and `stackrox.io/scanner:3.68.0`. Please make sure you follow this versioning scheme when upgrading manually. This scheme will be used for all future releases.
- Collector Slim image name and tag have changed. Now the `-slim` is not part of the image tag but part of the image name. This means that Collector Slim image for the release 3.68.0 is identified as `registry.redhat.io/advanced-cluster-security/rhacs-collector-slim-rhel8:3.68.0` and `collector.stackrox.io/collector-slim:3.68.0`.
- Scanner DB image at `registry.redhat.io/advanced-cluster-security/rhacs-scanner-db-rhel8` is now based on `rhel8/postgresql-12`.
- For `roxctl helm output` and `roxctl central generate` added a new flag `--image-defaults` that allows selecting the default registry from which container images will be taken for deploying central and scanner.
- For `roxctl helm output` deprecated flag `--rhacs` in favor of `--image-defaults=rhacs` (using both `--rhacs` and `--image-defaults` flags results in an error).
- Default behavior of `roxctl helm output` results now in using container images from `registry.redhat.io` instead of `stackrox.io`.


[id="image-versions"]
== Image versions

[IMPORTANT]
====
Beginning with {product-title-short} 3.68, Red Hat has updated the image version number convention for the `Scanner`, `Scanner DB`, and `Collector` images. The version numbers for these images now match the version numbers for the `Main` image.
====

[IMPORTANT]
====
Due to the change in image repository names in `registry.redhat.io`, customers who mirror ACS
   image repositories should verify their mirroring is set up to mirror images from these
   new locations.
====

|===
| Image | Description | Current version

| Main
| Includes Central, Sensor, Admission Controller, and Compliance.
Also includes `roxctl` for use in continuous integration (CI) systems.
| `registry.redhat.io/advanced-cluster-security/rhacs-main-rhel8:3.68.0`

| Scanner
| Scans images and nodes.
| `registry.redhat.io/advanced-cluster-security/rhacs-scanner-rhel8:3.68.0`

| Scanner DB
| Stores image scan results and vulnerability definitions.
| `registry.redhat.io/advanced-cluster-security/rhacs-scanner-db-rhel8:3.68.0`

| Collector
| Collects runtime activity in Kubernetes or {ocp} clusters.
| `registry.redhat.io/advanced-cluster-security/rhacs-collector-rhel8:3.68.0`
  `registry.redhat.io/advanced-cluster-security/rhacs-collector-slim-rhel8:3.68.0`
|===
