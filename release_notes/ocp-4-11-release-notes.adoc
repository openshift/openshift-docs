:_content-type: ASSEMBLY
[id="ocp-4-11-release-notes"]
= {product-title} {product-version} release notes
include::_attributes/common-attributes.adoc[]
:context: release-notes

toc::[]

Red Hat {product-title} provides developers and IT organizations with a hybrid cloud application platform for deploying both new and existing applications on secure, scalable resources with minimal configuration and management overhead. {product-title} supports a wide selection of programming languages and frameworks, such as Java, JavaScript, Python, Ruby, and PHP.

Built on {op-system-base-full} and Kubernetes, {product-title} provides a more secure and scalable multitenant operating system for today's enterprise-class applications, while delivering integrated application runtimes and libraries. {product-title} enables organizations to meet security, privacy, compliance, and governance requirements.

[id="ocp-4-11-about-this-release"]
== About this release

// TODO: Update with the relevant information closer to release.
{product-title} (link:https://access.redhat.com/errata/RHSA-2022:TODO[RHSA-2022:TODO]) is now available. This release uses link:https://github.com/kubernetes/kubernetes/blob/master/CHANGELOG/CHANGELOG-1.24.md[Kubernetes 1.24] with CRI-O runtime. New features, changes, and known issues that pertain to {product-title} {product-version} are included in this topic.
//Red Hat did not publicly release {product-title} 4.10.0 as the GA version and, instead, is releasing {product-title} 4.10.3 as the GA version.

{product-title} {product-version} clusters are available at https://console.redhat.com/openshift. With the {cluster-manager-first} application for {product-title} users can you to deploy OpenShift clusters to either on-premise or cloud environments.

// Double check OP system versions
{product-title} {product-version} is supported on {op-system-base-full} 8.4 and 8.5, as well as on {op-system-first} 4.11.

You must use {op-system} machines for the control plane, and you can use either {op-system} or {op-system-base} for compute machines.
//Removed the note per https://issues.redhat.com/browse/GRPA-3517

//TODO: Add the line below for EUS releases.
//{product-title} 4.6 is an Extended Update Support (EUS) release. More information on Red Hat OpenShift EUS is available in link:https://access.redhat.com/support/policy/updates/openshift#ocp4_phases[OpenShift Life Cycle] and link:https://access.redhat.com/support/policy/updates/openshift-eus[OpenShift EUS Overview].

//TODO: The line below is not true for 4.9 but should be used when it is next appropriate. Revisit in October 2022 timeframe.
//With the release of {product-title} 4.9, version 4.6 is now end of life. For more information, see the link:https://access.redhat.com/support/policy/updates/openshift[Red Hat {product-title} Life Cycle Policy].


[id="ocp-4-11-add-on-support-status"]
== {product-title} layered and dependent component support and compatibility

The scope of support for layered and dependent components of {product-title} changes independently of the {product-title} version. To determine the current support status and compatibility for an add-on, refer to its release notes. For more information, see the link:https://access.redhat.com/support/policy/updates/openshift[Red Hat {product-title} Life Cycle Policy].

[id="ocp-4-11-new-features-and-enhancements"]
== New features and enhancements

This release adds improvements related to the following components and concepts.

[id="ocp-4-11-rhcos"]
=== {op-system-first}

[id="ocp-4-11-nvme-cli"]
==== Improved support for NVMe over Fabrics

{product-title} 4.11 introduces the `nvme-cli` package that provides an interface for managing NVMe devices.

[id="ocp-4-11-kdump-x86"]
==== Investigate kernel crashes on AMD64 machines with kdump

{op-system} now supports `kdump` for the `x86_64` architecture in {product-title} 4.11. Support for `kdump` on other architectures remains in Technology Preview.

[id="ocp-4-11-kdump-arm64"]
==== Investigate kernel crashes on ARM64 machines with kdump (Technology Preview)

{op-system} now supports `kdump` for the `arm64` architecture in {product-title} 4.11 as a Technology Preview.

[id="ocp-4-11-rhcos-rhel-8-6-packages"]
==== {op-system} now uses {op-system-base} 8.6

{op-system} now uses {op-system-base-full} 8.6 packages in {product-title} 4.11 and above. This enables you to have the latest fixes, features, and enhancements, as well as the latest hardware support and driver updates.

[id="ocp-4-11-installation-and-upgrade"]
=== Installation and upgrade

[id="ocp-4-11-aws-serial-console-logs"]
==== Troubleshooting bootstrap failures during installation on AWS
The installer now gathers serial console logs from the bootstrap and control plane hosts on AWS. This log data is added to the standard bootstrap log bundle.

For more information, see xref:../installing/installing-troubleshooting.adoc#installation-bootstrap-gather_installing-troubleshooting[Troubleshooting installation issues].

[id="ocp-4-11-installation-and-upgrade-hyperv"]
==== Support for Microsoft Hyper-V generation version 2
By default, the installation program now deploys a Microsoft Azure cluster using Hyper-V generation version 2 virtual machines (VMs). If the installation program detects that the instance type selected for the VMs does not support version 2, it uses version 1 for the deployment.

[id="ocp-4-11-worker-nodes"]
==== Default AWS and VMware vSphere compute node resources
Beginning with {product-title} 4.11, by default, the installation program now deploys AWS and VMware vSphere compute nodes with 4 vCPUs and 16 GB of virtual RAM.

[id="ocp-4-11-aws-sc2s"]
==== Support for the AWS SC2S region
{product-title} 4.11 introduces support for the AWS Secret Commercial Cloud Services (SC2S) region. You can now install and update {product-title} clusters in the `us-isob-east-1` SC2S region.

For more information, see xref:../installing/installing_aws/installing-aws-secret-region.adoc#installing-aws-secret-region[Installing a cluster on AWS into a Secret or Top Secret Region]

[id="ocp-4-11-nutanix"]
==== Installing a cluster on Nutanix using installer-provisioned infrastructure
{product-title} 4.11 introduces support for installing a cluster on Nutanix using installer-provisioned infrastructure. This type of installation lets you use the installation program to deploy a cluster on infrastructure that the installation program provisions and the cluster maintains.

//For more information, see ../installing/installing_nutanix/installing-nutanix-installer-provisioned.adoc#installing-nutanix-installer-provisioned[Installing a cluster on Nutanix].

[id="ocp-4-11-azure-ultrassd"]
==== Installing {product-title} using Azure Ultra SSD
You can now enable Ultra SSD storage when installing {product-title} on Azure. This feature requires that both the Azure region and zone where you install {product-title} offer Ultra storage.

For more information, see xref:../installing/installing_azure/installing-azure-customizations.html#installation-configuration-parameters-additional-azure_installing-azure-customizations[Additional Azure configuration parameters].

[id="ocp-4-11-bootstrapExternalStaticIP_{context}"]
==== Added support for bootstrapExternalStaticIP and bootstrapExternalStaticGateway configuration settings

When deploying an installer-provisioned {product-title} cluster on bare metal with static IP addresses and no DHCP server on the `baremetal` network, you must specify a static IP address for the bootstrap VM and the static IP address of the gateway for the bootstrap VM. {product-title} {product-version} provides the `bootstrapExternalStaticIP` and the `bootstrapExternalStaticGateway` configuration settings, which you can set in the `install-config.yaml` file before deployment. The introduction of these settings replaces the workaround procedure link:https://access.redhat.com/articles/6850661[Assigning a bootstrap VM an IP address on the baremetal network without a DHCP server] from the {product-title} 4.10 release.

For more information, see xref:../installing/installing_bare_metal_ipi/ipi-install-installation-workflow.adoc#configuring-the-install-config-file_ipi-install-installation-workflow[Configuring the install-config.yaml file] and xref:../installing/installing_bare_metal_ipi/ipi-install-installation-workflow.adoc#additional-install-config-parameters_ipi-install-installation-workflow[Additional install-config parameters].

[id="ocp-4-11-configuring-bios-raid-on-fujitsu-Hardware_{context}"]
==== Configuring Fujitsu hardware
{product-title} {product-version} introduces support for configuring the BIOS and RAID arrays of control plane nodes when installing {product-title} on bare metal with Fujitsu hardware. In {product-title} 4.10, configuring the BIOS and RAID arrays on Fujitsu hardware was limited to worker nodes.

For more information, see xref:../installing/installing_bare_metal_ipi/ipi-install-installation-workflow.adoc#configuring-the-bios_ipi-install-installation-workflow[Configuring the BIOS] and xref:../installing/installing_bare_metal_ipi/ipi-install-installation-workflow.adoc#configuring-the-raid_ipi-install-installation-workflow[Configuring the RAID].

[id="ocp-4-11-web-console"]
=== Web console

[id="ocp-4-11-ibm-z"]
=== IBM Z and LinuxONE

[id="ocp-4-11-ibm-power"]
=== IBM Power

[id="ocp-4-11-security"]
=== Security and compliance

[id="ocp-4-11-networking"]
=== Networking
==== New option for Ingress Controllers with the hostnetwork endpoint

This update introduces a new option for Ingress Controllers with the `hostnetwork` endpoint strategy. You can now host multiple Ingress Controllers on the same worker node using `httpPort`, `httpsPort`, and `statsPort` binding ports.

[id=ocp-4-11-multiple-configuration-control-worker-nodes]
==== Multi-node configuration for control plane and worker nodes
You can simultaneously apply a single configuration to multiple, bare-metal, installer-provisioned infrastructure nodes in a cluster. Applying a single configuration to multiple nodes reduces the risk of misconfiguration due to the single-provisioning process.

This mechanism is only available for initial deployments when the `install-config` file is used.

[id="ocp-4-11-ne-clb-timeouts"]
==== Support for configuring Classic Load Balancer Timeouts on AWS
You can now configure idle connection timeouts for AWS Classic Load Balancers (CLBs) in the Ingress Controller.

For more information, see xref:../networking/configuring_ingress_cluster_traffic/configuring-ingress-cluster-traffic-aws.adoc#nw-configuring-clb-timeouts_configuring-ingress-cluster-traffic-aws[Configuring Classic Load Balancer timeouts]

[id="ocp-4-11-ne-tuningoptions-maxconnections"]
==== Support for configuring maximum number of connections for HAProxy processes
You can now set the maximum number of simultaneous connections that can be established per HAProxy process in the Ingress Controller to any value between 2000 and 2,000,000.

For more information, see xref:../networking/ingress-operator.adoc#nw-ingress-controller-configuration-parameters_configuring-ingress[Ingress Controller configuration parameters].

[id="ocp-4-11-coredns-forwarding-DNS-requests-over-TLS"]
==== Support for CoreDNS forwarding DNS requests over TLS

When working in a highly regulated environment, you might need the ability to secure domain name system (DNS) traffic when forwarding requests to upstream resolvers so that you can ensure additional DNS traffic and data privacy. Cluster administrators can now configure transport layer security (TLS) for forwarded DNS queries. This feature applies only to the DNS Operator and not the CoreDNS instance managed by the Machine Config Operator.

For more information, see xref:../networking/dns-operator.adoc#nw-dns-forward_dns-operator[Using DNS forwarding].

[id="ocp-4-11-ovn-internal-traffic-policy-support"]
==== Internal traffic support for OVN-Kubernetes

As a cluster administrator, you can configure `internalTrafficPolicy=Local` on a Kubernetes service object when using the OVN-Kubernetes Container Network Interface (CNI) cluster network provider. This feature allows cluster administrators to route traffic to an endpoint on the same node that the traffic originated from. If there are no local node endpoints, traffic will be dropped.

For more information, see link:https://kubernetes.io/docs/concepts/services-networking/service-traffic-policy[Service Internal Traffic Policy].

[id="ocp-4-11-routes-spec-subdomain-field"]
==== Enhancement to the Route API

Previously, you could not specify the subdomain of a route, and the `spec.host` field was required to set the host name. You can now specify the `spec.subdomain` field and omit the `spec.host` field of a route. The router deployment that exposes the route will use the `spec.subdomain` value to determine the host name.

You can use this enhancement to simplify sharding by enabling a route to have multiple, distinct host names determined by each router deployment that exposes the route.

[id="ocp-4-11-external-dns-operator"]
==== External DNS Operator

In {product-title} 4.11, the External DNS Operator is available for AWS Route53, Azure DNS, GCP DNS, and Infoblox in General Availability (GA) status. The External DNS Operator is still in Technology Preview (TP) status for BlueCat and AWS Route53 on GovCloud.
With this update, the External DNS Operator provides the following enhancements:

* You can create DNS records on a DNS zone on Infoblox.
* By default, the External DNS Operator creates the operands in the namespace `external-dns-operator`. You do not have to manually create a namespace for the operands and Role-based access control (RBAC) prior to installation.
* You can use the status of the route to retrieve the DNS FQDN names.
* The proxy support for BlueCat DNS provider is now available.
* You can enable the automatic DNS configuration deployment while using the BlueCat DNS provider.

Ensure that you migrate from TP to GA. The upstream version of `ExternalDNS` for an {product-title} 4.11 is `v0.12.0` and for the TP is `v0.10.2`.
For more information, see xref:../networking/external_dns_operator/nw-installing-external-dns-operator-on-cloud-providers.adoc#nw-installing-external-dns-operator-on-cloud-providers[About the External DNS Operator].

[id="ocp-4-11-support-for-pensando-dsc-cards"]
==== SR-IOV Support for Pensando DSC cards

SR-IOV support is now available for xref:../networking/hardware_networks/about-sriov.adoc#supported-devices_about-sriov[Pensando DSC cards]. OpenShift SR-IOV is supported, but you must set a static, Virtual Function (VF) media access control (MAC) address using the SR-IOV CNI config file when using SR-IOV.

[id="ocp-4-11-hardware"]
=== Hardware

[id="ocp-4-11-storage"]
=== Storage

[id="ocp-4-11-registry"]
=== Registry

[id="ocp-4-11-olm"]
=== Operator lifecycle

[id="ocp-4-11-osdk"]
=== Operator development

[id="ocp-4-11-PAO-to-NTO"]
==== Performance Addon Operator functions moved to the Node Tuning Operator

In earlier versions of {product-title}, the Performance Addon Operator provided automatic, low latency performance tuning for applications. In {product-title} 4.11, these functions are part of the Node Tuning Operator. The Node Tuning Operator is part of the standard installation for {product-title} 4.11. If you upgrade to {product-title} 4.11, the Node Tuning Operator removes the Performance Addon Operator and all related artifacts on startup.

For more information, see xref:../operators/operator-reference.adoc#about-node-tuning-operator_platform-operators-ref[Node Tuning Operator].

[NOTE]
====
You must still use the `performance-addon-operator-must-gather` image when running the `must-gather` command with the Performance Profile Creator. For more information, see xref:../scalability_and_performance/cnf-create-performance-profiles.adoc#gathering-data-about-your-cluster-using-must-gather_cnf-create-performance-profiles[Gathering data about your cluster using must-gather]
====

[id="ocp-4-11-builds"]
=== Builds

[id="ocp-4-11-jenkins"]
=== Jenkins

[id="ocp-4-11-machine-api"]
=== Machine API

[id="ocp-4-11-machine-config-operator"]
=== Machine Config Operator

[id="ocp-4-11-nodes"]
=== Nodes

[id="ocp-4-11-nodes-descheduler-simulate"]
==== Descheduler now defaults to simulating pod evictions

By default, the descheduler now runs in predictive mode, which means that it only simulates pod evictions. You can review the descheduler metrics to view details about pods that would be evicted.

To evict pods instead of simulating the evictions, change the descheduler mode to automatic.

For more information, see xref:../nodes/scheduling/nodes-descheduler.adoc#nodes-descheduler[Evicting pods using the descheduler].


[id="ocp-4-11-logging"]
=== Logging

[id="ocp-4-11-ocp-on-rhv-logging"]
==== Red Hat OpenShift on {rh-virtualization} Logging (Technology Preview)
{product-title} 4.11 introduces  a new connector for the {rh-virtualization} API that adds automated log messages for all installations and oVirt components in a cluster.

[id="ocp-4-11-monitoring"]
=== Monitoring


[id="ocp-4-11-scalability-and-performance"]
=== Scalability and performance

[id=ocp-4-11-enhance-scaleup-operations-etcd-clusters]
==== Enhancement to scale-up operations for etcd clusters
The Raft algorithm allows for scaling of etcd members using a new `learner` state. As a result, maintaining cluster quorum, adding and removing new members, and promoting `learners` occur without disrupting the cluster operation.

[id=ocp-4-11-enabling-assisted-installer-service-on-bare-metal_{context}]
{product-title} 4.11 introduces the `imageStorage` option as part of the `AgentServiceConfig` custom resource. This option improves application performance by allowing the user to specify persistent storage claim details for use with the image service.

The `releaseImage` parameter of the `ClusterImageSet` custom resource now supports operating system image version identification. The discovery ISO is based on an operating system image version as the releaseImage, or the latest version if the specified version is unavailable.

The `openshiftVersion` parameter of the `AgentServiceConfig` custom resource (CR) now supports either "x.y" (major.minor) or "x.y.z" (major.minor.patch) formats.

[id=ocp-4-11-ne-livenessProbe-readinessProbe-startupProbe-timeout-configuration]
// This is a 4.11 Network Edge feature that is located in the Scalability and Performance area of the docs, requested to be placed here by Miciah Masters -Sara T.
==== Configuring Ingress Controller (router) Liveness, Readiness, and Startup probes
{product-title} 4.11 introduces the ability to configure the timeout values for the kubelet’s liveness, readiness, and startup probes for router deployments that are managed by the OpenShift Container Platform ingress operator. The ability to set larger timeout values can reduce the risk of unnecessary and unwanted restarts that are caused by short default timeout of 1 second.

For more information see, xref:../scalability_and_performance/routing-optimization.adoc#configuring-ingress-controller-router-liveness-readiness-and-startup-probes[Configuring Ingress Controller (router) Liveness, Readiness, and Startup probes]

[id="ocp-4-11-backup-and-restore"]
=== Backup and restore

[id="ocp-4-11-dev-exp"]
=== Developer experience

[id="ocp-4-11-insights-operator"]
=== Insights Operator

[id="ocp-4-11-auth"]
=== Authentication and authorization

[id="ocp-4-11-auth-oidc-providers"]
==== Active Directory Federation Services is now a supported OIDC provider

The Active Directory Federation Services OpenID Connect (OIDC) provider is now tested and supported with {product-title}.

[NOTE]
====
Currently, it is not supported to use Active Directory Federation Services with {product-title} when custom claims are used.
====

For the full list of OIDC providers, see xref:../authentication/identity_providers/configuring-oidc-identity-provider.adoc#identity-provider-oidc-supported_configuring-oidc-identity-provider[Supported OIDC providers].

[id="ocp-4-11-notable-technical-changes"]
== Notable technical changes

{product-title} {product-version} introduces the following notable technical changes.

// Note: use [discrete] for these sub-headings.

[discrete]
[id="ocp-4-11-router-load-balancing-algorithm-default-update"]
==== Update in default value for setting the router load-balancing algorithm

The `haproxy.router.openshift.io/balance` variable, which sets the router load-balancing algorithm, now defaults to the value `random` instead of `leastconn`. See xref:../networking/routes/route-configuration.adoc#nw-route-specific-annotations_route-configuration[Route-specific annotations] for more information.

[discrete]
[id="ocp-4-11-legacy-service-account"]
==== LegacyServiceAccountTokenNoAutoGeneration is on by default
To align with upstream Kubernetes moving the `LegacyServiceAccountTokenNoAutoGeneration` feature gate to beta and enabling it by default, {product-title} now also follows this security feature and ships with the feature enabled.

This feature removes automatic generation of Service Account token secrets, meaning that a Service Account no longer receives an  automatically generated token upon its creation.

However, OpenShift Controller Manager still requires Service Account tokens to appear in secrets in order to function properly, and it will continue to request these tokens in secrets in {product-title} 4.11. In a future release, the `TokenRequest` API will be used instead.

Service Account token secrets will still appear as auto-generated in {product-title} 4.11. However, instead of two secrets per Service Account, there will now be only one, which will be further reduced to zero in a future release. For now, dockercfg secrets will still be generated as secrets and no secrets will be deleted during upgrades.

[id="ocp-4-11-deprecated-removed-features"]
== Deprecated and removed features

Some features available in previous releases have been deprecated or removed.

Deprecated functionality is still included in {product-title} and continues to be supported; however, it will be removed in a future release of this product and is not recommended for new deployments. For the most recent list of major functionality deprecated and removed within {product-title} {product-version}, refer to the table below. Additional details for more functionality that has been deprecated and removed are listed after the table.

In the table, features are marked with the following statuses:

* *GA*: _General Availability_
* *DEP*: _Deprecated_
* *REM*: _Removed_

//TODO: remove anything that has been REM since 4.7?

.Deprecated and removed features tracker
[cols="3,1,1,1",options="header"]
|====
|Feature |OCP 4.9 |OCP 4.10 | OCP 4.11

|Package manifest format (Operator Framework)
|REM
|REM
|

|SQLite database format for Operator catalogs
|DEP
|DEP
|

|`oc adm catalog build`
|REM
|REM
|REM

|`--filter-by-os` flag for `oc adm catalog mirror`
|REM
|REM
|REM

|v1beta1 CRDs
|REM
|REM
|REM

|Docker Registry v1 API
|REM
|REM
|REM

|Metering Operator
|REM
|REM
|REM

|Scheduler policy
|DEP
|REM
|REM

|`ImageChangesInProgress` condition for Cluster Samples Operator
|DEP
|DEP
|DEP

|`MigrationInProgress` condition for Cluster Samples Operator
|DEP
|DEP
|DEP

|Use of `v1` without a group in `apiVersion` for {product-title} resources
|REM
|REM
|REM

|Use of `dhclient` in {op-system}
|REM
|REM
|REM

|Cluster Loader
|DEP
|REM
|REM

|Bring your own {op-system-base} 7 compute machines
|DEP
|REM
|REM

|`lastTriggeredImageID` field in the `BuildConfig` spec for Builds
|REM
|REM
|REM

|Jenkins Operator
|DEP
|REM
|REM

|HPA custom metrics adapter based on Prometheus
|REM
|REM
|REM

|vSphere 6.7 Update 2 or earlier
|DEP
|DEP
|

|Virtual hardware version 13
|DEP
|DEP
|

|VMware ESXi 6.7 Update 2 or earlier
|DEP
|DEP
|

|Minting credentials for Microsoft Azure clusters
|GA
|REM
|REM

|Persistent storage using FlexVolume
|
|
|


|====

[id="ocp-4-11-deprecated-features"]
=== Deprecated features

[id="ocp-4-11-oc-commands-flags-tokens-deprecated"]
==== OpenShift CLI (oc) commands and flags for requesting tokens are deprecated

The following `oc` commands and flags for requesting tokens are now deprecated:

* The `oc serviceaccounts create-kubeconfig` command
* The `oc serviceaccounts get-token` command
* The `oc serviceaccounts new-token` command
* The `--service-account/-z` flag for the `oc registry login` command

Use the `oc create token` command instead to request tokens.

[id="ocp-4-11-removed-features"]
=== Removed features

[id="ocp-4-11-oc-rhel-7"]
==== {op-system-base} 7 support for the OpenShift CLI (oc) has been removed

Support for using {op-system-base-full} 7 with the OpenShift CLI (`oc`) has been removed. If you use the OpenShift CLI (`oc`) with {op-system-base}, you must use {op-system-base} 8.

[id="ocp-4-11-oc-commands-removed"]
==== OpenShift CLI (oc) commands have been removed

The following OpenShift CLI (`oc`) commands were removed with this release:

* `oc adm migrate etcd-ttl`
* `oc adm migrate image-references`
* `oc adm migrate legacy-hpa`
* `oc adm migrate storage`

[id="ocp-4-11-custom-scheduler"]
==== Support for deploying a custom scheduler manually removed

Support for deploying custom schedulers manually has been removed with this release. Use the xref:../nodes/scheduling/secondary_scheduler/index.adoc#nodes-secondary-scheduler-about_nodes-secondary-scheduler-about[{secondary-scheduler-operator-full}] instead to deploy a custom secondary scheduler in {product-title}.

[id="ocp-4-11-openshiftsdn-sno-not-supported"]
==== Support for deploying {sno} with OpenShiftSDN has been removed

Support for deploying {sno} clusters with OpenShiftSDN has been removed with this release. OVN-Kubernetes is the default networking solution for {sno} deployments.

[id="ocp-4-11-bug-fixes"]
== Bug fixes

[discrete]
[id="ocp-4-11-bare-metal-hardware-bug-fixes"]
==== Bare Metal Hardware Provisioning

[discrete]
[id="ocp-4-11-builds-bug-fixes"]
==== Builds

[discrete]
[id="ocp-4-11-jenkins-bug-fixes"]
==== Jenkins

[discrete]
[id="ocp-4-11-cloud-compute-bug-fixes"]
==== Cloud Compute

[discrete]
[id="ocp-4-11-cloud-credential-operator-bug-fixes"]
==== Cloud Credential Operator

[discrete]
[id="ocp-4-11-cluster-version-operator-bug-fixes"]
==== Cluster Version Operator

[discrete]
[id="ocp-4-11-console-storage-bug-fixes"]
==== Console Storage Plug-in

[discrete]
[id="ocp-4-11-dns-bug-fixes"]
==== Domain Name System (DNS)

[discrete]
[id="ocp-4-11-image-registry-bug-fixes"]
==== Image Registry

[discrete]
[id="ocp-4-11-image-streams-bug-fixes"]
==== Image Streams

[discrete]
[id="ocp-4-11-installer-bug-fixes"]
==== Installer

[discrete]
[id="ocp-4-11-kube-api-server-bug-fixes"]
==== Kubernetes API server

[discrete]
[id="ocp-4-11-kube-scheduler-bug-fixes"]
==== Kubernetes Scheduler

[discrete]
[id="ocp-4-11-machine-config-operator-bug-fixes"]
==== Machine Config Operator

[discrete]
[id="ocp-4-11-management-console-bug-fixes"]
==== Management Console

[discrete]
[id="ocp-4-11-monitoring-bug-fixes"]
==== Monitoring

[discrete]
[id="ocp-4-11-networking-bug-fixes"]
==== Networking

[discrete]
[id="ocp-4-11-node-bug-fixes"]
==== Node

[discrete]
[id="ocp-4-11-openshift-cli-bug-fixes"]
==== OpenShift CLI (oc)

[discrete]
[id="ocp-4-11-container-bug-fixes"]
==== OpenShift containers

[discrete]
[id="ocp-4-11-openshift-controller-manage-bug-fixes"]
==== OpenShift Controller Manager

[discrete]
[id="ocp-4-11-olm-bug-fixes"]
==== Operator Lifecycle Manager (OLM)

[discrete]
[id="ocp-4-11-openshift-api-server-bug-fixes"]
==== OpenShift API server

[discrete]
[id="ocp-4-11-openshift-update-service-bug-fixes"]
==== OpenShift Update Service

[discrete]
[id="ocp-4-11-rhcos-bug-fixes"]
==== {op-system-first}

* Before this update, if a machine was booted through PXE and the `BOOTIF` argument was on the kernel command line, the machine would boot with DHCP enabled on only a single interface. With this update, the machine boots with DHCP enabled on all interfaces even if the `BOOTIF` argument is provided. (link:https://bugzilla.redhat.com/show_bug.cgi?id=2032717[BZ#2032717])

[discrete]
[id="ocp-4-11-performance-addon-operator-bug-fixes"]
==== Performance Addon Operator

[discrete]
[id="ocp-4-11-routing-bug-fixes"]
==== Routing

[discrete]
[id="ocp-4-11-samples-bug-fixes"]
==== Samples

[discrete]
[id="ocp-4-11-storage-bug-fixes"]
==== Storage

[discrete]
[ids="ocp-4-11-telco-edge-bug-fixes"]
==== Telco Edge

[discrete]
[id="ocp-4-11-web-console-admin-perspective-bug-fixes"]
==== Web console (Administrator perspective)

[discrete]
[id="ocp-4-11-web-console-developer-perspective-bug-fixes"]
==== Web console (Developer perspective)

[id="ocp-4-11-technology-preview"]
== Technology Preview features
//Placeholder for TELCODOCS-752

Some features in this release are currently in Technology Preview. These experimental features are not intended for production use. Note the following scope of support on the Red Hat Customer Portal for these features:

link:https://access.redhat.com/support/offerings/techpreview[Technology Preview Features Support Scope]

In the table below, features are marked with the following statuses:

* *TP*: _Technology Preview_
* *GA*: _General Availability_
* *-*: _Not Available_
* *DEP*: _Deprecated_

//TODO: remove anything that has been GA since 4.7?

.Technology Preview tracker
[cols="4,1,1,1",options="header"]
|====
|Feature |OCP 4.9 |OCP 4.10 | OCP 4.11

|Precision Time Protocol (PTP)
|TP
|TP
|

|`oc` CLI plug-ins
|GA
|GA
|GA

|CSI Volumes in OpenShift Builds
|-
|TP
|

|Service Binding
|TP
|GA
|GA

|Raw Block with Cinder
|GA
|GA
|GA

|CSI volume expansion
|TP
|TP
|

|CSI AliCloud Disk Driver Operator
|-
|GA
|GA

|CSI Azure Disk Driver Operator
|TP
|GA
|GA

|CSI Azure File Driver Operator
|-
|TP
|

|CSI Azure Stack Hub Driver Operator
|GA
|GA
|GA

|CSI GCP PD Driver Operator
|GA
|GA
|GA

|CSI IBM VPC Block Driver Operator
|-
|GA
|GA

|CSI OpenStack Cinder Driver Operator
|GA
|GA
|GA

|CSI AWS EBS Driver Operator
|GA
|GA
|GA

|CSI AWS EFS Driver Operator
|TP
|GA
|GA

|CSI automatic migration
|TP
|TP
|

|CSI inline ephemeral volumes
|TP
|TP
|

|CSI vSphere Driver Operator
|TP
|GA
|GA

|Shared Resource CSI Driver
|-
|TP
|

|Automatic device discovery and provisioning with Local Storage Operator
|TP
|TP
|

|OpenShift Pipelines
|GA
|GA
|GA

|OpenShift GitOps
|GA
|GA
|GA

|OpenShift sandboxed containers
|TP
|GA
|GA

|Vertical Pod Autoscaler
|GA
|GA
|GA

|Cron jobs
|GA
|GA
|GA

|PodDisruptionBudget
|GA
|GA
|GA

|Adding kernel modules to nodes with kvc
|TP
|TP
|TP

|Egress router CNI plug-in
|GA
|GA
|GA

|Scheduler profiles
|GA
|GA
|GA

|Non-preempting priority classes
|TP
|TP
|TP

|Kubernetes NMState Operator
|TP
|GA
|GA

|Assisted Installer
|TP
|TP
|TP

|AWS Security Token Service (STS)
|GA
|GA
|GA

|`kdump` on `x86_64` architecture
|TP
|TP
|GA

|`kdump` on `arm64` architecture
|-
|-
|TP

|`kdump` on `s390x` architecture
|TP
|TP
|TP

|`kdump` on `ppc64le` architecture
|TP
|TP
|TP

|OpenShift Serverless
|GA
|GA
|GA

|OpenShift on ARM platforms
|-
|GA
|GA

|Serverless functions
|TP
|TP
|TP

|Data Plane Development Kit (DPDK) support
|GA
|GA
|GA

|Memory Manager feature
|TP
|TP
|

|CNI VRF plug-in
|GA
|GA
|GA

|Cluster Cloud Controller Manager Operator
|GA
|GA
|GA

|Cloud controller manager for Alibaba Cloud
|-
|TP
|

|Cloud controller manager for Amazon Web Services
|TP
|TP
|

|Cloud controller manager for Google Cloud Platform
|-
|TP
|

|Cloud controller manager for IBM Cloud
|-
|GA
|GA

|Cloud controller manager for Microsoft Azure
|TP
|TP
|

|Cloud controller manager for Microsoft Azure Stack Hub
|GA
|GA
|GA

|Cloud controller manager for {rh-openstack-first}
|TP
|TP
|

|Cloud controller manager for VMware vSphere
|-
|TP
|

|Driver Toolkit
|TP
|TP
|TP

|Special Resource Operator (SRO)
|TP
|TP
|

|Simple Content Access
|TP
|GA
|GA

|Node Health Check Operator
|TP
|TP
|

|Network bound disk encryption (Requires Clevis, Tang)
|GA
|GA
|GA

|MetalLB Operator
|GA
|GA
|GA

|CPU manager
|GA
|GA
|GA

|Pod-level bonding for secondary networks
|-
|TP
|

|IPv6 dual stack
|GA
|GA
|GA

|Multicluster console
|-
|TP
|

|Selectable Cluster Inventory
|-
|TP
|

|Hyperthreading-aware CPU manager policy
|-
|TP
|

|Dynamic Plug-ins
|-
|TP
|

|Hybrid Helm Operator
|-
|TP
|

|Alert routing for user-defined projects monitoring
|-
|TP
|

|Disconnected mirroring with the oc-mirror CLI plug-in
|-
|TP
|

|Mount shared entitlements in BuildConfigs in RHEL
|-
|TP
|

|Mount shared secrets in RHEL
|-
|GA
|GA

|Support for {rh-openstack} DCN
|-
|TP
|

|Support for external cloud providers for clusters on {rh-openstack}
|-
|TP
|

|OVS hardware offloading for clusters on {rh-openstack}
|-
|TP
|
|====

[id="ocp-4-11-known-issues"]
== Known issues

// TODO: This known issue should carry forward to 4.8 and beyond! This needs some SME/QE review before being updated for 4.11. Need to check if KI should be removed or should stay.
* In {product-title} 4.1, anonymous users could access discovery endpoints. Later releases revoked this access to reduce the possible attack surface for security exploits because some discovery endpoints are forwarded to aggregated API servers. However, unauthenticated access is preserved in upgraded clusters so that existing use cases are not broken.
+
If you are a cluster administrator for a cluster that has been upgraded from {product-title} 4.1 to 4.8, you can either revoke or continue to allow unauthenticated access. Unless there is a specific need for unauthenticated access, you should revoke it. If you do continue to allow unauthenticated access, be aware of the increased risks.
+
[WARNING]
====
If you have applications that rely on unauthenticated access, they might receive HTTP `403` errors if you revoke unauthenticated access.
====
+
Use the following script to revoke unauthenticated access to discovery endpoints:
+
[source,bash]
----
## Snippet to remove unauthenticated group from all the cluster role bindings
$ for clusterrolebinding in cluster-status-binding discovery system:basic-user system:discovery system:openshift:discovery ;
do
### Find the index of unauthenticated group in list of subjects
index=$(oc get clusterrolebinding ${clusterrolebinding} -o json | jq 'select(.subjects!=null) | .subjects | map(.name=="system:unauthenticated") | index(true)');
### Remove the element at index from subjects array
oc patch clusterrolebinding ${clusterrolebinding} --type=json --patch "[{'op': 'remove','path': '/subjects/$index'}]";
done
----
+
This script removes unauthenticated subjects from the following cluster role bindings:
+
--
** `cluster-status-binding`
** `discovery`
** `system:basic-user`
** `system:discovery`
** `system:openshift:discovery`
--
+
(link:https://bugzilla.redhat.com/show_bug.cgi?id=1821771[*BZ#1821771*])

// TODO: This known issue should carry forward to 4.9 and beyond!
* The `oc annotate` command does not work for LDAP group names that contain an equal sign (`=`), because the command uses the equal sign as a delimiter between the annotation name and value. As a workaround, use `oc patch` or `oc edit` to add the annotation. (link:https://bugzilla.redhat.com/show_bug.cgi?id=1917280[*BZ#1917280*])

[id="ocp-4-11-asynchronous-errata-updates"]
== Asynchronous errata updates

Security, bug fix, and enhancement updates for {product-title} {product-version} are released as asynchronous errata through the Red Hat Network. All {product-title} {product-version} errata is https://access.redhat.com/downloads/content/290/[available on the Red Hat Customer Portal]. See the https://access.redhat.com/support/policy/updates/openshift[{product-title} Life Cycle] for more information about asynchronous errata.

Red Hat Customer Portal users can enable errata notifications in the account settings for Red Hat Subscription Management (RHSM). When errata notifications are enabled, users are notified through email whenever new errata relevant to their registered systems are released.

[NOTE]
====
Red Hat Customer Portal user accounts must have systems registered and consuming {product-title} entitlements for {product-title} errata notification emails to generate.
====

This section will continue to be updated over time to provide notes on enhancements and bug fixes for future asynchronous errata releases of {product-title} {product-version}. Versioned asynchronous releases, for example with the form {product-title} {product-version}.z, will be detailed in subsections. In addition, releases in which the errata text cannot fit in the space provided by the advisory will be detailed in subsections that follow.

[IMPORTANT]
====
For any {product-title} release, always review the instructions on xref:../updating/updating-cluster-within-minor.adoc#updating-cluster-within-minor[updating your cluster] properly.
====

//Update with relevant advisory information
[id="ocp-4-11-0-ga"]
=== RHSA-2022:0056 - {product-title} 4.11.0 image release, bug fix, and security update advisory

Issued: TBD

{product-title} release 4.11.0, which includes security updates, is now available. The list of bug fixes that are included in the update is documented in the link:https://access.redhat.com/errata/RHSA-2022:0056[RHSA-2022:0056] advisory. A secondary set of bug fixes can be found in the link:https://access.redhat.com/errata/RHEA-2022:0748[RHEA-2022:0748] advisory. The RPM packages that are included in the update are provided by the link:https://access.redhat.com/errata/RHSA-2022:0055[RHSA-2022:0055] advisory.

Space precluded documenting all of the container images for this release in the advisory. See the following article for notes on the container images in this release:

link:https://access.redhat.com/solutions/[{product-title} 4.11.0 container image list]
