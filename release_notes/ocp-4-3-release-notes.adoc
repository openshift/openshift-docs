[id="ocp-4-3-release-notes"]
= {product-title} {product-version} release notes
include::modules/common-attributes.adoc[]
:context: release-notes

toc::[]

Red Hat {product-title} provides developers and IT organizations with a hybrid
cloud application platform for deploying both new and existing applications on
secure, scalable resources with minimal configuration and management overhead.
{product-title} supports a wide selection of programming languages and
frameworks, such as Java, JavaScript, Python, Ruby, and PHP.

Built on Red Hat Enterprise Linux and Kubernetes, {product-title}
provides a more secure and scalable multi-tenant operating system for today’s
enterprise-class applications, while delivering integrated application runtimes
and libraries. {product-title} enables organizations to meet security, privacy,
compliance, and governance requirements.

[id="ocp-4-3-about-this-release"]
== About this release

Red Hat {product-title}
(link:https://access.redhat.com/errata/RHBA-2019:1234[RHBA-2019:1234]) is now
available. This release uses Kubernetes 1.16 with CRI-O runtime. This is an
increase of two versions of Kubernetes from {product-title} 4.2, which used
Kubernetes 1.14. New features, changes, and known issues that pertain to
{product-title} {product-version} are included in this topic.

{product-title} {product-version} clusters are available at
https://cloud.redhat.com/openshift. The {cloud-redhat-com}
application for {product-title} allows you to deploy OpenShift clusters to
either on-premise or cloud environments.

{product-title} {product-version} is supported on Red Hat Enterprise Linux 7.6 or
later, as well as Red Hat Enterprise Linux CoreOS 4.3.

You must use {op-system-first} for the control plane, or master, machines and
can use either {op-system} or Red Hat Enterprise Linux 7.6 or later for
compute, or worker, machines.

[IMPORTANT]
====
Because only Red Hat Enterprise Linux version 7.6 or later is supported for compute
machines, you must not upgrade the Red Hat Enterprise Linux compute machines to
version 8.
====

[id="ocp-4-3-new-features-and-enhancements"]
== New features and enhancements

This release adds improvements related to the following components and concepts.

[id="ocp-4-3-installation-and-upgrade"]
=== Installation and upgrade

[id="ocp-4-3-phased-rollout"]
==== {product-title} upgrades phased rollout

In {product-title} 4.1, Red Hat introduced the concept of upgrade channels for
recommending the appropriate upgrade versions to your cluster. Upgrade channels
separate upgrade strategies and also are used to control the cadence of updates.
Channels are tied to a minor version of {product-title}. For instance,
{product-title} {product-version} channels will never include an upgrade to a
4.4 release. This ensures administrators make an explicit decision to upgrade to
the next minor version of {product-title}. Channels only control updates and
have no impact on the version of the cluster you install; the
`openshift-install` binary for a given patch level of  {product-title} always
installs that patch level.

See link:https://access.redhat.com/articles/4495171[OpenShift 4.x Upgrades
phased roll out] for more information on the types of updates and upgrade
channels.

Because upgrades are published to the channels as they are gradually rolled out
to customers based on data from the Red Hat Service Reliability Engineering
(SRE) team, you might not immediately see notification in the web console that
updates from version 4.2.z to 4.3 are available at initial release.

[id="ocp-4-3-fips-clusters"]
==== FIPS compliant clusters

You can now install an OpenShift Container Platform cluster that that use FIPS
validated cryptographic libraries. {product-title} uses certain FIPS validated
modules within Red Hat Enterprise Linux (RHEL) and Red Hat CoreOS (RHCOS) for the operating
system components that it uses.

[id="ocp-4-3-deploy-private-clusters"]
==== Deploy private clusters on AWS, Azure, or GCP

You can install a private cluster into an

* existing VPC on Amazon Web Services (AWS).
* existing VPC on Google Cloud Platform (GCP).
* existing Azure Virtual Network (VNet) on Microsoft Azure.

To create a private cluster on these cloud platforms, you must provide an
existing private VPC/VNet and subnets to host the cluster. The installation
program configures the Ingress Operator and API server for access from only the
private network.

For more information on deploying private clusters to each supported cloud
platform, see the installation guides for
xref:../installing/installing_aws/installing-aws-private.adoc#installing-aws-private[AWS],
xref:../installing/installing_azure/installing-azure-private.adoc#installing-azure-private[Azure],
and xref:../installing/installing_gcp/installing-gcp-private.adoc#installing-gcp-private[GCP].

[id="ocp-4-3-security"]
=== Security

[id="ocp-4-3-cert-rotation"]
==== Automatic rotation of certificates

Automated service CA rotation will be available in this release in a future
z-stream update. This is to allow time for administrators to plan accordingly
for their environments.

[id="ocp-4-3-encrypt-data-stored-in-etcd"]
==== Encrypt data stored in etcd

You can now xref:../authentication/encrypting-etcd.adoc#encrypting-etcd[encrypt data stored in etcd].
Enabling etcd encryption for your cluster provides an additional layer of data
security.

When you enable etcd encryption, the following OpenShift API server and
Kubernetes API server resources are encrypted:

* Secrets
* ConfigMaps
* Routes
* OAuth access tokens
* OAuth authorize tokens

[id="ocp-4-3-cluster-monitoring"]
=== Cluster monitoring

[id="ocp-4-3-performance-improvements-for-promql-query-browser-in-console"]
==== Improvements for PromQL query browser in web console

Performance improvements are now available for the PromQL query browser used in
the {product-title} web console.

[id="ocp-4-3-use-pod-capacity-metric-for-kubelettoomanypods-alert"]
==== Use Pod capacity metric for KubeletTooManyPods alert

The `KubeletTooManyPods` alert now uses the Pod capacity metric as a threshold
instead of a fixed number.

[id="ocp-4-3-monitor-your-own-services"]
==== Monitor your own services (Technology Preview)

The existing monitoring stack can be extended so you can configure monitoring
for your own Services.

[id="ocp-4-3-querying-metrics-in-web-console"]
==== Querying metrics in the web console (Technology Preview)

Querying metrics is now available through the Developer perspective inside the
{product-title} web console.

[id="ocp-4-3-machine-api"]
=== Machine API

[id="ocp-4-3-repair-damaged-machines-machine-health-checking"]
==== Automatically repair damaged machines with machine health checking

A machine instance that is deleted out of band no longer attempts to recreate a
new instance; instead, the machine enters a _failed_ phase. You can
automatically repair damaged machines in a machine pool by configuring and
deploying a machine health check.

The controller that observes a MachineHealthCheck resource checks for the status
that you define. If a machine fails the health check, it is automatically
deleted and a new one is created to take its place. When a machine is deleted,
you see a machine-deleted event. To limit disruptive impact of the machine
deletion, the controller drains and deletes only one node at a time.

To stop the check, you remove the resource.

[id="ocp-4-3-logging"]
=== Logging

[id="ocp-4-3-cluster-logging-log-forwarding"]
==== Log forwarding (Technology Preview)

The log forwarding feature provides a way to ship container and node logs
to destinations that are not necessarily managed by the {product-title} cluster logging infrastructure.
Destination endpoints can be on or off your {product-title} cluster. Log forwarding provides an easier way to forward
logs than using Fluentd plug-ins without requiring you to set the cluster to Unmanaged.

////
See
xref:../logging/config/cluster-logging-log-forwarding.adoc#cluster-logging-log-forwarding[Forwarding cluster logs to specific endpoints]
for more information.
////

[id="ocp-4-3-developer-experience"]
=== Developer experience

[id="ocp-4-3-odo"]
==== OpenShift Do enhancements

OpenShift Do (odo) has a few enhancements that focus on the user experience of
application deployment:

* `PushTimeout` has been added as a configurable wait parameter.
* Both the Service Catalog and component creation have been improved with
extended output and information prompts.
* Architecture support has been expanded to IBM Z and PowerPC platforms,
providing binaries that are available for installation.

[id="ocp-4-3-helm"]
==== Helm (Technology Preview)

Helm is a package manager for Kubernetes and {product-title} applications. It uses a
packaging format called Helm charts to simplify defining, installing, and
upgrading of applications and Services.

[id="ocp-4-3-web-console"]
=== Web console

[id="ocp-4-3-console-project-link"]
==== New ConsoleProjectLink option in the ConsoleLink Custom Resource Definition

The new `ConsoleProjectLink` option in the `ConsoleLink` Custom Resource
Definition lets you add project-specific links to the project dashboard.

[id="ocp-4-3-console-yaml-sample"]
==== New ConsoleYAMLSample Custom Resource Definition

The new `ConsoleYAMLSample` Custom Resource Definition provides the ability to
dynamically add YAML examples to any Kubernetes resource at any time.

See
xref:../web-console/customizing-the-web-console.adoc#customizing-web-console[Customizing
the web console] for more information.

[id="ocp-4-3-open-a-support-case"]
==== Open a Support case from the web console

You can now open a Red Hat Support case from the help menu in the web console.

[id="ocp-4-3-developer-perspective"]
==== Developer perspective

You can now use the Developer perspective to:

* Create serverless applications and revisions, and split traffic between the
revisions.
* Delete an application and all its components.
* Assign RBAC permissions to users within a project.
* Bind an application with a Service using the binding connector.

[id="ocp-4-3-scale"]
=== Scale

[id="ocp-4-3-scale-cluster-limits"]
==== Cluster maximums

Updated guidance around
xref:../scalability_and_performance/planning-your-environment-according-to-object-maximums.adoc#planning-your-environment-according-to-object-maximums[Cluster
maximums] for {product-title} {product-version} is now available.

Use the link:https://access.redhat.com/labs/ocplimitscalculator/[{product-title}
Limit Calculator] to estimate cluster limits for your environment.

[id="ocp-4-3-storage"]
=== Storage

[id="ocp-4-3-ocs-4-2"]
==== OpenShift Container Storage 4.2

You can now deploy, manage, monitor, and migrate a Red Hat OpenShift Container Storage 4.2 cluster. See the link:https://access.redhat.com/documentation/en-us/red_hat_openshift_container_storage/4.2/html/4.2_release_notes/[Red Hat OpenShift Container Storage 4.2 Release Notes] for more information.

[id="ocp-4-3-iscsi-persistent-storage"]
==== Persistent storage Using iSCSI

Persistent volumes using iSCSI, previously in Technology Preview, is now fully supported in {product-title} 4.3.

[id="ocp-4-3-raw-block-volume"]
==== Raw block volume support

iSCSI raw block volumes are now fully supported with OpenShift Container Platform 4.3.

Raw block volumes using Cinder are now in Technology Preview.

[id="ocp-4-3-csi-volume-expansion"]
==== CSI volume expansion

You can now use the Container Storage Interface (CSI) to expand storage volumes after they have already been created. This feature is enabled by default in Technology Preview.

[id="ocp-4-3-lso-tolerations"]
==== Use tolerations in Local Storage Operator

The Local Storage Operator now tolerates node taints, allowing you to provision local volumes from tainted nodes.

[id="ocp-4-3-operators"]
=== Operators

[id="ocp-4-3-samples-operator"]
==== Samples Operator

The Samples Operator automatically recognizes the cluster architecture during
installation and does not install incompatible x86_64 content on Power and Z
architectures.

The Samples Operator also uses Prometheus metrics to gather information about
which imagestreams have failed to import, and if the Samples Operator has
invalid configurations. An alert is sent if an imagestream fails to import or
the Samples Operator has an invalid configuration.

[id="ocp-4-3-image-registry-operator"]
=== Image Registry Operator

The following enhancements are now available for the Image Registry Operator:

* The registry management state is set as `Removed` on Baremetal, vSphere, and
Red Hat Virtualization platforms so other storage providers can be configured.
New installations must set the registry state to `Managed` in addition to
provisioning storage.

* An alert is sent when the registry storage has changed, as this could result
in data loss.

[id="ocp-4-3-notable-technical-changes"]
== Notable technical changes

{product-title} {product-version} introduces the following notable technical
changes.

[discrete]
[id="ocp-4-3-osdk"]
==== Operator SDK v0.12.0

{product-title} 4.3 supports Operator SDK v0.12.0 or later, which includes the
following changes:

* The required link:https://golang.org/dl[Go] version has changed from v1.10 to
v1.13.
* Support for `dep`-based projects has been removed. All Go projects are now
scaffolded to use Go modules. The `operator-sdk new` command's `--dep-manager`
flag has likewise been removed.

[id="ocp-4-3-unsupported-features"]
=== Unsupported features

[id="ocp-4-3-local-provisioner"]
==== Local storage provisioner

The previously deprecated Technical Preview of the `ose-local-storage-provisioner` container has been removed. It is recommended to use the OLM-based Local Storage Operator (`ose-local-storage-operator`).

[id="ocp-4-3-pv-snapshots"]
==== Persistent volume snapshots

Persistent volume snapshots were deprecated in {product-title} 4.2 and have been removed in {product-title} 4.3.

[id="ocp-4-3-deprecated-features"]
=== Deprecated features

[id="ocp-4-3-pipelines-now-deprecated"]
==== Pipelines build strategy

The pipelines build strategy is now deprecated. Use OpenShift Pipelines
instead.

[id="ocp-4-3-beta-workload-alerts-deprecated"]
==== Beta workload alerts

The `apps/v1beta1`, `apps/v1beta2`, and `extensions/v1beta1` workloads are now
deprecated with the introduction of Kubernetes 1.16.

The `UsingDeprecatedAPIExtensionsV1Beta1` alert is prompted when you use one of
the deprecated APIs. These deprecated APIs will be removed in the next version
of {product-title}, so it is critical that you migrate to supported APIs.

[id="ocp-4-3-service-catalog-deprecated"]
==== Service Catalog, Template Service Broker, Ansible Service Broker, and their Operators

Service Catalog, Template Service Broker, Ansible Service Broker, and their
associated Operators were deprecated in {product-title} 4.2 and will be removed
in a future {product-title} release. If they are enabled in 4.3, the web console
now warns the user that these features are still enabled.

The following alerts can be viewed from the *Monitoring* -> *Alerts* page and
have a *Warning* severity:

* `ServiceCatalogAPIServerEnabled`
* `ServiceCatalogControllerManagerEnabled`
* `TemplateServiceBrokerEnabled`
* `AnsibleServiceBrokerEnabled`

The following related APIs will be removed in a future release:

* `.servicecatalog.k8s.io/v1beta1`
* `.automationbroker.io/v1alpha1`
* `.osb.openshift.io/v1`

[id="ocp-4-3-bug-fixes"]
== Bug fixes

*Web Console*

* Previously, for admin users, non-serverless workloads showed resources for serverless workloads in the *Topology* resources panel and non-admin users would not be able to view any workloads. With this bug fix, the resources panel works as expected in the case of normal and Knative specific deployments and a non-admin user can now view the workloads.(link:https://bugzilla.redhat.com/show_bug.cgi?id=1758628[*BZ#1758628*])
* Previously, Pod status was depicted inconsistently in the *Topology* view, *Resources* side panel, and the *Deployment Config Details* page. With this bug fix, the *Topology* and *Resources* pages share the same logic, thus depicting the Pod status consistently.(link:https://bugzilla.redhat.com/show_bug.cgi?id=1760827[*BZ#1760827*])
* Previously, when an application was created using the *Add* page options, the deployed image ignored the selected target port and always used the first entry. With this bug fix, code in the `import-submit-utils` and `deployImage-submit-utils` files has been refactored to use shared code, enabling the deployed image to use the selected port.(link:https://bugzilla.redhat.com/show_bug.cgi?id=1760836[*BZ#1760836*])
* Previously, certain features, such as the name of the application and the build status, were not rendered in the *Topology* view on the Edge browser. With this bug fix, the Edge browser renders the application name and the build status as expected.(link:https://bugzilla.redhat.com/show_bug.cgi?id=1760858[*BZ#1760858*])


[id="ocp-4-3-technology-preview"]
== Technology Preview features

Some features in this release are currently in Technology Preview. These
experimental features are not intended for production use. Note the
following scope of support on the Red Hat Customer Portal for these features:

link:https://access.redhat.com/support/offerings/techpreview[Technology Preview
Features Support Scope]

In the table below, features marked *TP* indicate _Technology Preview_ and
features marked *GA* indicate _General Availability_. Features marked as *-*
indicate that the feature is removed from the release or deprecated.

.Technology Preview Tracker
[cols="4",options="header"]
|====
|Feature |OCP 4.1 |OCP 4.2 |OCP 4.3

|Prometheus Cluster Monitoring
|GA
|GA
|GA

|Precision Time Protocol (PTP)
|-
|-
|TP

|CRI-O for runtime Pods
|GA
|GA
|GA

|Tenant Driven Snapshotting
|TP
|TP
|TP

|`oc` CLI Plug-ins
|TP
|TP
|TP

|Service Catalog
|GA
|GA
|--

|Template Service Broker
|GA
|GA
|--

|OpenShift Ansible Service Broker
|GA
|GA
|--

|Network Policy
|GA
|GA
|GA

|Multus
|GA
|GA
|GA

|New Add Project Flow
|GA
|GA
|GA

|Search Catalog
|GA
|GA
|GA

|Cron Jobs
|GA
|GA
|GA

|Kubernetes Deployments
|GA
|GA
|GA

|StatefulSets
|GA
|GA
|GA

|Explicit Quota
|GA
|GA
|GA

|Mount Options
|GA
|GA
|GA

|System Containers for Docker, CRI-O
|-
|-
|-

|Hawkular Agent
|-
|-
|-

|Pod PreSets
|-
|-
|-

|experimental-qos-reserved
|TP
|TP
|TP

|Pod sysctls
|GA
|GA
|GA. See xref:ocp-4-3-known-issues[Known issues] for current limitations.

|Central Audit
|GA
|-
|-

|Static IPs for External Project Traffic
|GA
|GA
|GA

|Template Completion Detection
|GA
|GA
|GA

|`replicaSet`
|GA
|GA
|GA

|Clustered MongoDB Template
|-
|-
|-

|Clustered MySQL Template
|-
|-
|-

|ImageStreams with Kubernetes Resources
|GA
|GA
|GA

|Device Manager
|GA
|GA
|GA

|Persistent Volume Resize
|GA
|GA
|GA

|Huge Pages
|GA
|GA
|GA

|CPU Pinning
|GA
|GA
|GA

|Admission Webhooks
|TP
|GA
|GA

|External provisioner for AWS EFS
|TP
|TP
|TP

|Pod Unidler
|TP
|TP
|TP

|Node Problem Detector
|TP
|TP
|TP

|Ephemeral Storage Limit/Requests
|TP
|TP
|TP

|Descheduler
|TP
|TP
|TP

|CephFS
|TP
|TP
|TP

|Podman
|TP
|TP
|TP

|Kuryr CNI Plug-in
|TP
|TP
|TP

|Sharing Control of the PID Namespace
|TP
|TP
|TP

|Manila Provisioner
|TP
|TP
|TP

|Cluster Administrator console
|GA
|GA
|GA

|Cluster Autoscaling
|GA
|GA
|GA

|Container Storage Interface (CSI)
|TP
|TP
|GA

|Operator Lifecycle Manager
|TP
|GA
|GA

|Red Hat OpenShift Service Mesh
|TP
|GA
|GA

|"Fully Automatic" Egress IPs
|GA
|GA
|GA

|Pod Priority and Preemption
|GA
|GA
|GA

|Multi-stage builds in Dockerfiles
|GA
|GA
|GA

|OVN-Kubernetes Pod network provider
|TP
|TP
|TP

|HPA custom metrics adapter based on Prometheus
|TP
|TP
|TP

|Machine health checks
|TP
|TP
|GA

|Raw Block with iSCSI
|
|TP
|GA

|Raw Block with Cinder
|
|
|TP

|OperatorHub
|
|GA
|GA

|Three-node bare metal deployments
|
|TP
|TP

|SR-IOV Network Operator
|
|TP
|GA

|Helm CLI
|
|
|TP

|Service Binding
|
|
|TP

|Log forwarding
|
|
|TP

|User workload monitoring
|
|
|TP

|====

[id="ocp-4-3-known-issues"]
== Known issues

* If you have Service Mesh installed, upgrade Service Mesh before upgrading
{product-title}. For a workaround, see
xref:../service_mesh/service_mesh_install/updating-ossm.adoc#updating-ossm[Updating OpenShift
Service Mesh from version 1.0.1 to 1.0.2].
* Determination of active Pods when a rollout fails can be incorrect in the *Topology* view. (link:https://bugzilla.redhat.com/show_bug.cgi?id=1760828[*BZ#1760828*])
* When a user with limited cluster-wide permissions creates an application using the *Container Image* option in the *Add* page, and chooses the *Image name from internal registry* option, no imagestreams are detected in the project, though an imagestream exists. (link:https://bugzilla.redhat.com/show_bug.cgi?id=1784264[*BZ#1784264*])
* The `ImageContentSourcePolicy` is not supported by the registry at the time of
release (link:https://bugzilla.redhat.com/show_bug.cgi?id=1787112[*BZ#1787112*]).
In disconnected environments, Jenkins can be enabled to pull through by
default. Use this command as a workaround to use Jenkins in disconnected
environments:
+
----
$ oc tag <jenkins_source_image> jenkins:2 --reference-policy=source -n openshift
----
* The OpenShift Cluster Version Operator (CVO) does not correctly mount SSL certificates from the host, which prevents cluster version updates when using MITM proxy checking. (link:https://bugzilla.redhat.com/show_bug.cgi?id=1773419[*BZ#1773419*])
* When adding `defaultProxy` and `gitProxy` under `builds.config.openshift.io`，
the Jenkins pipeline build cannot retrieve the proxy configuration (link:https://bugzilla.redhat.com/show_bug.cgi?id=1753562[*BZ#1753562*]).
* When installing OpenStack Storage Platform 15 with self-signed certificates, the
`clouds.yaml` file generated by the installer cannot be used to install
{product-title} (link:https://bugzilla.redhat.com/show_bug.cgi?id=1786314[*BZ#1786314*]).
* `Machine-api` cannot create workers on OpenStack Storage Platform enviroments installed with self-signed certificates (link:https://bugzilla.redhat.com/show_bug.cgi?id=1769879[*BZ#1769879*]).
* Installer Provisioned Infrastructure (IPI) of Upshift on Openstack Storage Platform fail due to `Security group rule already exists` errors (link:https://bugzilla.redhat.com/show_bug.cgi?id=1788062[*BZ#1788062*]).
* Clusters will display errors and abnormal states after `etcd` backup or restore functions are conducted during the `etcd` encryption migration process (link:https://bugzilla.redhat.com/show_bug.cgi?id=1776811[*BZ#1776811*]).
