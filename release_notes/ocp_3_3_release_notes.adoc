[[release-notes-ocp-3-3-release-notes]]
= {product-title} 3.3 Release Notes
{product-author}
{product-version}
:data-uri:
:icons:
:experimental:
:toc: macro
:toc-title:
:prewrap!:

toc::[]

== Overview

Red Hat {product-title} is a Platform as a Service (PaaS) that provides
developers and IT organizations with a cloud application platform for deploying
new applications on secure, scalable resources with minimal configuration and
management overhead. OpenShift Enterprise supports a wide selection of
programming languages and frameworks, such as Java, Ruby, and PHP.

Built on Red Hat Enterprise Linux and Google Kubernetes, {product-title}
provides a secure and scalable multi-tenant operating system for todayâ€™s
enterprise-class applications, while providing integrated application runtimes
and libraries. {product-title} brings the OpenShift PaaS platform to customer
data centers, enabling organizations to implement a private PaaS that meets
security, privacy, compliance, and governance requirements.

[[ocp-33-new-features-and-enhancements]]
== New Features and Enhancements

{product-title} version 3.3 is now available. Ensure that you follow the
instructions on upgrading your {product-title} cluster properly, including steps
specific to this release.

[IMPORTANT]
====
For any {product-title} release, always review the Installation and
Configuration guide for instructions on
xref:../install_config/upgrading/index.adoc#install-config-upgrading-index[upgrading
your cluster] properly, including any additional steps that may be required for
a specific release.
====

[[ocp-33-new-features-and-enhancements-admins]]
=== For Administrators

[[ocp-33-updated-infrastructure-components]]
==== Updated Infrastructure Components

- Kubernetes has been updated to v1.2.0-36.
- etcd has been updated to v2.2.5.
- OpenShift Enterprise 3.2 requires Docker 1.9.1. See below for more.

[[ocp-33-configuration-and-administration]]
==== Configuration and Administration

- One
- Two
- Three

[[ocp-33-security]]
==== Security

- One
** One-1
** One-2
- Two

[[ose-integrated-docker-registry]]
==== Integrated Docker Registry

- One
- Two

[[ocp-33-routes]]
==== Routes

- One
- Two

[[ocp-33-storage]]
==== Storage

- One

[[ocp-33-administrator-cli]]
==== Administrator CLI

- One
- Two

[[ocp-33-admin-web-console]]
==== Web Console

- One
- Two

[[ocp-33-new-features-and-enhancements-devs]]
=== For Developers

[[ocp-33-dev-web-console]]
==== Web Console

- One
+
image::ose32-relnote-project-overview.png["Updated Web Console Theme"]
- Two
+
image::ose32-relnote-about-page.png["New About Page"]
- You can now add or edit resource constraints for your containers during *Add to
Project* or later from the deployment configuration.
+
image::ose32-relnote-resource-limits.png["Set Resource Limits"]
- Three
- Four

[[ocp-33-developer-cli]]
==== Developer CLI

- One
+
[options="header",cols="1,3"]
|====
|Command          |Description

|`namespace`
|Two

|`secret`
|- Three
- Four
|====

[[ocp-33-builds-and-image-sources]]
==== Builds and Image Sources

- One

[[ocp-33-image-imports]]
==== Image Imports

- One

[[ocp-33-other-enhancements]]
==== Other Enhancements

- One

[[ocp-33-notable-technical-changes]]
== Notable Technical Changes

{product-title} 3.3 introduces the following notable technical changes:

[[ocp-33-notable-technical-changes-admins]]
=== For Administrators

==== Manually-Created Endpoints Inside ClusterNetworkCIDR

In OpenShift Enterprise 3.2 and earlier, if the cluster was using the
*redhat/openshift-ovs-multitenant* network plug-in, and a service endpoint was
manually created pointing to a pod or service owned by another tenant, then that
endpoint would be ignored. In {product-title} 3.3, it is no longer possible for
regular users to create such an endpoint
(link:https://github.com/openshift/origin/pull/9383[*openshift/origin#9383*]).
As a result, the plug-in now no longer filters them out
(link:https://github.com/openshift/origin/pull/9982[*openshift/origin#9982*]).

However, previously-created illegal endpoints might still exist; if so, the old,
pre-upgrade logs will show warnings like the following, indicating the illegal
endpoints object:

====
----
Service 'foo' in namespace 'bob' has an Endpoint inside the service network (172.30.99.99)
Service 'foo' in namespace 'bob' has an Endpoint pointing to non-existent pod (10.130.0.8)
Service 'foo' in namespace 'bob' has an Endpoint pointing to pod 10.130.0.4 in namespace 'alice'
----
====

These log messages are the simplest way to find such illegal endpoints, but if
you no longer have the pre-upgrade logs, you can try commands like the following
to search for them.

To find endpoints pointing to the default `*ServiceNetworkCIDR*`
(172.30.0.0/16):

----
$ oc get endpoints --all-namespaces --template \
    '{{ range .items }}{{ .metadata.namespace }}:{{ .metadata.name }} \
    {{ range .subsets }}{{ range .addresses }}{{ .ip }} \
    {{ end }}{{ end }}{{ "\n" }}{{ end }}' | awk '/ 172\.30\./ { print $1 }'
----

To find endpoints pointing to the default `*ClusterNetworkCIDR*`
(10.128.0.0/14):

----
$ for ep in $(oc get services --all-namespaces --template \
    '{{ range .items}}{{ range .spec.selector }}{{ else }}{{ .metadata.namespace}}:{{ .metadata.name }} \
    {{ end }}{{ end }}'); do \
        oc get endpoints --namespace $(echo $ep | sed -e 's/:.*//') $(echo $ep | sed -e 's/.*://') \
        --template '{{ .metadata.namespace }}:{{ .metadata.name }} {{ range .subsets }}{{ range \
        .addresses }}{{ .ip }} {{ end }}{{ end }}{{ "\n" }}' | awk '/ \
        10\.(12[8-9]|1[3-9][0-9]|2[0-5][0-9])\./ { print $1 }' \
done
----

==== Two

Two

==== Other Changes

- Three

[[ocp-33-notable-technical-changes-devs]]
=== For Developers

==== Pull Access When Tagging Image Streams

When tagging images across projects, for example:

----
$ oc tag <project_1>/<image_stream_a>:<tag_a> <project_b>/<image_stream_b>:<tag_b>
----

a user must have pull permission on the source image stream
(link:https://github.com/openshift/origin/pull/10109[*openshift/origin#10109*]).
This means they must get access on the *imagestreams/layers* resource in the
source project. The *admin*, *edit*, and *system:image-puller* roles all grant
this permission.

==== Changes to DNS Records Returned by SRV Requests



{product-title} 3.3 has altered the DNS records returned by SRV requests for
services to be compatible with Kubernetes 1.3 to support `*PetSets*` objects
(link:https://github.com/openshift/origin/pull/9972[*openshift/origin#9972*]).
The primary change is that SRV records for a name no longer enumerate the list
of all available ports; instead, if you want to find a port named `http` over
protocol `tcp`, you must specifically ask for that SRV record.

. The SRV records returned for service names (`<service>.<namespace>.svc.cluster.local`)
have changed.
+
Previously, {product-title} returned one SRV record per service port, but to be
compatible with Kubernetes 1.3, SRV records are now returned representing
endpoints (`<endpoint>.<service>.<namespace>.svc.cluster.local`) without port
info (a port of `0`).
+
A clustered service (type `*ClusterIP*`) will have one record pointing to a
generated name (e.g., `340982409.<service>.<namespace>.svc.cluster.local`) and
an associated A record pointing to the cluster IP.
+
A headless service (with `*clusterIP=None*`) returns one record per address
field in the `*Endpoints*` record (typically one per pod). The endpoint name is
either the `hostname` field in the endpoint (read from an annotation on the pod)
or a hash of the endpoint address, and has an associated A record pointing to
the address matching that name.

. The SRV records returned for an endpoint name
(`<endpoint>.<service>.<namespace>.svc.cluster.local`) have changed: a single
SRV record is returned if the endpoint exists (the name matches the generated
endpoint name described above) or no record if the endpoint does not exist.

. The SRV records for a given port
(`_<portname>._<protocol>.<service>.<namespace>.svc.cluster.local`) behave as
they did before, returning port info.

[[ocp-33-changes-dev-cli]]
==== Developer CLI

One

[[ocp-33-bug-fixes]]
== Bug Fixes

The following bugs have been fixed:

- One
- Two

[[ocp-33-technology-preview]]
== Technology Preview Features

Some features in this release are currently in Technology Preview. These
experimental features are not intended for production use. Please note the
following scope of support on the Red Hat Customer Portal for these features:

https://access.redhat.com/support/offerings/techpreview[Technology Preview
Features Support Scope]

The following features are in Technology Preview:

- Introduced in OpenShift Enterprise 3.1.1,
xref:../install_config/persistent_storage/dynamically_provisioning_pvs.adoc#install-config-persistent-storage-dynamically-provisioning-pvs[dynamic
provisioning] of persistent storage volumes from Amazon EBS, Google Compute
Disk, OpenStack Cinder storage providers remains in Technology Preview for
OpenShift Enterprise 3.2.

[[ocp-33-known-issues]]
== Known Issues

- One

- Two

[[ocp-33-asynchronous-errata-updates]]
== Asynchronous Errata Updates

Security, bug fix, and enhancement updates for {product-title} 3.3 are released
as asynchronous errata through the Red Hat Network. All {product-title} 3.3
errata is https://access.redhat.com/downloads/content/290/[available on the Red
Hat Customer Portal]. See the
https://access.redhat.com/support/policy/updates/openshift[{product-title}
Life Cycle] for more information about asynchronous errata.

Red Hat Customer Portal users can enable errata notifications in the account
settings for Red Hat Subscription Management (RHSM). When errata notifications
are enabled, users are notified via email whenever new errata relevant to their
registered systems are released.

[NOTE]
====
Red Hat Customer Portal user accounts must have systems registered and consuming
OpenShift Enterprise entitlements for OpenShift Enterprise errata notification
emails to generate.
====

This section will continue to be updated over time to provide notes on
enhancements and bug fixes for future asynchronous errata releases of
{product-title} 3.3. Versioned asynchronous releases, for example with the form
{product-title} 3.3.z, will be detailed in subsections. In addition, releases in
which the errata text cannot fit in the space provided by the advisory will be
detailed in subsections that follow.

[IMPORTANT]
====
For any {product-title} release, always review the instructions on
xref:../install_config/upgrading/index.adoc#install-config-upgrading-index[upgrading
your cluster] properly.
====
