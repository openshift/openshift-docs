[id="ocp-4-5-release-notes"]
= {product-title} {product-version} release notes
include::modules/common-attributes.adoc[]
:context: release-notes

toc::[]

Red Hat {product-title} provides developers and IT organizations with a hybrid
cloud application platform for deploying both new and existing applications on
secure, scalable resources with minimal configuration and management overhead.
{product-title} supports a wide selection of programming languages and
frameworks, such as Java, JavaScript, Python, Ruby, and PHP.

Built on Red Hat Enterprise Linux and Kubernetes, {product-title}
provides a more secure and scalable multi-tenant operating system for todayâ€™s
enterprise-class applications, while delivering integrated application runtimes
and libraries. {product-title} enables organizations to meet security, privacy,
compliance, and governance requirements.

[id="ocp-4-5-about-this-release"]
== About this release

// Copied from 4.4 RNs. Edit/confirm for 4.5 release.

Red Hat {product-title}
(link:https://access.redhat.com/errata/RHBA-2020:1234[RHBA-2020:1234]) is now
available. This release uses link:https://v1-18.docs.kubernetes.io/docs/setup/release/notes/[Kubernetes 1.18] with CRI-O runtime. New features, changes, and known issues that pertain to
{product-title} {product-version} are included in this topic.

//Red Hat did not publicly release {product-title} 4.4.0 as the GA version and,
//instead, is releasing {product-title} 4.4.3 as the GA version.

{product-title} {product-version} clusters are available at
https://cloud.redhat.com/openshift. The {cloud-redhat-com}
application for {product-title} allows you to deploy OpenShift clusters to
either on-premise or cloud environments.

{product-title} {product-version} is supported on Red Hat Enterprise Linux 7.7 or
later, as well as {op-system-first} 4.5.

You must use {op-system} for the control plane, which are also known as master machines, and
can use either {op-system} or Red Hat Enterprise Linux 7.6 or later for
compute machines, which are also known as worker machines.

[IMPORTANT]
====
Because only Red Hat Enterprise Linux version 7.6 or later is supported for compute
machines, you must not upgrade the Red Hat Enterprise Linux compute machines to
version 8.
====

////
With the release of {product-title} 4.5, version 4.2 is now end of life. For
more information, see the
link:https://access.redhat.com/support/policy/updates/openshift[Red Hat OpenShift Container Platform Life Cycle Policy].
////
// Must confirm this really happens at 4.5 release time.

[id="ocp-4-5-new-features-and-enhancements"]
== New features and enhancements

This release adds improvements related to the following components and concepts.


[id="ocp-4-5-nodes"]
=== Nodes

[id="ocp-4-5-descheduler-policy"]
==== New descheduler strategy is available (Technology Preview)

The descheduler now allows you to configure the `RemovePodsHavingTooManyRestarts` strategy. This strategy ensures that Pods that have been restarted too many times are removed from nodes.

See xref:../nodes/scheduling/nodes-descheduler.adoc#nodes-descheduler-strategies_nodes-descheduler[Descheduler strategies]
for more information.

[id="ocp-4-5-node-pull-secrets"]
==== Node pull secrets

You can import and use images from any registry configured during or after the
cluster installation by sharing the node's pull secret credentials with the
`openshift-api`, `builder`, and `image-registry` Pods.

[id="ocp-4-5-web-console"]
=== Web console

[id="ocp-4-5-new-attribute-filters"]
====  New Infrastructure Features filters for Operators in OperatorHub

You can now filter Operators by *Infrastructure Features* in OperatorHub. For
example, select *Disconnected* if you want to see Operators that work in
disconnected environments.

[id="ocp-4-5-developer-experience"]
=== Developer experience

[id="ocp-4-5-oc-new-app-deployment-resources"]
==== oc new-app now produces Deployment resources

The `oc new-app` command now produces Deployment resources instead of
DeploymentConfig resources by default. If you prefer to create DeploymentConfig
resources, you can pass the `--as-deployment-config` flag when invoking `oc
new-app`. For more information, see
xref:../applications/deployments/what-deployments-are.adoc#what-deployments-are[Understanding Deployments and DeploymentConfigs].

[id="ocp-4-5-disaster-recovery"]
=== Disaster recovery

[id="ocp-4-5-auto-cert-recovery"]
==== Automatic control plane certificate recovery

{product-title} can now automatically recover from expired control plane certificates. The exception is that you must manually approve pending `node-bootstrapper` certificate signing requests (CSRs) to recover kubelet certificates.

See xref:../backup_and_restore/disaster_recovery/scenario-3-expired-certs.adoc#dr-scenario-3-recovering-expired-certs_dr-recovering-expired-certs[Recovering from expired control plane certificates] for more information.

[id="ocp-4-5-notable-technical-changes"]
== Notable technical changes

{product-title} 4.5 introduces the following notable technical changes.

[id="ocp-4-5-osdk-v0-17-1"]
==== Operator SDK v0.17.1

{product-title} 4.5 supports Operator SDK v0.17.1, which introduces the
following notable technical changes:

* The `--crd-version` flag was added to the `new`, `add api`, `add crd`, and
`generate crds` commands so that users can opt-in to `v1` CRDs. The default setting
is `v1beta1`.

[id="ocp-4-5-ovn-k8s-pod-np-uses-ovs-on-cluster-nodes"]
==== OVN-Kubernetes Pod network provider now uses OVS installed on cluster nodes

The OVN-Kubernetes Pod network provider now uses the Open vSwitch (OVS) version
installed on the cluster nodes. Previously, OVS ran in a container on each node,
managed by a DaemonSet. Using the host OVS eliminates any possible downtime from
upgrading the containerized version of OVS.

[id="ocp-4-5-deprecated-removed-features"]
== Deprecated and removed features

Some features available in previous releases have been deprecated or removed.

Deprecated functionality is still included in {product-title} and continues to
be supported; however, it will be removed in a future release of this product
and is not recommended for new deployments. For the most recent list of major
functionality deprecated and removed within {product-title} {product-version},
refer to the table below. Additional details for more fine-grained functionality
that has been deprecated and removed are listed after the table.

In the table, features are marked with the following statuses:

* *GA*: _General Availability_
* *DEP*: _Deprecated_
* *-*: _Removed_

.Deprecated and removed features tracker
[cols="3,1,1,1",options="header"]
|====
|Feature |OCP 4.3 |OCP 4.4 |OCP 4.5

|Service Catalog
|DEP
|DEP
|-

|Template Service Broker
|DEP
|DEP
|-

|OpenShift Ansible Service Broker
|DEP
|-
|-

|OperatorSources
|DEP
|DEP
|DEP

|CatalogSourceConfigs
|DEP
|DEP
|-

|Operator Framework's Package Manifest Format
|GA
|DEP
|

|System Containers for Docker, CRI-O
|-
|-
|-

|Hawkular Agent
|-
|-
|-

|Pod PreSets
|-
|-
|-

|Audit Policy
|-
|-
|-

|Clustered MongoDB Template
|-
|-
|-

|Clustered MySQL Template
|-
|-
|-

|CephFS Provisioner
|-
|-
|-

|Manila Provisioner
|-
|-
|-

|====

[id="ocp-4-5-deprecated-features"]
=== Deprecated features


[id="ocp-4-5-removed-features"]
=== Removed features

[id="ocp-4-5-oc-commands-flags-removed"]
==== OpenShift CLI commands and flags removed

The following `oc` commands and flags are affected:

* The `oc policy can-i` command was deprecated in {product-title} 3.9 and has
been removed. You must use `oc auth can-i` instead.

* The `--image` flag previously used for the `oc new-app` and `oc new-build`
commands was deprecated in {product-title} 3.2 and has been removed. You must
use the `--image-stream` flag with these commands instead.

* The `--list` flag previously used in the `oc set volumes` command was
deprecated in {product-title} 3.3 and has been removed. The `oc set volumes`
lists volumes without a flag.

* The `-t` flag previously used in the `oc process` command was deprecated in
{product-title} 3.11 and has been removed. You must use the `--template` flag
with this command instead.

* The `--output-version` flag previously used in the `oc process` command was
deprecated in {product-title} 3.11 and has been removed. This flag was already
ignored.

* The `-v` flag previously used in the `oc set deployment-hook` command was
deprecated in {product-title} 3.11 and has been removed. You must use the
`--volumes` flag with this command instead.

* The `-v` and `--verbose` flags previously used in the `oc status` command were
deprecated in {product-title} 3.11 and have been removed. You must use the
`--suggest` flag with this command instead.

[id="ocp-4-5-bug-fixes"]
== Bug fixes


[id="ocp-4-5-technology-preview"]
== Technology Preview features

Some features in this release are currently in Technology Preview. These
experimental features are not intended for production use. Note the
following scope of support on the Red Hat Customer Portal for these features:

link:https://access.redhat.com/support/offerings/techpreview[Technology Preview
Features Support Scope]

In the table below, features are marked with the following statuses:

* *TP*: _Technology Preview_
* *GA*: _General Availability_
* *-*: _Not Available_

.Technology Preview tracker
[cols="4,1,1,1",options="header"]
|====
|Feature |OCP 4.3 |OCP 4.4 |OCP 4.5

|Precision Time Protocol (PTP)
|TP
|TP
|TP

|`oc` CLI Plug-ins
|TP
|TP
|

|experimental-qos-reserved
|TP
|TP
|

|External provisioner for AWS EFS
|TP
|TP
|

|Pod Unidler
|TP
|TP
|

|Node Problem Detector
|TP
|TP
|

|Ephemeral Storage Limit/Requests
|TP
|TP
|

|Descheduler
|-
|TP
|

|Podman
|TP
|TP
|

|Sharing Control of the PID Namespace
|TP
|TP
|

|OVN-Kubernetes Pod network provider
|TP
|TP
|TP

|HPA custom metrics adapter based on Prometheus
|TP
|TP
|

|Machine health checks
|TP
|GA
|GA

|Raw Block with Cinder
|TP
|TP
|

|Three-node bare metal deployments
|TP
|TP
|

|Helm CLI
|TP
|GA
|GA

|Service Binding
|TP
|TP
|

|Log forwarding
|TP
|TP
|

|User workload monitoring
|TP
|TP
|

|OpenShift Serverless
|TP
|GA
|GA

|Compute Node Topology Manager
|TP
|TP
|

|CSI volume snapshots
|-
|TP
|

|CSI volume cloning
|-
|TP
|GA

|OpenShift Pipelines
|-
|TP
|

|Manila CSI driver
|-
|-
|TP

|AWS EBS CSI driver
|-
|-
|TP

|====

[id="ocp-4-5-known-issues"]
== Known issues

When upgrading to a new {product-title} z-stream release, connectivity to the API server might be interrupted as nodes are upgraded, causing API requests to fail.
+
(link:https://bugzilla.redhat.com/show_bug.cgi?id=1791162[*BZ#1791162*])

When upgrading to a new {product-title} z-stream release, connectivity to routers might be interrupted as router pods are updated. For the duration of the upgrade, some applications might not be consistently reachable.
+
(link:https://bugzilla.redhat.com/show_bug.cgi?id=1809665[*BZ#1809665*])


[id="ocp-4-5-asynchronous-errata-updates"]
== Asynchronous errata updates

Security, bug fix, and enhancement updates for {product-title} 4.5 are released
as asynchronous errata through the Red Hat Network. All {product-title} 4.5
errata is https://access.redhat.com/downloads/content/290/[available on the Red
Hat Customer Portal]. See the
https://access.redhat.com/support/policy/updates/openshift[{product-title}
Life Cycle] for more information about asynchronous errata.

Red Hat Customer Portal users can enable errata notifications in the account
settings for Red Hat Subscription Management (RHSM). When errata notifications
are enabled, users are notified via email whenever new errata relevant to their
registered systems are released.

[NOTE]
====
Red Hat Customer Portal user accounts must have systems registered and consuming
{product-title} entitlements for {product-title} errata notification
emails to generate.
====

This section will continue to be updated over time to provide notes on
enhancements and bug fixes for future asynchronous errata releases of
{product-title} 4.5. Versioned asynchronous releases, for example with the form
{product-title} 4.5.z, will be detailed in subsections. In addition, releases
in which the errata text cannot fit in the space provided by the advisory will
be detailed in subsections that follow.

[IMPORTANT]
====
For any {product-title} release, always review the instructions on
xref:../updating/updating-cluster.adoc#updating-cluster[updating your cluster]
properly.
====

[[rhba-2020-1234]]
=== RHBA-2020:1234 - {product-title} 4.5 Image release and bug fix advisory

Issued: 2020-xx-xx

{product-title} release 4.5 is now available. The list of container images and
bug fixes includes in the update are documented in the
link:https://access.redhat.com/errata/RHBA-2020:1234[RHBA-2020:1234] advisory.
The RPM packages included in the update are provided by the
link:https://access.redhat.com/errata/RHBA-2020:5678[RHBA-2020:5678] advisory.

Space precluded documenting all of the container images for this release in the
advisory. See the following article for notes on the container images in this
release:

link:https://access.redhat.com/solutions/123456789[{product-title} 4.5.0 container image list]
