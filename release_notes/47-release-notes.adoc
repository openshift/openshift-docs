:_mod-docs-content-type: ASSEMBLY
[id="release-notes-47"]
= Red{nbsp}Hat Advanced Cluster Security for Kubernetes 4.7
include::modules/common-attributes.adoc[]
:context: release-notes-47

toc::[]

{rh-rhacs-first} is an enterprise-ready, Kubernetes-native container security solution that protects your vital applications across the build, deploy, and runtime stages of the application lifecycle.
{product-title} deploys into your infrastructure and integrates with your DevOps tools and workflows. This integration provides better security and compliance, enabling DevOps and InfoSec teams to operationalize security.

.Release dates
[options="header"]
|====

|{product-title-short} version |Released on

|`4.7.0` | 17 March 2025
|`4.7.1` | 31 March 2025
|`4.7.2` | 15 April 2025

|====

[id="about-this-release-470_{context}"]
== About release 4.7.0

{product-title-short} 4.7 includes the following new features, improvements, and updates:

External integrations::
* xref:../release_notes/47-release-notes.adoc#integrate-vulnerability-findings-into-the-red-hat-developer-hub_release-notes-47[Integrate vulnerability findings into the Red{nbsp}Hat Developer Hub]

Documentation::
* xref:../release_notes/47-release-notes.adoc#documentation-updates_release-notes-47[Documentation updates]

Network::
* xref:../release_notes/47-release-notes.adoc#gain-visibility-into-the-external-ips-in-the-network-graph_release-notes-47[Enhanced visibility into the external IPs in the network graph]
* xref:../release_notes/47-release-notes.adoc#enhanced-options-for-the-roxctl-netpol-generate-command_release-notes-47[Enhanced options for the roxctl netpol generate command]

Platform::
* xref:../release_notes/47-release-notes.adoc#protect-secured-clusters-running-on-red-openshift-on-ibm-cloud_release-notes-47[Protect secured clusters running on {rh-ibm-cloud}]
* xref:../release_notes/47-release-notes.adoc#automatic-certificate-rotation-for-secured-clusters_release-notes-47[Automatic certificate rotation for secured clusters]
* xref:../release_notes/47-release-notes.adoc#cluster-registration-secret-for-secured-cluster-bootstrapping_release-notes-47[Cluster Registration Secret for secured cluster bootstrapping]
* xref:../release_notes/47-release-notes.adoc#machine-to-machine-authentication-by-using-microsoft-entra-id_release-notes-47[Machine-to-machine authentication by using Microsoft Entra ID]
* xref:../release_notes/47-release-notes.adoc#use-the-short-lived-oidc-credentials-from-microsoft-azure_release-notes-47[Use the short-lived OIDC credentials from Microsoft Azure]

Policy::
* xref:../release_notes/47-release-notes.adoc#view-the-violation-status-directly-on-the-violations-page_release-notes-47[View the violation status directly on the Violations page]

Vulnerability Management::
* xref:../release_notes/47-release-notes.adoc#enhanced-visibility-for-the-openshift-component-cves_release-notes-47[Enhanced visibility for the {ocp} component CVEs]
* xref:../release_notes/47-release-notes.adoc#prioritize-cves-with-the-epss-integration_release-notes-47[Prioritize CVEs with the EPSS integration]
* xref:../release_notes/47-release-notes.adoc#scan-the-container-images-in-the-github-container-registry_release-notes-47[Scan the container images in the GitHub Container Registry]
* xref:../release_notes/47-release-notes.adoc#generate-sboms-from-the-scanned-container-images_release-notes-47[Generate SBOMs from the scanned container images]

[id="new-features_{context}"]
== New features

This release adds improvements related to the following components and concepts:

//ROX-27119
[id="scan-the-container-images-in-the-github-container-registry_{context}"]
=== Scan the container images in the GitHub Container Registry

With {product-title-short} 4.7, you can integrate with the GitHub Container Registry (GHCR) to scan container images stored in `ghcr.io`. {product-title-short} now includes a default integration that supports both public and private GHCR instances to secure your containerized workloads.

For more information, see xref:../integration/integrate-with-image-registries.adoc#manual-configuration-image-registry-ghcr_integrate-with-image-registries[Manually configuring GitHub Container Registry].

//ROX-27011
[id="enhanced-visibility-for-the-openshift-component-cves_{context}"]
=== Enhanced visibility for the OpenShift Container Platform component CVEs

{product-title-short} 4.7 introduces improved visibility for the {ocp} component Common Vulnerabilities and Exposures (CVEs). You can now view these CVEs separately to assess and manage security risks.

To view the platform CVEs, click *Vulnerability Management* -> *Results* in the {product-title-short} portal, and then click the *Platform* tab.

//ROX-26781
[id="machine-to-machine-authentication-by-using-microsoft-entra-id_{context}"]
=== Machine-to-machine authentication by using Microsoft Entra ID

In {product-title-short} 4.7, you can now enable machine-to-machine authentication by using short-lived {product-title-short} Central tokens when you use Microsoft Entra ID, formerly known as Azure AD, as the OpenID Connect (OIDC) identity provider for your enterprise. You can exchange ID tokens with access tokens from RHACS Central. Microsoft Entra ID issues these ID tokens to your application's service principals, and you can then use the {product-title-short} access tokens to securely authenticate to the {product-title-short} APIs.

For more information about how to exchange an identity token, see xref:../operating/manage-user-access/configure-short-lived-access.adoc#exchanging-identity-token_configure-short-lived-access[Exchanging an identity token].

For more information about how to use the Azure Entra ID service principals for machine to machine authentication with {product-title-short}, see link:https://github.com/stackrox/contributions/blob/main/guides/cloud-provider-integrations/azure-service-principal-m2m-auth.md[Using Azure Entra ID service principals for machine to machine auth with {product-title-short}].

//ROX-26546
[id="view-the-violation-status-directly-on-the-violations-page_{context}"]
=== View the violation status directly on the Violations page

With {product-title-short} 4.7, you can now see the status of a violation directly on the *Violations* page so that you can quickly determine whether the violation is still active. This streamlines automation workflows, such as creating a Jira ticket and sending it to an owner who does not use {product-title-short} regularly.

By following the link in the ticket, the owner can immediately see if the violation is still relevant, reducing the risk of unnecessary delays or deprioritization. In addition, the page provides the full context of the violation and ensures that all relevant details are immediately available.

//ROX-26335
[id="prioritize-cves-with-the-epss-integration_{context}"]
=== Prioritize CVEs with the EPSS integration

{product-title-short} 4.7 introduces integration with the Exploit Prediction Scoring System (EPSS), a data-driven model that estimates the likelihood of a software vulnerability being exploited.

In addition to the severity and Common Vulnerability Scoring System (CVSS) score, an EPSS probability score from 0%-100% is now displayed for detected Common Vulnerabilities and Exposures (CVEs).
You can use the EPSS score to better prioritize the remediation of CVE vulnerabilities and strengthen your security strategy.

For more information, see xref:../operating/manage-vulnerabilities/vulnerability-management.adoc#vulnerability-management-prioritizing_acs-operating-manage-vulnerabilities[Prioritizing the vulnerabilities].

//tech preview
//ROX-26330
[id="gain-visibility-into-the-external-ips-in-the-network-graph_{context}"]
=== Enhanced visibility into the external IPs in the network graph

With {product-title-short} 4.7, you can now get a better insight into the external IPs behind external entities in the network graph.

:FeatureName: Visualizing external entities
include::snippets/technology-preview.adoc[]

This enhancement helps you identify the specific IP addresses that your deployments are communicating with and gives you better insight into the external interactions and potential risks.

For more information, see xref:../operating/visualizing-external-entities.adoc#visualizing-external-entities[Visualizing external entities].

//ROX-25007
[id="enhanced-options-for-the-roxctl-netpol-generate-command_{context}"]
=== Enhanced options for the roxctl netpol generate command

In {product-title-short} 4.7, the `roxctl netpol generate` command automatically detects when DNS connections are required and generates them accordingly. If you do not specify a port, port `53` is selected automatically, but you can change this by using the `--dnsport` flag. The `--dnsport` flag also accepts port names in addition to numbers. For example,`--dnsport dns`.

You can use port names as a more robust method of specifying the port if the service has a defined name.
If you are a {osp} customer and use the default DNS setting, you should use the `--dnsport` flag to change the default port, as the OpenShift DNS pod listens on port `5353`.

For more information, see xref:../cli/command-reference/roxctl-netpol.adoc#roxctl-netpol-generate_roxctl-netpol[roxctl netpol generate].

//ROX-24589
//tech preview
[id="integrate-vulnerability-findings-into-the-red-hat-developer-hub_{context}"]
=== Integrate vulnerability findings into the Red{nbsp}Hat Developer Hub

In {product-title-short} 4.7, you can now bring vulnerability findings directly into the {rh-rhdh-first} and other platforms based on the upstream Backstage project by using the Backstage Plugin.

:FeatureName: Integration of vulnerability findings into the {rh-rhdh}
include::snippets/technology-preview.adoc[]

You can incorporate the {product-title-short} plugin into your developer environment and review key vulnerabilities for your applications within the platform. This provides information that you need before you can take the necessary remediation actions.

For more information, see xref:../configuration/configuring-and-integrating-the-rhacs-plugin-with-red-hat-developer-hub.adoc#viewing-security-information-in-red-hat-developer-hub_configure-and-integrate-rhacs-plugin[Viewing security information in Red Hat Developer Hub].

//ROX-24052
//tech preview
[id="generate-sboms-from-the-scanned-container-images_{context}"]
=== Generate SBOMs from the scanned container images

With {product-title-short} 4.7, you can now generate a Software Bill of Materials (SBOM) from the scanned container images.

:FeatureName: Generation of SBOMs from the scanned container images
include::snippets/technology-preview.adoc[]

These SBOMs give you a detailed overview of all software components, dependencies, and libraries within your application.
{product-title-short} creates SBOMs of the Analyzed type and complies with the Software Package Data Exchange (SPDX) 2.3 specification.

For more information about the SBOMs of the Analyzed type, see
link:https://www.cisa.gov/sites/default/files/2023-04/sbom-types-document-508c.pdf[Types of SBOM Documents] (America's Cyber Defense Agency documentation).

For more information about how to use {product-title-short} to generate SBOMs, see xref:../operating/manage-vulnerabilities/scanner-generate-sbom.adoc#scanner-generate-sbom[Generating SBOMs from scanned images].

[NOTE]
====
Generating SBOMs from images analyzed through secured clusters by using the delegated scanning feature is currently not supported. It is anticipated that an upcoming release will support this feature.
====

//ROX-17535
[id="automatic-certificate-rotation-for-secured-clusters_{context}"]
=== Automatic certificate rotation for secured clusters

{product-title-short} 4.7 introduces automatic certificate rotation for the secured cluster components, which ensures secure communication between Sensor, Admission Controller, and Collector within the cluster. Sensor also uses these certificates for a secure certificate-based architecture (mTLS) connection with Central.

For more information about the automatic certificate renewal, see xref:../configuration/reissue-internal-certificates.adoc#reissuing-internal-certificates-for-secured-clusters-by-using-automatic-certificate-renewal_reissue-internal-certificates[Reissuing internal certificates for secured clusters by using automatic certificate renewal].

//ROX-17535
[id="cluster-registration-secret-for-secured-cluster-bootstrapping_{context}"]
=== Cluster Registration Secret for secured cluster bootstrapping

In {product-title-short} 4.7, you can now use the Cluster Registration Secret (CRS) to bootstrap a secured cluster and register it with Central.

:FeatureName: Cluster Registration Secret
include::snippets/technology-preview.adoc[]

Unlike previous methods, CRS separates the bootstrap credentials from the operational certificates so that the cluster continues to work even if the bootstrap credentials are revoked. You can generate the CRS by using the `roxctl` CLI commands and revoke it if required.

{product-title-short} 4.7 supports both the init bundle and CRS, but in a future release the init bundle will be deprecated in favor of CRS.

For more information, see:

* xref:../installing/installing_ocp/init-bundle-ocp.adoc#init-bundle-ocp[Generating and applying an init bundle or cluster registration secret for {product-title-short} on {osp}]
* xref:../installing/installing_other/init-bundle-other.adoc#init-bundle-other[Generating and applying an init bundle or cluster registration secret for {product-title-short} on other platforms]

//ROX-14616
[id="protect-secured-clusters-running-on-red-openshift-on-ibm-cloud_{context}"]
=== Protect secured clusters running on Red{nbsp}Hat OpenShift on IBM Cloud

In {product-title-short} 4.7, you can now protect {rh-ibm-cloud} and run secured clusters on {rh-ibm-cloud}.

//ROX-13542
[id="use-the-short-lived-oidc-credentials-from-microsoft-azure_{context}"]
=== Use the short-lived OIDC credentials from Microsoft Azure

With {product-title-short} 4.7, you can now use short-lived OpenID Connect (OIDC) credentials. The Microsoft Azure Identity Provider provides these credentials, and you can use these credentials to access the services in Microsoft Azure, such as the Azure Container Registry and Azure Sentinel.

This feature builds on the {product-title-short} 4.4 release, which introduced the ability to use short-lived OIDC credentials from Amazon Web Services (AWS) and Google Cloud Platform (GCP) cloud providers to authenticate to the services hosted on these platforms.

For more information, see xref:../integration/integrate-with-image-registries.adoc#manual-configuration-image-registry-acr_integrate-with-image-registries[Manually configuring Microsoft Azure Container Registry].

[id="notable-technical-changes_{context}"]
== Notable technical changes

This release contains the following changes:

* Scanner V4 now uses Red{nbsp}Hat VEX files instead of the Common Vulnerabilities and Exposures (CVE) map to provide vulnerability data for non-RPM content in official Red{nbsp}Hat images.
* You can no longer set the `ROX_NODE_INDEX_CONTAINER_API` environment variable in the Compliance pod. The node scanner never used this variable because the node scanner never connected to the Red{nbsp}Hat Container Catalog.
+
To enable node scanning with Scanner V4 while the nodes continue to be scanned in parallel with Scanner V2, update the variable ROX_NODE_INDEX_ENABLED variable from a Boolean setting to a feature flag. This change ensures that the {product-title-short} portal can access the setting through the Central API.
+
By default, Central with Scanner V4 prioritizes Scanner V4 scans, while StackRox Scanner V2 remains operational without any changes. You can manually enable or disable Scanner V4 and StackRox Scanner V2 for node scanning without affecting image scanning.
+
For more information, see xref:../operating/manage-vulnerabilities/vulnerability-management.adoc#vulnerability-management[Vulnerability management overview].

* `stackrox.io` Content Delivery Network (CDN) has been moved from CloudFlare to Akamai. When configuring firewall rules, use the hostname instead of the IP addresses. If you previously allowed the IP ranges to `stackrox.io`, you must update these rules.
+
The following values are associated with a stable subset of Akamai Classless Inter-Domain Routings (CIDRs):

** `2.16.0.0/13`
** `23.0.0.0/12`
** `23.32.0.0/11`
** `23.192.0.0/11`
** `66.198.8.0/24`
** `95.100.0.0/15`
** `96.7.74.0/24`
** `104.117.66.0/24`
** `168.143.242.0/24`
** `168.143.243.0/24`
** `184.24.0.0/13`

* You now use the `networking.externalIps.enabled` setting instead of `networking.externalIps.enable` in the `collector-config` ConfigMap for the Collector runtime configuration. You also define it as an enum with the valid values `ENABLED` and `DISABLED`, and the default value is `DISABLED`.

[id="documentation-updates_{context}"]
== Documentation updates

* The documentation for the *System Health* dashboard page has been updated to show you how to monitor component health, view administration usage, manage platform data and track system status.
+
For more information, see xref:../operating/use-system-health-dashboard.adoc#analyzing-and-managing-the-system-health-information_use-system-health-dashboard[Analyzing and managing the system health information].

* It is currently planned for Compliance 1.0 to be deprecated in {product-title-short} 4.9.

[id="deprecated-and-removed-features_{context}"]
== Deprecated and removed features

Some features available in earlier releases have been deprecated or removed.

Deprecated functionality is still included in {product-title-short} and continues to be supported; however, it will be removed in a future release of this product and is not recommended for new deployments.
For the most recent list of major functionality deprecated and removed, see the following table.
Additional removed or deprecated functionality is available after the table.

In the table, features are marked with the following statuses:

* GA: General Availability
* TP: Technology Preview
* DEP: Deprecated
* REM: Removed
* NA: Not applicable

.Deprecated and removed features tracker
[cols="4,1,1,1",options="header"]
|===
|Feature |{product-title-short} 4.5 |{product-title-short} 4.6 |{product-title-short} 4.7

|API token authentication for {cloud-redhat-com}^[1]^
|GA
|DEP
|DEP

|`definitions.stackrox.io`
|DEP
|DEP
|DEP

|Google Container Registry integration^[2]^
|GA
|DEP
|DEP

|Kernel support packages and driver download functionality ^[3]^
|DEP
|DEP
|DEP

|Reporting of Istio vulnerabilities
|DEP
|DEP
|DEP

|`rhacs-collector-slim*` images^[4]^
|DEP
|DEP
|REM

|StackRox Scanner
|GA
|DEP
|DEP

|`/v1/clustercves/suppress` APIs^[5,6]^
|DEP
|DEP
|DEP

|`/v1/clustercves/unsuppress` APIs^[5,6]^
|DEP
|DEP
|DEP

|`/v1/nodecves/suppress` APIs^[5,6]^
|DEP
|DEP
|DEP

|`/v1/nodecves/unsuppress` APIs^[5,6]^
|DEP
|DEP
|DEP

|`/v1/summary/counts` endpoint
|DEP
|DEP
|DEP

|Vulnerability Management (1.0) menu item^[7]^
|DEP
|DEP
|DEP

|Vulnerability Report Creator permission
|DEP
|DEP
|DEP

|Scanner V4 support for openSUSE Leap 15.0 and 15.1^[8]^
|GA
|DEP
|REM

|===

[.small]
--
1. API token authentication is deprecated. The corresponding cloud source integration now uses service accounts for authentication.

2. The Google Container Registry integration is deprecated in response to the deprecation of Container Registry. You can use the Artifact Registry as a registry replacement and Scanner V4 as a scanner replacement.
+
For more information, see link:https://cloud.google.com/artifact-registry/docs/transition/transition-from-gcr[Transition from Container Registry] (Google Cloud documentation).

3. Kernel support packages and driver download functionality are deprecated.

4. The `rhacs-collector-slim*` image is deprecated and has been removed in {product-title-short} 4.7.0. `rhacs-collector*` image used to contain kernel modules and eBPF probes, but {product-title-short} no longer needs those items.
The `rhacs-collector*` and the `rhacs-collector-slim*` images are now functionally the same.

5. A feature flag controls this API object, and you can enable or disable this API object by using the `ROX_VULN_MGMT_LEGACY_SNOOZE` environment variable.

6. The format for specifying duration in JSON requests to `v1/nodecves/suppress`, `v1/clustercves/suppress`, and `v1/imagecves/suppress` has been changed to the ProtoJSON format.
Only a numeric value representing seconds with optional fractional seconds for nanosecond precision and followed by the `s` suffix is supported.
+
For example, `0.300s`, `-5400s`, or `9900s`. The previously valid time units of `ns`, `us`, `µs`, `ms`, `m`, and `h` are no longer supported.

7. The *Vulnerability Management* -> *Dashboard* view is deprecated and is planned to be removed in a future release. You can use the *User workload vulnerabilities*, *Exception management*, *Platform vulnerabilities*, and *Node CVEs* views as alternatives.

8. Scanner V4 support for openSUSE Leap 15.0 and 15.1 is deprecated and has been removed in {product-title-short} 4.7.0.
--

[id="bug-fixes_{context}"]
== Bug fixes in version 4.7.0

*Release date*: 3 March 2025

//ROX-27588
* Before this update, reports remained in the `DOWNLOAD` state even after they were downloaded. This issue is now fixed.

//ROX-26763
* Before this update, the logs repeatedly displayed the following error message:
+
[source,text]
----
 [Throttled] Could not determine network namespace: No such file or directory
----
+
This issue occurred when the system reported errors when encountering zombie processes.
With this update, the system now specifically recognizes zombie processes and adjusts the message level to a less strict classification. However, the system can still trigger an error if the detection of zombie processes exceeds a certain threshold, helping to identify faulty workloads.

//ROX-25638
* Before this update, the Central logs were not rotated, which caused the log file for {product-title-short} to grow indefinitely and eventually take up the entire node memory. This issue occurred because `/var/log/stackrox` was mounted by using an `emptyDir` volume, which does not persist across pod restarts and has no built-in log rotation.
+
With this update, logs are deleted and the `emptyDir` volume is recreated when you restart the Central pod. A log size limit has been introduced to prevent excessive memory usage and to ensure that the Central logs do not overload the node.

//ROX-27414 and ROX-27439
* Before this update, Central might have filtered out selected `storage.IndexReport` messages representing the state of the RPM packages on a {op-system-first} node due to missing timestamps.
+
This caused issues in {product-title-short} 4.6.0 and 4.6.1 when testing the technical preview feature of {op-system} node scanning with Scanner V4.
With this update, the filter logic in Central has been adjusted to ensure that `IndexReport` messages are processed correctly over time.

//ROX-27829
* Before to this update, the {product-title-short} portal incorrectly validated Slack webhook URLs and blocked the Mattermost integration due to strict regex rules. With this update, the regex check has been removed to allow for more flexible URL formats.

[id="about-release-4.7.1_{context}"]
== About release version 4.7.1

*Release date*: 31 March 2025

This release of {product-title-short} includes the following bug fix:

* Fixed a bug in which Scanner V4 performed TLS validation even for integrations that had TLS validation disabled.

This release also addresses the following security vulnerabilities:

* link:https://access.redhat.com/security/cve/cve-2025-22869[CVE-2025-22869] Flaw in the `golang.org/x/crypto/ssh` package.
* link:https://access.redhat.com/security/cve/cve-2025-27144[CVE-2025-27144] Go JOSE's parsing vulnerable to denial of service.

[id="about-release-4.7.2_{context}"]
== About release version 4.7.2

*Release date*: 15 April 2025

This release of {product-title-short} contains the following bug fix:

//ROX-28699
* Fixed an issue where verifying multi-signed images failed due to incorrect error handling.

It also addresses the following security vulnerabilities:

* link:https://access.redhat.com/security/cve/cve-2024-21536[CVE-2024-21536] Denial of Service vulnerability in the `http-proxy-middleware` package.
* link:https://access.redhat.com/security/cve/cve-2025-30204[CVE-2025-30204] Excessive memory allocation during header parsing in `golang-jwt` package.
* link:https://access.redhat.com/security/cve/cve-2024-57083[CVE-2024-57083] Denial of Service vulnerability in the `redoc` package.

include::modules/image-versions.adoc[leveloffset=+1]