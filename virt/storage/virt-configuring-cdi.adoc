:_content-type: ASSEMBLY
[id="virt-configuring-cdi"]
= Configuring the Containerized Data Interface
include::_attributes/common-attributes.adoc[]
:context: virt-configuring-cdi

toc::[]

The Containerized Data Interface (CDI) builds virtual machine (VM) disks on persistent volume claims (PVCs) by using data volumes.

The CDI populates PVCs with VM images or other data. The data can come from the following sources:

* URL
* Container registry
* Another PVC, by cloning
* Upload



// see also https://docs.openshift.com/container-platform/4.13/storage/dynamic-provisioning.html
// A StorageClass provides a way for administrators to describe the "classes" of storage they offer. Different classes might map to quality-of-service levels, or to backup policies, or to arbitrary policies determined by the cluster administrators. Kubernetes itself is unopinionated about what classes represent. This concept is sometimes called "profiles" in other storage systems.

// Each StorageClass contains the fields provisioner, parameters, and reclaimPolicy, which are used when a PersistentVolume belonging to the class needs to be dynamically provisioned.

// The name of a StorageClass object is significant, and is how users can request a particular class. Administrators set the name and other parameters of a class when first creating StorageClass objects, and the objects cannot be updated once they are created.

// Administrators can specify a default StorageClass only for PVCs that don't request any particular class to bind to: see the PersistentVolumeClaim section for details.

// https://github.com/kubevirt/containerized-data-importer/blob/main/doc/storageprofile.md

Storage Profile is the resource that serves the information about recommended parameters for the PVC.

This can be used by CDI controllers when creating a PVC for DV. That way the DataVolume can be simplified and if the properties are missing, defaults can be applied from the StorageProfile.

CDI provides a collection of Storage Profiles with default recommended values for some well known backends. If the storage provisioner defined in storage class does not have defaults configured in CDI the resulting StorageProfile has empty claimPropertySets.

CDI automatically creates the StorageProfile objects - one StorageProfile per one StorageClass that exists in the cluster. Below StorageProfile for hostpath-provisioner as an example.


A _storage profile_ is a custom resource that the CDI manages. It provides recommended storage settings based on the associated storage class. A storage profile is allocated for each storage class.

Storage profiles enable you to create data volumes quickly while reducing coding and minimizing potential errors.

For recognized storage types, the CDI provides values that optimize the creation of PVCs.  However, you can configure automatic settings for a storage class if you customize the storage profile.


include::modules/virt-about-datavolumes.adoc[leveloffset=+1]

include::modules/virt-customizing-storage-profile.adoc[leveloffset=+1]

include::modules/virt-defining-storageclass.adoc[leveloffset=+1]

include::modules/virt-about-scratch-space.adoc[leveloffset=+1]

include::modules/virt-vm-storage-volume-types.adoc[leveloffset=+1]

include::modules/virt-about-storage-volumes-for-vm-disks.adoc[leveloffset=+1]

include::modules/virt-about-storage-pools-pvc-templates.adoc[leveloffset=+1]

include::modules/virt-cdi-supported-operations-matrix.adoc[leveloffset=+1]