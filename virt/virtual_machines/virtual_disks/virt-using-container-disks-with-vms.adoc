:_content-type: ASSEMBLY
[id="virt-using-container-disks-with-vms"]
= Using container disks with VMs
include::_attributes/common-attributes.adoc[]
:context: virt-using-container-disks-with-vms

toc::[]

You can build a custom image into a container disk and store it in your container registry. Then, you can then import the image into persistent storage to attach to a VM as a disk.

[IMPORTANT]
====
If you use large container disks, I/O traffic might increase and might cause worker nodes to be unavailable. You can perform the following tasks to resolve this issue:

* xref:../../../applications/pruning-objects.adoc#pruning-deployments_pruning-objects[Pruning `DeploymentConfig` objects]
* xref:../../../nodes/nodes/nodes-nodes-garbage-collection.adoc#nodes-nodes-garbage-collection-configuring_nodes-nodes-configuring[Configuring garbage collection]
====

include::modules/virt-preparing-container-disk-for-vms.adoc[leveloffset=+1]

If your container registry does not have TLS you must add it as an insecure registry before you can import container disks into persistent storage.

include::modules/virt-disabling-tls-for-registry.adoc[leveloffset=+1]

// == Next steps

// * xref:../../../virt/virtual_machines/importing_vms/virt-importing-virtual-machine-images-datavolumes.adoc#virt-importing-virtual-machine-images-datavolumes[Import the container disk into persistent storage for a virtual machine].

