:_mod-docs-content-type: ASSEMBLY
[id="virt-4-17-release-notes"]
= {VirtProductName} release notes
include::_attributes/common-attributes.adoc[]
:context: virt-4-17-release-notes

toc::[]

[id="virt-doc-feedback"]
== Providing documentation feedback

To report an error or to improve our documentation, log in to your link:https://issues.redhat.com[Red Hat Jira account] and submit a link:https://issues.redhat.com/secure/CreateIssueDetails!init.jspa?pid=12323181&issuetype=1&components=12333768&priority=10200&summary=%5BDoc%5D&customfield_12316142[Jira issue].

[id="virt-about-virt"]
== About Red Hat {VirtProductName}

With Red Hat {VirtProductName}, you can bring traditional virtual machines (VMs) into {product-title} and run them alongside containers. In {VirtProductName}, VMs are native Kubernetes objects that you can manage by using the {product-title} web console or the command line.

{VirtProductName} is represented by the image:virt-icon.png[{VirtProductName},40,40] icon.

You can use {VirtProductName} the xref:../../networking/ovn_kubernetes_network_provider/about-ovn-kubernetes.adoc#about-ovn-kubernetes[OVN-Kubernetes] Container Network Interface (CNI) network provider.

Learn more about xref:../../virt/about_virt/about-virt.adoc#about-virt[what you can do with {VirtProductName}].

Learn more about xref:../../virt/about_virt/virt-architecture.adoc#virt-architecture[{VirtProductName} architecture and deployments].

xref:../../virt/install/preparing-cluster-for-virt.adoc#preparing-cluster-for-virt[Prepare your cluster] for {VirtProductName}.

include::modules/virt-supported-cluster-version.adoc[leveloffset=+2]


[id="virt-guest-os"]
=== Supported guest operating systems
To view the supported guest operating systems for {VirtProductName}, see link:https://access.redhat.com/articles/973163#ocpvirt[Certified Guest Operating Systems in Red Hat OpenStack Platform, Red Hat Virtualization, OpenShift Virtualization and Red Hat Enterprise Linux with KVM].

//Ensure platform passes Windows Server Virtualization Validation Program. Otherwise, comment out the section below.
[id="virt-svvp-certification"]
=== Microsoft Windows SVVP certification

//CNV-31842 SVVP 4.15 Release Note: NEW
//NOTE: This is a recurring release note. Modify the existing note text below if recommended by QE.
{VirtProductName} is certified in Microsoft's Windows Server Virtualization Validation Program (SVVP) to run Windows Server workloads.

The SVVP certification applies to:

* Red Hat Enterprise Linux CoreOS workers. In the Microsoft SVVP Catalog, they are named __Red Hat OpenShift Container Platform 4 on RHEL CoreOS 9__.
* Intel and AMD CPUs.

[id="virt-quick-starts"]
== Quick starts

Quick start tours are available for several {VirtProductName} features. To view the tours, click the *Help* icon *?* in the menu bar on the header of the {product-title} web console and then select *Quick Starts*. You can filter the available tours by entering the keyword `virtualization` in the *Filter* field.


[id="virt-4-17-new"]
== New and changed features

This release adds new features and enhancements related to the following components and concepts:

//[id="virt-4-17-installation-update"]
//=== Installation and update

[id="virt-4-17-infrastructure"]
=== Infrastructure

* Configuring xref:../../virt/nodes/virt-node-maintenance.adoc#eviction-strategies[VM eviction strategies] for an xref:../../virt/nodes/virt-node-maintenance.adoc#virt-configuring-cluster-eviction-strategy-cli_virt-node-maintenance[entire cluster] is now generally available.

//CNV-39964 GA: inferFromVolume
* The `inferFromVolume` attribute is now supported for use with imported container disks. When requested, {VirtProductName} can copy the labels `instancetype.kubevirt.io/default-instancetype` and `instancetype.kubevirt.io/default-preference` from a source container disk to the boot volume of a new VM.

//CNV-36328
* You can now select a custom namespace for Red Hat golden images instead of using the default `openshift-virtualization-os-images` namespace. By using a custom namespace, cluster administrators can restrict user access to the default boot sources. To update this setting by using the web console, go to *Virtualization* -> *Overview* -> *Settings* -> *Cluster* -> *General settings* -> *Bootable volumes project*.

[id="virt-4-17-virtualization"]
=== Virtualization

//CNV-34780 GA: Safe memory overcommitment using WASP
* You can now xref:../../virt/post_installation_configuration/virt-configuring-higher-vm-workload-density.adoc#virt-configuring-higher-vm-workload-density[increase VM workload density] on nodes by overcommitting memory (RAM) with the `wasp-agent`. The wasp agent assigns swap resources to worker nodes and manages pod evictions when nodes are at risk.
+
[NOTE]
====
Overcommitting memory on a highly utilized system can decrease workload performance.
====
//CNV-36607 Release note: GA post-copy
* Enabling post-copy live migration for VM workloads is now generally available.

//CNV-30590 NEW GA Host-side USB passthrough
* As a cluster administrator, you can xref:../../virt/virtual_machines/advanced_vm_management/virt-configuring-usb-host-passthrough.adoc#virt-configuring-usb-host-passthrough[expose USB devices in a cluster], making them available for virtual machine (VM) owners to assign to VMs. You expose a USB device by first enabling host passthrough and then configuring the VM to access the USB device.

//CNV-40005 Application-aware resource quota
* You can now use the xref:../../virt/virtual_machines/advanced_vm_management/virt-understanding-aaq-operator.adoc#virt-understanding-aaq-operator[Application-Aware Quota (AAQ) Operator] to customize and manage resource quotas for individual components in an {product-title} cluster. The AAQ Operator provides the `ApplicationAwareResourceQuota` and `ApplicationAwareClusterResourceQuota` custom resource definitions (CRDs) that can be used to allocate resources without interfering with cluster-level activities such as upgrades and node maintenance.

//CNV-31342 Upgraded environments automatically migrate instancetype ControllerRevisions

* {VirtProductName} now automatically updates `instancetype.kubevirt.io` objects stored in `ControllerRevisions` that are referenced by `VirtualMachine` resources to the latest API version of the objects. As a result, you no longer need to manually update these objects.

//CNV-33381 Release note: Windows Server 2025 guest support
* {VirtProductName} release 4.17.1 introduces support for Microsoft Windows Server 2025 as a certified guest operating system. See link:https://access.redhat.com/articles/4234591[Certified Guest Operating Systems in OpenShift Virtualization] for more details.

//[id="virt-4-17-networking"]
//=== Networking

[id="virt-4-17-storage"]
=== Storage

//CNV-40180 Release note: API is now v1beta1
* The `VirtualMachineSnapshot` API version is now v1beta1.

//CNV-40182 Release note: VM Export API now beta
* The `VirtualMachineExport` API version is now v1beta1.

[id="virt-4-17-web"]
=== Web console
//CNV-49363 Release note: (two notes) New focused view and guided tour in OpenShift Virtualization
* The {product-title} web console includes a new focused view, which presents a condensed navigation menu specific to the {VirtProductName} perspective. This view complements but does not replace the existing {product-title} web console *Virtualization* navigation options.
+
To access the new view, navigate to *Administrator* -> *Virtualization* in the web console.

* An {VirtProductName} guided tour is now available. You can access the tour by either clicking *Start Tour* on the *Welcome to {VirtProductName}* dialog or navigating to *Virtualization* -> *Overview* -> *Settings* -> *User* -> *Getting started resources* -> *Guided tour*.

* xref:../../virt/virtual_machines/virt-edit-vms.adoc#virt-hot-plugging-memory_virt-edit-vms[Hot plugging memory] for VMs from the web console is now generally available.

* xref:../../virt/virtual_machines/virt-edit-vms.adoc#virt-hot-plugging-cpu_virt-edit-vms[Hot plugging CPUs] for VMs from the web console is now generally available.

//[id="virt-4-17-monitoring"]
//=== Monitoring

//[id="virt-4-17-notable-technical-changes"]
//=== Notable technical changes

[id="virt-4-17-deprecated-removed"]
== Deprecated and removed features
//NOTE: Comment out deprecated and removed features (and their IDs) if not used in a release

[id="virt-4-17-deprecated"]
=== Deprecated features
// NOTE: When uncommenting deprecated features list, change the Removed features header level below to ===

Deprecated features are included in the current release and supported. However, they will be removed in a future release and are not recommended for new deployments.

//CNV-48413: TP DevPreviewLongLifecycle to GA LongLifecycle
* The `DevPreviewLongLifecycle` profile is deprecated. The profile is now `LongLifecycle` and is generally available.

//CNV-26316: Release note: Align tekton tasks with instancestypes
* The `copy-template`, `modify-vm-template`, and `create-vm-from-template` tasks are deprecated.

//CNV-32032 Release note: DEPRECATED FEATURE (Windows 2012R2 templates deprecated)
* Support for Windows Server 2012 R2 templates is deprecated.

//CNV-34681: Deprecated alerts
* The alerts `KubeVirtComponentExceedsRequestedMemory` and `KubeVirtComponentExceedsRequestedCPU` are deprecated. You can safely xref:../../observability/monitoring/managing-alerts/managing-alerts-as-an-administrator.adoc#silencing-alerts-adm_managing-alerts-as-an-administrator[silence] them.

[id="virt-4-17-removed"]
=== Removed features

Removed features are those that were deprecated in earlier releases. They are now removed from {VirtProductName} and are no longer supported.

//CNV-45783
* CentOS 7 and CentOS Stream 8 are now in the End of Life phase. As a consequence, the container images for these operating systems have been removed from OpenShift Virtualization and are no longer link:https://access.redhat.com/articles/4234591#community[community supported].

//CNV-51829: remove tekton-tasks-operator informaiton form release notes; CNV-41244: Release note: Deprecate
* The `tekton-tasks-operator` is removed. The Tekton tasks and example pipelines are now available in the task catalog (ArtifactHub).

[id="virt-4-16-technology-preview_{context}"]
== Technology Preview features

Some features in this release are currently in Technology Preview. These experimental features are not intended for production use. Note the following scope of support on the Red Hat Customer Portal for these features:

link:https://access.redhat.com/support/offerings/techpreview[Technology Preview Features Support Scope]

//CNV-40183 Release note: Tech preview for storage class migration
* You can now migrate storage classes for running and stopped VMs.
+
[NOTE]
====
Storage live migration is not enabled by default in the `HyperConverged` custom resource. To enable the required feature gates, follow the workaround documented in link:https://access.redhat.com/solutions/7089972[Enable storage live migration in {VirtProductName} 4.17] in the Red{nbsp}Hat knowledge base.
====

//CNV-15028: Nested virt in virt hosts. This feature will remain in tech preview indefinitely.
* You can now enable link:https://access.redhat.com/solutions/6692341[nested virtualization on {VirtProductName} hosts].

//[id="virt-4-17-bug-fixes"]
//== Bug fixes

[id="virt-4-17-known-issues"]
== Known issues

//[discrete]
//[id="virt-4-17-ki-monitoring"]
//==== Monitoring

[discrete]
[id="virt-4-17-ki-networking"]
==== Networking
//CNV-38746
* When you update from {product-title} 4.12 to a newer minor version, VMs that use the `cnv-bridge` Container Network Interface (CNI) fail to live migrate. (link:https://access.redhat.com/solutions/7069807[])
** As a workaround, change the `spec.config.type` field in your `NetworkAttachmentDefinition` manifest from `cnv-bridge` to `bridge` before performing the update.

[discrete]
[id="virt-4-17-ki-nodes"]
==== Nodes
//CNV-38543 - 4.16 Still an issue
* Uninstalling {VirtProductName} does not remove the `feature.node.kubevirt.io` node labels created by {VirtProductName}. You must remove the labels manually. (link:https://issues.redhat.com/browse/CNV-38543[*CNV-38543*])

//BZ 2151169
* In a heterogeneous cluster with different compute nodes, virtual machines that have HyperV reenlightenment enabled cannot be scheduled on nodes that do not support timestamp-counter scaling (TSC) or have the appropriate TSC frequency. (link:https://bugzilla.redhat.com/show_bug.cgi?id=2151169[*BZ#2151169*])

[discrete]
[id="virt-4-17-ki-storage"]
==== Storage
//CNV-23501: 4.16 - Keep per Dominik Holler
* If you clone more than 100 VMs using the `csi-clone` cloning strategy, then the Ceph CSI might not purge the clones. Manually deleting the clones might also fail. (link:https://issues.redhat.com/browse/CNV-23501[*CNV-23501*])
** As a workaround, you can restart the `ceph-mgr` to purge the VM clones.


[discrete]
[id="virt-4-17-ki-virtualization"]
==== Virtualization

//CNV-36448: 4.16 - Unresolved
* When adding a virtual Trusted Platform Module (vTPM) device to a Windows VM, the BitLocker Drive Encryption system check passes even if the vTPM device is not persistent. This is because a vTPM device that is not persistent stores and recovers encryption keys using ephemeral storage for the lifetime of the `virt-launcher` pod. When the VM migrates or is shut down and restarts, the vTPM data is lost. (link:https://issues.redhat.com/browse/CNV-36448[*CNV-36448*])

//CNV-33835: 4.16 - Unresolved
* {VirtProductName} links a service account token in use by a pod to that specific pod. {VirtProductName} implements a service account volume by creating a disk image that contains a token. If you migrate a VM, then the service account volume becomes invalid. (link:https://issues.redhat.com/browse/CNV-33835[*CNV-33835*])
** As a workaround, use user accounts rather than service accounts because user account tokens are not bound to a specific pod.


[discrete]
[id="virt-4-16-ki-webconsole_{context}"]
==== Web console
//CNV-38594: 4.16 - Still an issue per Guohua
* When you create a persistent volume claim (PVC) by selecting *With Data upload form* from the *Create PersistentVolumeClaim* list in the web console, uploading data to the PVC by using the *Upload Data* field fails. (link:https://issues.redhat.com/browse/CNV-37607[*CNV-37607*])
