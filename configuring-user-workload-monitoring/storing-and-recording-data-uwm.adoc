:_mod-docs-content-type: ASSEMBLY
include::_attributes/common-attributes.adoc[]
[id="storing-and-recording-data-uwm"]
= Storing and recording data for user workload monitoring
:context: storing-and-recording-data-uwm

toc::[]

[role="_abstract"]
Store and record your metrics and alerting data, configure logs to specify which activities are recorded, control how long Prometheus retains stored data, and set the maximum amount of disk space for the data. These actions help you protect your data and use them for troubleshooting.

// Configuring persistent storage
include::modules/monitoring-configuring-persistent-storage.adoc[leveloffset=+1,tags=**;!CPM;UWM]

include::modules/monitoring-configuring-a-persistent-volume-claim.adoc[leveloffset=+2,tags=**;!CPM;UWM]

[role="_additional-resources"]
.Additional resources

* link:https://docs.redhat.com/en/documentation/openshift_container_platform/latest/html-single/storage/index#understanding-persistent-storage[Understanding persistent storage]
* link:https://kubernetes.io/docs/concepts/storage/persistent-volumes/#persistentvolumeclaims[PersistentVolumeClaims (Kubernetes documentation)]

include::modules/monitoring-resizing-a-persistent-volume.adoc[leveloffset=+2,tags=**;!CPM;UWM]

[role="_additional-resources"]
.Additional resources

* link:https://docs.redhat.com/en/documentation/openshift_container_platform/latest/html-single/scalability_and_performance/index#prometheus-database-storage-requirements_recommended-infrastructure-practices[Prometheus database storage requirements]
* link:https://docs.redhat.com/en/documentation/openshift_container_platform/latest/html-single/storage/index#expanding-pvc-filesystem_expanding-persistent-volumes[Expanding persistent volume claims (PVCs) with a file system]

// Modifying the retention time and size 

include::modules/monitoring-modifying-retention-time-and-size-for-prometheus-metrics-data.adoc[leveloffset=+1,tags=**;!CPM;UWM]

include::modules/monitoring-modifying-the-retention-time-for-thanos-ruler-metrics-data.adoc[leveloffset=+2]

[role="_additional-resources"]
.Additional resources

* xref:../key-concepts/key-concepts.adoc#retention-time-and-size-for-prometheus-metrics-data_key-concepts[Retention time and size for Prometheus metrics]
* xref:../configuring-user-workload-monitoring/preparing-to-configure-the-monitoring-stack-uwm.adoc#enabling-monitoring-for-user-defined-projects-uwm_preparing-to-configure-the-monitoring-stack-uwm[Enabling monitoring for user-defined projects]
* link:https://docs.redhat.com/en/documentation/openshift_container_platform/latest/html-single/scalability_and_performance/index#prometheus-database-storage-requirements_recommended-infrastructure-practices[Prometheus database storage requirements]
* link:https://docs.redhat.com/en/documentation/openshift_container_platform/latest/html-single/scalability_and_performance/index#recommended-configurable-storage-technology_persistent-storage[Recommended configurable storage technology]
* link:https://docs.redhat.com/en/documentation/openshift_container_platform/latest/html-single/storage/index#understanding-persistent-storage[Understanding persistent storage]
* link:https://docs.redhat.com/en/documentation/openshift_container_platform/latest/html-single/scalability_and_performance/index#optimizing-storage[Optimizing storage]

// Setting log levels for monitoring components
include::modules/monitoring-setting-log-levels-for-monitoring-components.adoc[leveloffset=+1,tags=**;!CPM;UWM]

// Enabling the query log file for Prometheus
include::modules/monitoring-setting-query-log-file-for-prometheus.adoc[leveloffset=+1,tags=**;!CPM;UWM]

[role="_additional-resources"]
.Additional resources

* xref:../configuring-user-workload-monitoring/preparing-to-configure-the-monitoring-stack-uwm.adoc#enabling-monitoring-for-user-defined-projects-uwm_preparing-to-configure-the-monitoring-stack-uwm[Enabling monitoring for user-defined projects]



