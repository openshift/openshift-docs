:_mod-docs-content-type: ASSEMBLY
[id="windows-containers-release-notes-8-x"]
= {productwinc} release notes
include::_attributes/common-attributes.adoc[]
:context: windows-containers-release-notes

toc::[]

[id="about-windows-containers"]
== About {productwinc}

Windows Container Support for Red Hat OpenShift enables running Windows compute nodes in an {product-title} cluster. Running Windows workloads is possible by using the Red Hat Windows Machine Config Operator (WMCO) to install and manage Windows nodes. With Windows nodes available, you can run Windows container workloads in {product-title}.

These release notes track the development of the WMCO, which provides all Windows container workload capabilities in {product-title}.

ifndef::openshift-origin[]
[id="getting-support"]
== Getting support

// wording taken and modified from https://access.redhat.com/support/policy/updates/openshift#windows

Windows Container Support for Red Hat OpenShift is provided and available as an optional, installable component. Windows Container Support for Red Hat OpenShift is not part of the {product-title} subscription. It requires an additional Red Hat subscription and is supported according to the link:https://access.redhat.com/support/offerings/production/soc/[Scope of coverage] and link:https://access.redhat.com/support/offerings/production/sla[Service level agreements].

You must have this separate subscription to receive support for Windows Container Support for Red Hat OpenShift. Without this additional Red Hat subscription, deploying Windows container workloads in production clusters is not supported. You can request support through the link:http://access.redhat.com/[Red Hat Customer Portal].

For more information, see the Red Hat OpenShift Container Platform Life Cycle Policy document for link:https://access.redhat.com/support/policy/updates/openshift#windows[{productwinc}].

If you do not have this additional Red Hat subscription, you can use the Community Windows Machine Config Operator, a distribution that lacks official support.
endif::openshift-origin[]

[id="wmco-8-1-3"]
== Release notes for Red{nbsp}Hat Windows Machine Config Operator 8.1.3

This release of the WMCO provides a security update for running Windows compute nodes in an {product-title} cluster. The components of WMCO 8.1.3 were released in link:https://access.redhat.com/errata/RHSA-2024:TDB[RHSA-2024:TBD].

[id="wmco-8-1-2"]
== Release notes for Red{nbsp}Hat Windows Machine Config Operator 8.1.2

This release of the WMCO provides new features and bug fixes for running Windows compute nodes in an {product-title} cluster. The components of WMCO 8.1.2 were released in link:https://access.redhat.com/errata/RHSA-2024:1477[RHSA-2024:1477].

[id="wmco-8-1-2-bug-fixes"]
=== Bug fixes

// Also in 10.15.0
* Previously, because of bad logic in the networking configuration script, the WICD was incorrectly reading carriage returns in the CNI configuration file as changes, and identified the file as modified. This caused the CNI configuration to be unnecessarily reloaded, potentially resulting in container restarts and brief network outages. With this fix, the WICD now reloads the CNI configuration only when the CNI configuration is actually modified. (link:https://issues.redhat.com/browse/OCPBUGS-27046[*OCPBUGS-27046*])

// Also in 10.15.0
* Previously, because of a lack of synchronization between Windows machine set nodes and BYOH instances, during an update the machine set nodes and the BYOH instances could update simultaneously. This could impact running workloads. This fix introduces a locking mechanism so that machine set nodes and BYOH instances update individually. (link:https://issues.redhat.com/browse/OCPBUGS-23016[*OCPBUGS-23016*])

[id="wmco-8-1-1"]
== Release notes for Red Hat Windows Machine Config Operator 8.1.1

This release of the WMCO provides new features and bug fixes for running Windows compute nodes in an {product-title} cluster. The components of WMCO 8.1.1 were released in link:https://access.redhat.com/errata/RHSA-2023:7709[RHBA-2023:7709].

[id="wmco-8-1-1-bug-fixes"]
=== Bug fixes

* Previously, the WMCO did not properly wait for Windows virtual machines (VMs) to finish rebooting. This led to occasional timing issues where the WMCO would attempt to interact with a node that was in the middle of a reboot, causing WMCO to log an error and restart node configuration. Now, the WMCO waits for the instance to completely reboot. (link:https://issues.redhat.com/browse/OCPBUGS-20259[*OCPBUGS-20259*])

* Previously, the WMCO configuration was missing the DeleteEmptyDirData: true field, which is required for draining nodes that have emptyDir volumes attached. As a consequence, customers that had nodes with emptyDir volumes would see the following error in the logs: cannot delete Pods with local storage. With this fix, the DeleteEmptyDirData: true field was added to the node drain helper struct in the WMCO. As a result, customers are able to drain nodes with emptyDir volumes attached. (link:https://issues.redhat.com/browse/OCPBUGS-22748[*OCPBUGS-22748*])

[id="wmco-8-0-1"]
== Release notes for Red Hat Windows Machine Config Operator 8.0.1

This release of the WMCO provides new features and bug fixes for running Windows compute nodes in an {product-title} cluster. The components of WMCO 8.0.1 were released in link:https://access.redhat.com/errata/RHBA-2023:3738[RHBA-2023:3738].

[id="wmco-8-0-1-new-features"]
=== New features and improvements

[id="wmco-8-0-1-"]
==== Windows Server 2022 support

With this release, Windows Server 2022 now supports Amazon Web Services (AWS).

[id="wmco-8-0-1-bug-fixes"]
=== Bug fixes

* Previously, on an Azure Windows Server 2019 platform that does not have Azure container services installed, WMCO would fail to deploy Windows instances and would display the _Install-WindowsFeature : Win32 internal error "Access is denied" 0x5 occurred while reading the console output buffer_ error message. The failure occurred because the Microsoft `Install-WindowsFeature` cmdlet displays a progress bar that cannot be sent over an SSH connection. This fix hides the progress bar. As a result, Windows instances can be deployed as nodes. (link:https://issues.redhat.com/browse/OCPBUGS-14181[*OCPBUGS-14181*])

[id="wmco-8-0-0"]
== Release notes for Red Hat Windows Machine Config Operator 8.0.0

This release of the WMCO provides new features and bug fixes for running Windows compute nodes in an {product-title} cluster. The components of the WMCO 8.0.0 were released in link:https://access.redhat.com/errata/RHBA-2023:3738[RHBA-2023:3738].

[IMPORTANT]
====
Due to a link:https://issues.redhat.com/browse/OCPBUGS-14464[known issue], WMCO 8.0.0 is not available to download and use. The issue will be addressed in WMCO 8.0.1, which is planned for release. If you upgrade your cluster from {product-title} 4.12 to {product-title} 4.13, you can continue to use WMCO 7.0.x. However, you will not be able to use the new WMCO 8.0.0 functionality, as described in this section.
====

[id="wmco-8-0-0-new-features"]
=== New features and improvements

[id="wmco-8-0-0-os"]
==== Support for the pod `os` parameter

You can now use the `spec.os.name.windows` parameter in your workload pods to authoritatively identify the pod operating system for validation and to enforce Windows-specific pod security context constraints (SCCs). It is recommended that you configure this parameter in your workload pods.

For more information, see xref:../windows_containers/scheduling-windows-workloads.adoc#sample-windows-workload-deployment_scheduling-windows-workloads[Sample Windows container workload deployment].

[id="wmco-8-0-0-must-gather"]
==== WICD logs are added to must-gather

The `must-gather` tool now collects the service logs generated by the Windows Instance Config Daemon (WICD) from Windows nodes.

[id="wmco-8-0-0-bug-fixes"]
=== Bug fixes

* Previously, the test to determine if the Windows Defender antivirus service is running was incorrectly checking for any process whose name started with `Windows Defender`, regardless of state. This resulted in an error when the WMCO created firewall exclusions for containerd on instances without `Windows Defender` installed. This fix now checks for the presence of the specific running process associated with the Windows Defender antivirus service. As a result, the WMCO can properly configure Windows instances as nodes regardless of whether Windows Defender is installed. (link:https://issues.redhat.com/browse/OCPBUGS-1513[*OCPBUGS-1513*])

* Previously, in-tree storage was not working for Windows nodes on VMware vSphere. With this fix, {productwinc} properly supports in-tree storage for all cloud providers.  (link:https://issues.redhat.com/browse/WINC-1014[*WINC-1014*])

include::modules/wmco-prerequisites.adoc[leveloffset=+1]

include::modules/windows-containers-release-notes-limitations.adoc[leveloffset=+1]

