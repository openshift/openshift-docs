:_mod-docs-content-type: ASSEMBLY
:context: windows-containers-release-notes-10-15-x-past
[id="nodes-cma-autoscaling-custom-rn-past"]
= Release notes for past releases of the Windows Machine Config Operator
include::_attributes/common-attributes.adoc[]

toc::[]

The following release notes are for previous versions of the Windows Machine Config Operator (WMCO).

[id="wmco-10-15-1"]
== Release notes for Red{nbsp}Hat Windows Machine Config Operator 10.15.1

This release of the WMCO provides new features and bug fixes for running Windows compute nodes in an {product-title} cluster. The components of the WMCO 10.15.1 were released in link:https://access.redhat.com/errata/RHBA-2024:1191[RHBA-2024:1191].

Due to an internal issue, the planned WMCO 10.15.0 could not be released. Multiple bug and security fixes, described below, were included in WMCO 10.15.0. These fixes are included in WMCO 10.15.1. For specific details about these bug and security fixes, see the link:https://access.redhat.com/errata/RHSA-2024:0954[RHSA-2024:0954] errata.

=== New features and improvements
[id="wmco-10-15-1-node-certificates"]

[id="wmco-10-15-1-operator-metrics"]
==== CPU and memory usage metrics are now available

//https://issues.redhat.com/browse/WINC-1181
CPU and memory usage metrics for Windows pods are now available in Prometheus. The metrics are shown in the {product-title} web console on the *Metrics* tab for each Windows pod and can be queried by users.

[id="wmco-10-15-1-operator-sdk"]
==== Operator SDK upgrade

The WMCO now uses the Operator SDK version 1.32.0.

[id="wmco-10-15-1-operator-kube"]
==== Kubernetes upgrade

The WMCO now uses Kubernetes 1.28.

[id="wmco-10-15-1-bug-fixes"]
=== Bug fixes

* Previously, there was a flaw in the handling of multiplexed streams in the HTTP/2 protocol, which is utilized by the WMCO.Â A client could repeatedly make a request for a new multiplex stream and then immediately send an `RST_STREAM` frame to cancel those requests. This activity created additional work for the server by setting up and dismantling streams, but avoided any server-side limitations on the maximum number of active streams per connection. As a result, a denial of service occurred due to server resource consumption. This issue has been fixed. (link:https://bugzilla.redhat.com/show_bug.cgi?id=2243296[*BZ-2243296*])

* Previously, there was a flaw in Kubernetes, where a user who can create pods and persistent volumes on Windows nodes was able to escalate to admin privileges on those nodes. Kubernetes clusters were only affected if they were using an in-tree storage plugin for Windows nodes. This issue has been fixed. (link:https://bugzilla.redhat.com/show_bug.cgi?id=2247163[*BZ-2247163*])

* Previously, there was a flaw in the SSH channel integrity. By manipulating sequence numbers during the handshake, an attacker could remove the initial messages on the secure channel without causing a MAC failure. For example, an attacker could disable the ping extension and thus disable the new countermeasure in OpenSSH 9.5 against keystroke timing attacks. This issue has been fixed. (link:https://bugzilla.redhat.com/show_bug.cgi?id=2254210[*BZ-2254210*])

* Previously, the routes from a Windows Bring-Your-Own-Host (BYOH) VM to the metadata endpoint were being added as non-persistent routes, so the routes were removed when a VM  was removed (deconfigured) or re-configured. This would cause the node to fail if configured again, as the metadata endpoint was unreachable. With this fix, the WMCO runs the AWS EC2 launch v2 service after removal or re-configuration. As a result, the routes are restored so that the VM can be configured into a node, as expected. (link:https://issues.redhat.com/browse/OCPBUGS-15988[*OCPBUGS-15988*])

// Also in 7.2.1,
* Previously, the WMCO did not properly wait for Windows virtual machines (VMs) to finish rebooting. This led to occasional timing issues where the WMCO would attempt to interact with a node that was in the middle of a reboot, causing WMCO to log an error and restart node configuration. Now, the WMCO waits for the instance to completely reboot. (link:https://issues.redhat.com/browse/OCPBUGS-17217[*OCPBUGS-17217*])

// Also in 7.2.1
* Previously, the WMCO configuration was missing the `DeleteEmptyDirData: true` field, which is required for draining nodes that have `emptyDir` volumes attached. As a consequence, customers that had nodes with `emptyDir` volumes would see the following error in the logs: `cannot delete Pods with local storage`. With this fix, the `DeleteEmptyDirData: true` field was added to the node drain helper struct in the WMCO. As a result, customers are able to drain nodes with `emptyDir` volumes attached. (link:https://issues.redhat.com/browse/OCPBUGS-27300[*OCPBUGS-27300*])

* Previously, because of a lack of synchronization between Windows machine set nodes and BYOH instances, during an update the machine set nodes and the BYOH instances could update simultaneously. This could impact running workloads. This fix introduces a locking mechanism so that machine set nodes and BYOH instances update individually. (link:https://issues.redhat.com/browse/OCPBUGS-8996[*OCPBUGS-8996*])

* Previously, because of a missing secret, the WMCO could not configure proper credentials for the WICD on Nutanix clusters. As a consequence, the WMCO could not create Windows nodes. With this fix, the WMCO creates long-lived credentials for the WICD service account. As a result, the WMCO is able to configure a Windows node on Nutanix clusters. (link:https://issues.redhat.com/browse/OCPBUGS-25350[*OCPBUGS-25350*])

// Also in 7.2.1, 8.1.2
* Previously, because of bad logic in the networking configuration script, the WICD was incorrectly reading carriage returns in the CNI configuration file as changes, and identified the file as modified. This caused the CNI configuration to be unnecessarily reloaded, potentially resulting in container restarts and brief network outages. With this fix, the WICD now reloads the CNI configuration only when the CNI configuration is actually modified. (link:https://issues.redhat.com/browse/OCPBUGS-25756[*OCPBUGS-25756*])
