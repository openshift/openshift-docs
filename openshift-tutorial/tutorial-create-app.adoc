[[openshift-tutorial-create]]
= Creating an Application
{product-author}
{product-version}
:data-uri:
:icons:
:experimental:
:toc: macro
:toc-title:

toc::[]
{nbsp} +


You can use the web console or the CLI to create an application.

[[openshift-tutorial-create-app-git]]
== Getting the application source 

When using {product-title} in a real-world environment, you will likely have a repository where you store your code, like Git. 

For this tutorial, if you don't have source code, or you want to use the sample code rather than playing with your own, you need to create a _fork_ in the sample repository. A fork is just your own copy of the repo and the code inside (so you don't mess up the source code).

We use a free service called _GitHub_. _Git_ is a free source control system and GitHub is the web service that provides the web hosting for our repository.  

The next two sections describe how to get the source code from GitHub.

[[openshift-tutorial-create-app-git-get]]
===== Have a GitHub Account? =====

To use GitHub, you need a free user account. 

If you don't have one, go to link:https://github.com/[https://github.com/] and sign up. We'll wait for you.

If you have an account, move on to xref:openshift-tutorial-create-app-git-fork[Fork the GitHub account].

image::Git-Logo-2Color.png[git logo, 228,95 float="right"]

[[openshift-tutorial-create-app-git-fork]]
===== Getting a Git Client =====

You need tools to work with a Git repository. 

If you don't have one, go to get a git client. We'll wait for you.

* This tutorial uses the link:https://git-scm.com/downloads[Git CLI commands] on the system's native console. 
* The Git website has a link:https://git-scm.com/downloads/guis[list of client applications] you can try. 
* GitHub has a link:https://desktop.github.com/[desktop client]. 


[[openshift-tutorial-create-app-git-fork]]
===== Fork the GitHub account =====

Now that you have a GitHub account and client, you are ready to fork. 
For this tutorial, we will be using two repositories:

* https://github.com/openshift/ruby-ex.git
* https://github.com/openshift/ruby-hello-world

If you have your own repo, feel free to use it. For the rest of you:

. Go to our link:https://github.com/openshift/ruby-ex.git[sample Ruby repo] in GitHub.
+
----
https://github.com/openshift/ruby-ex.git
----  

. Click the *Fork* button to crate a copy in your repository.

. Click the *Clone or download* button in the corner.
+
image::github.png[GitHub clone, 507, 221, align="center"]

. You can use SSH or HTTPS to fork a repo in GitHub. This tutorial uses the SSH method.

. Click the clipboard icon to automtically copy the link.
+
image::github2.png[GitHub clone, align="center"]

. In a console window, enter the SSH string you just copied:
+
----
git clone git@github.com:<git-username>/<git-repo>
----
+
It should look something like:
+
image::gitclone.png[git clone, align="right"]
+
Note the location of the files you cloned down.

[[openshift-tutorial-create-app-ui-create]]
== Generate the Application

Now that you have forked the repo, you can build the application. The following sections show you how to deploy a demo Ruby application using the Web Console and the CLI. 

[[openshift-tutorial-create-app-ui]]
=== Using the Web Console

Let's go back to the web console and load your project. If you do not remember how, take a look back at the xref:../openshift-tutorial/tutorial-walkthrough#openshift-tutorial-walk-ui[Walkthrough].

. Click the *Add to Project* button. 

. There, click the programming language that you are used to working in. For this tutorial, we are using Ruby.
+
image::create-app-ruby.png[new ruby app, align="center"]

. On the *Ruby* page, click the *Select* button in the *Ruby* card.

. Enter a name for the app and associated resources. Use lowercase letters or numbers and avoid special characters.  If you enter an incorrect character, {product-title} will display the rules.

. Enter the URL to the ruby-hello-world application:
+
----
https://github.com/Me/ruby-hello-world
----
+
Remember to use your fork, not the main repository so that we can edit the application. 

. Click *Create*.
+
image::create-app-done.png[app created, align="center"]
+
Back on the *Overview* page, you can see your app:
+
image::create-app-hello-1.png[hello world service 680,203 align="left"]
+
Notice that the application has an IP address automatically assigned. 
+
When the pod is up, as shown here, click the HTTP link in the top right corner of the application card.
+
image::create-app-link.png[new app, align="center"]




[[openshift-tutorial-create-app-ui-create]]
==== Using the CLI ====

The `new-app` command allows you to create applications from source code in a local or remote Git repository.

To create an application using a Git repository in a local directory:

. Enter the following command:
+
----
$ oc new-app https:path-to-source-code
----
+
The _source-code_ is your repo. 
+
So for us, try the following with your forked repo:
+
----
$ oc new-app https://github.com/Me/ruby-ex.git
----
+
It should look something like:
+
image::oc-new-app.pgn[new app command, align=left]

image::create-app-link-2.png[new app, align="center"]

[[openshift-tutorial-create-app-ui-change]]
== Making Changes to Your Application



[[openshift-tutorial-create-cli]]
== Using the CLI

To create an application using the CLI, we will create a JSON-format file and use the `oc` commaand to build the application.

If you have code of your own, feel free to use it. But, here is a simple, *Hello World* application source:

----
{
  "kind": "Pod",
  "apiVersion": "v1",
  "metadata": {
    "name": "hello-openshift",
    "creationTimestamp": null,
    "labels": {
      "name": "hello-openshift"
    }
  },
  "spec": {
    "containers": [
      {
        "name": "hello-openshift",
        "image": "openshift/hello-openshift",
        "ports": [
          {
            "containerPort": 8080,
            "protocol": "TCP"
          }
        ],
        "resources": {},
        "volumeMounts": [
          {
            "name":"tmp",
            "mountPath":"/tmp"
          }
        ],
        "terminationMessagePath": "/dev/termination-log",
        "imagePullPolicy": "IfNotPresent",
        "capabilities": {},
        "securityContext": {
          "capabilities": {},
          "privileged": false
        }
      }
    ],
    "volumes": [
      {
        "name":"tmp",
        "emptyDir": {}
      }
    ],
    "restartPolicy": "Always",
    "dnsPolicy": "ClusterFirst",
    "serviceAccount": ""
  },
  "status": {}
}
----

Open a file on the master using a text editor and copy the source code in. Save the file with a `.json` extension.

Run the following command, using the name of your file:

----
oc create -f hello-openshift.json
pod "hello-openshift" created
----

Now, if you `oc get pod` command, you will start seeing some output:

----
oc get pods
NAME              READY     STATUS    RESTARTS   AGE
hello-openshift   1/1       Running   0          57s
----

== Next Up

