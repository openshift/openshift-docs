language: python
cache: pip
sudo: required
before_install:
- sudo gem install asciidoctor -v 1.5.4
- sudo gem install asciidoctor-diagram -v 1.5.4
install:
- pip install pyyaml
- pip install aura.tar.gz
script:
- python build.py --distro openshift-enterprise --product "OpenShift Container Platform"
  --version 3 --no-upstream-fetch
- if [ "$TRAVIS_BRANCH" == "enterprise-3.9" ] || [ "$TRAVIS_BRANCH" == "enterprise-3.10"
  ]; then python build.py --distro openshift-online --product "OpenShift Container
  Platform" --version 3 --no-upstream-fetch; fi
- if [ "$TRAVIS_BRANCH" == "enterprise-3.7" ] || [ "$TRAVIS_BRANCH" == "enterprise-3.9"
  ] || [ "$TRAVIS_BRANCH" == "enterprise-3.10" ]; then python build.py --distro openshift-dedicated
  --product "OpenShift Container Platform" --version 3 --no-upstream-fetch; fi
- python makeBuild.py
after_success:
 - git config --global user.email "travis@travis-ci.org"
 - git config --global user.name "Travis CI"
 - git remote rm origin
 - git remote add origin https://${DOCS_PREVIEW_TOKEN}@github.com/openshift-docs-preview-bot/openshift-docs.git > /dev/null 2>&1
 - chmod +x build_preview.sh
 - ./build_preview.sh
