:_content-type: ASSEMBLY
// CNF-1500 assembly
[id="ztp-deploying-disconnected"]
= Deploying distributed units at scale in a disconnected environment
include::_attributes/common-attributes.adoc[]
:context: ztp-deploying-disconnected

toc::[]

Use zero touch provisioning (ZTP) to provision distributed units at new edge sites in a disconnected environment. The workflow starts when the site is connected to the network and ends with the CNF workload deployed and running on the site nodes.

// :FeatureName: ZTP for RAN deployments
// include::snippets/technology-preview.adoc[leveloffset=+1]

// include::modules/ztp-support-for-deployment-of-multi-node-clusters.adoc[leveloffset=+1]
// Move this topic and merge with ZTP custom resources - delete the title, use the table of
// resources in ZTP custom resources

include::modules/ztp-provisioning-edge-sites-at-scale.adoc[leveloffset=+1]

include::modules/ztp-the-gitops-approach.adoc[leveloffset=+1]

include::modules/ztp-ztp-building-blocks.adoc[leveloffset=+1]

include::modules/ztp-how-to-plan-your-ran-policies.adoc[leveloffset=+1]
// Change title to How to plan your RAN policies


// include::modules/ztp-single-node-clusters.adoc[leveloffset=+1]
// Remove this topic for now

include::modules/about-ztp-and-distributed-units-on-openshift-clusters.adoc[leveloffset=+1]

include::modules/ztp-low-latency-for-distributed-units-dus.adoc[leveloffset=+1]

include::modules/ztp-du-host-bios-requirements.adoc[leveloffset=+1]

include::modules/ztp-acm-preparing-to-install-disconnected-acm.adoc[leveloffset=+1]

include::modules/ztp-disconnected-environment-prereqs.adoc[leveloffset=+2]

include::modules/installation-about-mirror-registry.adoc[leveloffset=+2]

[role="_additional-resources"]
.Additional resources

* For information on viewing the CRI-O logs to view the image source,
see xref:../installing/validating-an-installation.html#viewing-the-image-pull-source_validating-an-installation[Viewing the image pull source].

include::modules/ztp-installing-preparing-mirror.adoc[leveloffset=+2]

include::modules/cli-installing-cli.adoc[leveloffset=+3]

include::modules/installation-adding-registry-pull-secret.adoc[leveloffset=+3]

include::modules/installation-mirror-repository.adoc[leveloffset=+3]

include::modules/ztp-acm-adding-images-to-mirror-registry.adoc[leveloffset=+3]

include::modules/ztp-acm-installing-disconnected-rhacm.adoc[leveloffset=+1]

include::modules/ztp-ai-install-ocp-clusters-on-bare-metal.adoc[leveloffset=+1]

// Custom resources

include::modules/ztp-ztp-custom-resources.adoc[leveloffset=+1]

include::modules/ztp-the-policygentemplate.adoc[leveloffset=+1]

include::modules/ztp-creating-the-policygentemplate-cr.adoc[leveloffset=+1]

include::modules/ztp-generating-ran-policies.adoc[leveloffset=+1]

include::modules/ztp-creating-ztp-custom-resources-for-multiple-managed-clusters.adoc[leveloffset=+1]

include::modules/ztp-installing-the-gitops-ztp-pipeline.adoc[leveloffset=+1]

include::modules/ztp-preparing-the-ztp-git-repository.adoc[leveloffset=+2]

include::modules/ztp-preparing-the-hub-cluster-for-ztp.adoc[leveloffset=+2]
[role="_additional-resources"]
.Additional resources
* For information on installing the Topology Aware Lifecycle Operator, see
https://github.com/openshift-kni/cluster-group-upgrades-operator#readme[Topology Aware Lifecycle Operator]

include::modules/ztp-deploying-a-site.adoc[leveloffset=+2]

// include::modules/ztp-creating-the-site-secrets.adoc[leveloffset=+2]
// Remove this topic - keep the note and move to Step 3 in "Deploying a site"

include::modules/ztp-monitoring-deployment-progress.adoc[leveloffset=+1]

include::modules/ztp-troubleshooting-gitops-ztp.adoc[leveloffset=+1]

include::modules/ztp-validating-the-generation-of-installation-crs.adoc[leveloffset=+2]

include::modules/ztp-validating-the-generation-of-configuration-policy-crs.adoc[leveloffset=+2]

include::modules/ztp-restarting-policies-reconciliation.adoc[leveloffset=+2]
.Additional resources
* For information on using TALO to construct your own `ClusterGroupUpgrade` CR,
see https://github.com/openshift-kni/cluster-group-upgrades-operator#readme[Topology-Aware Lifecycle
Operator (TALO)].

// The following topics were moved to the end

include::modules/ztp-site-cleanup.adoc[leveloffset=+1]
[role="_additional-resources"]
.Additional resources
* For information on removing a cluster, see
https://access.redhat.com/documentation/en-us/red_hat_advanced_cluster_management_for_kubernetes/2.4/html/clusters/managing-your-clusters#remove-managed-cluster[Removing a cluster from management]

include::modules/ztp-removing-obsolete-content.adoc[leveloffset=+2]

include::modules/ztp-tearing-down-the-pipeline.adoc[leveloffset=+2]


// Move this and "site cleanup" to after troubleshooting - create new modules from the
// https://github.com/openshift-kni/cnf-features-deploy/blob/master/ztp/gitops-subscriptions/argocd/Upgrade.md[Upgrading GitOps ZTP].
// repo
include::modules/ztp-upgrading-gitops-ztp.adoc[leveloffset=+1]

include::modules/ztp-preparing-for-the-gitops-ztp-upgrade.adoc[leveloffset=+2]

include::modules/ztp-labeling-the-existing-clusters.adoc[leveloffset=+2]

include::modules/ztp-stopping-the-existing-gitops-ztp-applications.adoc[leveloffset=+2]

include::modules/ztp-topology-aware-lifecycle-operator.adoc[leveloffset=+2]
.Additional resources
* For information on installing Topology Aware Lifecycle Operator (TALO), see
// xref:modules/cnf-topology-aware-lifecycle-operator-installation-web-console.adoc[Installing the Topology Aware Lifecycle Operator by using the web console]
// and
// xref:modules/cnf-topology-aware-lifecycle-operator-installation-cli.adoc[Installing the Topology Aware Lifecycle Operator by using the CLI]

include::modules/ztp-required-changes-to-the-git-repository.adoc[leveloffset=+2]

include::modules/ztp-installing-the-new-gitops-ztp-applications.adoc[leveloffset=+2]

include::modules/ztp-roll-out-the-configuration-changes.adoc[leveloffset=+2]
.Additional resources
* For information on creating `ClusterGroupUpgrade` CRs, see
// xref:


// Manual installation moved here

include::modules/ztp-manually-install-a-single-managed-cluster.adoc[leveloffset=+1]

include::modules/ztp-configuring-a-static-ip.adoc[leveloffset=+2]

include::modules/ztp-discovery-iso.adoc[leveloffset=+2]

include::modules/ztp-checking-the-managed-cluster-status.adoc[leveloffset=+2]

include::modules/ztp-configuring-the-cluster-for-a-disconnected-environment.adoc[leveloffset=+2]

include::modules/ztp-configuring-ipv6.adoc[leveloffset=+2]

include::modules/ztp-troubleshooting-the-managed-cluster.adoc[leveloffset=+2]

include::modules/ztp-applying-source-custom-resource-policies.adoc[leveloffset=+2]

include::modules/ztp-things-to-consider-when-creating-custom-resource-policies.adoc[leveloffset=+2]
