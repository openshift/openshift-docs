:_mod-docs-content-type: ASSEMBLY
[id="cnf-shared-cpu-for-workloads"]
= Shared CPUs for lightweight workload tasks
include::_attributes/common-attributes.adoc[]
:context: cnf-shared-cpu-for-workloads

toc::[]

Within high-performance workloads, some lightweight application tasks can occupy scarce CPU resources. For example, log printing or configuration processing can occupy an isolated CPU that could be used for more critical workload demands. You can increase workload performance, and more efficiently use CPU resources, by moving lightweight application tasks to a set of shared CPUs.

[NOTE]
====
The shared CPUs feature is not available on HyperShift-hosted clusters.
====

//:FeatureName: Configuring shared CPUs
//include::snippets/technology-preview.adoc[]

You can define and enable a set of shared CPUs by using a performance profile. When you enable shared CPUs, the kublet's  `reservedSystemCpus` pool, which is typically used for system housekeeping tasks only, is internally partitioned into a `shared` CPU pool and a `reserved` CPU pool. 

.Overview of shared CPUs in a node
image::555_OpenShift_shared_CPUs_overview_0324.png[Overview of shared CPUs for pods in a node]

The `shared` CPU pool can process system housekeeping tasks and lightweight application tasks. The `reserved` CPU pool continues to only process system housekeeping tasks. As the `shared` CPU pool also processes system housekeeping tasks there might be some latency in processing application tasks. However, this is acceptable give the peripheral nature of the application tasks and the overall improvement in CPU resource efficiency.

[NOTE]
====
System housekeeping tasks can only run on shared CPUs when workload partitioning is disabled.
====

A typical use-case for shared CPUs is Data Plane Development Kit (DPDK) applications. DPDK applications require intensive data processing, such as packet forwarding, routing, and network function virtualization (NFV). Moving peripheral DPDK application tasks to a set of shared CPUs prevents these tasks from monopolizing isolated cores meant for critical workload processing.

include::modules/configuring-shared-cpus-for-a-workload.adoc[leveloffset=+1]

include::modules/configuring-a-workload-to-use-shared-cpus.adoc[leveloffset=+1]


// [id="{context}-additional-resources"]
// [role="_additional-resources"]
// == Additional resources

// * xref:../nodes/clusters/nodes-cluster-enabling-features.adoc#nodes-cluster-enabling[Enabling features using feature gates]

