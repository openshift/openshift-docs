[[admin-guide-stateful-sets]]
= Using Stateful Sets
{product-author}
{product-version}
:data-uri:
:icons:
:experimental:
:toc: macro
:toc-title:
:prewrap!:
:context: admin-stateful-sets

toc::[]


A StatefulSet is an admission controller that provides a uniquene identifier to a set of pods and graceful, ordered deployment of those pods.
State information and data is maintained using persistent volumes that are automatically mapped to new pods as they are created. 

StatefulSet Pods have a unique identity that is The identity sticks to the Pod, regardless of which node the pod is scheduled on.
Each Pod in the StatefulSet will be assigned an integer ordinal, from 0 up through N-1, that is unique over the Set.

Having a persistent state and network idenity, you can sue StatefulSets with stateful applications and distributed systems, such as databases, message queues, metadata stores.
Stateful applications often use data that must persist beyond the lifecycle of a container. As new containers or new hosts are brought up, 
the StatefulSet maps them to existing persistent volumes. In addtion, those containers or hosts must be brought up in a certain order, such as a master must exist before 
a node can be launched.

[NOTE]
====
If your application does not require a stable identifier 
or ordered deployment, deletion, or scaling, deploy your application Deployment or ReplicaSet, which provides a set of stateless replicas. 
====

StatefulSets are valuable for applications that require one or more of the following.

* Stable unique network identifiers.

* Stable persistent storage.

* Ordered graceful deployment and scaling.

* Ordered graceful deletion and termination.

* Ordered automated rolling updates.

The storage for a given Pod must either be provisioned by a PersistentVolume provisioner based on the requested storage class, or pre-provisioned by an admin.
Deleting or scaling a StatefulSet down does delete the volumes associated with the StatefulSet. 
StatefulSets currently require you to create a Headless Service to be responsible for the network identity of the Pods.

{product-title] creates one PersistentVolume for each VolumeClaimTemplate. Each Pod receives a single PersistentVolume. When a Pod is (re)scheduled onto a node, its volumeMounts mount the PersistentVolumes associated with its PersistentVolume Claims. Note that, the PersistentVolumes associated with the Podsâ€™ PersistentVolume Claims are not deleted when the Pods, or StatefulSet are deleted. This must be done manually.

include::admin_guide/topics/statefulsets-about.adoc[leveloffset=+1]

include::admin_guide/topics/statefulsets-pods.adoc[leveloffset=+1]

include::admin_guide/topics/statefulsets-creating.adoc[leveloffset=+1]

include::admin_guide/topics/statefulsets-using-pods.adoc[leveloffset=+1]

include::admin_guide/topics/statefulsets-scaling.adoc[leveloffset=+1]

include::admin_guide/topics/statefulsets-updating.adoc[leveloffset=+1]

include::admin_guide/topics/statefulsets-deleting.adoc[leveloffset=+1]

include::admin_guide/topics/statefulsets-managing-pods.adoc[leveloffset=+1]

