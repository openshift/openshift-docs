### CNS - Container Native Storage recommendations for OCP

OCP platform offers CNS storage feature which makes easier for OCP users to fulfill their
storage needs. With CNS solution users and admins are empowered to have together storage and
application pods running together on same infrastructure and sharing same resources,this leads
to better resource utilization.
Follow CNS documentation for instructions how to configure CNS as part of OCP cluster.
Currently it is supported up to 100 CNS volumes on one Trusted Storage Pool ( TSP )

==== CNS volumes create time
When deploying applications on OCP it is important to estimate how long
it will take to build environment from storage side in order for an application pod to able to start.
If application pod requires an PVC (Persistent Volume Claim) then at below graph
is presented how long it takes for different number of CNS to be created and bound to corresponding PVC.
All tests were performed on one TSP (Trusted Storage Pool) and using hardware configuration for
CNS per CNS Documentation

Dynamic storage provisioning and storage classes were aslo configured and used when provisioning PVC

Creation time scales linearly up through 100 volumes. in our tests,
each volume takes approximately 6 seconds to be created, allocated and bound to a pod.


==== CNS volumes delete time

When user deletes PVC claim which is used by an application pod, then that action
will trigger deletion of CNS volume which was used by PVC.
Persistent Volume Claims will disappear immediately from ***oc get pvc*** view, however the the time to delete
and recycle CNS volumes will depend on number of CNS volumes. In tests it was showed that
deletion time of CNS volumes scales linearly up to 100 volumes.

It is important to note that delete time does not affect application users. CNS delete
behaviour serves as orientation for CNS storage administrators to be able to estimate how long it
will approximately take for CNS volumes to be removed from CNS cluster.

==== Memory
If followed https://access.redhat.com/documentation/en-us/red_hat_gluster_storage/3.1/html-single/container-native_storage_for_openshift_container_platform_3.4/#idm140521922231280[planning guidelines]
when selecting hardware for CNS nodes it is safe to say that number of CNS volumes presented in this
document will not consume recommended memory requirements of 32 GB per OCP node
hosting CNS pods. It is strongly advised to follow these recommendations when planning hardware for
CNS storage environment.


