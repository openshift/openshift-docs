[[kiali-tutorial]]
= Kiali tutorial

Kiali works with Istio to visualize your service mesh topology to provide visibility into features like circuit breakers, request rates, and more.  Kiali offers insights about the mesh components at different levels, from abstract Applications to Services and Workloads.  Kiali provides an interactive graph view of your namespace in real time.  It can display the interactions at several levels (applications, versions, workloads) with contextual information and charts on the selected graph node or edge.

This tutorial uses {ProductShortName} and the `bookinfo` tutorial to demonstrate how you can use the Kiali console to view the topography and health of your service mesh.

Prerequisites:

* {product-title} 3.11 or higher installed.
* {ProductName} {ProductVersion} installed.
* Kiali parameters specified in the custom resource file.
* `Bookinfo` demonstration application installed.

[[accessing-kiali-console]]
== Accessing the Kiali console

. A route to access the Kiali console already exists. Run the following command to obtain the route and Kiali URL:
+
----
$ oc get routes
----
+
While your exact environment may be different, you should see a result that's something like this:
+

----
NAME                   HOST/PORT                                                PATH      SERVICES               PORT              TERMINATION   WILDCARD
grafana                grafana-istio-system.127.0.0.1.nip.io                          grafana                http                            None
istio-ingress          istio-ingress-istio-system.127.0.0.1.nip.io                    istio-ingress          http                            None
istio-ingressgateway   istio-ingressgateway-istio-system.127.0.0.1.nip.io             istio-ingressgateway   http                            None
jaeger-query           jaeger-query-istio-system.127.0.0.1.nip.io                     jaeger-query           jaeger-query      edge          None
kiali                  kiali-istio-system.127.0.0.1.nip.io                            kiali                  <all>                           None
prometheus             prometheus-istio-system.127.0.0.1.nip.io                       prometheus             http-prometheus                 None
tracing                tracing-istio-system.127.0.0.1.nip.io                          tracing                tracing           edge          None
----

+
. Launch a browser and navigate to https://${KIALI_URL} (in the output above, this is `kiali-istio-system.127.0.0.1.nip.io`).  You should see the Kiali console login screen.

. Log in to the Kiali console using the user name and password that you specified in the custom resource file during installation.

[[kiali-overview-page]]
== Overview page

When you first log in you see the Overview page, which provides a quick overview of the health of the various namespaces that are part of your {ProductShortName}.  You can choose to view the health of your applications, workloads, or services.

image:kiali-overview.png[Overview Page]

[[kiali-graph-page]]
== Graph page

The Graph page shows a graph of microservices, which are connected by the requests going through them. On this page, you can see how applications, workloads, or services interact with each other.

. Click *Graph* in the left navigation.
+
image:kiali-graph.png[Kiali graph]
+
. If necessary, select `bookinfo` from the *Namespace* menu.  The graph displays the applications in the Bookinfo application.
. Click the question mark (?) under the *Namespace* menu to take the Graph Help Tour.
. Click *Done* to close the Help Tour.
. Click *Legend* in the lower left corner.  Kiali displays the graph legend.
+
image:kiali-legend.png[Kiali legend]
+
. Close the Graph Legend.
. Hover over the *productpage* node.  Note how the graph highlights only the incoming and outgoing traffic from the node.
. Click the *productpage* node.  Note how the details on the right side of the page change to display the *productpage* details.

[[kiali-applications-page]]
== Applications page
The Applications page lets you search for and view applications, their health, and other details.

. Click *Applications* in the left navigation.
. If necessary, select `bookinfo` from the *Namespace* menu.  The page displays the applications in the selected namespace and their health.
. Hover over the Health icon to view additional health details.
. Click the `reviews` service to view the details for that application.
+
image:kiali-applications-details.png[Kiali Applications details]
+
. On the Applications Details page you can view more detailed health information, and drill down for further details about the three versions of the `reviews` service.
. From the Application Details page you can also click tabs to view Traffic and Inbound and Outbound Metrics for the application.

[[kiali-workloads-page]]
== Workloads page
The Workloads page lets you search for and view workloads, their health, and other details.

. Click *Workloads* in the left navigation.
. If necessary, select `bookinfo` from the *Namespace* menu.  The page displays the workloads in the selected namespace, their health, and labels.
. Click the `reviews-v1` workload to view the details for that workload.
. On the Workload Details page you can view an overview of pods and services associated with the workload.
+
image:kiali-workloads-details.png[Kiali Workloads details]
+
. From the Workload Details page you can also click tabs to view Traffic, Logs, and Inbound and Outbound Metrics for the workload.

[[kiali-services-page]]
== Services page
The Services page lets you search for and view services, their health, and other details.

. Click *Services* in the left navigation.
. If necessary, select `bookinfo` from the *Namespace* menu.  The page displays a listing of all the services that are running in the selected namespace and additional information about them, such as health status.
. Hover over the health icon for any of the services to view health information about the service.  A service is considered healthy when it is online and responding to requests without errors.
. Click the *Reviews* service to view its details.  Note that there are three different versions of this service.
+
image:kiali-services-details.png[Kiali Services details]
+
. On the Services Details page you can view an overview of workloads, virtual services, and destination rules associated with the service.
. From the Services Details page you can also click tabs to view Traffic, Inbound Metrics, and Traces for the service.
. Click the Actions menu.   From here you can perform the following actions:

* Create Weighted Routing
* Create Matching Routing
* Suspend Traffic
* Delete ALL Traffic Routing

. Click the name of one of the services to view additional details about that specific version of the service.

[[kiali-istio-config-page]]
== Istio Config page
The Istio Config page lets you view all of the currently running configurations to your {ProductShortName}, such as Circuit Breakers, Destination Rules, Fault Injection, Gateways, Routes, Route Rules, and Virtual Services.

. Click *Istio Config* in the left navigation.
. If necessary, select `bookinfo` from the *Namespace* menu. The page displays a listing of configurations running in the selected namespace and validation status.
+
image:kiali-istio-config.png[Istio configuration]
+
. Click one of the configurations to view additional information about the configuration file.
+
image:kiali-istio-config2.png[Istio Configuration YAML]


[[kiali-distributed-tracing-page]]
== Distributed Tracing page

Click the *Distributed Tracing* link in the left navigation. On this page you can see tracing data as provided by Jaeger.

[[removing-kiali-tutorial]]
== Removing the Kiali tutorial

The procedure for removing the Kiali tutorial is the same as removing the Bookinfo tutorial.
