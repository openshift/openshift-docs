:_mod-docs-content-type: ASSEMBLY
[id="persistent-storage-csi-migration"]
= CSI automatic migration
include::_attributes/common-attributes.adoc[]
:context: persistent-storage-csi-migration

toc::[]

In-tree storage drivers that are traditionally shipped with {product-title} are being deprecated and replaced by their equivalent Container Storage Interface (CSI) drivers. {product-title} provides automatic migration for in-tree volume plugins to their equivalent CSI drivers.

include::modules/persistent-storage-csi-migration-overview.adoc[leveloffset=+1]
include::modules/persistent-storage-csi-migration-sc.adoc[leveloffset=+1]

To change the default storage class, see xref:../../storage/container_storage_interface/persistent-storage-csi-sc-manage.adoc#change-default-storage-class_persistent-storage-csi-sc-manage[Changing the default storage class].

== vSphere automatic migration

[IMPORTANT]
====
Migration includes significant consequences:

* Enabling migration cannot be undone.

* Migration can take a while to complete depending on how many nodes are on the cluster.
====

// New installations of {product-title}
include::modules/persistent-storage-csi-migration-vsphere-new-install.adoc[leveloffset=+2]

// Updating from {product-title} 4.13 to 4.14
include::modules/persistent-storage-csi-migration-vsphere-to-4-14.adoc[leveloffset=+2]

[role="_additional-resources"]
[id="additional-resources_{context}"]
== Additional resources

* link:https://docs.redhat.com/en/documentation/openshift_container_platform/4.14/html/updating_clusters/preparing-to-update-a-cluster#updating-cluster-prepare[Preparing to update to {product-title} 4.14]

// Updating from {product-title} 4.12 to 4.13
include::modules/persistent-storage-csi-migration-vsphere-to-4-13.adoc[leveloffset=+2]

// Using the web console to opt in to automatic CSI migration
include::modules/persistent-storage-csi-migration-vsphere-enabling-migration-console.adoc[leveloffset=+2]

// Using the CLI to opt in to automatic CSI migration
include::modules/persistent-storage-csi-migration-vsphere-enabling-migration-cli.adoc[leveloffset=+2]
