:_mod-docs-content-type: ASSEMBLY
[id=ossm-migrating-read-me-assembly]
= Important information to know if you are migrating from OpenShift Service Mesh 2.6
include::_attributes/common-attributes.adoc[]
:context: ossm-migrating-read-me-assembly

toc::[]

If you are moving from {SMProductName} 2.6 to {SMProductName} 3, read the content in this section first as it contains important information and explanations on the differences between the versions. These differences have a direct impact on your installation and configuration of {SMProduct} 3.

include::modules/ossm-migrating-2-and-3-differences.adoc[leveloffset=+1]
include::modules/ossm-migrating-read-me-new-operator.adoc[leveloffset=+1]

.Next steps
You can install the {SMProduct} 3 Operator, or you can run {SMProduct} 2.6 and {SMProduct} 3 in the same cluster using either the multi-tenant deployment model, or the cluster-wide model.

* xref:../install/ossm-installing-openshift-service-mesh.adoc#ossm-installing-operator_ossm-about-deployment-and-update-strategies[Installing the Service Mesh Operator]
* xref:../install/ossm-running-v2-same-cluster-as-v3-assembly.adoc#ossm-running-v2-v3-multitenant-deployment-model_ossm-running-v2-same-cluster-as-v3-assembly[Running OpenShift Service Mesh 2.6 and OpenShift Service Mesh 3 using multi-tenant model]
* xref:../install/ossm-running-v2-same-cluster-as-v3-assembly.adoc#ossm-running-v2-v3-cluster-wide-deployment-model_ossm-running-v2-same-cluster-as-v3-assembly[Running OpenShift Service Mesh 2.6 and OpenShift Service Mesh 3 using cluster-wide deployment model]

include::modules/ossm-migrating-read-me-new-resources.adoc[leveloffset=+1]
include::modules/ossm-migrating-read-me-observability-integrations.adoc[leveloffset=+1]
include::modules/ossm-migrating-read-me-scoping-discovery-selectors.adoc[leveloffset=+1]

.Next steps
* xref:../install/ossm-installing-openshift-service-mesh.adoc#ossm-about-discoveryselectors_ossm-scoping-service-mesh-with-discoveryselectors[Scoping Service Mesh with discoverySelectors]

include::modules/ossm-migrating-read-me-sidecar-injection-considerations.adoc[leveloffset=+1]
include::modules/ossm-migrating-read-me-support-for-multiple-control-planes.adoc[leveloffset=+1]
include::modules/ossm-migrating-read-me-independently-managed-gateways.adoc[leveloffset=+1]

.Next steps
If you are using {SMProduct} 2.6, and have not migrated from `ServiceMeshControlPlane` defined gateways to gateway injection, then you must follow the {SMProduct} 2.x gateway migration procedure before you can move to {SMProduct} 3.

* link:https://docs.redhat.com/en/documentation/openshift_container_platform/4.17/html/service_mesh/service-mesh-2-x#ossm-about-gateway-migration_gateway-migration[Gateway migration]

include::modules/ossm-migrating-read-me-explicitly-create-openshift-routes.adoc[leveloffset=+1]
include::modules/ossm-migrating-read-me-introducing-canary-updates.adoc[leveloffset=+1]

.Next steps
You can set `updateStrategy` to `RevisionBased` to use canary updates.

* xref:../update/ossm-updating-openshift-service-mesh.adoc#about-revisionbased-strategy_ossm-performing-inplace-update[About RevisionBased strategy]

Be aware that setting the `updateStrategy` to `RevisionBased` also has implications for some integrations with {SMProduct}, such as the cert-manager tool integration.

* xref:../install/ossm-cert-manager-assembly.adoc#updating-istio-csr-revision-based-only_ossm-cert-manager-assembly[Updating istio-csr agents with revision-based update strategies]

include::modules/ossm-migrating-read-me-supported-multi-cluster-topologies.adoc[leveloffset=+1]
include::modules/ossm-migrating-read-me-support-for-istioctl.adoc[leveloffset=+1]
include::modules/ossm-migrating-read-me-kubernetes-network-policy-management.adoc[leveloffset=+1]
include::modules/ossm-migrating-read-me-tls-configuration-change.adoc[leveloffset=+1]

//comments will be removed for OSSM 3.0 GA. For future reference only as Gwynne will likely be living in this file for Q1 2025.
//Migrating dir will be similar to Observability dir structure. Something like:
//Dir: migrating
//Distros: openshift-service-mesh
//Topics:
//-Name: Migration Guides
// File: ossm-file-name
//- Name: Migrating Metrics
//  Dir: mig dir name1
//  Topics:
//  - Name: Migrating metrics guide
//    File: ossm-file-name2
//- Name: Migratiing Traces
//  Dir: mig dir name2
// Topics:
// - Name: Migrating traces
//    File: ossm-file-name3
//- Name: Migrating from Kiali to Kiali 2
//  Dir: kiali
//  Topics:
//  - Name: Something about Kiali
//    File: ossm-file-name4
//Will be dependent on both the number of and type of migrations that need to take place to move from 2.6 to 3.
//migrating-read-me is the only content we have as of 11/19/2024.
//Possible file names will change once doc work can start on migration guides. As of 11/19/2024 it is unclear what migration guides will need to be created as engineering work is incomplete, and it is unknown how migration will happen. Will the operator have to go first? Do the integrations have to go in a particular order? Will there be differences if customers choose RevisionBased instead of the default InPlace update strategy? There are more questions than answers, so setting it up as best I can with the knowledge I have at this time.
//Possible each module will have Next Steps that will link out to respective migration guide.

[role="_additional-resources"]
[id="addition-resource_{context}"]
== Additional Resources

* link:https://docs.redhat.com/en/documentation/openshift_container_platform/#Observability[Red Hat OpenShift Observability]
* link:https://docs.redhat.com/en/documentation/openshift_container_platform/4.17/html/logging/index[Logging]
* link:https://docs.redhat.com/en/documentation/openshift_container_platform/4.17/html/monitoring/index[User workload monitoring]
* link:https://docs.redhat.com/en/documentation/openshift_container_platform/4.17/html/distributed_tracing/index[{DTProductName}]
* link:https://kubernetes.io/docs/concepts/overview/working-with-objects/labels/[Labels and Selectors] (Kubernetes documentation)
* link:https://istio.io/latest/docs/tasks/security/tls-configuration/workload-min-tls-version/[Istio Workload Minimum TLS Version Configuration] (Istio documentation)
* link:https://istio.io/latest/docs/reference/config/security/authorization-policy/[Authorization Policies] (Istio documentation)

//influx. Will be part of larger content strategy/IA effort to bridge 2.x users on their way to moving to 3.x
//Start of an overall Migrating section.
//Section is most likely to be reworked/restructured with OSSM 2 to OSSM 3 migration guides for GA. Unknown how many migration guides there are at this time (11/11/2024). It would be beneficial to be able to link from differences to the relevent migration guide so that users A) understand the change, esp significant changes like new operator, installing tracing and Kiali separately, gateways, etc.
//Migration likely to resemble https://docs.openshift.com/container-platform/4.17/migrating_from_ocp_3_to_4/about-migrating-from-3-to-4.html#about-migrating-from-3-to-4 when done for OSSM 3.0 GA.
