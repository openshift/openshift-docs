:_mod-docs-content-type: ASSEMBLY
include::_attributes/common-attributes.adoc[]
[id="running-gitops-control-plane-workloads-on-infrastructure-nodes"]
= Running {gitops-shortname} control plane workloads on infrastructure nodes
:context: running-gitops-control-plane-workloads-on-infrastructure-nodes

toc::[]

You can use infrastructure nodes to isolate infrastructure workloads for two primary purposes:

* To prevent billing costs associated with the number of subscriptions
* To separate maintenance and management

You can use the {OCP} to run {gitops-shortname} control plane workloads on infrastructure nodes. This includes the Operator pod and the control plane workloads created by the {gitops-title} Operator in the `openshift-gitops` namespace by default, including the default Argo CD instance in this namespace. 

With {gitops-shortname} control plane workloads, you can securely and declaratively isolate the infrastructure workloads by creating multiple isolated Argo CD instances in a cluster, with full control over what an Argo CD instance is capable of. In addition, you can manage these Argo CD instances declaratively across multiple developer namespaces. By using taints, you can ensure that only infrastructure components run on these nodes.

[NOTE]
====
All other Argo CD instances installed in user namespaces are not eligible to run on infrastructure nodes.
====

// Moving GitOps workloads to infrastructure nodes
include::modules/go-add-infra-nodes.adoc[leveloffset=+1]
include::modules/moving-the-gitops-operator-pod-to-infrastructure-nodes.adoc[leveloffset=+1]


[role="_additional-resources"]
[id="additional-resources_running-gitops-control-plane-workloads-on-infrastructure-nodes"]
== Additional resources
* For more information about taints and tolerations, see link:https://docs.openshift.com/container-platform/latest/nodes/scheduling/nodes-scheduler-taints-tolerations.html#nodes-scheduler-taints-tolerations[Controlling pod placement using node taints].
* For more information about infrastructure machine sets, see link:https://docs.openshift.com/container-platform/latest/machine_management/creating-infrastructure-machinesets.html#creating-infrastructure-machinesets[Creating infrastructure machine sets].
