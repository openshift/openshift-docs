// Module included in the following assemblies:
//
// * list of assemblies where this module is included
// ipv6-disconnected-openshift-cluster-deployment.adoc

[id="ipv6-disconnected-running-the-openshift-installer_{context}"]

= Running the OpenShift installer

.Procedure

. Create the installer manifests.
+
----
# openshift-baremetal-install --dir ~/clusterconfigs create manifests
----

. Copy `metal3-config.yaml` to `clusterconfigs/openshift/`.
+
----
# cp ~/metal3-config.yaml clusterconfigs/openshift/99_metal3-config.yaml
----

. Create the cluster.
+
----
# openshift-baremetal-install --dir ~/clusterconfigs --log-level debug create cluster
----
+
----
DEBUG Apply complete! Resources: 12 added, 0 changed, 0 destroyed.
DEBUG OpenShift Installer unreleased-master-2244-gfb2b771da8533d657c13a29835db7ea443f0a79e-dirty
DEBUG Built from commit fb2b771da8533d657c13a29835db7ea443f0a79e
INFO Waiting up to 30m0s for the Kubernetes API at https://api.kni7.cloud.lab.eng.bos.redhat.com:6443...
-----------------------------------------------------------------------------
DEBUG Still waiting for the Kubernetes API: Get https://api.kni7.cloud.lab.eng.bos.redhat.com:6443/version?timeout=32s: dial tcp [fd35:919d:4042:2:c7ed:9a9f:a9ec:8]:6443: connect: connection refused
INFO API v1.16.2 up
INFO Waiting up to 30m0s for bootstrapping to complete...
---------------------------------------------------------------------------
[kni@worker-0 kni7]$ oc get nodes
NAME                                         STATUS     ROLES    AGE     VERSION
master-0.kni7.cloud.lab.eng.bos.redhat.com   Ready      master   5m58s   v1.16.2
master-1.kni7.cloud.lab.eng.bos.redhat.com   NotReady   master   5m17s   v1.16.2
master-2.kni7.cloud.lab.eng.bos.redhat.com   Ready      master   5m39s   v1.16.2
[kni@worker-0 kni7]$
[kni@worker-0 kni7]$ oc get clusterversion
Unable to connect to the server: x509: certificate has expired or is not yet valid

[kni@worker-0 ~]$ $ oc get nodes
NAME                                         STATUS   ROLES           AGE   VERSION
master-0.kni7.cloud.lab.eng.bos.redhat.com   Ready    master,worker   75m   v1.16.2
master-1.kni7.cloud.lab.eng.bos.redhat.com   Ready    master,worker   75m   v1.16.2
master-2.kni7.cloud.lab.eng.bos.redhat.com   Ready    master,worker   75m   v1.16.2
#v6.3
----
