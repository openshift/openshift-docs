[id="installing-vsphere-network-customizations"]
= Installing a cluster on vSphere with network customizations
include::modules/common-attributes.adoc[]
:context: installing-vsphere-network-customizations

toc::[]

In {product-title} version {product-version}, you can install a cluster on
VMware vSphere infrastructure that you provision with customized network
configuration options. By customizing your network configuration, your cluster
can coexist with existing IP address allocations in your environment and
integrate with existing MTU and VXLAN configurations.

You must set most of the network configuration parameters during installation,
and you can modify only `kubeProxy` configuration parameters in a running
cluster.

[IMPORTANT]
====
The steps for performing a user-provisioned infrastructure installation are provided as an example only. Installing a cluster with infrastructure you provide requires knowledge of the vSphere platform and the installation process of {product-title}. Use the user-provisioned infrastructure installation instructions as a guide; you are free to create the required resources through other methods.
====

== Prerequisites

* Review details about the
xref:../../architecture/architecture-installation.adoc#architecture-installation[{product-title} installation and update]
processes.
* Completing the installation requires that you upload the {op-system-first} OVA on vSphere hosts. The machine from which you complete this process requires access to port 443 on the vCenter and ESXi hosts. Verify that port 443 is accessible.
* If you use a firewall, you confirmed with the administrator that port 443 is accessible. Control plane nodes must be able to reach vCenter and ESXi hosts on port 443 for the installation to succeed.
* If you use a firewall, you must
xref:../../installing/install_config/configuring-firewall.adoc#configuring-firewall[configure it to access Red Hat Insights].

include::modules/cluster-entitlements.adoc[leveloffset=+1]

include::modules/installation-vsphere-infrastructure.adoc[leveloffset=+1]

include::modules/installation-requirements-user-infra.adoc[leveloffset=+1]
include::modules/csr-management.adoc[leveloffset=+2]

include::modules/installation-infrastructure-user-infra.adoc[leveloffset=+1]

include::modules/installation-network-user-infra.adoc[leveloffset=+2]

.Additional resources

* xref:../install_config/installing-customizing.adoc#installation-special-config-chrony_installing-customizing[Configuring chrony time service]

include::modules/installation-dns-user-infra.adoc[leveloffset=+2]

include::modules/ssh-agent-using.adoc[leveloffset=+1]

include::modules/installation-obtaining-installer.adoc[leveloffset=+1]

include::modules/installation-initializing-manual.adoc[leveloffset=+1]

include::modules/installation-vsphere-config-yaml.adoc[leveloffset=+2]

include::modules/installation-configure-proxy.adoc[leveloffset=+2]

// Network Operator specific configuration
include::modules/nw-network-config.adoc[leveloffset=+1]
include::modules/nw-modifying-operator-install-config.adoc[leveloffset=+1]
include::modules/nw-operator-cr.adoc[leveloffset=+1]

include::modules/installation-generate-ignition-configs.adoc[leveloffset=+1]

include::modules/installation-extracting-infraid.adoc[leveloffset=+1]

include::modules/installation-vsphere-machines.adoc[leveloffset=+1]

include::modules/machine-vsphere-machines.adoc[leveloffset=+1]

include::modules/installation-disk-partitioning.adoc[leveloffset=+1]

include::modules/installation-installing-bare-metal.adoc[leveloffset=+1]

include::modules/cli-logging-in-kubeadmin.adoc[leveloffset=+1]

include::modules/installation-approve-csrs.adoc[leveloffset=+1]

include::modules/installation-operators-config.adoc[leveloffset=+2]

include::modules/registry-removed.adoc[leveloffset=+2]

include::modules/installation-registry-storage-config.adoc[leveloffset=+2]

include::modules/installation-registry-storage-block-recreate-rollout.adoc[leveloffset=+3]

For instructions about configuring registry storage so that it references the correct PVC, see xref:../../registry/configuring_registry_storage/configuring-registry-storage-vsphere.adoc#registry-configuring-storage-vsphere_configuring-registry-storage-vsphere[Configuring the registry for vSphere].

include::modules/installation-complete-user-infra.adoc[leveloffset=+1]

You can add extra compute machines after the cluster installation is completed by following xref:../../machine_management/user_infra/adding-vsphere-compute-user-infra.adoc#adding-vsphere-compute-user-infra[Adding compute machines to vSphere].

include::modules/persistent-storage-vsphere-backup.adoc[leveloffset=+1]

include::modules/cluster-telemetry.adoc[leveloffset=+1]

.Additional resources

* See xref:../../support/remote_health_monitoring/about-remote-health-monitoring.adoc#about-remote-health-monitoring[About remote health monitoring] for more information about the Telemetry service

== Next steps

* xref:../../installing/install_config/customizations.adoc#customizations[Customize your cluster].
* If necessary, you can
xref:../../support/remote_health_monitoring/opting-out-of-remote-health-reporting.adoc#opting-out-remote-health-reporting_opting-out-remote-health-reporting[opt out of remote health reporting].
* xref:../../registry/configuring_registry_storage/configuring-registry-storage-vsphere.adoc#configuring-registry-storage-vsphere[Set up your registry and configure registry storage].
