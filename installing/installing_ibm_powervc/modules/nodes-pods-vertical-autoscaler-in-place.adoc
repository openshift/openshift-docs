// Module included in the following assemblies:
//
// * nodes/nodes-vertical-autoscaler.adoc

:_mod-docs-content-type: CONCEPT
[id="nodes-pods-vertical-autoscaler-in-place_{context}"]
= About the in-place-or-recreate mode

The Vertical Pod Autoscaler Operator (VPA) contains an optional `InPlaceOrRecreate` mode. This mode instructs the VPA to attempt to perform an _in-place pod resize_ when updating CPU or memory resources, where the VPA first attempts to update the resources in a running pod without recreating the pod. If an in-place resize is not possible, the VPA falls back to the `Recreate` mode and restarts the pod in order to update the resources.

When in `InPlaceOrRecreate` mode, the VPA falls back to always recreating pods in the following scenarios:

* The in-place update is considered _infeasible_ for reasons including the following reasons:
** The requested resources exceed the node's total capacity.
** The pod is a static pod.
** The containers has swap enabled.
** The pod is managed by a static `cpuManagerPolicy` or `memoryManagerPolicy` parameter.
* The update is _deferred_ for more than 5 minutes. A deferred update is one that is currently not possible, but might become possible at a later time. For example, if another pod is removed from the node, the requested resources might become available. The kubelet retries the resize when conditions on the node change.
* The update is in progress for more than 1 hour.
* The pod QoS class would change due to the update.
* The update would downscale the memory limit.

If a container in a pod has a `RestartContainer` container resize policy, which requires a restart upon a resource update, a VPA in `InPlaceOrRecreate` mode honors the resize policy and restarts the container.

For more information on in-place updates, see "Adjust pod resource levels without pod disruption".
