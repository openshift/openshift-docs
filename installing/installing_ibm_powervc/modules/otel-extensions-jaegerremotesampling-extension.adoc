// Module included in the following assemblies:
//
// * observability/otel/otel-collector/otel-collector-extensions.adoc

:_mod-docs-content-type: REFERENCE
[id="otel-extensions-jaegerremotesampling-extension_{context}"]
= Jaeger Remote Sampling Extension

[role="_abstract"]
The Jaeger Remote Sampling Extension enables serving sampling strategies after Jaeger's remote sampling API. You can configure this extension to proxy requests to a backing remote sampling server such as a Jaeger collector down the pipeline or to a static JSON file from the local file system.

:FeatureName: The Jaeger Remote Sampling Extension
include::snippets/technology-preview.adoc[]

.OpenTelemetry Collector custom resource with a configured Jaeger Remote Sampling Extension
[source,yaml]
----
# ...
  config:
    extensions:
      jaegerremotesampling:
        source:
          reload_interval: 30s # <1>
          remote:
            endpoint: jaeger-collector:14250 # <2>
          file: /etc/otelcol/sampling_strategies.json # <3>

    receivers:
      otlp:
        protocols:
          http: {}

    exporters:
      debug: {}

    service:
      extensions: [jaegerremotesampling]
      pipelines:
        traces:
          receivers: [otlp]
          exporters: [debug]
# ...
----
<1> The time interval at which the sampling configuration is updated.
<2> The endpoint for reaching the Jaeger remote sampling strategy provider.
<3> The path to a local file that contains a sampling strategy configuration in the JSON format.

.Example of a Jaeger Remote Sampling strategy file
[source,json]
----
{
  "service_strategies": [
    {
      "service": "foo",
      "type": "probabilistic",
      "param": 0.8,
      "operation_strategies": [
        {
          "operation": "op1",
          "type": "probabilistic",
          "param": 0.2
        },
        {
          "operation": "op2",
          "type": "probabilistic",
          "param": 0.4
        }
      ]
    },
    {
      "service": "bar",
      "type": "ratelimiting",
      "param": 5
    }
  ],
  "default_strategy": {
    "type": "probabilistic",
    "param": 0.5,
    "operation_strategies": [
      {
        "operation": "/health",
        "type": "probabilistic",
        "param": 0.0
      },
      {
        "operation": "/metrics",
        "type": "probabilistic",
        "param": 0.0
      }
    ]
  }
}
----
