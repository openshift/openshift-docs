:_mod-docs-content-type: ASSEMBLY
[id="enabling-user-managed-encryption-azure"]
= Enabling user-managed encryption for Azure
include::_attributes/common-attributes.adoc[]
:context: enabling-user-managed-encryption-azure

toc::[]

In {product-title} version {product-version}, you can install a cluster with a user-managed encryption key in {azure-first}. To enable this feature, you can prepare an {azure-short} `DiskEncryptionSet` before installation, modify the `install-config.yaml` file, and then complete the installation.

// Preparing an Azure Disk Encryption Set
include::modules/installation-azure-preparing-diskencryptionsets.adoc[leveloffset=+1]

// Preparing an Azure Disk Encryption Set for Day2 Operator
include::modules/installation-azure-day2-operations-diskencryptionsets.adoc[leveloffset=+1]

[id="enabling-disk-encrytpion-additional-resources"]
== Additional resources

* link:https://learn.microsoft.com/en-us/azure/virtual-machines/disks-enable-host-based-encryption-portal?tabs=azure-cli#prerequisites[Use the {azure-short} portal to enable end-to-end encryption using encryption at host] ({azure-full} documentation)

* xref:../../nodes/nodes/nodes-nodes-working.adoc#nodes-nodes-working-evacuating_nodes-nodes-working[Understanding how to evacuate pods on nodes]

[id="enabling-disk-encryption-sets-azure-next-steps"]
== Next steps

* Depending on your infrastructure preferences, install an {product-title} cluster by completing the instructions in one of the following documents:
** xref:../../installing/installing_azure/ipi/installing-azure-customizations.adoc#installing-azure-customizations[Install a cluster with customizations on installer-provisioned infrastructure]
** xref:../../installing/installing_azure/ipi/installing-azure-network-customizations.adoc#installing-azure-network-customizations[Install a cluster with network customizations on installer-provisioned infrastructure]
** xref:../../installing/installing_azure/ipi/installing-azure-vnet.adoc#installing-azure-vnet[Install a cluster into an existing VNet on installer-provisioned infrastructure]
** xref:../../installing/installing_azure/ipi/installing-azure-private.adoc#installing-azure-private[Install a private cluster on installer-provisioned infrastructure]
** xref:../../installing/installing_azure/ipi/installing-azure-government-region.adoc#installing-azure-government-region[Install a cluster into an government region on installer-provisioned infrastructure]
