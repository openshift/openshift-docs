[id="installing-rhv-default"]
= Installing a cluster quickly on {rh-virtualization}
include::modules/common-attributes.adoc[]
:context: installing-rhv-default

toc::[]

Install the default, non-customized, {product-title} cluster on {rh-virtualization-first}.

When you run the installer and finish answering the interactive prompts, the installer creates the {product-title} cluster.

NOTE: Instead of installing a default cluster, you can customize the installation, troubleshoot some installation issues, and create templates for multiple installations. To learn more, see [XREF TBD].

.Prerequisites

You have completed the steps in XREF TBD, including:
* Preparing your {rh-virtualization} and network environments
* Setting up the installer software, SSH keys, and CA certificates.

.Procedure

== Running the installer

.On the installer machine, go to the directory that has the installer and run it.
+
[source,bash]
----
$ sudo ./openshift-install create cluster --dir=<assets-dir><1>
----
<1> `<assets-dir>` is the name of a new directory the installer creates for storing installation information such as log files. If you specify an existing directory, the installer will look for the installation configuration file described in TBD[Appendix: Customizing your installation].
+
. Respond to the following installer prompts for information. For more information about a prompt, enter “?”.
NOTE: The order of the prompts may be different from the order shown here.
+
* *SSH Public Key*: Select the public key on the installer machine, such as `~/.ssh/id_rsa.pub`, that will be used to authenticate connections with the new OpenShift cluster. Only the owner of this public key can ssh to the new OpenShift nodes. Optionally, after the installation, you can add and replace keys using the Machine Config Operator (MCO).
* *Platform*: *ovirt*
* *Enter oVirt's API endpoint URL*: Enter the URL of the oVirt API using this format:
+
[source,bash]
----
_<ovirt-admin>_:_<password>_ https://_<engine-fqdn>_/ovirt-engine/api
----
+
[source,bash]
----
For example:
+
[source,bash]
----
admin:pw123 https://rhv-env.virtlab.example.com/ovirt-engine/api
----

* *Is the installed oVirt certificate trusted?*: Enter *Yes*. (You provided a CA certificate, `ca.pem`.)
* *oVirt's CA bundle*: If you entered *Yes* for the preceding question, copy the certificate from `/etc/pki/ca-trust/source/anchors/ca.pem` and paste it here. Then, press *Enter* twice. Otherwise, if you entered *No* for the preceding question, this question does not appear.
* *Enter the oVirt engine username*: Enter the RHV admin user name and profile using this format:
+
[source,bash]
----
<ovirt-admin>@<ovirt-login-profile>
----
+
For example:
+
[source,bash]
----
admin@internal
----
+
* *Enter password*: Enter the RHV admin password.
* *Select the oVirt cluster*: Select the cluster for installing RHOCP.
* *Select the oVirt storage domain*: Select the storage domain for installing RHOCP.
* *Select the oVirt network*: Select a virtual network that has access to the RHV Manager REST API.
* *Enter the internal API Virtual IP*: Enter the static IP address you set aside for the RHOCP cluster’s REST API. Such as `10.35.1.19` from the example in which you configured DNS for `api.ocp-cluster.virtlab.example.com`.
* *Enter the internal DNS Virtual IP*: Enter the static IP address you set aside for the RHOCP cluster’s internal DNS service, such as `10.35.1.21` from the previous example in which you reserved the IP addresses.
* *Enter the ingress IP*: Enter the static IP address you reserved for the wildcard apps domain. Such as `10.35.1.20` from the example in which you configured DNS for `*.apps.ocp-cluster.virtlab.example.com`).
* *Base domain*: Enter the base domain of the RHOCP cluster. If this cluster is exposed to the outside world, this must be a valid domain recognized by DNS infrastructure. For example, enter: `virtlab.example.com`
* *Cluster name*: Enter the name of the cluster. For example, `ocp-cluster`. This value should match the cluster name you used in the externally registered/resolvable API and ingress DNS entries. The installer also uses this to name the cluster in the RHV environment.
* *Pull secret*: link:https://cloud.redhat.com/openshift/install/rhv/installer-provisioned[Copy the pull secret] and paste it here. The installer uses this pull secret to get images from the Red Hat Container Registry.

*Note*: At this point in the sequence, the installer begins creating the cluster. Optionally, in the RHV Administration Portal, watch the installer create the virtual machines in *Compute* -> *Cluster*.

. While the installer is running, visit the RHV Administration Portal and verify that the installer creates and runs the virtual machines for the RHOCP nodes.
. Get the user name and temporary password the installer displays when the new OpenShift cluster is up and running.
. link:https://docs.openshift.com/container-platform/4.3/web_console/web-console.html[Access the OpenShift web console] to verify the cluster is running.

The web console URL uses the following format:
+
[source,bash]
----
console-openshift-console.apps._<clustername>_._<basedomain>_
----
+
For example:
+
[source,bash]
----
console-openshift-console.apps.ocp-cluster.virtlab.example.com
----
+
NOTE: You have finished installing the RHOCP cluster on RHV.

If something goes wrong with the installation, the installer times out and displays an error message. To learn more, see XREF TBD [Troubleshooting Installation Problems].
