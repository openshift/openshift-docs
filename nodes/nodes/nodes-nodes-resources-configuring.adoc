:_mod-docs-content-type: ASSEMBLY
[id="nodes-nodes-resources-configuring"]
= Allocating resources for nodes in an {product-title} cluster
include::_attributes/common-attributes.adoc[]
:context: nodes-nodes-resources-configuring

toc::[]

[role="_abstract"]
By default, upon node start up {product-title} automatically calculates and reserves a portion of the CPU and memory resources for use by the underlying node components, such as `kubelet` and `kube-proxy`, and the remaining system components, such as `sshd` and `NetworkManager`. Review the information in this section to determine if these automatic settings are appropriate for your cluster.

You can modify the CPU and memory resources for these node and system components, as needed, by creating a `Kubelet Config` CR.

[IMPORTANT]
====
If you updated your cluster from a version earlier than 4.21, automatic allocation of system resources is disabled by default. To enable the feature, delete the `50-worker-auto-sizing-disabled` machine config. 
====

// The following include statements pull in the module files that comprise
// the assembly. Include any combination of concept, procedure, or reference
// modules required to cover the user story. You can also include other
// assemblies.

include::modules/nodes-nodes-resources-configuring-about.adoc[leveloffset=+1]

include::modules/sd-understanding-process-id-limits.adoc[leveloffset=+1]

include::modules/risks-setting-higher-process-id-limits.adoc[leveloffset=+2]

include::modules/nodes-nodes-resources-configuring-setting.adoc[leveloffset=+1]

////
[role="_additional-resources"]
== Additional resources

The ephemeral storage management feature is disabled by default. To enable this
feature,

See /install_config/configuring_ephemeral.adoc#install-config-configuring-ephemeral-storage[configuring for
ephemeral storage].

See /dev_guide/compute_resources.adoc#dev-guide-compute-resources[Compute Resources] for more
details.

#update these links when the links become available#

////

[role="_additional-resources"]
[id="nodes-nodes-resources-configuring_additional-resources"]
== Additional resources

* xref:../../machine_configuration/machine-configs-custom.adoc#create-a-kubeletconfig-crd-to-edit-kubelet-parameters_machine-configs-custom[Creating a KubeletConfig CR to edit kubelet parameters]
* link:https://kubernetes.io/docs/reference/instrumentation/node-metrics/[Node metrics data (Kubernetes documentation)]
