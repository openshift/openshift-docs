:_mod-docs-content-type: ASSEMBLY
[id="restore-acs"]
= Restoring from a backup
include::modules/common-attributes.adoc[]
:context: restore-acs

toc::[]

[role="_abstract"]
You can restore {rh-rhacs-first} from an existing backup by using the `roxctl` command-line interface (CLI).

Depending upon your requirements and the data you have backed up, you can restore from the following types of backups:

. *Restore an external PostgreSQL database*: Use this to restore your {product-title-short} instance when you use an external PostgreSQL database. You can recover your system data while maintaining your existing database setup.

. *Restore the Central certificates and redeploy Central*: Use this to restore the Central certificates and redeploy Central after a database restoration. This ensures that authentication certificates for secured clusters and API tokens remain valid.

. *Restore Central database from the Central database backup*: Use this to recover from a database failure or data corruption event. You can restore and recover the Central database to its earlier functional state.

. *Restore Central from the Central deployment backup*: Use this if you are migrating Central to another cluster or namespace. This option restores the configurations of your Central installation.

//Restoring an external PostgreSQL database
include::modules/restoring-an-external-postgresql-database.adoc[leveloffset=+1]

//Restoring the Central certificates and redeploying Central
include::modules/restoring-central-certificates-and-redeploying-central.adoc[leveloffset=+1]

[role="_additional-resources"]
.Additional resources
* xref:../backup_and_restore/restore-acs.adoc#restore-cert-roxctl_restore-acs[Restore certificates using the roxctl CLI]

[id="restore-central-db-roxctl"]
== Restoring Central database by using the roxctl CLI
You can use the `roxctl` CLI to restore {product-title} by using the `restore` command. You require an API token or your administrator password to run this command.

include::modules/restore-acs-roxctl-api.adoc[leveloffset=+2]

include::modules/restore-acs-roxctl-admin-pass.adoc[leveloffset=+2]

include::modules/resume-acs-restore.adoc[leveloffset=+2]

[id="restore-central-deployment-roxctl"]
== Restoring Central deployment using the roxctl CLI
You can restore your Central deployment to its original configuration by using the backups you made.

You must first restore certificates by using the `roxctl` CLI, and then restore the Central deployment by running the Central installation scripts.

include::modules/restore-cert-roxctl.adoc[leveloffset=+2]
include::modules/install-central-roxctl.adoc[leveloffset=+2]

include::modules/restore-deployment-config-operator.adoc[leveloffset=+1]

include::modules/restore-deployment-config-helm.adoc[leveloffset=+1]

[id="restore-central-another-cluster"]
== Restoring central to another cluster or namespace
You can use the backups of the {product-title-short} Central database and the deployment to restore Central to another cluster or namespace.

The following list provides a high-level overview of installation steps:

. Depending upon your installation method, you must first restore Central deployment by following the instructions in the following topics:
+
[IMPORTANT]
====
* Make sure to use the backed-up Central certificates so that secured clusters and API tokens issued by the old Central instance remain valid.
* If you are deploying to another namespace, you must change the namespace in backed-up resources or commands.
====

** xref:../backup_and_restore/restore-acs.adoc#restore-central-deployment-roxctl[Restoring Central deployment using the `roxctl` CLI]
** xref:../backup_and_restore/restore-acs.adoc#restore-deployment-config-operator_restore-acs[Restore Central deployment using the {product-title-short} Operator]
** xref:../backup_and_restore/restore-acs.adoc#restore-deployment-config-helm_restore-acs[Restore Central deployment using Helm]
. Restore Central database by following the instruction in the xref:../backup_and_restore/restore-acs.adoc#restore-central-db-roxctl[Restoring Central database by using the roxctl CLI] topic.
. If you have an external DNS entry pointing to your old {product-title-short} Central instance, you must reconfigure it to point to the new {product-title-short} Central instance that you create.