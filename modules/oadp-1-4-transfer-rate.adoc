// This module is included in the following assembly:
//
// * backup_and_restore/application_backup_and_restore/oadp-performance/oadp-1-4-performance.adoc
:_mod-docs-content-type: REFERENCE

[id="oadp-1-4-transfer-rate_{context}"]
= {oadp-short} 1.4 transfer rate

The following depicts the observed performance during the execution of {oadp-first} backup and restore with diverse plugins within an isolated environment.

You may have different experiences with {oadp-short} depending on the types of resources in their cluster, such as CPU (core), storage, network, and the type of data that is used for backups and restores. 

These numbers are not intended to represent a minimum expected rate, but rather represent the transfer rate when performing backups and restores in an isolated environment with optimal conditions and dedicated hardware.

[id="oadp-1-4-transfer-rate-def_{context}"]
== Transfer rate definition

The calculated throughput rate is the amount of non-zero data contained in a persistent volume (PV), divided by the time taken to process a backup or restore.

This rate allows you to understand the performance of {oadp-short}.

[id="oadp-1-4-backup-singlepod-pv_{context}"]
=== Backups for single pod and PV

The transfer rates for File System Backup (FSB) with Kopia are approximately 1 GB/s, based on the storage type.

.Examples

* FSB with Kopia on Single PV on Ceph RBD:
** 2 TB PV containing 1.5 TB of data transferred 1.34 GB/s
** 4TB PV containing 3 TB of data transferred 1.35 GB/s

* FSB with Kopia on Single PV on Ceph RBD compared to Ceph FS RBD is faster:
** 4 TB PV containing 3 TB of data backup
*** Ceph RBD: transferred 1.35 GB/s
*** CephFS: transferred 980 MB/s

* Container Storage Interface (CSI) Snapshot Data Movement compared to FSB with Kopia Single PV on Ceph RBD:
** 1 TB PV containing 0.5 TB of data transferred 530 MB/s
** 2 TB PV containing 1.5 TB of data transferred 1.34 GB/s

The CSI snapshot data movement represents the initial backup upload to a minIO S3 bucket located within the same cluster.

The rate of upload for the CSI Snapshot Data movement backup was observed to be 650 MB/s for a single PV backup.

[id="oadp-1-4-restore-singlepod-pv_{context}"]
=== Restores for single pod and PV

Restores are performed for single pods containing data on a single PV, with a non-zero data transfer rate ranging from 230 to 350 MB/s, depending on the storage type.

.Examples

* Restore from FSB with Kopia Single PV on Ceph RBD:
** 2 TB PV containing 1.5 TB of data transferred 280 MB/s
** 4 TB PV containing 3 TB of data transferred 240 MB/s

* Restore from FSB with Kopia Single PV on Ceph RBD compared to Ceph FS had a similar transfer rate:
** FSB with Kopia CephRBD: 4 TB PV containing 3 TB of data transferred 240 MB/s
** FSB with Kopia CephFS: 4TB PV containing 3 TB of data transferred 230 MB/s


* Restore from CSI Snapshot Data Movement compared to Restore from FSB with Kopia on Single PV on Ceph RBD:
** Restore from CSI Snapshot Data Movement CephRBD: 1 TB PV containing 0.5 TB of data transferred 350 MB/s
** Restore from FSB with Kopia CephRBD: 2 TB PV containing 1.5 TB of data transferred 280 MB/s

The CSI Snapshot data movement represents a restoration from an initial backup that is obtained from the minIO S3 bucket located within the same cluster. The download rate for the CSI Snapshot Data movement restore was observed as 300 MB/s to 450 MB/s for a single PV restore.

[id="oadp-1-4-csi-fsb-kopia-comparisom_{context}"]
=== Comparing CSI and FSB with Kopia with many PVs in single namespaces with 6 workers

* Backup: CSI Snapshot VS FSB with Kopia:
** 500 GB of data spread equally across 1,000 pods and PVs in a single namespace using 6 workers:
** CSI data transfer rate of 80 MB/s was the same for CephFS and CephRBD.
** FSB with Kopia data transferred: 520 MB/s on RBD and 420 MB/s on CephFS

* Restore: CSI Snapshot VS FSB with Kopia:
** 500 GB of data spread equally across 1,000 pods and PVs in a single namespace using 6 workers:
** CSI data transferred 40 MB/s on CephFS and 350 MB/s on CephRBD
** FSB with Kopia data transferred 260 MB/s on CephFS and 240 MB/s on CephRBD
