// Module included in the following assemblies:
//
// * architecture/introduction-openshift-architecture.adoc
[id="understanding-machine-config-operator_{context}"]
= Understanding the Machine Config Operator

OpenShift Container Platform version 4.1 integrates both operating system and cluster management. Because the cluster manages its own updates, including updates to Red Hat Enterprise Linux CoreOS (RHCOS) on cluster nodes, OpenShift Container Platform provides an opinionated lifecycle management experience that simplifies the orchestration of node upgrades.

OpenShift Container Platform employs three DaemonSets and controllers to simplify node management. These DaemonSets orchestrate operating system updates and configuration changes to the hosts by using standard Kubernetes-style constructs. They include:

* Machine-config-controller: Coordinates machine upgrades from the control plane. It monitors all of the cluster nodes and orchestrates their configuration updates.
* Machine-config-daemon DaemonSet: A machine-config-daemon DaemonSet runs on each node in the cluster and updates a machine to configuration defined by MachineConfig as instructed by the MachineConfigController. When the node sees a change, it drains off its pods, applies the update, and reboots. These changes come in the form of Ignition configuration files that apply the specified machine configuration and control kubelet configuration. The update itself is delivered in a container. This process is key to the success of managing OpenShift Container Platform and RHCOS updates together.
* Machine-config-server DaemonSet: Provides the Ignition configs to master nodes as they join the cluster.

The machine configuration is a subset of the Ignition configuration. The machine-config-daemon reads the machine configuration to see if it needs to do an OSTree update, if it should apply a series of systemd kubelet file changes, configuration changes, or other changes to the operating system or OpenShift Container Platform configuration.

When you perform node management operations, you will be creating or modifying a Kubelet Config Custom Resource (CR). See https://www.google.com/url?q=https://github.com/openshift/machine-config-operator/blob/master/docs/KubeletConfigDesign.md&sa=D&ust=1557950770692000[KubeletConfigDesign] for details.