// Module included in the following assemblies:
//
// * observability/otel/otel-collector/otel-collector-processors.adoc

:_mod-docs-content-type: REFERENCE
[id="otel-processors-kubernetes-attributes-processor_{context}"]
= Kubernetes Attributes Processor

[role="_abstract"]
The Kubernetes Attributes Processor enables automatic attachment of Kubernetes metadata as resource attributes to spans, metrics, and logs.
This processor supports traces, metrics, and logs.
This processor automatically identifies the Kubernetes resources, extracts the metadata from them, and incorporates this extracted metadata as resource attributes into relevant spans, metrics, and logs. It utilizes the Kubernetes API to discover all pods operating within a cluster, maintaining records of their IP addresses, pod UIDs, and other relevant metadata.

.Minimum {ocp-product-title} permissions required for the Kubernetes Attributes Processor
[source,yaml]
----
kind: ClusterRole
apiVersion: rbac.authorization.k8s.io/v1
metadata:
  name: otel-collector
rules:
  - apiGroups: ['']
    resources: ['pods', 'namespaces']
    verbs: ['get', 'watch', 'list']
  - apiGroups: ['apps']
    resources: ['replicasets']
    verbs: ['get', 'watch', 'list']
----

.OpenTelemetry Collector using the Kubernetes Attributes Processor
[source,yaml]
----
# ...
spec:
  env:
    - name: KUBE_NODE_NAME
      valueFrom:
        fieldRef:
          fieldPath: spec.nodeName
  config:
    processors:
         k8sattributes:
             filter: # <1>
                 namespace:
                 node_from_env_var: KUBE_NODE_NAME

# ...
----
<1> Optional: Filters resource objects cached for metadata extraction, reducing API requests and memory usage.
