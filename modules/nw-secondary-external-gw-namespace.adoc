[id="nw-secondary-external-gw-namespace_#{context}"]
= Setting a secondary external gateway for a namespace

As a cluster administrator, you can set a secondary external gateway for a namespace by annotating that namespace.

.Prerequisites

* You are logged in to the cluster with a user with `cluster-admin` privileges.
* You configured at least one secondary network external gateway for your cluster.

.Procedure

. To configure a namespace to use a secondary network external gateway, enter the following command:
+
[source,terminal]
----
$ oc annotate namespaces <namespace> "k8s.ovn.org/routing-external-gws"="<ip_address>"
----
+
--
where:

`<namespace>`:: Specifies the name of the namespace.
`<ip_address>`:: Specifies the IP address of the external gateway.
--

.Verification

You can verify that the secondary network external gateway is assigned by listing the routes for a node in your cluster from a OVN-Kubernetes control plane pod.

. To find an an OVN-Kubernetes control plane pod, enter the following command:
+
[source,terminal]
----
$ POD=$(oc get pods -n openshift-ovn-kubernetes -l app=ovnkube-node --no-headers=true | awk '{ print $1 }')
----

. To get a node name, enter the following command:
+
[source,terminal]
----
$ NODE=$(oc get nodes -o jsonpath='{.items[*].metadata.name}' | head)
----

. To list the routes for a node, enter the following command:
+
[source,terminal]
----
$ oc rsh -n openshift-ovn-kuberentes $POD \
  ovn-nbctl lr-route-list $NODE
----
+
.Example output
[source,text]
----
IPv4 Routes
              10.132.2.48              192.168.1.51 src-ip exgw-rtoe-GR_cnfdt08.example.com ecmp-symmetric-reply
            10.132.0.0/14                100.64.0.1 dst-ip
                0.0.0.0/0              10.46.55.254 dst-ip rtoe-GR_cnfdt08.example.com
----
+
In the output, the secondary network external gateway that you assigned to the namespace is displayed.
