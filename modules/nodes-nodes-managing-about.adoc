// Module included in the following assemblies:
//
// * nodes/nodes-nodes-managing.adoc

[id="nodes-nodes-managing-about_{context}"]
= Modifying nodes

To make configuration changes to a cluster, or machine pool, you must create a custom resource definition (CRD), or `KubeletConfig` object. {product-title} uses the Machine Config Controller to watch for changes introduced through the CRD to apply the changes to the cluster.

.Procedure

. Obtain the label associated with the static CRD, Machine Config Pool, for the type of node you want to configure.
Perform one of the following steps:

.. Check current labels of the desired machine config pool.
+
For example:
+
[source,terminal]
----
$  oc get machineconfigpool  --show-labels
----
+
.Example output
[source,terminal]
----
NAME      CONFIG                                             UPDATED   UPDATING   DEGRADED   LABELS
master    rendered-master-e05b81f5ca4db1d249a1bf32f9ec24fd   True      False      False      operator.machineconfiguration.openshift.io/required-for-upgrade=
worker    rendered-worker-f50e78e1bc06d8e82327763145bfcf62   True      False      False
----

.. Add a custom label to the desired machine config pool.
+
For example:
+
[source,terminal]
----
$ oc label machineconfigpool worker custom-kubelet=enabled
----


. Create a `kubeletconfig` custom resource (CR) for your configuration change.
+
For example:
+
.Sample configuration for a *custom-config* CR
[source,yaml]
----
apiVersion: machineconfiguration.openshift.io/v1
kind: KubeletConfig
metadata:
  name: custom-config <1>
spec:
  machineConfigPoolSelector:
    matchLabels:
      custom-kubelet: enabled <2>
  kubeletConfig: <3>
    podsPerCore: 10
    maxPods: 250
    systemReserved:
      cpu: 2000m
      memory: 1Gi
----
<1> Assign a name to CR.
<2> Specify the label to apply the configuration change, this is the label you added to the machine config pool.
<3> Specify the new value(s) you want to change.

. Create the CR object.
+
[source,terminal]
----
$ oc create -f <file-name>
----
+
For example:
+
[source,terminal]
----
$ oc create -f master-kube-config.yaml
----

Most https://github.com/kubernetes/kubelet/blob/master/config/v1beta1/types.go[KubeletConfig Options] can be set by the user. The following options are not allowed to be overwritten:

* CgroupDriver
* ClusterDNS
* ClusterDomain
* RuntimeRequestTimeout
* StaticPodPath
