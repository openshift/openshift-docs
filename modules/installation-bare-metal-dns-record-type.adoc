// Module included in the following assemblies:
//
// * installing/installing_bare_metal/upi/installing-bare-metal-network-customizations.adoc
// * installing/installing_bare_metal/upi/installing-bare-metal.adoc
// * installing/installing_bare_metal/upi/installing-restricted-networks-bare-metal.adoc

:_mod-docs-content-type: CONCEPT
[id="installation-bare-metal-dns-record-type_{context}"]
= Configuring the dnsRecordsType parameter

[role="_abstract"]
During cluster installation, you can specify the `dnsRecordsType` parameter in the `install-config.yaml` file to set if the internal DNS service or an external source provides the necessary records for `api`, `api-int`, and `ingress` DNS records.

:FeatureName: Configuring the dnsRecordsType parameter
include::snippets/technology-preview.adoc[]

The `dnsRecordsType` parameter supports the following values:

* `Internal`: The default value. Setting this value causes the cluster infrastructure to automatically create and maintain the necessary DNS records.
* `External`: You can use this value only if you set the `loadBalancer.type` parameter to `UserManaged`. The cluster does not manage the DNS records. You must manually configure DNS records on an external DNS server.

.Prerequisites

* You created DNS records, such as `api`, `api-int`, or `\*.apps`.
* You configured a user-managed load balancer for your cluster. 
* If you intend on setting `dnsRecordsType.External` in the `infrastructure.config.openshift.io` CR , you must initially configure cluster nodes to use the specific external server for DNS resolution.

.Procedure

* During cluster installation, specify `TechPreviewNoUpgrade` for the `featureSet` parameter and specify `External` for the `dnsRecordsType` parameter in the `install-config.yaml` file:
+
[source,yaml]
----
apiVersion: v1
baseDomain: example.com
metadata:
  name: dev-cluster
# ...
platform:
  baremetal:
# ...
    loadBalancer:
      type: UserManaged
    dnsRecordsType: External
# ...
featureSet: TechPreviewNoUpgrade
pullSecret: '{"auths":{"<local_registry>": {"auth": "<credentials>","email": "you@example.com"}}}'
sshKey: 'ssh-ed25519 AAAA...'
# ...
----
+
where:
+
`type.UserManaged`:: Specifies an external load balancer for your cluster.
`dnsRecordsType.External`:: Specifies that the cluster does not create internal DNS records for the core infrastructure.
`featureSet.TechPreviewNoUpgrade`:: Specifies the enablement of non-default features for your cluster.
