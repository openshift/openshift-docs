// Module included in the following assemblies:
//
// *scalability_and_performance/ztp-deploying-disconnected.adoc

:_content-type: PROCEDURE
[id="ztp-installing-the-gitops-ztp-pipeline_{context}"]
= Installing and configuring the GitOps ZTP pipeline

Zero touch provisioning (ZTP) uses ArgoCD policies and GitOps capabilities to define and maintain the desired state of spoke clusters using `SiteConfig` custom resources (CRs).

.Prerequisites

* Create a Git repository where you manage your custom site configuration data.
* For disconnected environments, ensure that your Git repository and `ztp-site-generate` container image are accessible from the hub cluster.

.Procedure

. Get the latest argoCD reference architecture and merge it your existing custom site repository or create a new custom site repository:

.. Make an output directory:
+
[source,terminal]
----
$ mkdir -p ./ztp
----

.. Pull the `ztp-site-generate` container image and extract the contents of the `/home/ztp` folder:
+
[source,terminal]
----
$ podman run --rm registry.redhat.io/openshift4/ztp-site-generate-rhel8:v4.10 extract /home/ztp --tar | tar x -C ./ztp
----
+
The `argocd/example/policygentemplates` and `argocd/example/siteconfig` directories contain the reference configurations including common, group, and site-specific configuration CRs. It also includes `Kustomization` and `Namespace` CRs that you use to customize your site configuration.

. Merge the required files into your custom site configuration Git repository.
