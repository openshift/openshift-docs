:_content-type: PROCEDURE

[id="build-defining-retention-parameters_{context}"]
= Defining Retention Parameters

You can specify how long a `Build` object retains completed `BuildRun` objects, and how many failed or successful `BuildRun` objects to retain. Instead of manually cleaning up old `BuildRun` objects, retention parameters provide an alternate method for cleaning up `BuildRun` objects automatically.

.Prerequisites

* You have a `Build` definition.

.Procedure

As part of the retention parameters, we have the following fields:

* `retention.succeededLimit` - Defines number of succeeded BuildRuns for a Build that can exist.
* `retention.failedLimit` - Defines number of failed BuildRuns for a Build that can exist.
* `retention.ttlAfterFailed` - Specifies the duration for which a failed buildrun can exist.
* `retention.ttlAfterSucceeded` - Specifies the duration for which a successful buildrun can exist.

An example of a user using both TTL and Limit retention fields. In case of such a configuration, BuildRun will get deleted once the first criteria is met.

[,yaml]
----
  apiVersion: shipwright.io/v1alpha1
  kind: Build
  metadata:
    name: build-retention-ttl
  spec:
    source:
      url: "https://github.com/shipwright-io/sample-go"
      contextDir: docker-build
    strategy:
      kind: ClusterBuildStrategy
    output:
    ...
    retention:
      ttlAfterFailed: 30m
      ttlAfterSucceeded: 1h
      failedLimit: 10
      succeededLimit: 20
----

*NOTE*: When changes are made to `retention.failedLimit` and `retention.succeededLimit` values, they come into effect as soon as the build is applied, thereby enforcing the new limits. On the other hand, changing the `retention.ttlAfterFailed` and `retention.ttlAfterSucceeded` values will only affect new buildruns. Old buildruns will adhere to the old TTL retention values. In case TTL values are defined in buildrun specifications as well as build specifications, priority will be given to the values defined in the buildrun specifications.



// .Verification
//
// [role="_additional-resources"]
// .Additional resources
//
