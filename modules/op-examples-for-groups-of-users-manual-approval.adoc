// This module is included in the following assemblies:
// * create/using-manual-approval.adoc

:_mod-docs-content-type: CONCEPT
[id="op-examples-for-groups-of-users-manual-approval_{context}"]
= Examples for groups of users in Manual Approval

Use the following examples to define approval tasks for groups of users, configure advanced approval scenarios, and add approval directly to your pipeline definitions.

.Example multiple user approval
[source,yaml]
----
apiVersion: openshift-pipelines.org/v1alpha1
kind: ApprovalTask
metadata:
  name: multi-user-approval
  namespace: default
spec:
  approvers:
  - name: user 1
    type: User
    input: pending
  - name: user 2
    type: User
    input: pending
  - name: user 3
    type: User
    input: pending
  numberOfApprovalsRequired: 2
  description: "Requires 2 out of 3 approvals for deployment"
----

Use the following example to add group based user approval.

.Example group based user approval
[source,yaml]
----
apiVersion: openshift-pipelines.org/v1alpha1
kind: ApprovalTask
metadata:
  name: group-approval
  namespace: default
spec:
  approvers:
  - name: dev-team
    type: Group
    input: reject
    users:
    - name: user 1
      input: approve
    - name: user 2
      input: approve
    - name: user 3
      input: reject
  numberOfApprovalsRequired: 3
  description: "Any member of dev-team can approve"
----

Use the following advanced example to combine user and group approvers.

.Example mixed user and group based approval
[source,yaml]
----
apiVersion: openshift-pipelines.org/v1alpha1
kind: ApprovalTask
metadata:
  name: mixed-approval
  namespace: default
spec:
  approvers:
  - name: tech-lead
    type: User
    input: pending
  - name: qa-team
    type: Group
    input: pending
    users:
    - name: user 1
      input: approve
    - name: user 2
      input: approve
  - name: security-team
    type: Group
    input: pending
  numberOfApprovalsRequired: 3
  description: "Requires an approval from the tech lead, QA team member, and a security team member"
----

Use the following example to integrate an approval task into a pipeline specification.

.Example integrate approval task into pipeline specfication
[source,yaml]
----
apiVersion: tekton.dev/v1beta1
kind: Pipeline
metadata:
  name: deployment-pipeline
spec:
  tasks:
  - name: build
    taskRef:
      name: build-task
  - name: test
    taskRef:
      name: test-task
    runAfter: [build]
  - name: approval-gate
    taskRef:
      apiVersion: openshift-pipelines.org/v1alpha1
      kind: ApprovalTask
    params:
    - name: approvers
      value:
      - user 1
      - user 2
      - group:security-team
    - name: numberOfApprovalsRequired
      value: "2"
    - name: description
      value: "Approve deployment to production"
    runAfter: [test]
  - name: deploy
    taskRef:
      name: deploy-task
    runAfter: [approval-gate]
----