// Module included in the following assemblies:
// * lightspeed-docs-main/configure/ols-configuring-openshift-lightspeed.adoc

:_mod-docs-content-type: PROCEDURE
[id="ols-enabling-mcp-server_{context}"]
= Enabling a custom MCP server

Add an additional MCP server that interfaces with a tool in your environment so that the large language model (LLM) uses the tool to generate answers to your questions.

:FeatureName: The cluster interaction feature
include::snippets/technology-preview.adoc[]

.Prerequisites

* You have installed the {ols-long} Operator.

* You have configured a large language model provider.

* You have deployed the {ols-long} service.

.Procedure

. Open the {ols-long} `OLSconfig` custom resource (CR) file by running the following command:
+
[source,terminal]
----
$ oc edit olsconfig cluster
----

. Add `MCPServer` to the `spec.ols.featureGates` specification file and include the MCP server information.
+
[source,yaml]
----
apiVersion: ols.openshift.io/v1alpha1
kind: OLSConfig
metadata:
  name: cluster
spec:
  featureGate:
    - MCPServer <1>
  mcpServers:
    - name: mcp-server-1 <2>
      streamableHTTP:
        url: http://localhost:8080/mcp <3>
        timeout: 30
        sseReadTimeout: 10
        headers:
          - Authorization: Bearer <token>
          - Content-Type: application/json
          - Accept: application/json
        enableSSE: true
    - name: mcp-server-2
      streamableHTTP:
        url: http://localhost:8080/mcp
        timeout: 30 <4>
        sseReadTimeout: 10 <5>
        headers:
          - <key1>: <value1> <6>
          - <key2>: <value2>
        enableSSE: true <7>
----
<1> Specifies the MCP server functionality.
<2> Specifies the name of the MCP server.
<3> Specifies the URL path that the MCP server uses to communicate.
<4> Specifies the time that the MCP server has to respond to a query. If the client does not receive a query within the time specified, the MCP server times out. In this example, the timeout is 30 seconds.
<5> Specifies the amount of time a client waits for new data from a Server-Sent Events (SSE) connection. If the client does not receive data within that time, the client closes the connection.
<6> Specifies the additional header that the HTTP request sends to the MCP server. 
<7> When you set `enableSSE` to `true`, the MCP server establishes a one-way channel that the MCP server uses to push updates to the client whenever the server has new information. The default setting is `false`. 

. Click *Save*. 
+
The save operation saves the file and applies the changes so that the MCP server is available to the {ols-long} service.