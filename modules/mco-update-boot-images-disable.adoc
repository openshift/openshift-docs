// Module included in the following assemblies:
//
// * machine_configuration/mco-update-boot-images.adoc
// * nodes/nodes-nodes-managing.adoc

:_mod-docs-content-type: PROCEDURE
[id="mco-update-boot-images-disable_{context}"]
= Disabling updated boot images

To disable the updated boot image feature, edit the `MachineConfiguration` object so that the `machineManagers` field is an empty array.

[NOTE]
====
If you are updating a {gcp-first} or {aws-first} cluster from {product-title} 4.18 to 4.19, and you have not configured the `managedBootImages` parameter, the update is blocked with a _This cluster is GCP or AWS but lacks a boot image configuration._ message. The update is blocked intentionally on {gcp-short} or {aws-short} clusters in order to alert you that the default updated boot image behavior is changing between version 4.18 and 4.19 to enable updated boot images by default on those platforms .

To allow the update, perform one of the following tasks:

* If you want to allow the feature to be enabled, acknowledge that you are aware of the change in default behavior by patching the `admin-acks` config map by using the following command:
+
[source,terminal]
----
$ oc -n openshift-config patch cm admin-acks --patch '{"data":{"ack-4.18-boot-image-opt-out-in-4.19":"true"}}' --type=merge
----

* If you do not want the updated boot image feature enabled, explicitly disable the feature by using the following procedure.

It is important to note that if you use boot images from the AWS Marketplace or the GCP Marketplace, enabling the updated boot image feature overwrites those images with a standard {op-system-first} image. You should explicitly disable this feature and not patch the `admin-acks` config map. If you accidentally enable the updated boot image feature, you can disable it by using the following procedure. Then, replace the marketplace boot images by modifying the compute machine sets, as described  in _Modifying a compute machine set_.
====

If you disable this feature after some nodes have been created with the new boot image version, any existing nodes retain their current boot image. Turning off this feature does not rollback the nodes or machine sets to the originally-installed boot image. The machine sets retain the boot image version that was present when the feature was enabled and is not updated again when the cluster is upgraded to a new {product-title} version in the future.

.Procedure

. Disable updated boot images by editing the `MachineConfiguration` object:
+
[source,terminal]
----
$ oc edit MachineConfiguration cluster
----

. Make the `machineManagers` parameter an empty array:
+
[source,yaml]
----
apiVersion: operator.openshift.io/v1
kind: MachineConfiguration
metadata:
  name: cluster
spec:
# ...
  managedBootImages: <1>
    machineManagers: []
----
<1> Remove the parameters listed under `machineManagers` and add the `[]` characters to disable boot image updates.
