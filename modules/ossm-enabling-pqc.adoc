// Module included in the following assemblies:
//
// install/ossm-pqc-install.adoc

:_mod-docs-content-type: PROCEDURE
[id="ossm-enabling-pqc_{context}"]
= Enabling {pqc-short}

[role="_abstract"]
You can protect your environment against quantum computing threats by configuring {SMProductName} gateways to use {pqc-short}. This configuration uses hybrid key exchange to combine traditional security with quantum-resistant algorithms.

.Prerequisites

* You are logged in to the {ocp-product-title} web console 4.19+ as a user with the `cluster-admin` role.

* You have installed the {SMProductName} Operator 3.2.1+, created an `{istio}` resource, and the Operator has deployed {istio}.

* You have installed the following CLI tools locally:
** `oc`
** `podamn`
** `curl`

.Procedure

. Create a project called `istio-cni` by running the following command:
+
[source,terminal]
----
$ oc new-project istio-cni
----

. Create the `IstioCNI` resource by running the following command:
+
[source,terminal]
----
$ oc apply -f - <<EOF
apiVersion: sailoperator.io/v1
kind: IstioCNI
metadata:
  name: default
spec:
  version: v1.26.2
  namespace: istio-cni
EOF
----

. Install the `{istio}` control plane with PQC enabled by running the following command:
+
[source,terminal]
----
$ oc apply -f - <<EOF
apiVersion: sailoperator.io/v1
kind: Istio
metadata:
  name: default
spec:
  version: v1.26.2
  namespace: istio-system
  updateStrategy:
    type: InPlace
  values:
    meshConfig:
      accessLogFile: /dev/stdout
      tlsDefaults:
        ecdhCurves:
        - X25519MLKEM768
EOF
----

* `spec.values.meshConfig.tlsDefaults.ecdhCurves` defines the setting that applies to all non-mesh Transport Layer Security (TLS) connections in your {istio} deployment, including:

** Ingress gateways: TLS connections from external clients.

** Egress gateways: TLS connections to external services.

** External service connections: Any TLS connections to services outside the mesh.

+
[NOTE]
====
This setting does not apply to mesh-internal mutual Transport Layer Security (mTLS). Communication between services within the mesh uses the default {istio} mTLS configuration.
====

* `spec.values.meshConfig.tlsDefaults` defines a configuration which is a mesh-wide setting. You cannot enable PQC algorithms for individual workloads. To use different TLS configurations for specific gateways, you must deploy separate control planes with unique `meshConfig.tlsDefaults` settings.