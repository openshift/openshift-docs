// Module included in the following assemblies:
//
// * installing/installing_gcp/installing-gcp-user-infra.adoc
// * installing/installing_gcp/installing-gcp-user-infra-vpc.adoc

:_mod-docs-content-type: PROCEDURE
[id="installation-gcp-user-infra-wait-for-bootstrap_{context}"]
= Removing bootstrap resources in GCP

After you create all of the required infrastructure in {gcp-first}, wait for the bootstrap process to complete on the machines that you provisioned by using the Ignition config files. The installation program created the Ignition config files.

.Prerequisites

* Ensure you defined the variables in the _Exporting common variables_ and _Creating load balancers in GCP_ sections.
* Create the bootstrap machine.
* Create the control plane machines.

.Procedure

. Change to the directory that includes the installation program and run the following command:
+
[source,terminal]
----
$ ./openshift-install wait-for bootstrap-complete --dir <installation_directory> \ <1>
    --log-level info <2>
----
<1> For `<installation_directory>`, specify the path to the directory where you stored the installation files.
<2> To view different installation details, specify `warn`, `debug`, or `error` instead of `info`.
+
If the command exits without a `FATAL` warning, your production control plane has initialized.

. To remove the bootstrap instance group from the backend services' backends, run the following commands:
+
[source,terminal]
----
$ gcloud compute backend-services remove-backend ${INFRA_ID}-api-internal --region=${REGION} --instance-group=${INFRA_ID}-bootstrap-ig --instance-group-zone=${ZONE_0}
----
+
[source,terminal]
----
$ ingress_backendservice=$(gcloud compute backend-services list --filter="backends.group~${INFRA_ID}" --format='value(name)' | grep -v "${INFRA_ID}")
----
+
.. If `ingress_backendservice` is not empty, run the following `describe` command for the bootstrap group:
+
[source,terminal]
----
$ gcloud compute backend-services describe ${ingress_backendservice} --region=${REGION}
----
+
.. If the `describe` command displays that the bootstrap group is one of its backends, run the following `remove-backend` command to remove the bootstrap group from the backends:
+
[source,terminal]
----
$ gcloud compute backend-services remove-backend ${ingress_backendservice} --region=${REGION} --instance-group=${INFRA_ID}-bootstrap-ig --instance-group-zone=${ZONE_0}
----

.. To remove the bucket and the deployment, run the following commands:
+
[source,terminal]
----
$ gsutil rb gs://${INFRA_ID}-bootstrap-ignition
----
+
[source,terminal]
----
$ gcloud deployment-manager deployments delete ${INFRA_ID}-bootstrap
----
