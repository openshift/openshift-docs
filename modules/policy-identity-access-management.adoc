
// Module included in the following assemblies:
//
// * assemblies/policy-process-security.adoc

[id="policy-identity-access-management_{context}"]
= Identity and access management


Most access by SRE teams is done using cluster operators through automated configuration management.

== SRE access to all {product-title} clusters
SREs access {product-title} clusters through the web console or command line tools. Authentication requires Multi-Factor Authentication (MFA) with industry-standard requirements for password complexity and account lockouts. SREs must authenticate as individuals to ensure auditability. All authentication attempts are logged to a Security Information and Event Management (SIEM) system.

SREs access private clusters using an encrypted tunnel through a hardened SRE Support Pod running in the cluster. Connections to the SRE Support Pod are permitted only from a secured Red Hat network using an IP allow-list. In addition to the cluster authentication controls described above, authentication to the SRE Support Pod is controlled using SSH keys. SSH key authorization is limited to SRE staff and automatically synchronized with Red Hat corporate directory data. Corporate directory data is secured and controlled by HR systems, including management review, approval, and audits.


== Privileged access controls in {product-title}
Red Hat SRE adheres to the principle of least privilege when accessing {product-title} and public cloud provider components. There are four basic categories of manual SRE access:

- SRE admin access through the Red Hat Portal with normal two-factor authentication and no privileged elevation.

- SRE admin access through the Red Hat corporate SSO with normal two-factor authentication and no privileged elevation.

- OpenShift elevation, which is a manual elevation using Red Hat SSO. It is limited to 2 hours, is fully audited, and requires management approval.

- Cloud provider access/elevation, which is a manual elevation for cloud provider console access. It is limited to 60 minutes, is fully audited, and requires management approval.

Each of these access types have different levels of access to components:

[cols= "3a,3a,3a,3a,3a",options="header"]

|===

| Component | Typical SRE admin access (Red Hat Portal) | Typical SRE admin access (Red Hat SSO) |OpenShift elevation | Cloud provider access

| OpenShift Cluster Manager (OCM) | R/W | No access | No access | No access
| OpenShift console | No access | R/W | R/W | No access
| Node Operating  system | No access | A specific list of elevated OS and network permissions. | A specific list of elevated OS and network permissions. | No access
| AWS Console | No access | No Access, but this is the account used to request cloud provider access. | No access | All cloud provider permissions using the SRE identity.

|===


== SRE access to cloud infrastructure accounts
Red Hat personnel do not access cloud infrastructure accounts in the course of routine {product-title} operations. For emergency troubleshooting purposes, Red Hat SRE have well-defined and auditable procedures to access cloud infrastructure accounts.

In AWS, SREs generate a short-lived AWS access token for the `osdManagedAdminSRE` user using the AWS Security Token Service (STS). Access to the STS token is audit logged and traceable back to individual users. The `osdManagedAdminSRE` has the AdministratorAccess IAM policy attached.

In Google Cloud, SREs access resources after being authenticated against a Red Hat's SAML identity provider (IDP). The IDP authorizes tokens that have time-to-live expirations. The issuance of the token is auditable by corporate Red Hat IT and linked back to an individual user.


== Red Hat support access
Members of the Red Hat CEE team will typically have read-only access to parts of the cluster. Specifically, CEE has limited access to the core and product namespaces and does not have access to the customer namespaces.

[cols= "4,2a,2a,2a,2a",options="header"]

|===

| Role | Core namespace | Layered product namespace | Customer namespace | Cloud infrastructure account^*^

|OpenShift SRE| Read: All

Write: Very

Limited ^[1]^
| Read: All

Write: None
| Read: None^[2]^

Write: None
|Read: All ^[3]^

Write: All ^[3]^


|CEE
|Read: All

Write: None

|Read: All

Write: None

|Read: None^[2]^

Write: None

|Read: None

Write: None


|Customer administrator
|Read: None

Write: None

|Read: None

Write: None

| Read: All

Write: All

|Read: Limited^[4]^

Write: Limited^[4]^


|Customer user
|Read: None

Write: None

|Read: None

Write: None

|Read: Limited^[5]^

Write: Limited^[5]^

|Read: None

Write: None


|Everybody else
|Read: None

Write: None
|Read: None

Write: None
|Read: None

Write: None
|Read: None

Write: None

|===
--
Cloud Infrastructure Account refers to the underlying AWS or Google Cloud account

1. Limited to addressing common use cases such as failing deployments, upgrading a cluster, and replacing bad worker nodes.
2. Red Hat associates have no access to customer data by default.
3. SRE access to the cloud infrastructure account is a "break-glass" procedure for exceptional troubleshooting during a documented incident.
4. Customer Administrator has limited access to the cloud infrastructure account console through Cloud Infrastructure Access.
5. Limited to what is granted through RBAC by the Customer Administrator, as well as namespaces created by the user.
--

== Customer access
Customer access is limited to namespaces created by the customer and permissions that are granted using RBAC by the Customer Administrator role. Access to the underlying infrastructure or product namespaces is generally not permitted without 'cluster-admin' access. More information on customer access and authentication can be found in the Understanding Authentication section of the documentation.


== Access approval and review
New SRE user access requires management approval. Separated or transferred SRE accounts are removed as authorized users through an automated process. Additionally, SRE performs periodic access review including management sign-off of authorized user lists.
