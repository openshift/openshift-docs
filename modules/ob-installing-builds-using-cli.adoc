// This module is included in the following assembly:
//
// * installing/installing-openshift-builds.adoc

:_mod-docs-content-type: PROCEDURE
[id="installing-builds-using-CLI_{context}"]
= Installing {builds-shortname} by using the CLI

[role="_abstract"]
Use the Command Line Interface (CLI) to install the necessary {builds-title} components in {ocp-product-title}. This CLI approach provides granular control over the configuration needed to compile source code and containerize applications within the cluster.

.Prerequisites

* You have installed the OpenShift CLI (`oc`).
* You are logged in to the {ocp-product-title} cluster as an administrator.
* Your cluster has the link:https://docs.openshift.com/container-platform/latest/installing/overview/cluster-capabilities.html#marketplace-operator_cluster-capabilities[Marketplace capability] enabled or the Red Hat Operator catalog source configured manually.
* You have installed the {pipelines-operator}.

.Procedure

. Create a `sub.yaml` subscription object file to subscribe a namespace to the {builds-operator}, as shown in the following example:
+
[source,yaml]
----
apiVersion: operators.coreos.com/v1alpha1
kind: Subscription
metadata:
  name: openshift-builds-operator
  namespace: openshift-builds
spec:
  channel: <channel-name> # <1>
  name: openshift-builds-operator # <2>
  source: redhat-operators # <3>
  sourceNamespace: openshift-marketplace # <4>
----
<1> The channel name from where you want to subscribe the Operator.
<2> Name of the Operator to subscribe to.
<3> Name of the CatalogSource that provides the Operator.
<4> Namespace of the CatalogSource. Use `openshift-marketplace` namespace for the default OperatorHub CatalogSources.

. Run the following command to apply the subscription object:
+
[source,terminal]
----
$ oc apply -f sub.yml
----
+
The {builds-operator} is now installed in the target namespace, `openshift-builds`.

.Verification

. Run the following command to ensure that the `OpenshiftBuild` resource is created:
+
[source,terminal]
----
$ oc get openshiftbuilds
----
+
_Example output_
+
[source,terminal]
----
NAME      AGE
cluster   32m
----

. Run the following command to ensure that the `ShipwrightBuilds` resource is created:
+
[source,terminal]
----
$ oc get shipwrightbuilds
----
+
_Example output_
+
[source,terminal]
----
NAME            AGE
cluster-mzrg4   33m
----

. Run the following command to ensure that the required pods are created in the `openshift-builds` namespace:
+
[source,terminal]
----
$ oc get pods -n openshift-builds
----
+
_Example output_
+
[source,terminal]
----
NAME                                                 READY   STATUS    RESTARTS   AGE
openshift-builds-operator-6f5c48c6b5-cvp2w           2/2     Running   0          13d
shared-resource-csi-driver-node-gbkqs                2/2     Running   0          13d
shared-resource-csi-driver-webhook-9d9bd48f4-d5ln6   1/1     Running   0          13d
shipwright-build-controller-5454475b85-mmm6w         1/1     Running   0          13d
shipwright-build-webhook-7fbd49c6bb-2n77s            1/1     Running   0          13d
----

. Run the following command to ensure that the required pods are created in the `openshift-operators` namespace:
+
[source,terminal]
----
$ oc get pods -n openshift-operators
----
+
_Example output_
+
[source,terminal]
----
NAME                                                 READY   STATUS    RESTARTS   AGE
openshift-pipelines-operator-64d8c4969c-952cc        2/2     Running   0          3d13h
tekton-operator-webhook-756f5dfdc7-c99mc             1/1     Running   0          3d13h
----

[role="_additional-resources"]
.Additional resources

* link:https://docs.redhat.com/en/documentation/red_hat_openshift_pipelines/1.15/html-single/installing_and_configuring/index[Installing {pipelines-operator}]
* link:https://docs.redhat.com/en/documentation/openshift_container_platform/4.19/html/cli_tools/openshift-cli-oc[OpenShift CLI (oc)]