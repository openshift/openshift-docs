// This module is included in the following assemblies:
// * secure/authenticating-pipelines-repos-using-secrets.adoc
:_mod-docs-content-type: REFERENCE
[id="op-types-annotation-secrets_{context}"]
= Types and annotation of secrets for service accounts

If you provide authentication secrets using service accounts, {pipelines-shortname} supports several secret types. For most of these secret types, you must provide annotations that define the repositories for which the authentication secret is valid.

[id="op-types-annotation-secrets-git_{context}"]
== Git authentication secrets

If you provide authentication secrets using service accounts, {pipelines-shortname} supports the following types of secrets for Git authentication:

* `kubernetes.io/basic-auth`: A username and password for basic authentication

* `kubernetes.io/ssh-auth`: Keys for SSH-based authentication

If you provide authentication secrets using service accounts, a Git secret must have one or more annotation keys. The names of each key must begin with `tekton.dev/git-` and the value is the URL of the host for which {pipelines-shortname} must use the credentials in the secret.

In the following example, {pipelines-shortname} uses a `basic-auth` secret to access repositories at `github.com` and `gitlab.com`.

.Example: Credentials for basic authentication with multiple Git repositories
[source,yaml,subs="attributes+"]
----
apiVersion: v1
kind: Secret
metadata:
  name: git-secret-basic
  annotations:
    tekton.dev/git-0: github.com
    tekton.dev/git-1: gitlab.com
type: kubernetes.io/basic-auth
stringData:
  username: <username> # <1>
  password: <password> # <2>
----
<1> Username for the repository
<2> Password or personal access token for the repository

You can also use `ssh-auth` secret to provide a private key for accessing a Git repository, as in the following example:

.Example: Private key for SSH-based authentication
[source,yaml,subs="attributes+"]
----
apiVersion: v1
kind: Secret
metadata:
  name: git-secret-ssh
  annotations:
    tekton.dev/git-0: https://github.com
type: kubernetes.io/ssh-auth
stringData:
  ssh-privatekey: # <1>
----
<1> The content of the SSH private key file.

[id="op-types-annotation-secrets-container_{context}"]
== Container registry authentication secrets

If you provide authentication secrets using service accounts, {pipelines-shortname} supports the following types of secrets for container (Docker) registry authentication:

* `kubernetes.io/basic-auth`: A username and password for basic authentication

* `kubernetes.io/dockercfg`: A serialized `~/.dockercfg` file

* `kubernetes.io/dockerconfigjson`: A serialized `~/.docker/config.json` file

If you provide authentication secrets using service accounts, a container registry secret of the `kubernetes.io/basic-auth` type must have one or more annotation keys. The names of each key must begin with `tekton.dev/docker-` and the value is the URL of the host for which {pipelines-shortname} must use the credentials in the secret. This annotation is not required for other types of container registry secrets.

In the following example, {pipelines-shortname} uses a `basic-auth` secret, which relies on a username and password, to access container registries at `quay.io` and `my-registry.example.com`.

.Example: Credentials for basic authentication with multiple container repositories
[source,yaml,subs="attributes+"]
----
apiVersion: v1
kind: Secret
metadata:
  name: docker-secret-basic
  annotations:
    tekton.dev/docker-0: quay.io
    tekton.dev/docker-1: my-registry.example.com
type: kubernetes.io/basic-auth
stringData:
  username: <username> # <1>
  password: <password> # <2>
----
<1> Username for the registry
<2> Password or personal access token for the registry

You can create `kubernetes.io/dockercfg` and `kubernetes.io/dockerconfigjson` secrets from an existing configuration file, as in the following example:

.Example: Command for creating a secret for authenticating to a container repository from an existing configuration file
[source,terminal,subs="attributes+"]
----
$ oc create secret generic docker-secret-config \
    --from-file=config.json=/home/user/.docker/config.json \
    --type=kubernetes.io/dockerconfigjson
----

You can also use the `oc` command line utility to create `kubernetes.io/dockerconfigjson` secrets from credentials, as in the following example:

.Example: Command for creating a secret for authenticating to a container repository from credentials
[source,terminal,subs="attributes+"]
----
$ oc create secret docker-registry docker-secret-config \
  --docker-email=<email> \ # <1>
  --docker-username=<username> \ # <2>
  --docker-password=<password> \ # <3>
  --docker-server=my-registry.example.com:5000 # <4>
----
<1> Email address for the registry
<2> Username for the registry
<3> Password or personal access token for the registry
<4> The host name and port for the registry
