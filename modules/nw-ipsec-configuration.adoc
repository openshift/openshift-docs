// Module included in the following assemblies:
//
// * networking/ovn_kubernetes_network_provider/about-ipsec-ovn.adoc

[id="ipsec-encryption-configuration_{context}"]
= Configuring IPsec encryption

You can enable IPsec encryption during cluster installation . With IPsec enabled, all network traffic between nodes on the OVN-Kubernetes Container Network Interface (CNI) cluster network travels through an encrypted tunnel.

. Procedure

. Create manifests using `openshift-install` binary:
+
[source,terminal]
----
$ ./openshift-install create manifests
----

. Create `cluster-network-03-config.yml` object under /manifests folder:
+
[source,terminal]
----
$ touch manifests/cluster-network-03-config.yml
----

. Configure OVN-Kubernetes configuration in `cluster-network-03-config.yml` file:
+
[source,yaml]
----
apiVersion: operator.openshift.io/v1
kind: Network
metadata:
  creationTimestamp: null
  name: cluster
spec:
  clusterNetwork:
  - cidr: 10.128.0.0/14
    hostPrefix: 23
  externalIP:
    policy: {}
  networkType: OVNKubernetes
  serviceNetwork:
  - 172.30.0.0/16
  defaultNetwork:
    type: OVNKubernetes
    ovnKubernetesConfig:
      ipsecConfig: {} <1>
----
<1> If the field is present, IPsec is enabled for the cluster.

. Create the cluster:
+
[source,termnal]
----
$ ./openshift-install create cluster
----

. Make sure `ovn-ipsec` pods are running under `openshift-ovn-kubernetes` namespace:
+
[source,terminal]
----
$ oc get pods -n openshift-ovn-kubernetes
----
