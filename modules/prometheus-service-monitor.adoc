// Module included in the following assemblies:
//
// * configuration/monitor-acs.adoc
:_module-type: PROCEDURE
[id="prometheus-service-monitor-example_{context}"]
= Monitoring Central using Prometheus service monitor

[role="_abstract"]
If you are using the Prometheus Operator, you can use a service monitor to scrape the metrics from {rh-rhacscs-first}.

[NOTE]
====
If you are not using the Prometheus operator, you must edit the Prometheus configuration files to receive the data from {product-title-short}.
====

.Procedure
. Create a new `servicemonitor.yaml` file with the following content:
+
[source,yaml]
----
apiVersion: monitoring.coreos.com/v1
kind: ServiceMonitor
metadata:
  name: prometheus-stackrox
  namespace: stackrox
spec:
  endpoints:
    - interval: 30s
      port: monitoring
      scheme: http
  selector:
    matchLabels:
      app.kubernetes.io/name: <stackrox-service> <1>
----
<1> The labels must match with the `Service` resource that you want to monitor. For example, `central` or `scanner`.
. Apply the YAML to the cluster:
+
[source,terminal]
----
$ oc apply -f servicemonitor.yaml <1>
----
<1> If you use Kubernetes, enter `kubectl` instead of `oc`.

.Verification
* Run the following command to check the status of service monitor:
+
[source,terminal]
----
$ oc get servicemonitor --namespace stackrox <1>
----
<1> If you use Kubernetes, enter `kubectl` instead of `oc`.
