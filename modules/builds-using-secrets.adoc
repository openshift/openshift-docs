// Module included in the following assemblies:
// * builds/creating-build-inputs.adoc


:_content-type: PROCEDURE
[id="builds-using-secrets_{context}"]
= Using secrets

After creating secrets, you can create a pod to reference your secret, get logs, and delete the pod.

The following examples show how to add an existing secret to a pod:

.Sample YAML of a pod populating files in a volume with secret data

[source,yaml]
----
apiVersion: v1
kind: Pod
metadata:
  name: secret-example-pod
spec:
  containers:
    - name: secret-test-container
      image: busybox
      command: [ "/bin/sh", "-c", "cat /etc/secret-volume/*" ]
      volumeMounts:
          # name must match the volume name below
          - name: secret-volume
            mountPath: /etc/secret-volume
            readOnly: true
  volumes:
    - name: secret-volume
      secret:
        secretName: test-secret
  restartPolicy: Never
----

.Sample YAML of a pod populating environment variables with secret data

[source,yaml]
----
apiVersion: v1
kind: Pod
metadata:
  name: secret-example-pod
spec:
  containers:
    - name: secret-test-container
      image: busybox
      command: [ "/bin/sh", "-c", "export" ]
      env:
        - name: TEST_SECRET_USERNAME_ENV_VAR
          valueFrom:
            secretKeyRef:
              name: test-secret
              key: username
  restartPolicy: Never
----

.Sample YAML of a build config populating environment variables with secret data

[source,yaml]
----
apiVersion: build.openshift.io/v1
kind: BuildConfig
metadata:
  name: secret-example-bc
spec:
  strategy:
    sourceStrategy:
      env:
      - name: TEST_SECRET_USERNAME_ENV_VAR
        valueFrom:
          secretKeyRef:
            name: test-secret
            key: username
----

.Procedure

. Create the pod to reference your secret:
+
[source,terminal]
----
$ oc create -f <your_yaml_file>.yaml
----

. Get the logs:
+
[source,terminal]
----
$ oc logs secret-example-pod
----

. Delete the pod:
+
[source,terminal]
----
$ oc delete pod secret-example-pod
----

