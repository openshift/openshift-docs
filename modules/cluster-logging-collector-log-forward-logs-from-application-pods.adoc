// Module included in the following assemblies:
//
// * configuring/configuring-log-forwarding.adoc

:_mod-docs-content-type: PROCEDURE
[id="cluster-logging-collector-log-forward-logs-from-application-pods_{context}"]
= Forwarding application logs from specific pods

As a cluster administrator, you can use Kubernetes pod labels to gather log data from specific pods and forward it to a log collector.

Suppose that you have an application composed of pods running alongside other pods in various namespaces. If those pods have labels that identify the application, you can gather and output their log data to a specific log collector.

To specify the pod labels, you use one or more `matchLabels` key-value pairs. If you specify multiple key-value pairs, the pods must match all of them to be selected.

.Procedure

. Create or edit a YAML file that defines the `ClusterLogForwarder` CR object. In the file, specify the pod labels using simple equality-based selectors under `inputs[].name.application.selector.matchLabels`, as shown in the following example.
+
[source,yaml]
----
apiVersion: observability.openshift.io/v1
kind: ClusterLogForwarder
metadata:
  name: <log_forwarder_name>
  namespace: <log_forwarder_namespace>
spec:
  serviceAccount:
    name: <service_account_name> #<1>
  outputs:
    - <output_name>
    # ...
  inputs:
  - name: exampleAppLogData #<2>
    type: application #<3>
    application:
      includes: #<4>
      - namespace: app1
      - namespace: app2
      selector:
        matchLabels: #<5>
          environment: production
          app: nginx
  pipelines:
  - inputRefs:
    - exampleAppLogData
    outputRefs:
    # ...
----
<1> Specify the service account name.
<2> Specify a name for the input.
<3> Specify the type as `application` to collect logs from applications.
<4> Specify the set of namespaces to include when collecting logs.
<5> Specify the key-value pairs of pod labels whose log data you want to gather. You must specify both a key and value, not just a key. To be selected, the pods must match all the key-value pairs.

. Optional: You can send log data from additional applications that have different pod labels to the same pipeline.
.. For each unique combination of pod labels, create an additional `inputs[].name` section similar to the one shown.
.. Update the `selectors` to match the pod labels of this application.
.. Add the new `inputs[].name` value to `inputRefs`. For example:
+
----
- inputRefs: [ myAppLogData, myOtherAppLogData ]
----

. Create the CR object:
+
[source,terminal]
----
$ oc create -f <file-name>.yaml
----

[role="_additional-resources"]
.Additional resources

* link:https://kubernetes.io/docs/concepts/overview/working-with-objects/labels/#resources-that-support-set-based-requirements[Resources that support set-based requirements].
