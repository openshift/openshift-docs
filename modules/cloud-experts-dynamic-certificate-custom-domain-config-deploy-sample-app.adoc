// Module included in the following assemblies:
//
// * cloud_experts_tutorials/cloud-experts-dynamic-certificate-custom-domain.adoc

:_mod-docs-content-type: PROCEDURE
[id="cloud-experts-dynamic-certificate-custom-domain-config-deploy-sample-app_{context}"]
= Deploying a sample application

[role="_abstract"]
Now, that dynamic certificates are configured, you can deploy a sample application to confirm that certificates are provisioned and trusted when you expose a new route.

.Procedure
. Create a new project for your sample application:
+
[source,terminal]
----
$ oc new-project hello-world
----
+
. Deploy a hello world application:
+
[source,terminal]
----
$ oc -n hello-world new-app --image=docker.io/openshift/hello-openshift
----
+
. Create a route to expose the application from outside the cluster:
+
[source,terminal]
----
$ oc -n hello-world create route edge --service=hello-openshift hello-openshift-tls --hostname hello.${DOMAIN}
----
+
. Verify the certificate for the route is untrusted:
+
[source,terminal]
----
$ curl -I https://hello.${DOMAIN}
----
**Example output**:
+
[source,text]
----
curl: (60) SSL: no alternative certificate subject name matches target host name 'hello.example.com'
More details here: https://curl.se/docs/sslcerts.html

curl failed to verify the legitimacy of the server and therefore could not
establish a secure connection to it. To learn more about this situation and
how to fix it, please visit the web page mentioned above.
----
+
. Annotate the route to trigger cert-manager to provision a certificate for the custom domain:
+
[source,terminal]
----
$ oc -n hello-world annotate route hello-openshift-tls cert-manager.io/issuer-kind=ClusterIssuer cert-manager.io/issuer-name=letsencrypt-production
----
+
[NOTE]
====
It takes 2-3 minutes for the certificate to be created. The renewal of the certificate will automatically be managed by the cert-manager Operator as it approaches expiration.
====
. Verify the certificate for the route is now trusted:
+
[source,terminal]
----
$ curl -I https://hello.${DOMAIN}
----
+
**Example output**:
+
[source,terminal]
----
HTTP/2 200
date: Thu, 05 Oct 2023 23:45:33 GMT
content-length: 17
content-type: text/plain; charset=utf-8
set-cookie: 52e4465485b6fb4f8a1b1bed128d0f3b=68676068bb32d24f0f558f094ed8e4d7; path=/; HttpOnly; Secure; SameSite=None
cache-control: private
----