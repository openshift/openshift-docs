// Module included in the following assemblies:
//
// *scalability_and_performance/sno-du-deploying-clusters-on-single-nodes.adoc

:_content-type: PROCEDURE
[id="sno-du-configuring-access-to-the-bare-metal-server_{context}"]
= Configuring access to the bare metal server

This configuration provides access and specific configuration of the bare metal server.
It sets the location and the method to use to install the single node distributed unit (DU).

.Procedure

. Create the secret file:
+
[source,yaml]
----
apiVersion: v1
kind: Secret
metadata:
  name: {{ cluster_name }}-bmh-secret
  namespace: {{ cluster_name }}
data:
  username: {{ bmc_user | b64encode }} <1>
  password: {{ bmc_pass | b64encode }}
type: Opaque
----
<1> Add a username and password, for bmc, base64 encoded.

. Create the `BareMetalHost` custom resource:
+
[source,yaml]
----
apiVersion: metal3.io/v1alpha1
kind: BareMetalHost
metadata:
    annotations:
        bmac.agent-install.openshift.io/hostname: <hostname> //5
        bmac.agent-install.openshift.io/role: <role>
        bmac.agent-install.openshift.io/installer-args: <optional installer arguments>
        bmac.agent-install.openshift.io/ignition-config-overrides: <optional node ignition override>

    labels:
        infraenvs.agent-install.openshift.io: sno-du-1
    name: sno-du-1
    namespace: sno-du-1
spec:
    automatedCleaningMode: disabled
    bmc:
        address: idrac-virtualmedia+https://10.16.231.87/redfish/v1/Systems/System.Embedded.1 <1>
        credentialsName: name of bmcCredentials secret    <2>
        disableCertificateVerification: true
    bootMACAddress: "00:00:00:01:20:30"
    bootMode: UEFI
    online: true
    rootDeviceHints:
        hctl: "1:2:0:0" <3>
    userData:
        bootKey: value1 <4>
----
<1> Provides the URL of the BMC. The boot ISO is mounted on the system using this URL.
<2> Provides the credentials to access the image.
<3> Provides hints to the installer which disk to use for installation of {product-title}.
<4> The boot line for booting the image.
