// Module included in the following assemblies:
//
// * installing/installing_alibaba/installing-alibaba-assisted-installer.adoc

:_mod-docs-content-type: PROCEDURE
[id="alibaba-ai-setting-up-network-elements_{context}"]
= Configuring networking elements in Alibaba Cloud

Complete the Alibaba deployment by configuring the following networking elements: 

** One Virtual Private Cloud (VPC)

** Two vSwitches in different zones, with corresponding NAT Gateways and EtherNet/IPs

** At least one security group. You can separate more security groups according to your infrastructure design and security policies. To verify the ports, see https://access.redhat.com/documentation/en-us/assisted_installer_for_openshift_container_platform/2024/html-single/installing_openshift_container_platform_with_the_assisted_installer/index#configuring-networking_installing-with-ui[Configuring networking] in the {ai-full} documentation.

** One Network Load Balancer *Do you mean Server Load Balancer?*

** Domain Name System (DNS) records for API, Internal API and APPS

*Is this the correct order? In the 4.6 deployment guide you sent me, the first two come before the creation of an OSS bucket.* 

== Creating a Virtual Private Cloud (VPC) and two vSwitches

A Virtual Private Cloud is a custom private network that you create based on Alibaba Cloud. Different VPCs are separated by two logical layers. You can create and manage cloud service instances such as ECS instances, SLB instances, and `ApsaraDB` RDS instances on the VPC that you create.

.Prerequisites

. You have completed host discovery in {ai-full}.

.Procedure

. Log in to the link:https://home-intl.console.aliyun.com/[Alibaba Cloud Console].

. Hover over the more icon in the upper left corner.

. In the navigation pane, select *Products and Services* > *Virtual Private Cloud*. 

. Set the region to *China (Hangzhou)*. *They probably need to set it to their own region - correct?*

. Click *Create VPC* to open the *Create VPC* page.

. Set the *VPC* parameters to the following:

** *Name*: `vpc-ocp`
** *IPv4 CIDR Block*: `192.168.0.0/16`

. Set these *vSwitch* parameters to the following and leave the others as default:

** *Name*: `vsw-ocp`
** *Zone*: `Hangzhou Zone 1`
** *IPv4 CIDR Block*: `192.168.1.0/24` 

*What do they do for the second vSwitch?*

. Select *OK*.

== Creating a security group

Create a security group for the Elastic Compute Service (ECS) instance where the {product-title} cluster runs. *Sentence not clear - where does the {product-name} cluster run - in the ECS or in the security group?*

.Prerequisites

. You have created a Virtual Private Cloud (VPC) and two vSwitches in Alibaba Cloud.

.Procedure

. Log in to the link:https://home-intl.console.aliyun.com/[Alibaba Cloud Console].

. Hover over the more icon in the upper left corner, and select *Products and Services* > *Elastic Compute Service*.

. In the navigation pane, select *Network & Security* > *Security Groups*. 

. On the *Security Groups* page, click *Create Security Group*.

*Need to see the procedures in order to complete them?* *I started copying the information from link:https://www.alibabacloud.com/blog/alibaba-cloud-red-hat-openshift-container-platform-4-6-deployment-guide_597599[Alibaba Cloud Red Hat OpenShift Container Deployment Guide]*

== Creating a Network Load Balancer  *Do you mean a server load balancer?*

A Server Load Balancer (SLB) is a load balancing service that distributes traffic among multiple ECS instances to improve the service capabilities of your applications. You can use SLB to prevent single points of failure (SPOFs) and improve the availability of your applications.

.Prerequisites

TBD

.Procedure

. Log in to the link:https://home-intl.console.aliyun.com/[Alibaba Cloud Console].

. Hover over the more icon in the upper left corner, and select *Products and Services* > *Server Load Balancer*.

. On the *Server Load Balancer* page, from the *Quck Access* tab, select *Create CLB*.

. On the *Buy* page, set the following parameters: 

.. For *Region*, select your region. *Was China (Hangzhou) but probably not relevant, correct?*.

.. For *Primary Zone*, select your primary zone. *Was China East 1 Zone I but probably not relevant, correct?*.

.. For *Backup Zone*, select your backup zone. *Was China East 1 Zone H but probably not relevant, correct?*. *What are these zones?*

.. For *Instance Name*, enter `slb-ocp`.

.. For *Instance Spec*, select `Small I (slb.s1.small)`.

.. For *Instance Type*, select *Intranet*.

.. For *Network type*, select *VPC*.

.. For *VPC*, select `vsw-ocp`.

.. For *Virtual switch*, select `vsw-ocp`.

.. For *Quantity*, select `1`. 

. Click *Buy Now*.

. On the *Instances* page, verify that the IP address of the SLB instance is `192.168.1.25`.

. In the SBL console *How do they access that?*, click the `slb-ocp` instance that you created.

. *To be completed...*