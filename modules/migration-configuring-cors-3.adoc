// Module included in the following assemblies:
//
// migration/migrating_openshift_3_to_4/migrating-openshift-3-to-4.adoc
[id='migration-configuring-cors-3_{context}']
= Configuring cross-origin resource sharing on {product-title} 3 clusters

To access the API server of an {product-title} 3 cluster from a web application (in this case, the Cluster Application Migration tool) on a different host, you must configure cross-origin resource sharing by adding the CAM host name to the master configuration file.

.Procedure

. Log in to the {product-title} 3 cluster.
. Add the CAM host name to the `corsAllowedOrigins` stanza in the *_/etc/origin/master/master-config.yaml_* configuration file:
+
----
corsAllowedOrigins:
- (?i)//migration-openshift-migration\.apps\.cluster\.com(:|\z)
- (?i)//openshift\.default\.svc(:|\z)
- (?i)//kubernetes\.default(:|\z)
----
+
[NOTE]
====
This example uses the following syntax:

* The `(?i)` makes it case-insensitive.
* The `//` pins to the beginning of the domain and matches the double slash
following `http:` or `https:`.
* The `\.` escapes dots in the domain name.
* The `(:|\z)` matches the end of the domain name `(\z)` or a port separator
`(:)`.
====

. Restart the API server and controller manager components to apply the changes:
+
* In {product-title} 3.7 and 3.9, these components run as stand-alone host processes managed by `systemd`:
+
----
$ systemctl restart atomic-openshift-master-api
$ systemctl restart atomic-openshift-master-controllers
----

* In {product-title} 3.10 and 3.11, these components run in static pods managed by a kubelet:
+
----
$ /usr/local/bin/master-restart api
$ /usr/local/bin/master-restart controller
----
