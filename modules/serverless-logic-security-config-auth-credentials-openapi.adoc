// Module included in the following assemblies:
// serverles-logic/serverless-logic-authentication-openapi-services

:_mod-docs-content-type: PROCEDURE
[id="serverless-logic-security-config-auth-credentials-openapi_{context}"]
= Configuring authentication credentials for OpenAPI services

To invoke OpenAPI service operations secured by authentication schemes, you must configure the corresponding credentials and parameters in your application. {ServerlessLogicProductName} uses these configurations to authenticate with the external services during workflow execution.

This section describes how to define and apply the necessary configuration properties for security schemes declared in the OpenAPI specification file. You can use either `application.properties`, the `ConfigMap` associated with your workflow, or environment variables in the `SonataFlow` CR to provide these credentials.

[NOTE]
====
The security schemes defined in an OpenAPI specification file are global to all the operations that are available in the same file. This means that the configurations set for a particular security scheme also apply to the other secured operations.
====

.Prerequisites

* You have access to a {ServerlessLogicProductName} project with the appropriate roles and permissions to create applications and other workloads in {ocp-product-title}.
* Your OpenAPI specification is defined in one or more security schemes.
* You have access to the OpenAPI specification files.
* You have identified the schemes you want to configure `http-basic-example` or `api-key-example`.
* You have access to the application properties file, the workflow `ConfigMap`, or environment variable setup.

.Procedure

* Use the following format to compose your property keys:
+
[source,text]
----
quarkus.openapi-generator.[filename].auth.[security_scheme_name].[auth_property_name]
----
+
** `filename` is the sanitized name of the file containing the OpenAPI specification, such as security_example_json.
** `security_scheme_name` is the sanitized name of the security scheme object definition in the OpenAPI specification file, such as http_basic_example or api_key_example.
** `auth_property_name` is the name of the property to configure, such as username. This property depends on the defined security scheme type.
+
[NOTE]
====
When you are using environment variables to configure properties, follow the MicroProfile environment variable mapping rules. You can replace all non-alphabetic characters in the property key with underscores `_`, and convert the entire key to uppercase.
====

The following examples show how to provide these configuration properties using `application.properties`, a `ConfigMap` associated with your workflow, or environment variables defined in the `SonataFlow` CR: 

.Example of configuring the credentials by using the `application.properties` file
[source,text]
----
quarkus.openapi-generator.security_example_json.auth.http_basic_example.username=myuser
quarkus.openapi-generator.security_example_json.auth.http_basic_example.password=mypassword
----

.Example of configuring the credentials by using the workflow `ConfigMap`
[source,yaml]
----
apiVersion: v1
data:
  application.properties: |   
    quarkus.openapi-generator.security_example_json.auth.http_basic_example.username=myuser
    quarkus.openapi-generator.security_example_json.auth.http_basic_example.password=mypassword
kind: ConfigMap
metadata:
  labels:
    app: example-workflow
  name: example-workflow-props
  namespace: example-namespace
----

.Example of configuring the credentials by using environment variables in the `SonataFlow` CR
[source,yaml]
----
apiVersion: sonataflow.org/v1alpha08
kind: SonataFlow
metadata:
  name: example-workflow
  namespace: example-namespace
  annotations:
    sonataflow.org/description: Example Workflow
    sonataflow.org/version: 0.0.1
    sonataflow.org/profile: preview
spec:
  podTemplate:
    container:
      env:
        - name: QUARKUS_OPENAPI_GENERATOR_SECURITY_EXAMPLE_JSON_AUTH_HTTP_BASIC_EXAMPLE_USERNAME
          value: myuser
        - name: QUARKUS_OPENAPI_GENERATOR_SECURITY_EXAMPLE_JSON_AUTH_HTTP_BASIC_EXAMPLE_PASSWORD
          value: mypassowrd
----