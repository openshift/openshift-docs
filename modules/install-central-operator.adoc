// Module included in the following assemblies:
//
// * installing/install-ocp-operator.adoc
:_mod-docs-content-type: PROCEDURE
[id="install-central-operator_{context}"]
= Installing Central using the Operator method

[role="_abstract"]
The main component of {product-title} is called Central. You can install Central on {ocp} by using the `Central` custom resource. You deploy Central only once, and you can monitor multiple separate clusters by using the same Central installation.

[IMPORTANT]
====
When you install {product-title} for the first time, you must first install the `Central` custom resource because the `SecuredCluster` custom resource installation is dependent on certificates that Central generates.
====

.Prerequisites
* You must be using {ocp} {ocp-supported-version} or later. For information about supported platforms and architecture, see the link:https://access.redhat.com/articles/7045053[{product-title} Support Matrix]. For life cycle support information for {product-title-short}, see the link:https://access.redhat.com/support/policy/updates/rhacs[{product-title} Support Policy].

.Procedure
. On the {ocp} web console, go to the *Operators* -> *Installed Operators* page.
. Select the {product-title} Operator from the list of installed Operators.
. If you have installed the Operator in the recommended namespace, {ocp} lists the project as `rhacs-operator`. Select *Project: rhacs-operator* -> *Create project*.
+
[WARNING]
====
* If you have installed the Operator in a different namespace, {ocp} shows the name of that namespace rather than `rhacs-operator`.
* You must install the {product-title} `Central` custom resource in its own project and not in the `rhacs-operator` and `openshift-operator` projects, or in the project in which you have installed the {product-title} Operator.
====
. Enter the new project name (for example, `stackrox`), and click *Create*. Red{nbsp}Hat recommends that you use `stackrox` as the project name.
. Under the *Provided APIs* section, select *Central*. Click *Create Central*.
. Optional: If you are using declarative configuration, next to *Configure via:*, click *YAML view* and add the information for the declarative configuration, such as shown in the following example:
+
[source,yaml]
----
...
spec:
  central:
    declarativeConfiguration:
      configMaps:
      - name: "<declarative-configs>" <1>
      secrets:
      - name: "<sensitive-declarative-configs>" <2>
...
----
<1> Replace <declarative-configs> with the name of the config maps that you are using.
<2> Replace <sensitive-declarative-configs> with the name of the secrets that you are using.
. Enter a name for your `Central` custom resource and add any labels you want to apply. Otherwise, accept the default values for the available options.
. You can configure available options for Central:
* Central component settings:
+
[cols="1,3",options="header"]
|===
|Setting
|Description

|*Administrator password*
|Secret that contains the administrator password. Use this field if you do not want {product-title-short} to generate a password for you.

|*Exposure*
|Settings for exposing Central by using a route, load balancer, or node port. See the `central.exposure.<parameter>` information in the "Public configuration file" section in "Installing Central services for {product-title-short} on {osp}".

|*User-facing TLS certificate secret*
|Use this field if you want to terminate TLS in Central and serve a custom server certificate.

|*Monitoring*
|Configures the monitoring endpoint for Central. See the `central.exposeMonitoring` parameter in the "Public configuration file" section in "Installing Central services for {product-title-short} on {osp}".

|*Persistence*
a|These fields configure how Central should store its persistent data. Use a persistent volume claim (PVC) for best results, especially if you are using Scanner V4. See the `central.persistence.<parameter>` information in the "Public configuration file" section in "Installing Central services for {product-title-short} on {osp}".

|*Central DB Settings*
|Settings for Central DB, including data persistence. See the `central.db.<parameter>` information in the "Public configuration file" section in "Installing Central services for {product-title-short} on {osp}".

|*Resources*
|Use these fields after consulting the documentation if you need to override the default settings for memory and CPU resources. For more information, see the "Default resource requirements for {product-title-short}" and "Recommended resource requirements for {product-title-short}" sections in the "Installation" chapter.

|*Tolerations*
|Use this parameter to configure Central to run only on specific nodes. See the `central.tolerations` parameter in the "Public configuration file" section in "Installing Central services for {product-title-short} on {osp}".
|===
* *Scanner Component Settings*: Settings for the default scanner, also called the StackRox Scanner. See the "Scanner" table in the "Public configuration file" section in "Installing Central services for {product-title-short} on {osp}".
* *Scanner V4 Component Settings*: Settings for the optional Scanner V4 scanner, available in version 4.4 and later. It is not currently enabled by default. You can enable both the StackRox Scanner and Scanner V4 for concurrent use. See the "Scanner V4" table in the "Public configuration file" section in "Installing Central services for {product-title-short} on {osp}".
+
When Scanner V4 is enabled, you can configure the following options:
+
[cols="1,3",options="header"]
|===
|Setting
|Description

|*Indexer*
| The process that indexes images and creates a report of findings. You can configure replicas and autoscaling, resources, and tolerations. Before changing the default resource values, see the "Scanner V4" sections in the "Default resource requirements for {product-title-short}" and "Recommended resource requirements for {product-title-short}" sections in the "Installation" chapter.

| *Matcher*
| The process that performs vulnerability matching of the report from the indexer against vulnerability data stored in Scanner V4 DB. You can configure replicas and autoscaling, resources, and tolerations. Before changing the default resource values, see the "Scanner V4" sections in the "Default resource requirements for {product-title-short}" and "Recommended resource requirements for {product-title-short}" sections in the "Installation" chapter.

| *DB*
| The database that stores information for Scanner V4, including vulnerability data and index reports. You can configure persistence, resources, and tolerations. If you are using Scanner V4, a persistent volume claim (PVC) is required on Central clusters. A PVC is strongly recommended on secured clusters for best results. Before changing the default resource values, see the "Scanner V4" sections in the "Default resource requirements for {product-title-short}" and "Recommended resource requirements for {product-title-short}" sections in the "Installation" chapter.
|===
* *Egress*: Settings for outgoing network traffic, including whether {product-title-short} should run in online (connected) or offline (disconnected) mode.
* *TLS*: Use this field to add additional trusted root certificate authorities (CAs).
* *Advanced configuration*: You can use these fields to perform the following actions:
** Specify additional image pull secrets
** Add custom environment variables to set for managed pods' containers
** Enable {osp} monitoring
. Click *Create*.

[NOTE]
====
If you are using the cluster-wide proxy, {product-title} uses that proxy configuration to connect to the external services.
====
.Next Steps
. Verify Central installation.
. Optional: Configure Central options.
. Generate an init bundle containing the cluster secrets that allows communication between the `Central` and `SecuredCluster` resources. You need to download this bundle, use it to generate resources on the clusters you want to secure, and securely store it.
. Install secured cluster services on each cluster you want to monitor.
