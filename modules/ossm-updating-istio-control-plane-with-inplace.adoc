// Module included in the following assemblies:
// update/ossm-updating-openshift-service-mesh.adoc

:_mod-docs-content-type: PROCEDURE
[id="ossm-updating-istio-control-plane-with-inplace_{context}"]
= Updating Istio control plane with InPlace strategy

When updating {istio} using the `InPlace` strategy, you can increment the version by only one minor release at a time. To update by more than one minor version, you must increment the version and restart the workloads after each update. Restarting workloads ensures compatibility between the sidecar and control plane versions. The update process is complete after restarting all workloads.

.Prerequisites

* You are logged in to {ocp-product-title} as a user with the `cluster-admin` role.
* You have installed the {SMProductName} Operator, and deployed {istio}.
* You have installed `istioctl` on your local machine.
* You have configured the {istio} control plane to use the `InPlace` update strategy. In this example, the `{istio}` resource named `default` is deployed in the `istio-system` namespace.
* You have installed the {istio} CNI plugin with the desired version. In this example, the `IstioCNI` resource named `default` is deployed in the `istio-cni` namespace.
* You have application workloads running in the cluster. In this example, the `bookinfo` application is deployed in the `bookinfo` namespace.
* You have labeled the bookinfo namespace to enable sidecar injection.

.Procedure

. Change the version in the `{istio}` resource. For example, to update to {istio} `1.24.4`, set the `spec.version` field to `v1.24.4` by running the following command:
+
[source,terminal]
----
$ oc patch istio default -n istio-system --type='merge' -p '{"spec":{"version":"v1.24.4"}}'
----
+
.Example Output
+
[source,yaml]
----
kind: Istio
spec:
  version: v1.24.4
  updateStrategy:
    type: InPlace
----
+
The {SMProductShortName} Operator deploys a new version of the control plane that replaces the old version of the control plane. The sidecars automatically reconnect to the new control plane.

. Confirm that the new version of the control plane is ready by running the following command:
+
[source,terminal]
----
$ oc get istio default
----
+
.Example Output
+
[source,yaml]
----
NAME      REVISIONS   READY   IN USE   ACTIVE REVISION   STATUS    VERSION   AGE
default   1           1       1        default           Healthy   v1.24.4   4m50s
----

. Restart the application workloads so that the new version of the sidecar gets injected by running the following command:
+
[source,terminal]
----
$ oc rollout restart deployment -n bookinfo
----

.Verification

. Verify that the application workloads are ready by running the following command:
+
[source,terminal]
----
$ oc get pods -n bookinfo
----

. Verify that the new version of the sidecar is running by entering the following command:
+
[source,terminal]
----
$ istioctl proxy-status 
----
+
The column `VERSION` should match with the new control plane version.