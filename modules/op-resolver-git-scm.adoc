// This module is included in the following assemblies:
// * create/remote-pipelines-tasks-resolvers.adoc

// // *openshift_pipelines/remote-pipelines-tasks-resolvers.adoc
:_mod-docs-content-type: PROCEDURE
[id="resolver-git-specify_{context}"]
= Specifying a remote pipeline, task, or step action using the Git resolver with the authenticated SCM API

When creating a pipeline run, you can specify a remote pipeline from a Git repository using the authenticated SCM API. When creating a pipeline or a task run, you can specify a remote task from a Git repository. When creating a step within a task, you can reference a remote `StepAction` definition from a Git repository.

.Prerequisites

* If you want to use the authenticated SCM API, you must configure the authenticated Git connection for the Git resolver.

.Procedure

* To specify a remote pipeline, task, or `StepAction` definition from a Git repository, use the following reference format in the `pipelineRef`, `taskRef`, or `step.ref` spec:
+
[source,yaml]
----
# ...
  resolver: git
  params:
  - name: org
    value: <git_organization_name>
  - name: repo
    value: <git_repository_name>
  - name: revision
    value: <branch_name>
  - name: pathInRepo
    value: <path_in_repository>
# ...
----
+
.Supported parameters for the Git resolver
|===
| Parameter | Description | Example value

| `org`
| The organization for the repository, when using the authenticated SCM API.
| `tektoncd`

| `repo`
| The repository name, when using the authenticated SCM API.
| `test-infra`

| `revision`
| The Git revision in the repository. You can specify a branch name, a tag  name, or a commit SHA hash.
| `aeb957601cf41c012be462827053a21a420befca` +
`main` +
`v0.38.2`

| `pathInRepo`
| The path name of the YAML file in the repository.
| `task/golang-build/0.3/golang-build.yaml`
|===
+
[NOTE]
====
To clone and fetch the repository anonymously, use the `url` parameter. To use the authenticated SCM API, use the `repo` parameter. Do not specify the `url` parameter and the `repo` parameter together.
====
+
If the pipeline or task requires additional parameters, specify values for these parameters in the `params` section of the specification of the pipeline, pipeline run, or task run. The `params` section of the `pipelineRef` or `taskRef` specification must contain only the parameters that the resolver supports.

.Examples

The following example pipeline run references a remote pipeline from a Git repository:

[source,yaml]
----
apiVersion: tekton.dev/v1
kind: PipelineRun
metadata:
  name: git-pipeline-reference-demo
spec:
  pipelineRef:
    resolver: git
    params:
    - name: org
      value: tektoncd
    - name: repo
      value: catalog
    - name: revision
      value: main
    - name: pathInRepo
      value: pipeline/simple/0.1/simple.yaml
  params:
  - name: name
    value: "testPipelineRun"
  - name: sample-pipeline-parameter
    value: test
----

The following example pipeline references a remote task from a Git repository:

[source,yaml]
----
apiVersion: tekton.dev/v1
kind: Pipeline
metadata:
  name: pipeline-with-git-task-reference-demo
spec:
  tasks:
  - name: "git-task-reference-demo"
    taskRef:
      resolver: git
      params:
      - name: org
        value: tektoncd
      - name: repo
        value: catalog
      - name: revision
        value: main
      - name: pathInRepo
        value: task/git-clone/0.6/git-clone.yaml
    params:
    - name: sample-task-parameter
      value: test
----

The following example task run references a remote task from a Git repository:

[source,yaml]
----
apiVersion: tekton.dev/v1
kind: TaskRun
metadata:
  name: git-task-reference-demo
spec:
  taskRef:
    resolver: git
    params:
    - name: org
      value: tektoncd
    - name: repo
      value: catalog
    - name: revision
      value: main
    - name: pathInRepo
      value: task/git-clone/0.6/git-clone.yaml
  params:
  - name: sample-task-parameter
    value: test
----

The following example task includes a step that references a `StepAction` definition from a Git repository:

[source,yaml]
----
apiVersion: tekton.dev/v1
kind: Task
metadata:
  name: git-stepaction-reference-demo
spec:
  steps:
  - name: example-step
    ref:
      resolver: git
      - name: org
        value: openshift-pipelines
      - name: repo
        value: tektoncd-catalog
      - name: revision
        value: p
      - name: pathInRepo
        value: stepactions/stepaction-git-clone/0.4.1/stepaction-git-clone.yaml
    params:
    - name: sample-stepaction-parameter
      value: test
----
