// Module included in the following assemblies:
//
// * upgrading/upgrade-operator.adoc
// * cloud_service/upgrade-cloudsvc-operator.adoc
:_mod-docs-content-type: PROCEDURE
[id="operator-upgrade-change-subscription-channel_{context}"]
= Changing the subscription channel

ifeval::["{context}" == "upgrade-cloudsvc-operator"]
:cloud-svc:
endif::[]

[role="_abstract"]
You can change the update channel for the {product-title-short} Operator by using the {ocp} web console or by using the command line. For upgrading to {product-title-short} 4.0 from {product-title-short} 3.74, you must change the update channel.

[IMPORTANT]
====
ifndef::cloud-svc[]
You must change the subscription channel for all clusters where you installed the {product-title-short} Operator, including Central and all secured clusters.
endif::[]
ifdef::cloud-svc[]
You must change the subscription channel for all secured clusters where you installed the {product-title-short} Operator.
endif::[]
====

.Prerequisites
ifndef::cloud-svc[]
* You must verify that you are using the latest {product-title-short} 3.74 Operator and there are no pending manual Operator upgrades.
* You must verify that you backed up your Central database.
endif::[]
* You have access to an {ocp} cluster web console using an account with `cluster-admin` permissions.

== Changing the subscription channel by using the web console
Use the following instructions for changing the subscription channel by using the web console:

.Procedure
. In the *Administrator* perspective of the {ocp} web console, go to *Operators* → *Installed Operators*.
. Click the {product-title-short} Operator.
. Click the *Subscription* tab.
. Click the name of the update channel under *Update Channel*.
. Select *stable*, then click *Save*.
. For subscriptions with an *Automatic* approval strategy, the update begins automatically. Go back to the *Operators* → *Installed Operators* page to monitor the progress of the update. When complete, the status changes to *Succeeded* and *Up to date*.
+
For subscriptions with a *Manual* approval strategy, you can manually approve the update from the *Subscription* tab.

== Changing the subscription channel by using command line
Use the following instructions for changing the subscription channel by using command line:

.Procedure
* Run the following command to change the subscription channel to `stable`:
+
[source,terminal]
----
$ oc -n rhacs-operator \ <1>
  patch subscriptions.operators.coreos.com rhacs-operator \
  --type=merge --patch='{ "spec": { "channel": "stable" }}'
----
<1> If you use Kubernetes, enter `kubectl` instead of `oc`.

During the update, the {product-title-short} Operator provisions a new deployment called `central-db` and your data begins migrating. It takes around 30 minutes and happens only after you upgrade.

ifeval::["{context}" == "upgrade-cloudsvc-operator"]
:!cloud-svc:
endif::[]
