// Module included in the following assemblies:
//
// * logging/efk-logging-deploy.adoc

[id="efk-logging-deploy-about-{context}"]
= About deploying cluster logging

{product-title} cluster logging is designed to be used with the default configuration that should support most {product-title} environments. 

The installation instructions that follow include a template Cluster Logging Custom Resource, which you can use to configure your cluster logging
deployment.

If you want to use the default cluster logging install, you can use the template directly. 

If you want to customize your deployment, make changes to that template as needed.

[IMPORTANT]
====
If you change the default Cluster Logging Custom Resource, you must set your Cluster Logging Custom Resource to `Unmanaged`. In an unmanaged deployment the Cluster Logging Operator does not respond to changes in the CR after installation and does not receive updates until the cluster logging is placed back into a managed state. For more information, see *Changing cluster logging management state*.
====

.Cluster Logging Custom Resource template
[source,yaml]
----
apiVersion: "logging.openshift.io/v1alpha1"
kind: "ClusterLogging"
metadata:
  name: "instance"  <1>
  namespace: "openshift-logging"
spec:
  managementState: "Managed"  <2>
  logStore:
    type: "elasticsearch"  <3>
    elasticsearch:
      nodeCount: 3
      storage: {}
      redundancyPolicy: "SingleRedundancy"
  visualization:
    type: "kibana"  <4>
    kibana:
      replicas: 1
      resources: 
        limits:
          cpu:
       memory:
         requests:
          cpu:
          memory:
  curation:
    type: "curator"  <5>
    curator:
      schedule: "30 3 * * *"
  collection:
    logs:
      type: "fluentd"  <6>
      fluentd: {}
----
<1> The name of the Cluster Logging Custom Resource.
<2> The cluster logging management state. 
+
If you change the default Cluster Logging Custom Resource, you must set this to `Unmanaged`. 
<3> Settings for configuring Elasticsearch. Using the CR, you can configure: 
* The number of Elasticsearch nodes.
* The Elasticsearch shard replication policy.
* Persistent storage for Elasticsearch
+
For more information, see *Configuring Elasticsearch*.
<4> Settings for configuring Kibana. Using the CR, you can: 
* Scale Kibana for redundancy. 
* Configure the CPU and memory for your Kibana nodes. 
+
For more information, see *Configuring Kibana*.
<5> Settings for configuring Curator. Using the CR, you can set the Curator schedule. For more information, see *Configuring Curator*.
<6> Settings for configuring Fluentd. Using the CR, you can configure Fluentd CPU and memory limits. For more information, see *Configuring Fluentd*.

[NOTE]
====
The default cluster logging configuration should support a wide array of environments. Review the topics on tuning and 
configuring the cluster logging components for information on modifications you can make to your cluster logging cluster during and after installation.
==== 

