// Module included in the following assembly:
//
// * argocd_instance/gitops-configuring-imagepullpolicy.adoc

:_mod-docs-content-type: CONCEPT
[id="gitops-configuring-imagepullpolicy_{context}"]
= Configuring ImagePullPolicy

[role="_abstract"]
The {gitops-shortname} Operator supports configurable `imagePullPolicy` settings at multiple levels, providing administrators with flexible control over how container images are pulled for Argo CD components.

The `imagePullPolicy` configuration follows a hierarchical precedence system, where the most specific configuration takes priority:

* `Instance-level policy` — Defined in the Argo CD CR by using the `spec.imagePullPolicy` field.
* `Global-level policy` — Defined through the `IMAGE_PULL_POLICY` environment variable in the {gitops-shortname} Operators `Subscription`.
* `Default policy` — `IfNotPresent` is used when neither of the earlier configurations are specified.

[cols="1,3", options="header"]
|===
| Value | Description

| `Always`
| Always pull the image.

| `IfNotPresent`
| Pull the image only if it is not present locally.

| `Never`
| Never pull the image.
|===

You can define a global image pull policy for all Argo CD instances managed by the Operator by setting the `IMAGE_PULL_POLICY` environment variable in the Operator's `Subscription`. For example:

[source,yaml]
----
apiVersion: operators.coreos.com/v1alpha1
kind: Subscription
metadata:
  name: openshift-gitops-operator
spec:
  config:
    env:
      - name: IMAGE_PULL_POLICY
        value: "Always"
----
An instance-level configuration overrides the Operator-level policy and applies the configuration only to the specific instance defined in the CR.

The following example shows how to configure `imagePullPolicy` for all the components in an Argo CD instance.

[source,yaml]
----
apiVersion: argoproj.io/v1beta1
kind: ArgoCD
metadata:
  name: argocd
  namespace: argocd
spec:
  imagePullPolicy: IfNotPresent
----

The following example shows how to define `imagePullPolicy` for all the components in a `GitOpsService` instance.

[source,yaml]
----
apiVersion: pipelines.openshift.io/v1alpha1
kind: GitOpsService
metadata:
  name: gitops-service
  namespace: openshift-gitops
spec:
  imagePullPolicy: Always
----

The following example shows how to set `imagePullPolicy` for all the components in a `RolloutsManager` instance.

[source,yaml]
----
apiVersion: argoproj.io/v1alpha1
kind: RolloutManager
metadata:
  name: argo-rollout
  labels:
    example: basic
spec:
  imagePullPolicy: Always
----

By configuring the `imagePullPolicy` at an appropriate level, you can control how frequently container images are updated for your {gitops-shortname} components.