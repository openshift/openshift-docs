// Module included in the following assemblies:
//
// * upgrading/upgrade-helm.adoc
:_mod-docs-content-type: PROCEDURE
[id="upgrade-crd-helm{context}"]
= Preparing the custom resource definition for upgrade

[role="_abstract"]
If upgrading from version 4.6 or 4.7, you must prepare the `SecurityPolicy` custom resource definition (CRD) to avoid upgrade errors.

.Procedure
* Apply Helm-specific labels and annotations to the CRD by running the following commands:

[source,terminal]
----
$ oc annotate crd/securitypolicies.config.stackrox.io meta.helm.sh/release-name=stackrox-central-services <1>
----
<1> If you use Kubernetes, enter `kubectl` instead of `oc`. Adjust the value of the `release-name` from the above default of `stackrox-central-services` as needed.

[source,terminal]
----
$ oc annotate crd/securitypolicies.config.stackrox.io meta.helm.sh/release-namespace=stackrox <1>
----
<1> If you use Kubernetes, enter `kubectl` instead of `oc`. Adjust the value of the `release-namespace` from the above default of `stackrox` as needed.

[source,terminal]
----
$ oc label crd/securitypolicies.config.stackrox.io app.kubernetes.io/managed-by=Helm <1>
----
<1> If you use Kubernetes, enter `kubectl` instead of `oc`.
