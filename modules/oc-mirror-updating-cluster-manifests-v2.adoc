// Module included in the following assemblies:
//
// * installing/disconnected_install/installing-mirroring-disconnected-v2.adoc
// * updating/updating_a_cluster/updating_disconnected_cluster/mirroring-image-repository.adoc

:_mod-docs-content-type: PROCEDURE
[id="oc-mirror-updating-cluster-manifests-v2_{context}"]
= Configuring your cluster to use the resources generated by v2

After you have mirrored your image set to the mirror registry, you must apply the generated `ImageDigestMirrorSet` (IDMS), `ImageTagMirrorSet` (ITMS), `CatalogSource`, `UpdateService` into the cluster. 

[IMPORTANT]
====
Compared to ICSP generation of oc-mirror v1, IDMS and ITMS files generated span the full scope of the image set. Consequently, in case of incremental mirroring, where only a subset of images (the new ones) are mirrored, the IDMS and ITMS files will cover the complete image set.
====
 
.Prerequisites

* You have access to the cluster as a user with the `cluster-admin` role.

.Procedure

. Log in to the OpenShift CLI as a user with the `cluster-admin` role.

. Apply the YAML files from the results directory to the cluster by running the following command:
+
[source,terminal]
----
$ oc apply -f <path_to_oc-mirror_workspace>/working-dir/cluster-resources
----

.Verification

. Verify that the `ImageDigestMirrorSet` resources were successfully installed by running the following command:
+
[source,terminal]
----
$ oc get imagedigestmirrorset
----

. Verify that the `ImageTagMirrorSet` resources were successfully installed by running the following command:
+
[source,terminal]
----
$ oc get imagetagmirrorset
----

. Verify that the `CatalogSource` resources were successfully installed by running the following command:
+
[source,terminal]
----
$ oc get catalogsource -n openshift-marketplace
----