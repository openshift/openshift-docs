// Module included in the following assemblies:
//
// * upgrading/upgrade-helm.adoc
// * cloud_service/upgrading-cloud/upgrade-cloudsvc-helm.adoc
:_mod-docs-content-type: PROCEDURE
[id="upgrade-helm-chart_{context}"]
= Running the Helm upgrade command

ifeval::["{context}" == "upgrade-cloudsvc-helm"]
:cloud-svc:
endif::[]

[role="_abstract"]
You can use the `helm upgrade` command to update {rh-rhacs-first}.

.Prerequisites
* You must have access to the `values-private.yaml` configuration file that you have used to install {rh-rhacs-first}. Otherwise, you must generate the `values-private.yaml` configuration file containing root certificates before proceeding with these commands.

.Procedure
* Run the helm upgrade command and specify the configuration files by using the `-f` option:

ifndef::cloud-svc[]
+
[source,terminal]
----
$ helm upgrade -n stackrox stackrox-central-services \
  rhacs/central-services --version <current-rhacs-version> \// <1>
  -f values-private.yaml \
  --set central.db.password.generate=true \
  --set central.db.serviceTLS.generate=true \
  --set central.db.persistence.persistentVolumeClaim.createClaim=true
----
<1> Use the `-f` option to specify the paths for your YAML configuration files.
endif::cloud-svc[]

+
[source,terminal]
----
$ helm upgrade -n stackrox stackrox-secured-cluster-services \
  rhacs/secured-cluster-services --version <current-rhacs-version> \// <1>
  -f values-private.yaml
----
<1> Use the `-f` option to specify the paths for your YAML configuration files.

ifndef::cloud-svc[]
[NOTE]
====
You might use the `--reuse-values` option to preserve the previously configured Helm values during the upgrade. If you do that, you must turn off `central-db` creation before you upgrade to the next version.

See the following command example:

[source,terminal]
----
$ helm upgrade -n stackrox stackrox-central-services \
  rhacs/central-services --version <current-rhacs-version> --reuse-values \
  -f values-private.yaml \
  --set central.db.password.generate=false \
  --set central.db.serviceTLS.generate=false \
  --set central.db.persistence.persistentVolumeClaim.createClaim=false
----
====
endif::cloud-svc[]

ifeval::["{context}" == "upgrade-cloudsvc-helm"]
:!cloud-svc:
endif::[]