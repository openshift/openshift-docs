// This module is included in the following assembly:
//
// * authenticating/authenticating-build-images.adoc

:_mod-docs-content-type: PROCEDURE
[id="ob-authentication-to-container-registries_{context}"]
= Authentication to container registries

[role="_abstract"] 

To push images to a private container registry, you must define a secret in the respective namespace and then reference it in your `Build` custom resource (CR).

.Procedure
. Run the following command to generate a secret:
+
[source,terminal]
----
$ oc --namespace <namespace> create secret docker-registry <container_registry_secret_name> \
  --docker-server=<registry_host> \ <1>
  --docker-username=<username> \ <2>
  --docker-password=<password> \ <3>
  --docker-email=<email_address>
----
<1> The `<registry_host>` value denotes the URL in this format `\https://<registry_server>/<registry_host>`.
<2> The `<username>` value is the user ID.
<3> The `<password>` value can be your container registry password or an access token.

. Run the following command to annotate the secret:
+
[source,terminal]
----
$ oc --namespace <namespace> annotate secrets <container_registry_secret_name> build.shipwright.io/referenced.secret='true'
----

. Set the value of the `spec.output.pushSecret` field to the secret name in your `Build` CR:
+
[source,yaml]
----
apiVersion: shipwright.io/v1beta1
kind: Build
metadata:
  name: buildah-golang-build
  # ...
  output:
    image: <path_to_image>
    pushSecret: <container_registry_secret_name>
----

