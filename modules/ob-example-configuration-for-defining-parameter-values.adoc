// This module is included in the following assembly:
//
// * configuring/configuring-openshift-builds.adoc

:_mod-docs-content-type: REFERENCE
[id="example-configuration-for-defining-parameter-values_{context}"]
= Example configuration for defining parameter values

The following examples show how to define parameters in a build strategy and assign values to those parameters by using a `Build` CR. You can also assign a value to a parameter of the type `array` in your `Build` CR.

.Example: Defining parameters in a `ClusterBuildStrategy` CR
The following example shows a `ClusterBuildStrategy` CR that defines several parameters:

[source,yaml]
----
apiVersion: shipwright.io/v1beta1
kind: ClusterBuildStrategy
metadata:
  name: buildah
spec:
  parameters:
    - name: build-args
      description: "The values for the args in the Dockerfile. Values must be in the format KEY=VALUE."
      type: array
      defaults: []
    # ...
    - name: storage-driver
      description: "The storage driver to use, such as 'overlay' or 'vfs'."
      type: string
      default: "vfs"
# ...
steps:
# ...
----

.Example: Assigning values to parameters in a `Build` CR
The above `ClusterBuildStrategy` CR defines a `storage-driver` parameter and you can specify the value of the `storage-driver` parameter in your `Build` CR, as shown in the following example:

[source,yaml]
----
apiVersion: shipwright.io/v1beta1
kind: Build
metadata:
  name: <your_build>
  namespace: <your_namespace>
spec:
  paramValues:
  - name: storage-driver
    value: "overlay"
  strategy:
    name: buildah
    kind: ClusterBuildStrategy
  output:
  # ...
----

.Example: Creating a `ConfigMap` CR to control a parameter centrally
If you want to use the `storage-driver` parameter for multiple builds and control its usage centrally, then you can create a `ConfigMap` CR, as shown in the following example:

[source,yaml]
----
apiVersion: v1
kind: ConfigMap
metadata:
  name: buildah-configuration
  namespace: <your_namespace>
data:
  storage-driver: overlay
----

You can use the created `ConfigMap` CR as a parameter value in your `Build` CR, as shown in the following example:

[source,yaml]
----
apiVersion: shipwright.io/v1beta1
kind: Build
metadata:
  name: <your_build>
  namespace: <your_namespace>
spec:
  paramValues:
  - name: storage-driver
    configMapValue:
      name: buildah-configuration
      key: storage-driver
  strategy:
    name: buildah
    kind: ClusterBuildStrategy
  output:
  # ...
----

.Example: Assigning value to a parameter of the type `array` in a `Build` CR
You can assign value to a parameter of the type `array`. If you use the `buildah` strategy, you can define a `registries-search` parameter to search images in specific registries. The following example shows how you can assign a value to the `registries-search` array parameter:

[source,yaml]
----
apiVersion: shipwright.io/v1beta1
kind: Build
metadata:
  name: <your_build>
  namespace: <your_namespace>
spec:
  paramValues:
  - name: storage-driver
    configMapValue:
      name: buildah-configuration
      key: storage-driver
  - name: registries-search
    values:
    - value: registry.redhat.io
  strategy:
    name: buildah
    kind: ClusterBuildStrategy
  output:
  # ...
----

.Example: Referencing a secret in a `Build` CR
You can reference a secret for a `registries-block` array parameter, as shown in the following example:

[source,yaml]
----
apiVersion: shipwright.io/v1beta1
kind: Build
metadata:
  name: <your_build>
  namespace: <your_namespace>
spec:
  paramValues:
  - name: storage-driver
    configMapValue:
      name: buildah-configuration
      key: storage-driver
  - name: registries-block
    values:
    - secretValue: <1>
        name: registry-configuration
        key: reg-blocked
  strategy:
    name: buildah
    kind: ClusterBuildStrategy
  output:
  # ...
----
<1> The value references a secret.
