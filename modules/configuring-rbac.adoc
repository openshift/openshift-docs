// Module is included in the following assemblies:
//
// * managing_cluster_configuration/managing-openshift-cluster-configuration.adoc

:_mod-docs-content-type: PROCEDURE
[id="configuring-rbac_{context}"]
= Configuring RBAC

[role="_abstract"]
You must configure RBAC to provide the sufficient access to the users to work with the default instance.

The `defaultPolicy` of the instance is an empty string, which means no role is assigned automatically. Though users can log into the instance, they have no permissions to view anything or perform any tasks in the Argo CD UI or CLI.

The instance includes the following two groups:

* `system:cluster-admins`: The group only applies to the temporary `kube-admin` credentials and can be ignored.
* `cluster-admins`: You can add your user to this group to enable them to perform tasks, such as deploying an application, in the Argo CD web console.

[NOTE]
====
_Restrict default permissions:_

Ensure that you always use either an empty string or a deny-all type of role for the `defaultPolicy` parameter because permissions granted in it cannot be revoked. Hence, it is not recommended to set the `defaultPolicy` parameter in a way that grants permissions.
====

.Prerequisite

* You have login credentials to access the {OCP} cluster with `cluster-admin` privileges.
* You have installed the link:https://docs.redhat.com/en/documentation/openshift_container_platform/latest/html/cli_tools/openshift-cli-oc[`oc` CLI].

.Procedure

. View the Operator-configured RBAC for the default instance:
+
[source,terminal]
----
$ oc get argocd openshift-gitops -n openshift-gitops -o=jsonpath='{.spec.rbac}'
----
.Output
+
[source,json]
----
{"defaultPolicy":"","policy":"g, system:cluster-admins, role:admin\ng, cluster-admins, role:admin\n","scopes":"[groups]"}
----

. Check if the `cluster-admins` group exists:
+
[source,terminal]
----
$ oc get groups
----

. Perform one of the following steps:
+
* If the group does not exist, create it and add your user to it:
+
[source,terminal]
----
$ oc adm groups new cluster-admins <user>
----
+
where:

<user>:: Denotes the user that you want to add to the group.
+
.Example output
+
[source,terminal]
----
group.user.openshift.io/cluster-admins created
----

* If the group exists, check if your user is part of it in the output of the previously run `oc get groups` command. If your user is not in the group, add your user to the group: 
+
[source,terminal]
----
$ oc adm groups add-users cluster-admins <user>
----
+
where:

<user>:: Denotes the user that you want to add to the group.
+
.Example output
+
[source,terminal]
----
group.user.openshift.io/cluster-admins added: "<user>"
----


.Verification

* Validate that the group `cluster-admins` exists and that your user is part of it:
+
[source,terminal]
----
$ oc get groups cluster-admins
----
+
The output shows the `cluster-admins` group with your user assigned to it.


[IMPORTANT]
====
After creating or editing the `cluster-admins` group, ensure you log out of the Argo CD web console and then log back in again so that the group becomes associated with your user. Check the **User Info** page to validate that your user is part of the `cluster-admins` group within Argo CD.
====
