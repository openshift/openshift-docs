// Module included in the following assemblies:
//
// * argocd-agent-architecture-overview/gitops-architecture-argocd-agent-namespaces.adoc

:_mod-docs-content-type: CONCEPT
[id="gitops-architecture-argocd-agent-namespaces_{context}"]
= Application Management Across Namespaces

The Argo CD Agent architecture on the control plane cluster uses the _Applications in any namespace_ feature to separate the Application resources that originate from individual workload clusters. This feature enables the control plane Argo CD instance to reconcile Applications that are defined outside its own namespace while maintaining strict isolation between workload clusters.

Each workload cluster is assigned a dedicated namespace on the control plane cluster. These namespaces act as `source namespaces` for the control plane Argo CD instance, and each contains only the Applications for a single workload cluster.

For a control plane cluster with three workload clusters (`w1`, `w2`, and `w3`), the namespaces are organized as follows:

* Namespace `argocd`:
** Argo CD and Argo CD Agent instances

* Namespace `argocd-w1`:
** Argo CD Application `w1-a`
** Argo CD Application `w1-b`

* Namespace `argocd-w2`:
** Argo CD Application `w2-a`
** Argo CD Application `w2-b`

* Namespace `argocd-w3`:
** Argo CD Application `w3-a`
** Argo CD Application `w3-b`

image::580_OpenShift_GitOps_Argo_CD_Agent_Apps_in_any_Namespaces.png[A control plane cluster and 3 workload clusters]

The `argocd-w1`, `argocd-w2`, and `argocd-w3` namespaces are treated as source namespaces. Although these namespaces are outside the main Argo CD installation namespace (`argocd`), the control plane Argo CD instance still discovers and reconciles the Applications stored within them.

Applications in each `argocd-w*` namespace are scoped to a single cluster. For example, no Applications from workload cluster `w2` are defined in the `argocd-w3` namespace.

* Workload cluster `w1`, namespace `argocd`:
** Argo CD and Argo CD Agent instances
** Argo CD Application `w1-a`
** Argo CD Application `w1-b`

* Workload cluster `w2`, namespace `argocd`:
** Argo CD and Argo CD Agent instances
** Argo CD Application `w2-a`
** Argo CD Application `w2-b`

* Workload cluster `w3`, namespace `argocd`:
** Argo CD and Argo CD Agent instances
** Argo CD Application `w3-a`
** Argo CD Application `w3-b`

Each workload cluster maintains its own `argocd` namespace that hosts its local Argo CD and Argo CD Agent instances. The Applications defined in the control plane namespace `argocd-w1` are synchronized to the `argocd` namespace on workload cluster `w1`, and the same pattern applies to workload clusters `w2` and `w3`.

[NOTE]
====
The namespace names used in this layout are user-defined. The Argo CD Agent architecture does not require a specific naming convention.
====

To enable the control plane Argo CD instance to discover and reconcile Applications from these workload-specific namespaces, configure the `sourceNamespaces` field in the Argo CD CR:

[source,yaml]
----
apiVersion: argoproj.io/v1beta1
kind: ArgoCD
metadata:
  name: argo-cd
spec:
  sourceNamespaces:
    - argocd-w1
    - argocd-w2
    - argocd-w3
  # (...)
----

With this configuration, the control plane Argo CD instance monitors and reconciles the Applications from each source namespace as part of the overall multi-cluster environment.