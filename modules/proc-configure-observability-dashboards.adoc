// Module included in the following assemblies:
//
// *observability/observability.adoc

:_mod-docs-content-type: PROCEDURE
[id="configure-observability-dashboards_{context}"]
= Configuring observability dashboards and alerts
//TODO needs broken into smaller modules: reference, procedure, procedure, concept

[role="_abstract"]
{prodname} provides starting points for monitoring your {prodname} deployment by using example dashboards and alerts, which are ready-to-use and customizable to fit your environment.

//TODO separate reference module
The {prodname} example dashboards are uploaded to the https://grafana.com/grafana/dashboards/[Grafana dashboards website]. You can import the following dashboards into your Grafana deployment on {ocp}:

.{prodname} example dashboards in Grafana
[%header,cols=2*]
|===
|Name
|Dashboard ID
|https://grafana.com/grafana/dashboards/21538-app-developer-dashboard/[App Developer Dashboard]
|21538
|https://grafana.com/grafana/dashboards/20982-platform-engineer-dashboard/[Platform Engineer Dashboard]
|20982
|https://grafana.com/grafana/dashboards/20981-business-user-dashboard/[Business User Dashboard]
|20981
|===

[IMPORTANT]
====
You must perform these steps on each {ocp} cluster that you want to use {prodname} on.
====

.Prerequisites

* You configured Observability.

.Procedure
//TODO procedure 1
. Importing dashboards in Grafana::

.. Click *Dashboards* > *New* > *Import*, and use one of the following options:

* Upload a dashboard JSON file.
* Enter a dashboard ID obtained from the https://grafana.com/grafana/dashboards/[Grafana dashboards website].
* Enter JSON content directly.
+
For more information, see the https://grafana.com/docs/grafana/latest/dashboards/build-dashboards/import-dashboards/[Grafana documentation on how to import dashboards].

//TODO procedure 2
. Importing dashboards automatically in {ocp}::

.. You can automate dashboard provisioning in Grafana by adding JSON files to a `ConfigMap`, which must be mounted at `/etc/grafana/provisioning/dashboards`.
+
[TIP]
====
Alternatively, to avoid adding `ConfigMap` volume mounts in your Grafana deployment, you can use a `GrafanaDashboard` resource to reference a `ConfigMap`. For an example, see https://grafana.github.io/grafana-operator/docs/examples/dashboard_from_configmap/readme/[Dashboard from ConfigMap in the Grafana documentation].
====
+
Data sources are configured as template variables, automatically integrating with your existing data sources. The metrics for these dashboards are sourced from Prometheus.
+
[NOTE]
====
For some example dashboard panels to work correctly, HTTPRoutes in {prodname} must include a `service` and `deployment` label with a value that matches the name of the service and deployment being routed to, for example, `service=my-app` and `deployment=my-app`. This allows low-level Istio and Envoy metrics to be joined with Gateway API state metrics.
====
//TODO concept module
. Configuring Prometheus alerts

.. You can integrate the https://github.com/Kuadrant/kuadrant-operator/tree/main/examples/alerts[Kuadrant example alerts] into Prometheus as `PrometheusRule` resources, and then adjust the alert thresholds to suit your specific operational needs.

.. Service Level Objective (SLO) alerts generated by using the https://github.com/slok/sloth[Sloth GitHub project] are also included. You can use these alerts to integrate with the https://grafana.com/grafana/dashboards/14348-slo-detail/[SLO Grafana dashboard], which uses generated labels to comprehensively overview your SLOs.

.. For details on how to configure Prometheus alerts, see the https://docs.redhat.com/en/documentation/openshift_container_platform/latest/html/monitoring/managing-alerts#managing-alerting-rules-for-user-defined-projects_managing-alerts-as-an-administrator[OpenShift documentation on managing alerting rules].
