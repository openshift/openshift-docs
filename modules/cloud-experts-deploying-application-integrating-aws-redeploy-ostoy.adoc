// Module included in the following assemblies:
//
// * cloud_experts_tutorials/cloud-experts-deploying-application/cloud-experts-deploying-application-integrating-aws.adoc

:_mod-docs-content-type: PROCEDURE
[id="cloud-experts-deploying-application-integrating-aws-redeploy-ostoy_{context}"]
= Redeploying the OSToy app with the new service account

[role="_abstract"]
After creating the new service account, you need to redeploy the OSToy app.

.Procedure
. Run your pod with the service account you created.
. Deploy the microservice by running the following command:
+
[source,terminal]
----
$ - oc apply -f https://raw.githubusercontent.com/openshift-cs/rosaworkshop/master/rosa-workshop/ostoy/yaml/ostoy-microservice-deployment.yaml
----
+
. Deploy the `ostoy-frontend` by running the following command:
+
[source,terminal]
----
$ - oc apply -f https://raw.githubusercontent.com/openshift-cs/rosaworkshop/master/rosa-workshop/ostoy/yaml/ostoy-frontend-deployment.yaml
----
+
. Patch the `ostoy-frontend` deployment by running the following command:
+
[source,terminal]
----
$ oc patch deploy ostoy-frontend -n ${OSTOY_NAMESPACE} --type=merge --patch '{"spec": {"template": {"spec":{"serviceAccount":"ostoy-sa"}}}}'
----
+
**Example output**
+
[source,terminal]
----
spec:
  # Uncomment to use with ACK portion of the workshop
  # If you chose a different service account name please replace it.
  serviceAccount: ostoy-sa
  containers:
  - name: ostoy-frontend
    image: quay.io/ostoylab/ostoy-frontend:1.6.0
    imagePullPolicy: IfNotPresent
[...]
----
+
. Wait for the pod to update.