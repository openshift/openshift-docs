// Module included in the following assemblies:
//
// * nodes/nodes-scheduler-node-names.adoc

[id="nodes-scheduler-node-name-configuring_{context}"]
= Configuring the Pod Node Constraints admission controller to use names in {product-title}

You can configure the Pod Node Constraints admission controller to ensure that pods are only placed onto nodes with a specific name.

.Prerequisites

Ensure you have the desired labels
ifdef::openshift-dedicated[]
(request changes by opening a support case on the
https://access.redhat.com/support/[Red Hat Customer Portal])
endif::openshift-dedicated[] 
and node selector set up in your environment.

For example, make sure that your pod configuration features the `nodeName`
value indicating the desired label:

[source,yaml]
----
apiVersion: v1
kind: Pod
spec:
  nodeName: <value>
----

.Procedure

To configure the Pod Node Constraints admission controller:

. Create a file containing the admission controller information:
+
[source,yaml]
----
podNodeConstraintsPluginConfig:
 clusterDefaultNodeSelector: name-of-node-selector
 namespace1: name-of-node-selector
 namespace2: name-of-node-selector
----
+
For example:
+
[source,yaml]
----
podNodeConstraintsPluginConfig:
 clusterDefaultNodeSelector: ns1
 ns1: region=west,env=test,infra=fedora,os=fedora
----

. Edit the `kubeapiserver` to add an `admissionPluginConfig`:
+
----
oc edit kubeapiserver
----
+
[source,yaml]
----
apiVersion: autoscaling.openshift.io <1>
kind: KubeAPIServer

....

unsupportedConfigOverrides:
  admissionPluginConfig:
    enabledPlugins:
    - name: PodNodeConstraints <2>
      path: podnodeconstraints.yaml
----
<1> Specify the `autoscaling.openshift.io` API.
<2> Add the `PodNodeConstraints` admission controller and the path to the controller file you created. 