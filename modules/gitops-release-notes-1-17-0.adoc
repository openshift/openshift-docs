// Module included in the following assembly:
//
// * release_notes/gitops-release-notes-1-17-0.adoc

:_mod-docs-content-type: REFERENCE

[id="gitops-release-notes-1-17-0_{context}"]
= Release notes for {gitops-title} 1.17.0

{gitops-title} 1.17.0 is available on {OCP} 4.12, 4.14, 4.15, 4.16, 4.17, 4.18, and 4.19.

[id="errata-updates-1-17-0_{context}"]
== Errata updates

RHEA-2025:13453 - {gitops-title} 1.17.0 security update advisory::
Issued: 2025-08-07
+
The list of enhancements that are included in this release are documented in the following advisory:
+
* link:https://access.redhat.com/errata/RHEA-2025:13453[RHEA-2025:13453]

If you have installed the {gitops-title} Operator in the default namespace, run the following command to view the container images in this release:

[source,terminal]
----
$ oc describe deployment gitops-operator-controller-manager -n openshift-gitops-operator
----

[id="new-features-1-17-0_{context}"]
== New features

Extended JSON logging support to additional Argo CD components::
With this update, the `logFormat: json` setting in the Argo CD custom resource (CR) is supported by the `ApplicationSet` controller and `Notifications` controller. Previously, JSON logging was limited to components such as the API server, repo server, and application controller. By default, each Argo CD component continues to use its upstream logging format, which at the time of this release is `text`. You can explicitly configure the logging format for each supported component by setting `logFormat: json` (or `text`) in the Argo CD CR.
+
[NOTE]
====
Redis and Dex do not support configurable JSON logging and are unaffected by this change.
====
+
link:https://issues.redhat.com/browse/GITOPS-6668[GITOPS-6668]

Argo CD Agent (Technology Preview)::
With this update, a productized container image of the Argo CD Agent is available, along with a custom property in the Argo CD custom resource (CR) to enable the principal component in the hub cluster. For more information, see link:https://argocd-agent.readthedocs.io/latest/[Overview of the Argo CD Agent].
+
--
:FeatureName: The {gitops-shortname} Argo CD Agent feature
include::snippets/technology-preview.adoc[]
--
+
link:https://issues.redhat.com/browse/GITOPS-5016[GITOPS-5016]

Read-only root filesystem for Argo CD components::
With this update, core Argo components, such as, Application Controller, Server, Repo Server, Notification Controller, Redis, Dex, and the Argo CD exporter component run with a read-only root filesystem by default. This change enhances security and aligns the operator configuration with upstream Argo CD standards.
+
link:https://issues.redhat.com/browse/GITOPS-6239[GITOPS-6239]

[id="fixed-issues-1-17-0_{context}"]
== Fixed issues

Fixed replica count for `redis-ha-haproxy` to ensure high availability::
Before this update, an error in configuration caused the `redis-ha-haproxy` deployment to use only one replica. This resulted in access issues with the Redis cache. With this update, the number of `redis-ha-haproxy` replicas matches the High Availability (HA) configuration. Three replicas are created by default, which improves Redis cache availability and resilience.
+
link:https://issues.redhat.com/browse/GITOPS-6806[GITOPS-6806]

Fixed invalid Route hostnames for Argo CD webhook server::
Before this update, enabling `applicationSet.webhookServer.route` caused an invalid route error due to the default hostname exceeding the Kubernetes label value limit. This issue resulted in application deployment failures. With this update, the default hostname is generated using the Argo CD instance name and namespace, ensuring it stays within the valid length limits. This fix resolves the error and allows successful creation of the webhook server route.
+
link:https://issues.redhat.com/browse/GITOPS-6707[GITOPS-6707]

Support added for repeated flags in `extraCommandArgs`::
Before this update, the `extraCommandArgs` field in the Argo CD custom resource did not support using the same flag multiple times with different values. With this update, repeated flags are correctly handled. Multiple instances of flags can be specified, and all values are included in the controller pod configuration.
+
link:https://issues.redhat.com/browse/GITOPS-6703[GITOPS-6703]

Fixed UI error when editing HTTP-based repository credentials::
Before this update, you could not edit HTTP repository credentials from the Argo CD web UI. This limited the ability to manage HTTP-based repository configurations through the web interface. With this update, URL validation logic is enhanced, and you can edit HTTP repository credentials in the web UI.
+
link:https://issues.redhat.com/browse/GITOPS-5969[GITOPS-5969]

[id="deprecated-features-1-17-0_{context}"]
== Deprecated and removed features

Deprecation of Keycloak support in {gitops-title}::
In {gitops-title} 1.17, the support for Keycloak-based authentication is deprecated. When Keycloak is configured for single sign-on (SSO), deprecation warnings appear in the logs. Dex is the default and recommended authentication provider. It integrates with the OpenShift OAuth server and supports authentication based on OpenShift users and groups. You must migrate to Dex-based authentication for continued support. To continue using Keycloak, you must deploy and manage the link:https://docs.redhat.com/en/documentation/red_hat_build_of_keycloak/26.0/html/operator_guide/installation-[Red Hat Build of Keycloak (RHBK)] instance and manually configure the integration in the Argo CD custom resource. 
+
link:https://issues.redhat.com/browse/GITOPS-7070[GITOPS-7070]

Removed support for deprecated `initialRepositories` and `repositoryCredentials` fields::
In {gitops-title} 1.17, support for the deprecated `initialRepositories` and `repositoryCredentials` fields is removed. If these fields are used, Argo CD logs a warning indicating their removal. You can add repositories and repository credentials manually by using the Argo CD CLI or the Argo CD dashboard.
+
link:https://issues.redhat.com/browse/GITOPS-5961[GITOPS-5961]

[id="known-issues-1-17-0_{context}"]
== Known Issues

SSH-based Git repository connections fail in FIPS mode::
There is currently a known issue with clusters in FIPS mode where SSH based git repository connections fail because a non-FIPS-compliant algorithm is used for SSH connections. The repository server pod fails with the `panic: curve25519: internal error: scalarBaseMult was not 32 bytes` error message.
+
--
Workaround: Use an HTTPS-based Git repository connection instead of SSH on a FIPS-enabled cluster.
--
+
--
link:https://issues.redhat.com/browse/GITOPS-7424[GITOPS-7424]
--

[id="breaking-changes-1-17-0_{context}"]
== Breaking changes

Upgrade to Argo CD 3.0:::
This release introduces an upgrade to the Argo CD component, transitioning from v2.14 to v3.0. This is a minor upgrade that introduces a list of breaking changes in Argo CD v3.0, with solutions provided in the following section. For more information, see link:https://argo-cd.readthedocs.io/en/stable/operator-manual/upgrading/2.14-3.0/[Upgrading Argo CD from v2.0 to v3.0].

RBAC behavior changes with Argo CD 3.0 and Dex SSO::
Argo CD 3.0 introduces a change in RBAC handling when using Dex for single sign-on (SSO). The RBAC system uses the `federated_claims.user_id` field instead of the previously encoded sub claim. This change affects how user identities are evaluated and matched in RBAC policies. You must review and update your RBAC policies to ensure compatibility with Argo CD 3.0. For more information, see link:https://argocd-operator.readthedocs.io/en/latest/upgrading/#rbac-with-dex-sso-authentication[Configuring RBAC with Dex SSO Authentication].
+
link:https://issues.redhat.com/browse/GITOPS-6887[GITOPS-6887]

Logs RBAC enforcement in Argo CD 3.0::
Before this update, users with access to applications could also view logs. With this update, Argo CD 3.0 uses a separate RBAC resource to control log access, which requires explicit permissions. For more information, see link:https://argocd-operator.readthedocs.io/en/latest/upgrading/#logs-rbac-enforcement[Logs RBAC Enforcement].
+
link:https://issues.redhat.com/browse/GITOPS-6886[GITOPS-6886]

Fine-grained RBAC inheritance enabled by default::
Starting with Argo CD v3.0, fine-grained RBAC inheritance of applications is disabled, making `update` and `delete` actions apply only to the application resource. To perform these actions on managed resources, you must configure new policies. To maintain the Argo CD v2.0 behavior, the `server.rbac.disableApplicationFineGrainedRBACInheritance` parameter is set to `false` by default in the `argocd-cm` config map. You can enable the new fine-grained RBAC functionality by setting the following configuration in the Argo CD custom resource:
+
[source,YAML]
----
apiVersion: argoproj.io/v1beta1
kind: ArgoCD
metadata:
  name: example
spec:
  # ...
  extraConfig:
    server.rbac.disableApplicationFineGrainedRBACInheritance: true # <1>
  # ...
----
<1> Set `server.rbac.disableApplicationFineGrainedRBACInheritance` to `true` to maintain Argo CD v3.0 behavior.
+
For more information, see link:https://argocd-operator.readthedocs.io/en/latest/reference/argocd/#fine-grained-rbac-for-application-update-and-delete-sub-resources-v30[Fine-Grained RBAC for application update and delete sub-resources].
+
link:https://issues.redhat.com/browse/GITOPS-6889[GITOPS-6889]

Backward-compatible changes:::
To preserve backwards-compatibility with Argo CD 3.0 upgrade, the {gitops-title} Operator retains some previous behavior by default. You can optionally enable the new behavior for these features.

Change default resource exclusion configuration::
Starting with Argo CD 3.0, the `argocd-cm` config map includes a default configuration for the `resource.exclusions` parameter. This configuration excludes resources that are created by controllers but are not managed in Git. The v2 behavior for Argo CD is preserved, and you can continue to use the `.spec.resourceExclusions` parameter in the Argo CD CR.
+
link:https://issues.redhat.com/browse/GITOPS-6890[GITOPS-6890]

Change default resource tracking method::
Starting with Argo CD 3.0, the default behavior for tracking resources changes to use annotation-based tracking instead of label-based tracking. To avoid breaking existing setups that use label-based tracking, the {gitops-title} Operator continues to use label-based tracking as the default.
+
link:https://issues.redhat.com/browse/GITOPS-6888[GITOPS-6888]

Store resource health status in Redis::
Starting with Argo CD 3.0, resource health statuses are stored in Redis instead of in the `Application` CR. This change improves performance by avoiding updates to the `Application` CR. To prevent issues for third-party tools such as Red Hat Advanced Cluster Manager (RHACM) that rely on this status, the {gitops-title} Operator maintains the previous setting by default. You can override this behavior by setting `.controller.resource.health.persist` to `false` in `.spec.extraCommandArgs` in the Argo CD CR.
+
link:https://issues.redhat.com/browse/GITOPS-7009[GITOPS-7009]
