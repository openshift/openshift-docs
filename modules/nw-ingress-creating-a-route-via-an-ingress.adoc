// Module included in the following assemblies:
//
// * networking/routes/route-configuration.adoc

[id="nw-ingress-creating-a-route-via-an-ingress_{context}"]
= Creating a route through an Ingress object

Some ecosystem components have an integration with Ingress resources but not with
route resources. To cover this case, {product-title} automatically creates
managed route objects when an Ingress object is created. These route objects are deleted
when the corresponding Ingress objects are deleted.

.Procedure

. Define an Ingress object in the {product-title} console or by entering the oc `create` command:
+
.YAML Definition of an Ingress
[source,yaml]
----
apiVersion: networking.k8s.io/v1beta1
kind: Ingress
metadata:
  name: frontend
  annotations:
    route.openshift.io/termination: "reencrypt" <1>
spec:
  rules:
  - host: www.example.com
    http:
      paths:
      - backend:
          serviceName: frontend
          servicePort: 443
  tls:
  - hosts:
    - www.example.com
    secretName: example-com-tls-certificate
----
+
<1> The `route.openshift.io/termination` annotation can be used to configure the `spec.tls.termination` field of the `Route`
as `Ingress` has no field for this. The accepted values are `edge`, `passthrough` and `reencrypt`. All
other values are silently ignored. When unset, `edge` is used.

+
[source,terminal]
----
$ oc apply -f ingress.yaml
----
+

. List your routes:
+
[source,terminal]
----
$ oc get routes
----
+
The result includes an autogenerated route whose name starts with `frontend-`:
+
[source,terminal]
----
NAME             HOST/PORT         PATH    SERVICES    PORT    TERMINATION          WILDCARD
frontend-gnztq   www.example.com           frontend    443     reencrypt/Redirect   None
----
+
If you inspect this route, it looks this:
+
.YAML Definition of an autogenerated route
[source,yaml]
----
apiVersion: route.openshift.io/v1
kind: Route
metadata:
  name: frontend-gnztq
  ownerReferences:
  - apiVersion: networking.k8s.io/v1beta1
    controller: true
    kind: Ingress
    name: frontend
    uid: 4e6c59cc-704d-4f44-b390-617d879033b6
spec:
  host: www.example.com
  to:
    kind: Service
    name: frontend
  tls:
    certificate: |
      -----BEGIN CERTIFICATE-----
      [...]
      -----END CERTIFICATE-----
    insecureEdgeTerminationPolicy: Redirect
    key: |
      -----BEGIN RSA PRIVATE KEY-----
      [...]
      -----END RSA PRIVATE KEY-----
    termination: reencrypt
----
