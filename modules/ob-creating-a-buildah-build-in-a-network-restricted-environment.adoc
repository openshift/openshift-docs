// Module included in the following assemblies:
//
//* builds/work-with-builds.adoc

:_mod-docs-content-type: PROCEDURE
[id='ob-creating-a-buildah-build-in-a-network-restricted-environment_{context}']
= Creating a buildah build in a network-restricted environment

[role="_abstract"]
Create a `buildah` build in a network-restricted environment by mirroring the images that `buildah` build strategy requires. Mirroring the images eliminates the need for public registry access. This ensures clusters use only images that comply with external content controls.

.Prerequisites

* You have installed the `oc` CLI.
* Your cluster can connect and interact with the Git source that you can use to create the buildah build.
* You have the builder-image required to create the `buildah` build in your local registry. If the builder-image is not present in the local registry, mirror the source image.

.Procedure

. Run the following command to mirror the images that `buildah` build strategy requires:
+
[source,terminal]
----
$ oc image mirror --insecure -a <registry_authentication> registry.redhat.io/ubi8/buildah@sha256:1c89cc3cab0ac0fc7387c1fe5e63443468219aab6fd531c8dad6d22fd999819e <mirror_registry>/<repo>/ubi8_buildah
----
+
where:

`<registry_authentication>`:: Specifies the authentication credentials used to access a container registry. This is required when pushing to or pulling from a private registry.
`<mirror_registry>`:: Specifies the registry where the image you want to mirror is stored.
`<image_name>`:: Specifies the name of the image.
`<tag>`:: Specifies the tag of the image.

. Perform the steps mentioned in the "Creating a buildah build" section.