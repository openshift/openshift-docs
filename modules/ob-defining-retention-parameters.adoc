// This module is included in the following assembly:
//
// * configuring/configuring-openshift-builds.adoc

:_mod-docs-content-type: REFERENCE
[id="ob-defining-retention-parameters_{context}"]
= Retention parameters definition for a build

You can define retention parameters for the following purposes:

* To specify how long a completed build run can exist 
* To specify the number of succeeded or failed build runs that can exist for a build

Retention parameters provide a way to clean your `BuildRun` instances or resources automatically. You can set the value of the following retention parameters in your `Build` CR:

* `retention.succeededLimit`: Defines the number of succeeded build runs that can exist for a build.
* `retention.failedLimit`: Defines the number of failed build runs that can exist for a build.
* `retention.ttlAfterFailed`: Specifies the duration for which a failed build run can exist.
* `retention.ttlAfterSucceeded`: Specifies the duration for which a successful build run can exist.

The following example shows the usage of retention parameters in a `Build` CR:

[source,yaml]
----
apiVersion: shipwright.io/v1beta1
kind: Build
metadata:
  name: build-retention-ttl
spec:
  source:
    git:
      url: "https://github.com/shipwright-io/sample-go"
    contextDir: docker-build
  strategy:
    kind: ClusterBuildStrategy
    name: buildah
  output:
  # ...
  retention:
    ttlAfterFailed: 30m
    ttlAfterSucceeded: 1h
    failedLimit: 10
    succeededLimit: 20
  # ...      
----

[NOTE]
====
When you change the value of the `retention.failedLimit` and `retention.succeededLimit` parameters, the new limit is enforced as soon as those changes are applied on your build. 
However, when you change the value of the `retention.ttlAfterFailed` and `retention.ttlAfterSucceeded` parameters, the new retention duration is enforced only on the new build runs. Old build runs adhere to the old retention duration. If you have defined retention duration in both `BuildRun` and `Build` CRs, the retention duration defined in the `BuildRun` CR gets the priority.
====
