:_content-type: PROCEDURE

[id="buildsv2-build-defining-volumes_{context}"]
= Defining volumes

You can declare volumes in your `Build` object that override volumes in the `BuildStrategy` object.

The `volumes` field in the `BuildStrategy` object must have `overridable` set to `true`. Otherwise, the build run eventually fails.

With volumes, you can use the `volumeSource` field to specify these link:https://kubernetes.io/docs/concepts/storage/volumes/[volume types].
// TBD Do the OpenShift docs provide a list of tested and supported types?

.Prerequisites

* In the `BuildStrategy` object, the `volumes` field must have `overridable: true`.
+
.Example: An overridable volume in a `BuildStrategy` object
[source,yaml]
----
  volumes:
  - name: <volume-name>
    overridable: true
    volumeSource:
      emtpyDir: {}
----

.Procedure

* Add a `spec.volumes` field to your `Build` object, as shown in the following example.
+
.Example
[,yaml]
----
apiVersion: shipwright.io/v1alpha1
kind: Build
metadata:
  name: build-name
spec:
  source:
    url: https://github.com/example/url
  strategy:
    name: buildah
    kind: ClusterBuildStrategy
  dockerfile: Dockerfile
  output:
    image: registry/namespace/image:latest
  volumes:
    - name: <volume-name> <1>
      configMap:
        name: <test-config> <2>
----

<1> The name of the overrideable volume specified by the `BuildStrategy` object.
<2> The name of the config map.
// TBD Here we specify `configMap` type. What's the interaction with the `volumeSource` field?

// .Verification
// TBD Are there useful verification steps we can add here?

[role="_additional-resources"]
.Additional resources

* link:https://kubernetes.io/docs/concepts/storage/volumes/[Pod Volumes]
