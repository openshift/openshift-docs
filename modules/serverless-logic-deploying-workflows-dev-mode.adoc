// Module included in the following assemblies:
//
// * serverless/serverless-logic/serverless-logic-creating-managing-workflows.adoc

:_mod-docs-content-type: PROCEDURE
[id="serverless-logic-deploying-workflows-dev-mode_{context}"]
= Deploying workflows using the Dev profile

You can deploy your local workflow on {ocp-product-title} using the Dev profile. You can use this deployment to experiment and modify your workflow directly on the cluster, seeing changes almost immediately. Dev profile is designed for development and testing purposes. Because it automatically reloads the workflow without restarting the container, it is ideal for initial development stages and for testing workflow changes in a live environment.

.Prerequisites

* You have {ServerlessLogicOperatorName} installed on your cluster.
* You have access to a {ServerlessLogicProductName} project with the appropriate roles and permissions to create applications and other workloads in {ocp-product-title}.
* You have installed the OpenShift CLI `(oc)`.

.Procedure

. Create the workflow configuration YAML file.
+
.Example `workflow-dev.yaml` file
[source,yaml]
----
apiVersion: sonataflow.org/v1alpha08
kind: SonataFlow
metadata:
  name: greeting <1>
  annotations:
    sonataflow.org/description: Greeting example on k8s!
    sonataflow.org/version: 0.0.1
    sonataflow.org/profile: dev <2>
spec:
  flow: 
    start: ChooseOnLanguage
    functions:
      - name: greetFunction
        type: custom
        operation: sysout
    states:
      - name: ChooseOnLanguage
        type: switch
        dataConditions:
          - condition: "${ .language == \"English\" }"
            transition: GreetInEnglish
          - condition: "${ .language == \"Spanish\" }"
            transition: GreetInSpanish
        defaultCondition: GreetInEnglish
      - name: GreetInEnglish
        type: inject
        data:
          greeting: "Hello from JSON Workflow, "
        transition: GreetPerson
      - name: GreetInSpanish
        type: inject
        data:
          greeting: "Saludos desde JSON Workflow, "
        transition: GreetPerson
      - name: GreetPerson
        type: operation
        actions:
          - name: greetAction
            functionRef:
              refName: greetFunction
              arguments:
                message:  ".greeting + .name"
        end: true
----
+
<1> Is a <workflow_name>.
<2> Indicates that you must deploy the workflow using the Dev profile.

. To deploy the application, apply the YAML file by entering the following command:
+
[source,terminal]
----
$ oc apply -f <filename> -n <your_namespace>
----

. Verify the deployment and check the status of the deployed workflow by entering the following command:
+
[source,terminal]
----
$ oc get workflow -n <your_namespace> -w
----
+
Ensure that your workflow is listed and the status is `Running` or `Completed`.

. Edit the workflow directly in the cluster by entering the following command: 
+
[source,terminal]
----
$ oc edit sonataflow <workflow_name> -n <your_namespace>
----

. After editing, save the changes. The {ServerlessLogicOperatorName} detects the changes and updates the workflow accordingly.

.Verification

. To ensure the changes are applied correctly, verify the status and logs of the workflow by entering the following commands: 

.. View the status of the workflow by running the following command:
+
[source,terminal]
----
$ oc get sonataflows -n <your_namespace>
----

.. View the workflow logs by running the following command:
+
[source,terminal]
----
$ oc logs <workflow_pod_name> -n <your_namespace>
----

.Next steps

. After completing the testing, delete the resources to avoid unnecessary usage by running the following command:
+
[source,terminal]
----
$ oc delete sonataflow <workflow_name> -n <your_namespace>
----




