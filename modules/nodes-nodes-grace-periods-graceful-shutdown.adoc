// Module included in the following assembly:
// * nodes/nodes-nodes-graceful-shutdown

:_content-type: PROCEDURE
[id="nodes-nodes-grace-periods-graceful-shutdown_{context}"]
= Configuring grace periods

You can create and applying a custom `KubeletConfig` to configure grace periods and associated pods.

.Procedure

. Set the `shutdownGracePeriod` and `shutdownGracePeriodCriticalPods` timings  for normal and critical pods.

. If necessary, label one or more `MachineConfigPools` to apply the custom kubelet configuration to one or more nodes in a pool.

By default, `shutdownGracePeriod` and `shutdownGracePeriodCriticalPods` are set to 0.

In this example, kubelet delays node shutdown for 30 minutes. 20 minutes (30-10) are reserved for normal pods, and 10 minutes for pods for "critical" pods (pods with priority >=2000000000).

[source,yaml]
----
apiVersion: machineconfiguration.openshift.io/v1
kind: KubeletConfig
metadata:
  name: set-shutdown-graceperiod
spec:
  machineConfigPoolSelector:
    matchLabels:
      custom-kubelet: set-shutdown-graceperiod
  kubeletConfig:
    shutdownGracePeriod: "30m"
    shutdownGracePeriodCriticalPods: "10m"
----
