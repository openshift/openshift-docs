// This is included in the following assemblies:
//
// virt-k8s-nmstate-configuring.adoc

[id="removing-interfaces_{context}"]

= Removing interfaces

To remove a configured interface from the cluster's nodes, you must explicitly change the policy from `state: up` to `state: absent` and apply the policy.

[IMPORTANT]
.Removing a policy doesn't revert the state
====
Policies **do not** own a node's network configuration. Policies **only** aply the difference needed to reach the desired state. See **Restoring the original configuration** for additional details.
====

.Procedure

. Modify the policy so that the desired state is `absent`.
+
[source,yaml]
----
apiVersion: nmstate.io/v1beta1
kind: NodeNetworkConfigurationPolicy
metadata:
  name: bond0-eth1-eth2
spec:
  desiredState:
    interfaces:
    - name: bond0
      state: absent <1>
----
+
<1> Change the state from `up` to `absent`
+
[TIP]
====
Save the modified policy with a different file name. The modified policy uses the `bond0-eth1-eth2_absent.yaml` filename to distinguish it from the original `bond0-eth1-eth2.yaml` filename. The policy name in the policy must remain identical.
====


. Apply the modified policy.
+
[source,bash]
----
[kni@node ~]$ oc apply -f bond0-eth1-eth2_absent.yaml
----

. Wait for `kubernetes-nmstate` to apply the policy and remove the interface.
+
[source,bash]
----
[kni@node ~]$ oc wait nncp bond0-eth1-eth2 --for condition=Available --timeout 2m
----

. Delete the policy from the cluster.
+
[source,bash]
----
[kni@node ~]$ oc delete nncp bond0-eth1-eth2
----
