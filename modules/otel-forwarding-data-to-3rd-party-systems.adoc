//Module included in the following assemblies:
//
// * observability/otel/otel-forwarding-data.adoc

:_mod-docs-content-type: PROCEDURE
[id="otel-forwarding-data-to-3rd-party-systems_{context}"]
= Forwarding telemetry data to 3rd party systems


== OpenTelemetry protocol

The preferred way to exrpot telemetry data is via the OpenTelemetry Protocol (OTLP).
There are two flavors of OTLP: gRPC and HTTP. Depending on the 3rd party system, one or the other might be supported.


== Custom exporters

If your 3rd party system does not support OTLP or other supported protocol in the Red Hat build of OpenTelemetry, the collector can be
configured to export telemetry data using the OTLP exporter to a custom collector deployment that has the required exporter for the 3rd party system.

The custom collector can be deployed by using a deployment, config map and a service.

.Example of a custom collector deployment
[source,yaml]
----
apiVersion: v1
kind: ConfigMap
metadata:
  name: custom-otel-collector-config
data:
  otel-collector-config.yaml: |
    receivers:
      otlp:
        protocols:
          grpc:
    exporters:
      debug: {}
      prometheus:
    service:
      pipelines:
        traces:
          receivers: [otlp]
          exporters: [debug] # <1>
---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: custom-otel-collector-deployment
spec:
  replicas: 1
  selector:
    matchLabels:
      component: otel-collector
  template:
    metadata:
      labels:
        component: otel-collector
    spec:
      containers:
      - name: opentelemetry-collector
        image: ghcr.io/open-telemetry/opentelemetry-collector-releases/opentelemetry-collector-contrib:latest # <2>
        command:
        - "/otelcol-contrib"
        - "--config=/conf/otel-collector-config.yaml"
        ports:
        - name: otlp
          containerPort: 4317
          protocol: TCP
        volumeMounts:
        - name: otel-collector-config-vol
          mountPath: /conf
          readOnly: true
      volumes:
      - name: otel-collector-config-vol
        configMap:
          name: custom-otel-collector-config
---
apiVersion: v1
kind: Service
metadata:
  name: custom-otel-collector-service # <3>
  labels:
    component: otel-collector
spec:
  type: ClusterIP
  ports:
  - name: otlp-grpc
    port: 4317
    targetPort: 4317
  selector:
    component: otel-collector
----

<1> Replace `debug` with the required exporter for the 3rd party system.
<2> Replace the image with the required version of the OpenTelemetry Collector that has the required exporter for the 3rd party system.
<3> The service name is used in the Red Hat build of OpenTelemetry Collector CR to configure the OTLP exporter.