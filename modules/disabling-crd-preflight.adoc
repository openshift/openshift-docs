// Module included in the following assemblies:
//
// * extensions/ce/crd-upgrade-safety.adoc

:_mod-docs-content-type: PROCEDURE

[id="disabling-crd-preflight_{context}"]
= Disabling the CRD upgrade safety preflight check

[role="_abstract"]

You can disable the custom resource definition (CRD) upgrade safety preflight check. In the `ClusterExtension` object that provides the CRD, set the `install.preflight.crdUpgradeSafety.enforcement` field with the value of `None`.

[WARNING]
====
Disabling the CRD upgrade safety preflight check could break backwards compatibility with stored versions of the CRD and cause other unintended consequences on the cluster.
====

You cannot disable individual field validators. If you disable the CRD upgrade safety preflight check, you disable all field validators.

[NOTE]
====
If you disable the CRD upgrade safety preflight check in {olmv1-first}, the Kubernetes API server still prevents the following operations:

* Changing scope from `Cluster` to `Namespace` or from `Namespace` to `Cluster`
* Removing an existing stored version of the CRD
====

.Prerequisites

* You have a cluster extension installed.

.Procedure

. Edit the `ClusterExtension` object of the CRD:
+
[source,terminal]
----
$ oc edit clusterextension <clusterextension_name>
----

. Set the `install.preflight.crdUpgradeSafety.enforcement` field to `None`:
+
.Example `ClusterExtension` object
[source,yaml]
----
apiVersion: olm.operatorframework.io/v1
kind: ClusterExtension
metadata:
  name: clusterextension-sample
spec:
  namespace: default
  serviceAccount:
    name: sa-example
  source:
    sourceType: "Catalog"
    catalog:
      packageName: argocd-operator
      version: 0.6.0
  install:
    preflight:
      crdUpgradeSafety:
        enforcement: None
----
