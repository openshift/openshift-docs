// Module included in the following assemblies:
//
// * network_observability/network-observability-dns-decoding.adoc

:_mod-docs-content-type: PROCEDURE
[id="network-observability-dns-decoding-configuring_{context}"]
= Configuring DNS domain tracking for network observability

[role="_abstract"]
Enable DNS tracking in the FlowCollector resource to capture domain names and resolution status for cluster traffic by configuring the eBPF agent.

Perform this task to start capturing DNS metadata for all UDP and TCP traffic on port 53.

.Prerequisites

* The Network Observability Operator is installed.
* You have `cluster-admin` privileges.
* You are familiar with the `FlowCollector` custom resource.

.Procedure

. Edit the `FlowCollector` resource by running the following command:
+
[source,terminal]
----
$ oc edit flowcollector cluster
----

. Configure the eBPF agent to enable the DNS tracking feature:
+
[source,yaml]
----
apiVersion: flows.netobserv.io/v1alpha1
kind: FlowCollector
metadata:
  name: cluster
spec:
  agent:
    type: eBPF
    ebpf:
      features:
        - DNSTracking
----
+
where:

`spec.agent.typle.ebpf.features`:: Specifies the list of features to enable for the eBPF agent. To enable DNS tracking, add `DNSTracking` to this list.

. Optional: If your environment uses a non-standard port for DNS, such as a custom service mesh or local proxy, specify the port and increase the cache capacity:
+
[source,yaml]
----
apiVersion: flows.netobserv.io/v1alpha1
kind: FlowCollector
metadata:
  name: cluster
spec:
  agent:
    type: eBPF
    ebpf:
      features:
        - DNSTracking
      dnsTrackingPort: 5353
  processor:
    logTypes: Flows
    advanced:
      env:
        - name: CACHE_MAX_FLOWS
          value: "100000"
----
+
where:

`spec.agent.typle.ebpf.features`:: Specifies the list of features to enable for the eBPF agent. To enable DNS tracking, add `DNSTracking` to this list.

`spec.agent.ebpf.dnsTrackingPort`:: Specifies a custom port for DNS tracking. Use this field if your environment uses a DNS proxy or a service mesh, such as Istio.

`spec.processor.advanced.env`:: Defines environment variables for the flow processor. For example, use the `CACHE_MAX_FLOWS` variable to ensure the collector is configured to store enriched metadata for high-volume traffic.

. Save and exit the editor.

.Verification

. In the {product-title} web console, navigate to *Observe* -> *Network Traffic*.
. Select the *Advanced options* filter.
. Add a filter for *DNS Query Name* is `not empty`.
. Observe the flow table to confirm that the *DNS Name* and *DNS Status* columns are populated with real-time data.