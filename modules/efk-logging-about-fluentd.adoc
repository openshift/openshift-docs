// Module included in the following assemblies:
//
// * logging/efk-logging.adoc

[id='efk-logging-about-fluentd_{context}']
= About Fluentd in {product-title}

{product-title} uses Fluentd to collect data about your cluster.

Fluentd is deployed as a DaemonSet in {product-title} that deploys pods according to a node
label selector, which you can specify with the inventory parameter
`openshift_logging_fluentd_nodeselector` and the default is `logging-infra-fluentd`.
As part of the OpenShift cluster installation, it is recommended that you add the
Fluentd node selector to the list of persisted node labels.

Fluentd uses `journald` as the system log source. These are log messages from
the operating system, the container runtime, and OpenShift.

The available container runtimes provide minimal information to identify the
source of log messages. Log collection and normalization of logs can occur after
a pod is deleted and additional metadata cannot be retrieved from the
API server, such as labels or annotations.

If a pod with a given name and project is deleted before the log collector
finishes processing logs, there might not be a way to distinguish the log messages
from a similarly named pod and project. This can cause logs to be indexed and
annotated to an index that is not owned by the user who deployed the pod.

[IMPORTANT]
====
The available container runtimes provide minimal information to identify the
source of log messages and do not guarantee unique individual log
messages or that these messages can be traced to their source.
====

Clean installations of {product-title} 3.9 or later use `json-file` as the default log
driver, but environments upgraded from {product-title} 3.7 will maintain their
existing `journald` log driver configuration. It is recommended to use the
`json-file` log driver. See Changing the Aggregated
Logging Driver for instructions to change your existing log driver
configuration to `json-file`.

For more information, see http://www.fluentd.org/architecture[Fluentd].
