// Module included in the following assemblies:
//
// * observability/otel/otel-collector/otel-collector-receivers.adoc

:_mod-docs-content-type: REFERENCE
[id="otel-receivers-prometheus-remote-write-receiver_{context}"]
= Prometheus Remote Write Receiver

[role="_abstract"]
The Prometheus Remote Write Receiver receives metrics from Prometheus via the Remote Write protocol and converts them to the OpenTelemetry format. This receiver supports only the Prometheus Remote Write v2 protocol.

:FeatureName: The Prometheus Remote Write Receiver
include::snippets/technology-preview.adoc[]

.OpenTelemetry Collector custom resource with the enabled Prometheus Remote Write Receiver
[source,yaml]
----
# ...
  config:
    receivers:
      prometheusremotewrite:
        endpoint: 0.0.0.0:9009 # <1>
    service:
      pipelines:
        metrics:
          receivers: [prometheusremotewrite]
# ...
----
<1> The endpoint where the receiver listens for Prometheus Remote Write requests.

The following are the prerequisites for using the Prometheus Remote Write Receiver with Prometheus:

* Prometheus is started with the metadata WAL records feature flag enabled:
+
[source,yaml]
----
./prometheus --config.file config.yml --enable-feature=metadata-wal-records
----

* Prometheus Remote Write v2 Protocol is enabled in the Prometheus configuration file:
+
[source,yaml]
----
remote_write:
  - url: "<your_chosen_prometheus_remote_write_receiver_endpoint>"
    protobuf_message: io.prometheus.write.v2.Request
----

* Native histograms are enabled in Prometheus. For more information about enabling native histograms in Prometheus, see the Prometheus documentation.

[role="_additional-resources"]
.Additional resources
* link:https://prometheus.io/docs/prometheus/latest/feature_flags/#metadata-wal-records[Metadata WAL Records]
* link:https://prometheus.io/docs/specs/prw/remote_write_spec_2_0/[Prometheus Remote-Write 2.0 specification [EXPERIMENTAL]]
* link:https://prometheus.io/docs/specs/native_histograms/[Native Histograms]
