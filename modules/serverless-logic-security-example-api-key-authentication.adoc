// Module included in the following assemblies:
// serverles-logic/serverless-logic-authentication-openapi-services

:_mod-docs-content-type: REFERENCE
[id="serverless-logic-security-example-api-key-authentication_{context}"]
= Example of API key authentication

The following example shows how to secure an OpenAPI service operation using the `apiKey` authentication scheme. The `security-example.json` file defines the `sayHelloApiKey` operation, which uses the `api-key-example` security scheme. You can configure the API key using application properties, the workflow `ConfigMap`, or environment variables.

.Example OpenAPI specification with API key authentication
[source,json]
----
{
  "openapi": "3.1.0",
  "info": {
    "title": "Api Key Scheme Example",
    "version": "1.0"
  },
  "paths": {
    "/hello-with-api-key": {
      "get": {
        "operationId": "sayHelloApiKey",
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "text/plain": {
                "schema": {
                  "type": "string"
                }
              }
            }
          }
        },
        "security": [{"api-key-example" : []}]
      }
    }
  },
  "components": {
    "securitySchemes": {
      "api-key-example": {
        "type": "apiKey",
        "name": "api-key-name",
        "in": "header"
      }
    }
  }
}
----

In this example, the `sayHelloApiKey` operation is protected by the `api-key-example` security scheme, which uses an API key passed in the HTTP request header.

[id="serverless-logic-security-supported-config-properties-api-key_{context}"]
== Supported configuration properties for API key authentication

You can use the following configuration property to configure the API key:

[cols="2,1,1",options="header"]
|====
|Description 
|Property key
|Example

|API Key
|`quarkus.openapi-generator.[filename].auth.[security_scheme_name].api-key`
|`quarkus.openapi-generator.security_example_json.auth.api_key_example.api-key=MY_KEY`

|====

You can replace `[filename]` with the sanitized OpenAPI file name `security_example_json` and `[security_scheme_name]` with the sanitized scheme name `api_key_example`. 

The `apiKey` scheme type contains an additional `name` property that configures the key name to use when the Open API service is invoked. Also, the format to pass the key depends on the value of the `in` property.

* When the value is `header`, the key is passed as an HTTP request parameter.

* When the value is `cookie`, the key is passed as an HTTP cookie.

* When the value is `query`, the key is passed as an HTTP query parameter.

In the example, the key is passed in the HTTP header as `api-key-name: MY_KEY`.

{ServerlessLogicProductName} manages this internally, so no additional configuration is required beyond setting the property value.