// Module included in the following assemblies:
//
// * *scalability_and_performance/ztp-configuring-single-node-cluster-deployment-during-installation.adoc

:_content-type: CONCEPT
[id="ztp-sndu-disable-ntp_{context}"]
= Disable NTP

After the system is configured for PTP, you need to remove Network Time Protocol (NTP) from impacting the
system clock. No customization is required for the following configuration:

[source,yaml]
----
apiVersion: machineconfiguration.openshift.io/v1
kind: MachineConfig
metadata:
    labels:
        machineconfiguration.openshift.io/role: master
    name: disable-chronyd
spec:
    config:
        ignition:
            version: 2.2.0
        systemd:
            units:
                - contents: |
                    [Unit]
                    Description=NTP client/server
                    Documentation=man:chronyd(8) man:chrony.conf(5)
                    After=ntpdate.service sntp.service ntpd.service
                    Conflicts=ntpd.service systemd-timesyncd.service
                    ConditionCapability=CAP_SYS_TIME
                    [Service]
                    Type=forking
                    PIDFile=/run/chrony/chronyd.pid
                    EnvironmentFile=-/etc/sysconfig/chronyd
                    ExecStart=/usr/sbin/chronyd $OPTIONS
                    ExecStartPost=/usr/libexec/chrony-helper update-daemon
                    PrivateTmp=yes
                    ProtectHome=yes
                    ProtectSystem=full
                    [Install]
                    WantedBy=multi-user.target
                  enabled: false
                  name: chronyd.service
----
