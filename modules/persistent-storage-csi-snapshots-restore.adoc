// Module included in the following assemblies:
//
// * storage/persistent_storage/persistent-storage-csi-snapshots.adoc

[id="persistent-storage-csi-snapshots-restore_{context}"]
= Restoring a volume snapshot

Once you have a bound and ready VolumeSnapshot object, you can use that object to provision a new volume that is pre-populated with data from the snapshot.

The volume snapshot content object is used to restore the existing volume to a previous state.

.Prerequisites
* Logged in to a running {product-title} cluster.
* A PVC created using a CSI Driver that supports VolumeSnapshots.
* A storage class that is provisioning the storage backend.

.Procedure

. Specify a VolumeSnapshot data source on a PVC.
+
.pvc-restore.yaml
[source,yaml]
----
apiVersion: v1
kind: PersistentVolumeClaim
metadata:
  name: myclaim-restore
spec:
  storageClassName: csi-hostpath-sc
  dataSource:
    name: mysnap <1>
    kind: VolumeSnapshot <2>
    apiGroup: snapshot.storage.k8s.io <3>
  accessModes:
    - ReadWriteOnce
  resources:
    requests:
      storage: 1Gi
----
<1> Name of the VolumeSnapshot object representing the snapshot to use as source.
<2> Must be VolumeSnapshot.
<3> Must be `snapshot.storage.k8s.io`.

. Create a PVC:

+
----
$ oc create -f pvc-restore.yaml
----

. Verify that the restored PVC has been created:

+
----
$ oc get volumesnapshotcontent
----
+
Two different PVCs are displayed.
