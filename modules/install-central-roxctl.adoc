// Module included in the following assemblies:
//
// * installing/install_ocp/install-central-ocp.adoc
// * installing/install_other/install-central-other.adoc
:_mod-docs-content-type: PROCEDURE
[id="install-central-roxctl_{context}"]
= Running the Central installation scripts

ifeval::["{context}" == "install-central-ocp"]
:openshift:
endif::[]

ifeval::["{context}" == "install-central-other"]
:kube:
endif::[]

After you run the interactive installer, you can run the `setup.sh` script to install Central.

.Procedure
. Run the `setup.sh` script to configure image registry access:
+
[source,terminal]
----
$ ./central-bundle/central/scripts/setup.sh
----
. To enable the policy as code feature (Technology Preview), manually apply the `config.stackrox.io` CRD that is located in the .zip file at `helm/chart/crds/config.stackrox.io_securitypolicies.yaml`.
+
--
:FeatureName: Policy as code
include::snippets/technology-preview.adoc[]

To apply the CRD, run the following command:

ifdef::openshift[]
[source,terminal]
----
$ oc create -f helm/chart/crds/config.stackrox.io_securitypolicies.yaml
----
endif::openshift[]
ifdef::kube[]
[source,terminal]
----
$ kubectl create -f helm/chart/crds/config.stackrox.io_securitypolicies.yaml
----
endif::kube[]
--
. Create the necessary resources:
+
ifdef::openshift[]
[source,terminal]
----
$ oc create -R -f central-bundle/central
----
endif::openshift[]
ifdef::kube[]
[source,terminal]
----
$ kubectl create -R -f central-bundle/central
----
endif::kube[]
. Check the deployment progress:
+
ifdef::openshift[]
[source,terminal]
----
$ oc get pod -n stackrox -w
----
endif::openshift[]
ifdef::kube[]
[source,terminal]
----
$ kubectl get pod -n stackrox -w
----
endif::kube[]
. After Central is running, find the {product-title-short} portal IP address and open it in your browser.
Depending on the exposure method you selected when answering the prompts, use one of the following methods to get the IP address.
+
|===
|Exposure method |Command |Address |Example

| *Route*
| `oc -n stackrox get route central`
| The address under the `HOST/PORT` column in the output
| `+https://central-stackrox.example.route+`

| *Node Port*
| `oc get node -owide && oc -n stackrox get svc central-loadbalancer`
| IP or hostname of any node, on the port shown for the service
| `+https://198.51.100.0:31489+`

| *Load Balancer*
| `oc -n stackrox get svc central-loadbalancer`
| EXTERNAL-IP or hostname shown for the service, on port 443
| `+https://192.0.2.0+`

| *None*
| `central-bundle/central/scripts/port-forward.sh 8443`
| `+https://localhost:8443+`
| `+https://localhost:8443+`
|===

[NOTE]
====
If you have selected autogenerated password during the interactive install, you can run the following command to see it for logging into Central:
[source,terminal]
----
$ cat central-bundle/password
----
====

ifeval::["{context}" == "install-central-ocp"]
:!openshift:
endif::[]

ifeval::["{context}" == "install-central-other"]
:!kube:
endif::[]