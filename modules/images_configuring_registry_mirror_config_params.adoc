// Module included in the following assemblies:
//
// * openshift_images/image-configuration.adoc
// * updating/updating_a_cluster/updating_disconnected_cluster/disconnected-update.adoc
// * windows_containers/enabling-windows-container-workloads.adoc

ifeval::["{context}" == "enabling-windows-container-workloads"]
:winc:
endif::[]

:_mod-docs-content-type: REFERENCE
[id="images-configuration-registry-mirror-config-params_{context}"]
= Image registry repository mirroring configuration parameters

[role="_abstract"]
You can use the following table for information about parameters when configuring your image repository for mirroring.

[%header,cols="32",cols="1,2",options="header"]
|===
|*Parameter* |*Values and Information*

|`apiVersion:`
|Required. The value must be `config.openshift.io/v1` API.

|`kind:`
|The kind of object according to the pull type. The `ImageDigestMirrorSet` type pulls a digest reference image The `ImageTagMirrorSet` type pulls a tag reference image.

|`spec: imageDigestMirrors:`
|The type of image pull method. Use `imageDigestMirrors`for an `ImageDigestMirrorSet` CR. Use `imageTagMirrors` for an `ImageTagMirrorSet` CR.

|`- mirrors: - example.io/example/ubi-minimal`
|The name of the mirrored image registry and repository.

|`- mirrors: -example.com/example2/ubi-minimal`
|The value of this parameter is the name of a secondary mirror repository for each target repository. If one mirror is down the target repository can use the secondary mirror.

|`source: registry.access.redhat.com/ubi9/ubi-minimal`
|The registry and repository source. The source is the repository that is listed in an image pull specification.

|`mirrorSourcePolicy: AllowContactingSource`
|Optional parameter that indicates the fallback policy if the image pull fails. The `AllowContactingSource` value allows continued attempts to pull the image from the source repository. Default value. `NeverContactSource` prevents continued attempts to pull the image from the source repository.
ifndef::winc[]
|`source: registry.example.com/redhat`: An optional parameter that indicates a namespace inside a registry. Setting a namespace inside a registry allows use of any image in that namespace. If you use a registry domain as a source, the object applies to all of the repositories from the registry.

|`source: registry.example.com`
|Optional parameter that indicates a registry. Allows us of any image in that registry. If you specify a registry name, the object applies to all repositories from a source registry to a mirror registry.

|`source: registry.example.com/example/myimage`
|Pulls the image `registry.example.com/example/myimage@sha256:...` from the mirror `mirror.example.net/image@sha256:..`.

|`source: registry.example.com/example`
|Pulls the image `registry.example.com/example/image@sha256:...` in the source registry namespace from the mirror `mirror.example.net/image@sha256:...`.

|`source: registry.example.com`
|Pulls the image `registry.example.com/myimage@sha256` from the mirror registry `example.net/registry-example-com/myimage@sha256:...`.
endif::winc[]
|===

ifeval::["{context}" == "enabling-windows-container-workloads"]
:winc:
endif::[]
