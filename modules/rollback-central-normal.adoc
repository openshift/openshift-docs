// Module included in the following assemblies:
//
// * upgrade/upgrade-from-44.adoc
:_mod-docs-content-type: PROCEDURE
[id="rollback-central-normal_{context}"]
= Rolling back Central normally

[role="_abstract"]
You can roll back to a previous version of Central if upgrading {product-title} fails.

.Prerequisites

* Before you can perform a rollback, you must have free disk space available on your persistent storage. {product-title} uses disk space to keep a copy of databases during the upgrade. If the disk space is not enough to store a copy and the upgrade fails, you might not be able to roll back to an earlier version.

* If you rollback from {product-title} 4.8 to an earlier version and use an
  internal database (i.e. `central-db` component), you need to restore the
  database from a PostgreSQL 13 backup first. Such a backup is automatically
  created during the upgrade, and to restore it add `RESTORE_BACKUP=true` and
  `FORCE_OLD_BINARIES=true` environment variables to `central-db` and `init-db`
  containers of `central-db` component and wait until it updated. See
  xref:customize-installation-operator-overlays.adoc#adding-an-environment-variable-to-a-deployment[Injecting an environment variable into the Central deployment]
  for an example how to do that.

.Procedure

* Run the following command to roll back to a previous version when an upgrade fails (before the Central service starts):
+
[source,terminal]
----
$ oc -n stackrox rollout undo deploy/central <1>
----
<1> If you use Kubernetes, enter `kubectl` instead of `oc`.
