// Module included in the following assemblies:
//
// * security/zero_trust_workload_identity_manager/zero-trust-manager-spire-federation.adoc

:_mod-docs-content-type: PROCEDURE
[id="zero-trust-manager-verify-federation_{context}"]
= Verifying that the federation is working

[role="_abstract"]
To confirm successful cross-cluster federation, verify that the bundles have synced. This exchange of security certificates between clusters ensures that workloads can establish mutual trust and communicate securely across different domains.

.Prerequisites

* Trust bundles are created on both clusters.

.Procedure

. Check that the bundle sync on cluster 1 is working by running the following command:
+
[source,terminal]
----
$ oc -n zero-trust-workload-identity-manager exec spire-server-0 -c spire-server -- \
  /spire-server bundle list -socketPath /tmp/spire-server/private/api.sock
----
+
The output should show cluster 2's trust domain with it's certificate.
+
[source,terminal]
----
****************************************
* <CLUSTER2_APPS_DOMAIN>
****************************************
-----BEGIN CERTIFICATE-----
...certificate data...
-----END CERTIFICATE-----
----

. Check that the bundle sync on cluster 2 is working by running the following command:
+
[source,terminal]
----
$ oc -n zero-trust-workload-identity-manager exec spire-server-0 -c spire-server -- \
  /spire-server bundle list -socketPath /tmp/spire-server/private/api.sock
----
+
The output should show cluster 1's trust domain with it's certificate.
+
[source,terminal]
----
****************************************
* <CLUSTER1_APPS_DOMAIN>
****************************************
-----BEGIN CERTIFICATE-----
...certificate data...
-----END CERTIFICATE-----
----
+
Federation is set up once each cluster shows the otherâ€™s trust domain in the bundle list.


