// Module included in the following assemblies:
//
// * cloud_experts_tutorials/cloud-experts-entra-id-idp.adoc

:_mod-docs-content-type: PROCEDURE
[id="cloud-experts-entra-id-idp-register-app_{context}"]
= Registering a new application in Entra ID for authentication

[role="_abstract"]
To register your application in Entra ID, first create the OAuth callback URL, then register your application.

.Procedure
. Create the cluster's OAuth callback URL by changing the specified variables and running the following command:
+
[NOTE]
====
Remember to save this callback URL; it will be required later in the process.
====
+
[source,terminal]
----
$ domain=$(rosa describe cluster -c <cluster_name> | grep "DNS" | grep -oE '\S+.openshiftapps.com')
echo "OAuth callback URL: https://oauth.${domain}/oauth2callback/AAD"
----
+
The "AAD" directory at the end of the OAuth callback URL must match the OAuth identity provider name that you will set up later in this process.

. Create the Entra ID application by logging in to the Azure portal, and select the link:https://portal.azure.com/#blade/Microsoft_AAD_RegisteredApps/ApplicationsListBlade[App registrations blade]. Then, select *New registration* to create a new application.
+
image:azure-portal_app-registrations-blade.png[Azure Portal - App registrations blade]

. Name the application, for example `openshift-auth`.
. Select *Web* from the _Redirect URI_ dropdown and enter the value of the OAuth callback URL you retrieved in the previous step.
. After providing the required information, click *Register* to create the application.
+
image:azure-portal_register-an-application-page.png[Azure Portal - Register an application page]
+
. Select the *Certificates & secrets* sub-blade and select *New client secret*.
+
image:azure-portal_certificates-secrets-page.png[Azure Portal - Certificates and secrets page]

. Complete the requested details and store the generated client secret value. This secret is required later in this process.
+
[IMPORTANT]
====
After initial setup, you cannot see the client secret. If you did not record the client secret, you must generate a new one.
====
+
image:azure-portal_add-a-client-secret-page.png[Azure Portal - Add a Client Secret page]

. Select the *Overview* sub-blade and note the `Application (client) ID` and `Directory (tenant) ID`. You will need these values in a future step.
+
image:azure-portal_copy-client-secret-page.png[Azure Portal - Copy Client Secret page]