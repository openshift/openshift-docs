// Module included in the following assemblies:
//
// * cnv/cnv_users_guide/cnv-fencing-nodes.adoc

[id="cnv-about-fencing_{context}"]

= About fencing nodes

Fencing is the act of protecting shared resources in order to safely recover 
from node failure.

In the case of an unhealthy node, Pods and virtual machines that depend on 
persistent storage cannot be replaced on another node until it can be confirmed 
that the original Pod or virtual machine is no longer accessing the storage. 
Fencing the node ensures that the workloads are no longer running on the 
unhealthy node, protecting the persistent storage. Once fencing is complete, 
workloads can be safely replaced on other nodes.

The fencing feature introduces new controllers, which are deployed by the 
`MachineRemediation` Operator:

* `MaxUnhealthy` controller
* `MachineHealthCheck` controller
// * `MachineRemediation` controller - delayed to 4.4

The `MaxUnhealthy` tracks the number of unhealthy nodes in the cluster. 
This controller prevents node deletion if the number of unhealthy nodes are not within the allowed range.

The `MachineHealthCheck` controller monitors node health. If a node is 
unhealthy for longer than 5 minutes, it is drained of its Pods and virtual machines and deleted.

// delayed to 4.4:
// `MachineRemediation` controller monitors the `MachineRemediation` CRs and applies the remediation strategy specified in the CR. 


