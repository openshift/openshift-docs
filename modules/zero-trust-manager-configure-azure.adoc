// Module included in the following assemblies:
//
// * security/zero_trust_workload_identity_manageer/zero-trust-manager-oidc-federation.adoc

:_mod-docs-content-type: PROCEDURE
[id="zero-trust-manager-configure-azure_{context}"]
= Using Entra ID with {azure-first}

[role="_abstract"]
Configure your {azure-first} environment to enable Entra ID integration with {azure-short}. By defining variables and creating a resource group, you establish the infrastructure needed to securely manage workload identities.


.Prerequisites

* You have configured the SPIRE OIDC Discovery Provider Route to serve the TLS certificates from a publicly trusted CA.

.Procedure

. Log in to Azure by running the following command:
+
[source,terminal]
----
$ az login
----

. Configure variables for your Azure subscription and tenant by running the following commands:
+
[source,terminal]
----
$ export SUBSCRIPTION_ID=$(az account list --query "[?isDefault].id" -o tsv)
----
+
[source,terminal]
----
$ export TENANT_ID=$(az account list --query "[?isDefault].tenantId" -o tsv)
----
+
[source,terminal]
----
$ export LOCATION=centralus
----
+
* Replace the `SUBSCRIPTION_ID` variable with your unique subscription identifier.

* Replace the `TENANT_ID` variable with the ID for your Azure Active Directory instance.

* Replace the `LOCATION` variable with the Azure region where your resource is created.

. Define resource variable names by running the following commands:
+
[source,terminal]
----
$ export NAME=ztwim
----
+
[source,terminal]
----
$ export RESOURCE_GROUP="${NAME}-rg"
----
+
[source,terminal]
----
$ export STORAGE_ACCOUNT="${NAME}storage"
----
+
[source,terminal]
----
$ export STORAGE_CONTAINER="${NAME}storagecontainer"
----
+
[source,terminal]
----
$ export USER_ASSIGNED_IDENTITY_NAME="${NAME}-identity"
----
+
* Replace the `NAME` variable with the base name for all resources.

* Replace the `RESOURCE_GROUP` variable with the name of the resource group.

* Replace the `STORAGE_ACCOUNT` variable with the name for the storage account.

* Replace the `STORAGE_CONTAINER` variable with the name for the storage container.

* Replace the `USEDR_ASSIGNED_IDENTITY_NAME` variable with the name for a managed identity.

. Create the resource group by running the following command:
+
[source,terminal]
----
$ az group create \
  --name "${RESOURCE_GROUP}" \
  --location "${LOCATION}"
----

