// Module included in the following assemblies:
//
// * security/zero_trust_workload_identity_manageer/zero-trust-manager-oidc-federation.adoc

:_mod-docs-content-type: PROCEDURE
[id="zero-trust-manager-configure-azure_{context}"]
= Using Entra ID with {azure-first}

After the Entra ID configuration is complete, you can set up Entra ID to work with {azure-short}.

.Prerequisites

* You have configured the SPIRE OIDC Discovery Provider Route to serve the TLS certificates from a publicly trusted CA.

.Procedure

. Log in to Azure by running the following command:
+
[source,terminal]
----
$ az login
----

. Configure variables for your Azure subscription and tenant by running the following commands:
+
[source,terminal]
----
$ export SUBSCRIPTION_ID=$(az account list --query "[?isDefault].id" -o tsv)
----
+
[source,terminal]
----
$ export TENANT_ID=$(az account list --query "[?isDefault].tenantId" -o tsv)
----
+
[source,terminal]
----
$ export LOCATION=centralus
----
where:

SUBSCRIPTION_ID:: Specifies your unique subscription identifier.

TENANT_ID:: Specifies the ID for your Azure Active Directory instance.

LOCATION:: The Azure region where your resource is created.

. Define resource variable names by running the following commands:
+
[source,terminal]
----
$ export NAME=ztwim
----
+
[source,terminal]
----
$ export RESOURCE_GROUP="${NAME}-rg"
----
+
[source,terminal]
----
$ export STORAGE_ACCOUNT="${NAME}storage"
----
+
[source,terminal]
----
$ export STORAGE_CONTAINER="${NAME}storagecontainer"
----
+
[source,terminal]
----
$ export USER_ASSIGNED_IDENTITY_NAME="${NAME}-identity"
----
where:

NAME:: Specifies A base name for all resources.

RESOURCE_GROUP:: Specifies the name of the resource group.

STORAGE_ACCOUNT:: Specifies the name for the storage account.

STORAGE_CONTAINER:: Specifies the name for the storage container.

USER_ASSIGNED_IDENTITY_NAME:: Specifies the name for a managed identity.

. Create the resource group by running the following command:
+
[source,terminal]
----
$ az group create \
  --name "${RESOURCE_GROUP}" \
  --location "${LOCATION}"
----

