// Module included in the following assemblies:
// * networking/configuring-network-operator.adoc

[id="network-modifying-config-{context}"]
= Modifying network configuration in a running cluster

The Network Operator reconciles the state of the cluster against a desired
configuration.

// "You can also create new additionalNetworks"
You can modify only `kubeProxy` configuration parameters in a running cluster.

.Prerequisites

* Install the OpenShift Command-line Interface (CLI), commonly known as `oc`.
* Log in to a running cluster with the `cluster-admin` role.

.Procedure

. Use the following command to edit the `Network.operator.openshift.io` Custom
Resource (CR):
+
----
$ oc edit network.operator.openshift.io cluster
----
+
The following example output shows a `Network.operator.openshift.io` CR that is
configured with default values.
+
[source,yaml]
----
# Please edit the object below. Lines beginning with a '#' will be ignored,
# and an empty file will abort the edit. If an error occurs while saving this file will be
# reopened with the relevant failures.
#
apiVersion: operator.openshift.io/v1
kind: Network
metadata:
  name: cluster
spec:
  clusterNetwork:
  - cidr: 10.128.0.0/14
    hostPrefix: 23
  defaultNetwork:
    type: OpenShiftSDN
  serviceNetwork:
  - 172.30.0.0/16
status: {}
----

. Add the following code to the `spec` field in the
`Network.operator.openshift.io` CR:
+
[source,yaml]
----
spec:
  deployKubeProxy: false
  kubeProxyConfig:
   iptablesSyncPeriod: 30s
   bindAddress: 0.0.0.0
   proxyArguments:
   - "iptables-min-sync-period": ["30s"]
----

. Save the file and exit the text editor.
+
The syntax is validated by the `oc` command when you save the file and exit the
editor. If your modifications contain a syntax error, the editor opens the file
and displays an error message.

. Run the following command to confirm that the Network Operator accepted the
updated configuration:
+
----
$ oc get networks.operator.openshift.io -o yaml
----
+
The command will output a `Network` CR similar to the following example:
+
[source,yaml]
----
apiVersion: v1
items:
- apiVersion: operator.openshift.io/v1
  kind: Network
  metadata:
    name: cluster
  spec:
    clusterNetwork:
    - cidr: 10.128.0.0/14
      hostPrefix: 23
    defaultNetwork:
      type: OpenShiftSDN
    deployKubeProxy: false
    kubeProxyConfig:
      bindAddress: 0.0.0.0
      iptablesSyncPeriod: 30s
    serviceNetwork:
    - 172.30.0.0/16
  status: {}
kind: List
----
