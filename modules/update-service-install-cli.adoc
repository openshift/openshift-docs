[id="update-service-install-cli_{context}"]
= Installing the OpenShift Update Service Operator by using the CLI

You can use the {product-title} CLI to install the OpenShift Update Service Operator.

.Procedure

To install the OpenShift Update Service Operator by using the {product-title} CLI:

. Create a Namespace for the OpenShift Update Service Operator:

.. Create a Namespace object YAML file, for example, `update-service-namespace.yaml`, for the OpenShift Update Service Operator:
+
[source,yaml]
----
apiVersion: v1
kind: Namespace
metadata:
  name: openshift-update-service
  annotations:
    openshift.io/node-selector: ""
  labels:
    openshift.io/cluster-monitoring: "true" <1>
----
<1> Set the `openshift.io/cluster-monitoring` label to enable operator recommended cluster monitoring on this namespace.

.. Create the Namespace:
+
[source,terminal]
----
$ oc create -f <file-name>.yaml
----
+
For example:
+
[source,terminal]
----
$ oc create -f update-service-namespace.yaml
----

. Install the OpenShift Update Service Operator by creating the following objects:

.. Create an Operator Group object YAML file, for example, `update-service-operator-group.yaml`:
+
[source,yaml]
----
apiVersion: operators.coreos.com/v1
kind: OperatorGroup
metadata:
  name: update-service-operator-group
spec:
  targetNamespaces:
  - openshift-update-service
----

.. Create an Operator Group object:
+
[source,terminal]
----
$ oc -n openshift-update-service create -f <file-name>.yaml
----
+
For example:
+
[source,terminal]
----
$ oc -n openshift-update-service create -f update-service-operator-group.yaml
----

.. Create a Subscription object YAML file, for example, `update-service-subscription.yaml`:
+
.Example Subscription
[source,yaml]
----
apiVersion: operators.coreos.com/v1alpha1
kind: Subscription
metadata:
  name: update-service-subscription
spec:
  channel: v1
  installPlanApproval: "Automatic"
  source: "redhat-operators" <1>
  sourceNamespace: "openshift-marketplace"
  name: "cincinnati-operator"
----
<1> Specify the name of the CatalogSource that provides the Operator. For clusters that do not use a custom Operator Lifecycle Manager (OLM), specify `redhat-operators`. If your {product-title} cluster is installed on a restricted network, also known as a disconnected cluster, specify the name of the CatalogSource object created when you configured the Operator Lifecycle Manager (OLM).

.. Create the Subscription object:
+
[source,terminal]
----
$ oc create -f <file-name>.yaml
----
+
For example:
+
[source,terminal]
----
$ oc -n openshift-update-service create -f update-service-subscription.yaml
----
+
The OpenShift Update Service Operator is installed to the `openshift-update-service` namespace and targets the `openshift-update-service` namespace.

. Verify the Operator installation:
+
[source,terminal]
----
$ oc -n openshift-update-service get clusterserviceversions
----
+
.Example output
[source,terminal]
----
NAME                             DISPLAY                    VERSION   REPLACES   PHASE
update-service-operator.v4.6.0   OpenShift Update Service   4.6.0                Succeeded
...
----
+
If the OpenShift Update Service Operator is listed, installation succeeded. The version number might be different than shown.
