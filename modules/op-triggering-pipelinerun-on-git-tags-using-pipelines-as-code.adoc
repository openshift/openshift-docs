// This module is included in the following assembly:
// * pac/managing-pipeline-runs-pac.adoc

:_mod-docs-content-type: CONCEPT
[id="op-triggering-pipelinerun-on-git-tags-using-pipelines-as-code_{context}"]
= Triggering a PipelineRun on Git tags

[role="_abstract"]

When you create or reference a Git tag in a repository that is integrated with {pac}, you can trigger a `PipelineRun` on a tag via GitOps comment. This capability enables you to test or deploy tagged versions of your code, supporting release-based workflows and version control practices.

{pac} resolves the Git tag to its corresponding commit SHA and runs the `PipelineRun` defined for that commit. You can initiate or manage such runs by commenting on the tagged commit using supported GitOps commands.

Triggering `PipelineRun` on Git tags is supported for GitHub App, GitHub Webhook, and GitLab integrations. This functionality is not currently available for Gitea, Bitbucket Cloud, or Bitbucket Data Center.

== Supported GitOps commands

* `/test tag:<tag>`:: Retrigger all matching `PipelineRun` for the tag commit
* `/test <pipelinerun-name> tag:<tag>`:: Retrigger only the named `PipelineRun`
* `/retest tag:<tag>`:: Retrigger all matching `PipelineRun` for the tag commit
* `/retest <pipelinerun-name> tag:<tag>`:: Retrigger only the named `PipelineRun`
* `/cancel tag:<tag>`:: Cancel all running `PipelineRun` for the tag commit
* `/cancel <pipelinerun-name> tag:<tag>`:: Cancel only the named `PipelineRun`

A `PipelineRun` configured to respond to tag events typically includes annotations such as `pipelinesascode.tekton.dev/on-target-branch: "[refs/tags/*]"` and `pipelinesascode.tekton.dev/on-event: "[push]"`. These annotations ensure that tag creation events are recognized as push events and processed correctly. When a tag is created or referenced, {pac} treats it as a push event and uses the resolved commit SHA to run the associated `PipelineRun`. The same logic applies to subsequent GitOps commands added as comments on the tagged commit.

Tag based triggering is particularly useful in continuous delivery scenarios where specific versions or releases are represented by tags. This method enables you to validate and promote release artifacts consistently without modifying the branch state.

The following example shows a minimal `PipelineRun` configuration that triggers on tag events:

[source,yaml]
----
apiVersion: tekton.dev/v1beta1
kind: PipelineRun
metadata:
  name: pipelinerun-on-tag
  annotations:
    pipelinesascode.tekton.dev/on-target-branch: "[refs/tags/*]"
    pipelinesascode.tekton.dev/on-event: "[push]"
spec:
  pipelineSpec:
    tasks:
      - name: tag-task
        taskSpec:
          steps:
            - name: echo
              image: registry.access.redhat.com/ubi9/ubi-micro
              script: |
                echo "tag: {{ git_tag }}"
----