// Module included in the following assemblies:
//
// * operating/manage-vulnerabilities.adoc

:_mod-docs-content-type: CONCEPT
[id="vulnerability-management-export-workloads_{context}"]
= Exporting workload vulnerabilities by using the API

[role="_abstract"]
You can export workload vulnerabilities in {product-title} by using the API.

For these examples, workloads are composed of deployments and their associated images. The export uses the `/v1/export/vuln-mgmt/workloads` streaming API. It allows the combined export of deployments and images. The `images` payload contains the full vulnerability information. The output is streamed and has the following schema:

[source,json]
----
{"result": {"deployment": {...}, "images": [...]}}
...
{"result": {"deployment": {...}, "images": [...]}}
----

The following examples assume that these environment variables have been set:

* `ROX_API_TOKEN`: API token with `view` permissions for the `Deployment` and `Image` resources
* `ROX_ENDPOINT`: Endpoint under which Central's API is available

* To export all workloads, enter the following command:
+
[source,terminal]
----
$ curl -H "Authorization: Bearer $ROX_API_TOKEN" $ROX_ENDPOINT/v1/export/vuln-mgmt/workloads
----
* To export all workloads with a query timeout of 60 seconds, enter the following command:
+
[source,terminal]
----
$ curl -H "Authorization: Bearer $ROX_API_TOKEN" $ROX_ENDPOINT/v1/export/vuln-mgmt/workloads?timeout=60
----
* To export all workloads matching the query `Deployment:app Namespace:default`, enter the following command:
+
[source,terminal]
----
$ curl -H "Authorization: Bearer $ROX_API_TOKEN" $ROX_ENDPOINT/v1/export/vuln-mgmt/workloads?query=Deployment%3Aapp%2BNamespace%3Adefault
----

