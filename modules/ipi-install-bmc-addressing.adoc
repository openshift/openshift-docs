// This is included in the following assemblies:
//
// installing/installing_bare_metal/ipi/ipi-install-configuration-files.adoc

:_mod-docs-content-type: REFERENCE
[id='bmc-addressing_{context}']
= BMC addressing

[role="_abstract"]
The Intelligent Platform Management Interface (IPMI) and the Redfish network boot protocol are two common methods of addressing a Baseboard Management Controller (BMC).

Most vendors support Baseboard Management Controller (BMC) addressing with the Intelligent Platform Management Interface (IPMI). IPMI does not encrypt communications. It is suitable for use within a data center over a secured or dedicated management network. Check with your vendor to see if they support Redfish network boot.

Redfish delivers simple and secure management for converged, hybrid IT and the Software Defined Data Center (SDDC). Redfish is human readable and machine capable, and leverages common internet and web services standards to expose information directly to the modern tool chain. If your hardware does not support Redfish network boot, use IPMI.

You can change the BMC address during installation while the node is in the `Registering` state. If you need to change the BMC address after the node leaves the `Registering` state, you must disconnect the node from Ironic, edit the `BareMetalHost` resource, and reconnect the node to Ironic. See the _Editing a BareMetalHost resource_ section for details.

== IPMI

IPMI uses the `ipmi://<out_of_band_ip>:<port>` address format, which defaults to port `623` if not specified. The following example demonstrates an IPMI configuration within the `install-config.yaml` file.

[source,yaml]
----
platform:
  baremetal:
    hosts:
      - name: openshift-master-0
        role: master
        bmc:
          address: ipmi://<out_of_band_ip>
          username: <user>
          password: <password>
----

[IMPORTANT]
====
When PXE booting using IPMI for BMC addressing, you must use a provisioning network. It is not possible to PXE boot hosts without a provisioning network. If you deploy without a provisioning network, you must use a virtual media BMC addressing option such as `redfish-virtualmedia` or `idrac-virtualmedia`. See "Redfish virtual media for HPE iLO" in the "BMC addressing for HPE iLO" section or "Redfish virtual media for Dell iDRAC" in the "BMC addressing for Dell iDRAC" section for additional details.
====


== Redfish network boot

To enable Redfish, use `redfish://` or `redfish+http://` to disable TLS. The installation program requires both the hostname or the IP address and the path to the system ID. The following example demonstrates a Redfish configuration within the `install-config.yaml` file.

[source,yaml]
----
platform:
  baremetal:
    hosts:
      - name: openshift-master-0
        role: master
        bmc:
          address: redfish://<out_of_band_ip>/redfish/v1/Systems/1
          username: <user>
          password: <password>
----

It is recommended to have a certificate of authority for the out-of-band management addresses. On {product-title} 4.16 and earlier, you must include `disableCertificateVerification: True` in the `bmc` configuration if using self-signed certificates. The following example demonstrates a Redfish configuration by using the `disableCertificateVerification: True` configuration parameter within the `install-config.yaml` file.

[source,yaml]
----
platform:
  baremetal:
    hosts:
      - name: openshift-master-0
        role: master
        bmc:
          address: redfish://<out_of_band_ip>/redfish/v1/Systems/1
          username: <user>
          password: <password>
          disableCertificateVerification: True
----

On {product-title} 4.17 and later, you can include `disableCertificateVerification: False` in the `bmc` configuration to verify self-signed certificates when used in conjunction with the `bmcCACert` parameter. The following example demonstrates the configuration of a BMC CA certificate.

[source,yaml]
----
platform:
  baremetal:
    bmcCACert:
      -----BEGIN CERTIFICATE-----
      ......
      ......
      ......
      -----END CERTIFICATE-----
      -----BEGIN CERTIFICATE-----
      ......
      ......
      ......
      -----END CERTIFICATE-----
      -----BEGIN CERTIFICATE-----
      ......
      ......
      ......
      -----END CERTIFICATE-----
     hosts:
      - name: openshift-master-0
        role: master
        bmc:
          address: redfish://<out_of_band_ip>/redfish/v1/Systems/1
          username: <user>
          password: <password>
          disableCertificateVerification: False
----
