// Module included in the following assemblies:
//
// <List assemblies here, each on a new line>

// This module can be included from assemblies using the following include statement:
// include::<path>/proc_accessing-openshift-through-the-web-console.adoc[leveloffset=+1]

// The file name and the ID are based on the module title. For example:
// * file name: proc_doing-procedure-a.adoc
// * ID: [id='proc_doing-procedure-a_{context}']
// * Title: = Doing procedure A
//
// The ID is used as an anchor for linking to the module. Avoid changing
// it after the module has been published to ensure existing links are not
// broken.
//
// The `context` attribute enables module reuse. Every module's ID includes
// {context}, which ensures that the module has a unique ID even if it is
// reused multiple times in a guide.
//
// Start the title with a verb, such as Creating or Create. See also
// _Wording of headings_ in _The IBM Style Guide_.
[id="accessing-openshift-through-the-web-console_{context}"]
= Accessing OpenShift through the Web Console

This section covers how to set up access to the OpenShift web console on your localhost. The purpose of this is to ensure that you can see cluster health information and manage your cluster through a graphical interface.

[discrete]
== Prerequisites

* A running OpenShift cluster
* Access to the IBM Yellow Lab Environment/VPN
** You can contact mailto:klpesave@us.ibm.com[klpesave@us.ibm.com] or mailto:johnmuln@us.ibm.com[johnmuln@us.ibm.com] for assistance.
** This is only necessary if your cluster is running in the Poughkeepsie lab environment.
* Access via the CLI/API. See instructions above.


[discrete]
== Procedure

This section provides instructions for setting up access to the web console of your running OpenShift cluster. Many of the following steps expect to be run in a terminal. The host it that terminal should be running on is in *bold*.

. Find the url to the web console. This can be obtained by looking at your /etc/hosts on your *localhost*, and copying the URL printed by the command below. It should begin with the word “console” but if it is not present, you’ll want to revisit step 2 in the API/CLI instructions above.
....
$ echo “https://$(grep console /etc/hosts | cut -d' ' -f 4 | awk '/./{line=$0} END{print line}')”
....
+
. Open a web browser like Firefox or Chrome and navigate to the URL obtained in step 1. You will need to use https since the console is not available over regular http.

. Add an exception for the web certificate. This is different, depending on your browser. You can find instructions for this in this online guide.

. Once you accept the security exception, you will be auto-forwarded to the oauth URL, where you will have to accept a second certificate.

. Copy over the kubeadmin password so you can use it to log in to the provisioned cluster.

*z/VM instructions*:
On your *localhost*:
....
$ scp bastion_fqdn_or_ip:kubeadmin-password ~/.kube/kubeadmin-password
....

*z/KVM instructions*:
On the hypervisor:
....
$ scp 192.168.79.1:ocp4-workdir/auth/kubeadmin-password kubeadmin-password
....

On your *localhost*:
....
$ scp hypervisor_fqdn_or_ip:kubeadmin-password ~/.kube/kubeadmin-password
....

. Copy the kubeadmin-password onto your clipboard so you can paste it into the browser window password box.
On your *localhost* if you have xclip installed:
....
$ xclip ~/.kube/kubeadmin-password
....

If you don’t have xclip installed, you can just print out the password on your *localhost* using cat and manually highlight it, right click, and select “Copy” with your mouse. The password will appear before your normal shell prompt after you run the command below.
....
$ cat ~/.kube/kubeadmin-password
....

. Login via your web browser with the username "kubeadmin" and the password that you can paste into the box from your clipboard.

. Congratulations, you should now have access to the OpenShift web console!
