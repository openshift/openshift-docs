// Module included in the following assemblies:
//
// * installing/installing_helm/install-helm-customization.adoc
:_mod-docs-content-type: PROCEDURE
[id="install-secured-cluster-services-helm-chart_{context}"]
= Installing the secured-cluster-services Helm chart with customizations

After you configure the `values-public.yaml` and `values-private.yaml` files, install the `secured-cluster-services` Helm chart to deploy the following per-cluster and per-node components:

* Sensor
* Admission controller
* Collector
* Scanner: optional for secured clusters when the StackRox Scanner is installed
* Scanner DB: optional for secured clusters when the StackRox Scanner is installed
* Scanner V4 Indexer and Scanner V4 DB: optional for secured clusters when Scanner V4 is installed

.Prerequisites
* You must have generated an {product-title-short} init bundle for your cluster.
* You must have access to the Red{nbsp}Hat Container Registry and a pull secret for authentication. For information about downloading images from `registry.redhat.io`, see link:https://access.redhat.com/RegistryAuthentication[Red{nbsp}Hat Container Registry Authentication].
ifndef::cloud-svc[]
* You must have the address and the port number that you are exposing the Central service on.
endif::cloud-svc[]
ifdef::cloud-svc[]
* You must have the *Central API Endpoint* address. You can view this information by choosing *Advanced Cluster Security* -> *ACS Instances* from the Red{nbsp}Hat Hybrid Cloud Console navigation menu, then clicking the {product-title-short} instance you created.
endif::[]

.Procedure

* Run the following command:
+
[source,terminal]
----
$ helm install -n stackrox \
  --create-namespace stackrox-secured-cluster-services rhacs/secured-cluster-services \
  -f <name_of_cluster_init_bundle.yaml> \
  -f <path_to_values_public.yaml> \// <1>
  -f <path_to_values_private.yaml> \// <2>
  --set imagePullSecrets.username=<username> \// <3>
  --set imagePullSecrets.password=<password> <4>
----
<1> Use the `-f` option to specify the paths for your public YAML configuration file.
<2> Use the `-f` option to specify the paths for your private YAML configuration file.
<3> Include the user name for your pull secret for Red{nbsp}Hat Container Registry authentication.
<4> Include the password for your pull secret for Red{nbsp}Hat Container Registry authentication.

[NOTE]
====
To deploy `secured-cluster-services` Helm chart by using a continuous integration (CI) system, pass the init bundle YAML file as an environment variable to the `helm install` command:

[source,terminal]
----
$ helm install ... -f <(echo "$INIT_BUNDLE_YAML_SECRET") <1>
----
<1> If you are using base64 encoded variables, use the `helm install ... -f <(echo "$INIT_BUNDLE_YAML_SECRET" | base64 --decode)` command instead.
====
