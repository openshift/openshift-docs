// Module included in the following assemblies:
//
// * rosa_getting_started_sts/rosa_creating_a_cluster_with_sts/rosa-sts-creating-a-cluster-with-customizations.adoc

[id="rosa-understanding-deployment-modes_{context}"]
= Understanding the auto and manual deployment modes

When installing a {product-title} (ROSA) cluster that uses the AWS Security Token Service (STS), you can choose between the `auto` and `manual` ROSA CLI (`rosa`) modes to create the required AWS Identity and Access Management (IAM) resources.

* `auto` mode. You can use this mode to immediately create the required IAM roles and policies, and an OpenID Connect (OIDC) provider using the current AWS account.

* `manual` mode. With this mode, `rosa` outputs the `aws` commands needed to create the IAM resources. The corresponding policy JSON files are also saved to the current directory. By using `manual` mode, you can review the generated `aws` commands before running them manually.

For more information about the AWS IAM resources required to install ROSA with STS, see _About IAM resources for clusters that use STS_.

[id="rosa-creating-operator-roles-and-oidc-manually-ocm_{context}"]
== Creating the Operator roles and OIDC provider through {cluster-manager}

If you use {cluster-manager-first} to install your cluster and opt to create the required AWS IAM Operator roles and the OIDC provider using `manual` mode, you are prompted to select one of the following methods to install the resources:

* *CloudFormation*. You can use this method to create the Operator roles and the OIDC provider from the CLI using an AWS CloudFormation template and a parameter file. For more information about AWS CloudFormation, see the link:https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/Welcome.html[AWS documentation].

* *AWS CLI (`aws`)*. With this method, you can download and extract an archive file that contains the `aws` commands and policy files required to create the IAM resources. Run the provided CLI commands from the directory that contains the policy files to create the Operator roles and the OIDC provider.

* *ROSA CLI (`rosa`)*. You can run the commands provided through this method to create the Operator roles and the OIDC provider for your cluster using `rosa`.

If you use `auto` mode, {cluster-manager} creates the Operator roles and the OIDC provider automatically, using the permissions provided through the {cluster-manager} IAM role.
