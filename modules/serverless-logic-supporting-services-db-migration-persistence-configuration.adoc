// Module included in the following assemblies:
// * serverless-logic/serverless-logic-managing-supporting-services


:_mod-docs-content-type: REFERENCE
[id="serverless-logic-supporting-services-db-migration-persistence-configuration_{context}"]
= Database migration configuration

Database migration refers to either initializing a given Data Index or Jobs Service database to its respective schema, or applying data or schema updates when new versions are released. You must configure the database migration strategy individually for each supporting service by using the `dataIndex.persistence.dbMigrationStrategy` and `jobService.persistence.dbMigrationStrategy` optional fields. If you do not configure a migration strategy, the system uses `service` as the default value.

[NOTE]
====
Database migration is supported only when using the PostgreSQL persistence configuration.
====

You can configure any of the following database migration strategies:

[id="serverless-logic-supporting-services-job-based-db-migration-strategy_{context}"]
== Job-based database migration strategy

When you configure the job-based strategy, the {ServerlessLogicOperatorName} uses a dedicated Kubernetes `Job` to manage the entire migration process. This `Job` runs before the supporting services deployment, ensuring that a service starts only if the corresponding migration completes successfully. You typically use this strategy in production environments.

[id="serverless-logic-supporting-services-service-based-db-migration-strategy_{context}"]
== Service-based database migration strategy

When you configure the service-based strategy, the database migration is managed directly by each supporting service. The migration is executed as part of the service startup sequence. In worst-case scenarios, a service might start with failures if the migration is unsuccessful. Service-based database migration is the default strategy when you do not specify any configuration.

[id="serverless-logic-supporting-services-none-db-migration-strategy_{context}"]
== None migration strategy

When you configure the `none` strategy, neither the Operator nor the service attempts to perform the migration. You typically use this strategy in environments where a database administrator (DBA) manually executes all database migrations.