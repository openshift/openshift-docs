// Module included in the following assemblies:
// * serverless-logic/serverless-logic-upgrading-operator-from-1-36-to-1-37


:_mod-docs-content-type: PROCEDURE
[id="serverless-logic-upgrading-1-37-osl-operator_{context}"]
= Upgrading the {ServerlessLogicOperatorName} to 1.37.0

You can upgrade the {ServerlessLogicOperatorName} from version 1.36.0 to 1.37.0 by performing the following steps.

.Prerequisites

* You have access to the cluster with `cluster-admin` privileges.
* You have {ServerlessLogicOperatorName} installed on your cluster.
* You have access to a {ServerlessLogicProductName} project with the appropriate roles and permissions to create applications and other workloads in {ocp-product-title}.
* You have installed the OpenShift CLI (`oc`).
* You have version 1.36.0 of {ServerlessLogicOperatorName} installed.

.Procedure

. Uninstall the current {ServerlessLogicOperatorName} 1.36.0.
+
.. Delete the existing Operator subscription by running the following command:
+
[source,terminal]
----
$ oc delete subscriptions.operators.coreos.com logic-operator-rhel8 -n openshift-serverless-logic
----
+
[NOTE]
====
You must use the fully qualified resource name `subscriptions.operators.coreos.com` to avoid short-name collisions with Knative Eventing resources.
====
+
.. Delete the existing `ClusterServiceVersion` (CSV) by running the following command:
+
[source,terminal]
----
$ oc delete csv logic-operator-rhel8.v1.36.0 -n openshift-serverless-logic
----

. Remove Data Index and Job Service database initialization jobs by running the following command:
+
In every namespace where a `SonataFlowPlatform` resource is installed and configured with `dbMigrationStrategy: job` for either Data Index or Job Service, remove the associated database migration job.
+
[source,terminal]
----
$ oc delete job sonataflow-db-migrator-job -n <target-namespace>
----

. Install the {ServerlessLogicOperatorName} 1.37.0 by running the following command:
+
.. Create the following `Subscription` resource:
+
[source,yaml]
----
apiVersion: operators.coreos.com/v1alpha1
kind: Subscription
metadata:
  labels:
    operators.coreos.com/logic-operator.openshift-serverless-logic: ''
  name: logic-operator
  namespace: openshift-serverless-logic
spec:
  channel: stable
  installPlanApproval: Manual
  name: logic-operator
  source: redhat-operators
  sourceNamespace: openshift-marketplace
  startingCSV: logic-operator.v1.37.0
----
+
[NOTE]
====
You must use Manual install plan approval.
====

. Approve the install plan.
+
.. Query the pending install plan by running the following command:
+
[source,terminal]
----
$ oc get installplan -n openshift-serverless-logic
----
+
You must get an output similar to the following:
+
[source,terminal]
----
NAME            CSV                            APPROVAL   APPROVED
install-XXXX    logic-operator.v1.37.0         Manual     false
----
+
.. Approve the install plan by running the following command:
+
[source,terminal]
----
$ oc patch installplan install-XXXX -n openshift-serverless-logic --type merge -p '{"spec":{"approved":true}}'
----
