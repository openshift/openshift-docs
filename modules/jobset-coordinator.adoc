// Module included in the following assemblies:
//
// * ai_workloads/jobset_operator/managing-jobset.adoc

:_mod-docs-content-type: PROCEDURE
[id="js-coordinator_{context}"]
= Specifying a JobSet coordinator

[role="_abstract"]
To manage communication between JobSet pods, you can assign a specific JobSet coordinator pod. This ensures that your distributed workloads have a central point of coordination for task synchronization and data exchange.

.Prerequisites

* You have installed the {js-operator}.

.Procedure
//Need to create new namespace first?
. Create a YAML file called `jobset-coordinator.yaml`:
+
.Example output
[source,yaml]
----
apiVersion: jobset.x-k8s.io/v1alpha2
kind: JobSet
metadata:
  name: coordinator
spec:
  coordinator:
    replicatedJob: driver
    jobIndex: 0
    podIndex: 0
  replicatedJobs:
  - name: workers
    template:
      spec:
        parallelism: 3
        completions: 3
        backoffLimit: 0
        template:
          spec:
            containers:
            - name: worker
              env:
                - name: COORDINATOR_ENDPOINT
                  valueFrom:
                    fieldRef:
                      fieldPath: metadata.labels['jobset.sigs.k8s.io/coordinator']
              image: nginxinc/nginx-unprivileged:1.27
              command: [ "/bin/bash", "-c" ]
              args:
                - |
                  while ! curl -s "${COORDINATOR_ENDPOINT}:8080" | grep Welcome; do
                    sleep 3
                  done
                  sleep 100
  - name: driver
    template:
      spec:
        parallelism: 1
        completions: 1
        backoffLimit: 0
        template:
          spec:
            containers:
            - name: driver
              image: nginxinc/nginx-unprivileged:1.27
            ports:
              - containerPort: 8080
                protocol: TCP
----
+
where:
+
--
`parallelism`:: Specifies the number of pods running at the same time.
`completions`:: Specifies the total number of pods that must finish successfully for the job to be marked complete.
--

. Apply the `jobset-coordinator.yaml` file by running the following command:
+
[source,terminal]
----
$ oc apply -f jobset-coordinator.yaml
----

.Verification

. Verify that pods were created by running the following command:
+
[source,terminal]
----
$ oc get pods -n my-namespace
----
+
.Example output
[source,terminal]
----
NAME                            READY   STATUS              RESTARTS   AGE
coordinator-driver-0-0-svgk7    1/1     Running             0          67s
coordinator-workers-0-0-57jvg   1/1     Running             0          67s
coordinator-workers-0-1-mghvx   1/1     Running             0          67s
coordinator-workers-0-2-7cnvv   1/1     Running             0          67s
pytorch-workers-0-0-2lzwt       1/1     Running             0          7m27s
pytorch-workers-0-1-g2lrv       1/1     Running             0          7m27s
pytorch-workers-0-2-dpljq       1/1     Running             0          7m27s
----