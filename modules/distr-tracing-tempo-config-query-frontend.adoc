// Module included in the following assemblies:
//
// * distr_tracing_tempo/distr-tracing-tempo-configuring.adoc

:_content-type: REFERENCE
[id="distr-tracing-tempo-config-query_{context}"]
= Query configuration options

Query is a service that retrieves traces from storage and hosts the user interface to display them.

.Configuration parameters for the Querier
[options="header"]
|===
|Parameter |Description |Values |Default value

|`nodeSelector`
|NodeSelector is the simplest recommended form of node selection constraint.
|type: object, additionalProperties: type: string
|

|`replicas`
| Replicas represents the number of replicas to create for this component.
| type: integer, format: int32
|

|`tolerations`
|Tolerations defines component specific pod tolerations.
|type: array, x-kubernetes-list-type: atomic
|

|`Tolerations` (items)
|The pod this Toleration is attached to tolerates any taint that matches the triple <key, value, effect> using the matching operator <operator>.
|type: object
|

|`effect`
| Effect indicates the taint effect to match. Empty means match all taint effects. When specified, allowed values are NoSchedule, PreferNoSchedule, and NoExecute.
|type: string
|

|`key`
|Key is the taint key that the toleration applies to. Empty means match all taint keys. If the key is empty, operator must be Exists; this combination means to match all values and all keys.
|type: string
|

|`operator`
|Operator represents a key's relationship to the value. Valid operators are Exists and Equal. Defaults to Equal. Exists is equivalent to wildcard for value, so that a pod can tolerate all taints of a particular category.
|type: string
|

|`tolerationSeconds`
|TolerationSeconds represents the period of time the toleration (which must be of effect NoExecute, otherwise this field is ignored) tolerates the taint. By default, it is not set, which means tolerate the taint forever (do not evict). Zero and negative values will be treated as 0 (evict immediately) by the system.
|type: integer, format: int64
|

|`value`
|Value is the taint value the toleration matches to. If the operator is Exists, the value should be empty, otherwise just a regular string.
|type: string
|

|===


.Configuration parameters for the Query Frontend
[options="header"]
|===
|Parameter |Description |Values |Default value

|`component`
|TempoComponentSpec is embedded to extend this definition with further options. Currently, there is no way to inline this field.
|type: object
|

|`nodeSelector` (inside component)
|NodeSelector is the simplest recommended form of node selection constraint.
|type: object, additionalProperties: type: string
|

|`replicas` (inside component)
|Replicas represents the number of replicas to create for this component.
|type: integer, format: int32
|

|`tolerations` (inside component)
|Tolerations defines component specific pod tolerations.
|type: array, x-kubernetes-list-type: atomic
|

|`Tolerations` (items, inside component)
|The pod this Toleration is attached to tolerates any taint that matches the triple <key, value, effect> using the matching operator <operator>.
|type: object
|

|`effect` (inside component)
|Effect indicates the taint effect to match. Empty means match all taint effects. When specified, allowed values are NoSchedule, PreferNoSchedule, and NoExecute.
|type: string
|

|`key` (inside component)
|Key is the taint key that the toleration applies to. Empty means match all taint keys. If the key is empty, operator must be Exists; this combination means to match all values and all keys.
|type: string
|

|`operator` (inside component)
|Operator represents a key's relationship to the value. Valid operators are Exists and Equal. Defaults to Equal. Exists is equivalent to wildcard for value, so that a pod can tolerate all taints of a particular category.
|type: string
|

|`tolerationSeconds` (inside component)
|TolerationSeconds represents the period of time the toleration (which must be of effect NoExecute, otherwise this field is ignored) tolerates the taint. By default, it is not set, which means tolerate the taint forever (do not evict). Zero and negative values will be treated as 0 (evict immediately) by the system.
|type: integer, format: int64
|

|`value` (inside component)
|Value is the taint value the toleration matches to. If the operator is Exists, the value should be empty, otherwise just a regular string.
|type: string
|

|`jaegerQuery`
|JaegerQuerySpec defines Jaeger Query specific options.
|
|

|`enabled`
|Enabled is used to define if Jaeger Query component should be created.
|type: boolean
|

|`ingress`
|Ingress defines Jaeger Query Ingress options.
|type: object
|

|`annotations`
|Annotations defines the annotations of the Ingress object.
|type: object, additionalProperties: type: string
|

|`host`
|Host defines the hostname of the Ingress object.
|type: string
|

|`ingressClassName`
|IngressClassName is the name of an IngressClass cluster resource. Ingress controller implementations use this field to know whether they should be serving this Ingress resource.
|type: string
|

|`route`
|Route defines OpenShift Route specific options.
|type: object
|

|`termination`
|Termination specifies the termination type. By default "edge" is used.
|type: string (enum: insecure, edge, passthrough, reencrypt)
|

|`type`
|Type defines the type of Ingress for the Jaeger Query UI. Currently ingress, route, and none are supported.
|type: string (enum: ingress, route)
|

|===

.Sample Query configuration
[source,yaml]
----
apiVersion: tempo.grafana.com/v1alpha1
kind: TempoStack
metadata:
  name: simplest
spec:
  storage:
    secret:
      name: minio
      type: s3
  storageSize: 200M
  resources:
    total:
      limits:
        memory: 2Gi
        cpu: 2000m
  template:
    queryFrontend:
      jaegerQuery:
        enabled: true
        ingress:
          route:
            termination: edge
          type: route
----
