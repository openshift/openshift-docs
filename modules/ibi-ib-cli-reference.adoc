// Module included in the following assemblies:
//
// * edge_computing/ibi-image-based-install.adoc 

:_content-type: REFERENCE
[id="ibi-ib-cli-reference_{context}"]
= ib-cli CLI tool API specifications

The `ib-cli` CLI tool uses the `image-based-install-iso.yaml` file to create a live installation ISO. The following content describes the specifications for the `image-based-install-iso.yaml`. 

.Required specifications
[options="header"]
[cols="2a,1a,4a"]
|====
|Specification|Type|Description
|`seedImage`|`string`|Specifies the seed image to use in the ISO generation process.
|`seedVersion`|`string`|Specifies the {product-title} release version of the seed image.
|`installationDisk`|`string`|Specifies the disk that will be used for the installation process. 

Because the disk discovery order is not guaranteed, the kernel name of the disk can change across booting options for machines with multiple disks. For example, `/dev/sda` becomes `/dev/sdb` and vice versa. To avoid this issue, you must use a persistent disk attribute, such as the disk World Wide Name (WWN), for example: `/dev/disk/by-id/wwn-<disk-id>`.

|`pullSecret`|`string`|Specifies the pull secret to use during the precache process. The pull secret contains authentication credentials for pulling the release payload images from the container registry. 

If the seed image requires a separate private registry authentication, add the authentication details to the pull secret. 

|====

.Optional specifications
[options="header"]
[cols="2a,1a,4a"]
|====
|Specification|Type|Description
|`shutdown`|`boolean`|Specifies if the host shuts down after the installation process completes.
|`extraPartitionStart`|`string`|Specifies the start of the extra partition used for `/var/lib/containers`. The partition will expand until the end of the disk. Uses sgdisk notation.
|`extraPartitionLabel`|`string`|The label of the extra partition you use for `/var/lib/containers`. The default label is `varlibcontainers`.
|`extraPartitionNumber`|`unsigned integer`|The number of the extra partition you use for `/var/lib/containers`. The default number is `5`.
|`skipDiskCleanup`|`boolean`|The installation process formats the disk on the host. Set this specification to 'true' to skip this step. The default is `false`.
|`rhcosLiveIso`|`string`|Specifies the URL for the {op-system} live ISO image used for generating the installation ISO. The default value is `https://mirror.openshift.com/pub/openshift-v4/amd64/dependencies/rhcos/latest/rhcos-live.x86_64.iso`.
|`nmStateConfig`|`string`|Specifies networking configurations for the host, for example:
[source,yaml]
----
nmStateConfig: \|
    interfaces:
      - name: ens1f0
        type: ethernet
        state: up
        ...
----
For further information about defining network configurations using `nmstate`, see link:https://nmstate.io/[nmstate.io].
[IMPORTANT]
====
The name of the interface must match the actual NIC name as shown in the operating system.
====
|`proxy`|`string`|Specifies proxy settings to use during the installation ISO generation, for example:
[source,yaml]
----
proxy:
  httpProxy: "http://proxy.example.com:8080"
  httpsProxy: "http://proxy.example.com:8080"
  noProxy: "no_proxy.example.com"
----
|`imageDigestSources`|`string`|Specifies the sources or repositories for the release-image content, for example:
[source,yaml]
----
imageDigestSources:
  - mirrors:
      - "<mirror_host>:<mirror_port>/ocp4/openshift4"
    source: "quay.io/openshift-release-dev/ocp-release"
----
|`additionalTrustBundle`|`string`|Specifies the PEM-encoded X.509 certificate bundle. The installation program copies this to `/etc/pki/ca-trust/source/anchors/` in the installation ISO.
[source,yaml]
----
additionalTrustBundle: \|
  -----BEGIN CERTIFICATE-----
  MIICLDCCAdKgAwIBAgIBADAKBggqhkjOPQQDAjB9MQswCQYDVQQGE
  ...
  l4wOuDwKQa+upc8GftXE2C//4mKANBC6It01gUaTIpo=
  -----END CERTIFICATE-----
----
|`sshKey`|`string`|Specifies the SSH key to authenticate access to the host.


|====
