// Module included in the following assemblies:
// * serverless-logic/serverless-logic-configuring-custom-maven-mirrors.adoc


:_mod-docs-content-type: PROCEDURE
[id="serverless-logic-config-maven-mirror-on-custom-image_{context}"]
= Configuring a Maven mirror on a custom image

You can configure a Maven mirror for workflows that run in `dev` mode by adding the `MAVEN_MIRROR_URL` environment variable to the `SonataFlow` custom resource (CR). 

.Prerequisites 

* You have created your {ServerlessLogicProductName} project. 
* You have access to a {ServerlessLogicProductName} project with the appropriate roles and permissions to create applications and other workloads in {ocp-product-title}.
* You have access to a dockerfile or container build context that uses the SonataFlow Builder image.
* You have access to a custom Maven mirror or internal repository.

.Procedure

. Set the Maven mirror as an environment variable in the Dockerfile as shown in the following example:
+
.Example of custom container file with Maven mirror set as an environment variable
[source,terminal]
----
FROM docker.io/apache/incubator-kie-sonataflow-builder:main AS builder

# Content suppressed for brevity

# The Maven mirror URL set as an env var during the build process
ENV MAVEN_MIRROR_URL=http://my.company.registry.local
----
+
The `ENV` directive ensures that all builds with this Dockerfile automatically use the specified Maven mirror.

. Set the Maven mirror as a build-time argument in the Dockerfile as shown in the following example:
+
.Example of custom container file with Maven mirror set as an argument
[source,terminal]
----
FROM docker.io/apache/incubator-kie-sonataflow-builder:main AS builder

# Content suppressed for brevity

# The Maven mirror URL passed as a build argument during the build process
ARG MAVEN_MIRROR_URL
----
+
The `ARG` directive allows you to pass the Maven mirror value dynamically at build time.
