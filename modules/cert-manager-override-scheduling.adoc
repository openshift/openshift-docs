// Module included in the following assemblies:
//
// * security/cert_manager_operator/cert-manager-customizing-api-fields.adoc

:_mod-docs-content-type: PROCEDURE
[id="cert-manager-override-scheduling_{context}"]
= Configuring scheduling overrides for cert-manager Operator components

After installing the {cert-manager-operator}, you can configure the pod scheduling from the {cert-manager-operator} API for the {cert-manager-operator} components such as {cert-manager-operator} controller, CA injector, and Webhook. Configuring the `overrideScheduling` block in the `certmanager.operator` custom resource enables you to define `nodeSelector` and `tolerations` for the `controllerConfig`, `webhookConfig`, and `cainjectorConfig` sections respectively.

.Prerequisites

* You have access to the {product-title} cluster as a user with the `cluster-admin` role.
* You have installed the {cert-manager-operator} 1.15.0 or later.

.Procedure

* To configure scheduling overrides, modify the `certmanager.operator` custom resource. Use the `overrideScheduling` field within `controllerConfig`, `webhookConfig`, or `cainjectorConfig` to specify `nodeSelector` and `tolerations` for overriding scheduling of {cert-manager-operator} `controller`, `webhook` or `cainjector` pods respectively.
+
.Example output
[source,yaml]
----
$ oc patch certmanager.operator cluster --type=merge -p="
spec:
  controllerConfig:
    overrideScheduling:
      nodeSelector:
        node-role.kubernetes.io/control-plane: '' <1>
      tolerations:
        - key: node-role.kubernetes.io/master
          operator: Exists
          effect: NoSchedule <2>
  webhookConfig:
    overrideScheduling:
      nodeSelector:
        node-role.kubernetes.io/control-plane: '' <3>
      tolerations:
        - key: node-role.kubernetes.io/master
          operator: Exists
          effect: NoSchedule <4>
  cainjectorConfig:
    overrideScheduling:
      nodeSelector:
        node-role.kubernetes.io/control-plane: '' <5>
      tolerations:
        - key: node-role.kubernetes.io/master
          operator: Exists
          effect: NoSchedule <6>
----
<1> Defines the control-plane `nodeSelection` for the `controllerConfig` override scheduling.
<2> Defines the `toleration` for `controllerConfig`.
<3> Defines the `nodeSelector` for `webhookConfig`.
<4> Defines the `toleration` for `webhookConfig`.
<5> Defines the `nodeSelector` for `cainjectorConfig`.
<6> Defines the `toleration` for `cainjectorConfig`.


.Verification

. Verify the updated `certmanager.operator` custom resource by:

* Check the deployments in the [cert-manager-operator] namespace to confirm they have the correct `nodeSelector` and `tolerations`:
+
[source,terminal]
----
$ oc get pods -n cert-manager -o wide
----
+
.Example output
[source,yaml]
----
$ oc get deployments -n cert-manager -o jsonpath='{range .items[*]}{.metadata.name}{"\n"}{.spec.template.spec.nodeSelector}{"\n"}{.spec.template.spec.tolerations}{"\n\n"}{end}'
----

. Verify pod scheduling in the {cert-manager-operator} namespace:
+
[source,terminal]
----
$ oc get events -n cert-manager --field-selector reason=Scheduled
----