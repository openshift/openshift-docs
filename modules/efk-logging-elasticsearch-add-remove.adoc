// Module included in the following assemblies:
//
// * logging/efk-logging-elasticsearch.adoc

[id="efk-logging-elasticsearch-add-remove-{context}"]
= Scaling the number of nodes in your Elasticsearch cluster

Scaling the number of data nodes in Elasticsearch canhave a number of benefits.

For example, if you want to increase redundancy using the `FullRedundancy` or `MultipleRedundancy` policy, you can scale up the cluster to increase the number of shard replicas in your cluster.  

[NOTE]
====
The Elasticsearch Operator does not allow more than three Elasticsearch master nodes.
====

.Prerequisites

* Cluster logging and Elasticsearch must be installed.

* Set cluster logging to the unmanaged state.

* If needed, get the name of the Elasticsearch Custom Resource in the `openshift-logging` project:
+
----
$ oc get ClusterLogging
NAME       AGE
instance   112m
----

.Procedure

. To scale up the cluster, edit the Elasticsearch Custom Resource (CR) to add a number of nodes of a specific type:
+
[source,yaml]
----
apiVersion: "logging.openshift.io/v1"
kind: "ClusterLogging"
metadata:
  name: "clusterlogging"
...
- nodeCount: 1  <1>
  resources: {}
  roles:
    - data
  storage: {}
----
<1> Specify the number of nodes of this type.
+
For example, to add two data-only nodes to your cluster:
+
[source,yaml]
----
- nodeCount: 2  (1)
  resources: {}
  roles:
    - data
  storage: {}
----
////
. To scale down, edit the Cluster Logging Custom Resource (CR) to reduce the number of nodes of a specific type:
+
[source,yaml]
----
apiVersion: "logging.openshift.io/v1"
kind: "ClusterLogging"
metadata:
  name: "clusterlogging"
...
nodes:
  - nodeCount: 2 <1>
    nodeSpec:
      resources: {}
----
<1> Specify the number of nodes you want in your cluster.
////
