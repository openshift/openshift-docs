// Module included in the following assemblies:
//
// * installing/installing_ibm_z/installing-restricted-networks-ibm-z-kvm.adoc
// * installing/installing_ibm_z/installing-ibm-z-kvm.adoc

:_mod-docs-content-type: PROCEDURE
[id="installation-user-infra-machines-iso-ibm-z_kvm_{context}"]
= Fast-track installation by using a prepackaged QCOW2 disk image

Complete the following steps to create the machines in a fast-track installation of {op-system-first}, importing a prepackaged {op-system-first} QEMU copy-on-write (QCOW2) disk image.

.Prerequisites

* At least one LPAR running on {op-system-base} 8.6 or later with KVM, referred to as {op-system-base} KVM host in this procedure.
* The KVM/QEMU hypervisor is installed on the {op-system-base} KVM host.
* A domain name server (DNS) that can perform hostname and reverse lookup for the nodes.
* A DHCP server that provides IP addresses.

.Procedure

. Obtain the {op-system-base} QEMU copy-on-write (QCOW2) disk image file from the link:https://access.redhat.com/downloads/content/290[Product Downloads] page on the Red Hat Customer Portal or from the link:https://mirror.openshift.com/pub/openshift-v4/s390x/dependencies/rhcos/latest/[{op-system} image mirror] page.
+
[IMPORTANT]
====
The {op-system} images might not change with every release of {product-title}.
You must download images with the highest version that is less than or equal
to the {product-title} version that you install. Only use the appropriate {op-system} QCOW2 image described in the following procedure.
====
+
. Download the QCOW2 disk image and Ignition files to a common directory on the {op-system-base} KVM host.
+
For example: `/var/lib/libvirt/images`
+
[NOTE]
====
The Ignition files are generated by the {product-title} installer.
====
. Create a new disk image with the QCOW2 disk image backing file for each KVM guest node.
+
[source,terminal]
----
$ qemu-img create -f qcow2 -F qcow2 -b /var/lib/libvirt/images/{source_rhcos_qemu} /var/lib/libvirt/images/{vmname}.qcow2 {size}
----
+
. Create the new KVM guest nodes using the Ignition file and the new disk image.
+
[source,terminal]
----
$ virt-install --noautoconsole \
   --connect qemu:///system \
   --name <vm_name> \
   --memory <memory_mb> \
   --vcpus <vcpus> \
   --disk <disk> \
   --launchSecurity type="s390-pv" \ <1>
   --import \
   --network network=<virt_network_parm>,mac=<mac_address> \
   --disk path=<ign_file>,format=raw,readonly=on,serial=ignition,startup_policy=optional <2>
----
<1> If {ibm-name} Secure Execution is enabled, add the `launchSecurity type="s390-pv"` parameter.
<2> If {ibm-name} Secure Execution is enabled, replace `serial=ignition` with `serial=ignition_crypted`.