// Module included in the following assemblies:
//
// networking/configuring-networkpolicy.adoc

[id="nw-networkpolicy-create_{context}"]

= Creating a NetworkPolicy object

To define granular rules describing Ingress network traffic allowed for projects
in your cluster, you can create NetworkPolicy objects.

[IMPORTANT]
====
If you create a network policy that uses a `podSelector`, and later you create a new Pod that will be matched by the `podSelector`, then you must delete and recreate the network policy for it to apply to the new Pod.
This will be fixed in a future release of {product-title}.
====

.Prerequisites

* A cluster using the OpenShift SDN network plug-in with `mode: NetworkPolicy`
set. This mode is the default for OpenShift SDN.
* Install the OpenShift Command-line Interface (CLI), commonly known as `oc`.
* You must log in to the cluster.

.Procedure

. Create a policy rule:
.. Create a `<policy-name>.yaml` file where `<policy-name>` describes the policy
rule.
.. In the file you just created define a policy object, such as in the following
example:
+
[source,yaml]
----
kind: NetworkPolicy
apiVersion: networking.k8s.io/v1
metadata:
  name: <policy-name> <1>
spec:
  podSelector:
  ingress: []
----
<1> Specify a name for the policy object.

. Run the following command to create the policy object:
+
----
$ oc create -f <policy-name>.yaml -n <project>
----
+
In the following example, a new NetworkPolicy object is created in a project
named `project1`:
+
----
$ oc create -f default-deny.yaml -n project1
networkpolicy "default-deny" created
----
