// Module included in the following assemblies:
//
// * installing/installing_rhv/installing-rhv-preparing-to-install.adoc

[id="installation-rhv-verifying-the-rhv-environment_{context}"]
= Verifying the {rh-virtualization} environment
:rhv-version: 4.3.9

Verify that the {rh-virtualization} environment meets the requirements to install and run a {product-title} cluster. Not meeting these requirements can cause failures.

[IMPORTANT]
====
The following requirements are based on the resources allocations in the virtual machine template the installation program uses to create master and worker nodes. If you customize the virtual machine template or change the size of the cluster, adjust these requirements.
====

.Requirements

* The {rh-virtualization} version is {rhv-version} or later
* The {rh-virtualization} environment contains at least one datacenter and one cluster
* The {rh-virtualization} cluster has the following resources exclusively for the {product-title} cluster:
** Minimum 24 vCPUs: 4 vCPUs for each of the 6 virtual machines created during installation
** 64 GiB RAM or more
*** 8 GiB required, 16 GiB recommended, for the Bootstrap node, which provides the temporary control plane
*** 8 GiB required, 16 GiB recommended, for each of the three master nodes which provide the control plane
*** 16 GiB for each of the two worker nodes, which run the application workloads
* The {rh-virtualization} storage domain for the {product-title} cluster must have 175 GiB or more
* The {rh-virtualization} cluster has access to an Internet connection
* The {rh-virtualization} cluster has a virtual network with access to the REST API on the {rh-virtualization} Manager

[NOTE]
====
* All together, the hosts must have the required memory and CPU resources **in addition to and aside from** what they use to operate or provide to non-{product-title} operations.
* The release cycles of {product-title} and
{rh-virtualization} are different and versions tested might vary in the future
depending on the release dates of both products.
====

.Procedure

. Check the {rh-virtualization} version.
.. In the {rh-virtualization} Administration Portal, click the *?* help icon in the upper-right corner and select *About*.
.. In the dialog that opens, confirm that the **{rh-virtualization} Software Version** is **{rhv-version}** or later.

. Inspect the data center, cluster, and storage.
.. In the {rh-virtualization} Administration Portal, click *Compute* -> *Data Centers*.
.. Click the data center where you plan to install {product-title}.
.. From the data center details, record the name of the storage domain you plan to use for {product-title}.
.. Confirm that the storage domain has at least 175 GiB of free space.
.. Click *Compute* > *Clusters*.
.. Identify the {rh-virtualization} cluster where you plan to install {product-title} and record its name.
.. For this cluster, confirm that the data center column contains the data center for installing {product-title}.


. Inspect the {rh-virtualization} host resources.
.. In the {rh-virtualization} Administration Portal, click *Compute > Clusters*.
.. Click the cluster for installing {product-title} to display its details.
.. In the cluster details, click the *Hosts* tab.
.. Confirm that the hosts have a combined total of at least 24 CPU cores available _exclusively_ for the {product-title} cluster. These CPUs must be distributed so that each of the 6 virtual machines created during installation can have 4 CPU cores.
.. Confirm that, all together, the hosts have 64 GiB free memory for the following {product-title} nodes:
** 8 GiB required, 16 GiB recommended, for the Bootstrap node.
** 8 GiB required, 16 GiB recommended, for each of the three master nodes
** 16 GiB for each of the two worker nodes
+
. Verify that the virtual network for installing {product-title} has access to the {rh-virtualization} Manager’s REST API.
.. From a virtual machine on this network, use a curl command with the {rh-virtualization} Manager’s REST API. Use the following format:
+
----
curl -k -u <rhv-admin>:<password> \ <1>
https://<engine-fqdn>/ovirt-engine/api <2>
----
<1> For `<rhv-admin>` and `<password>`, specify the username and password of an {rh-virtualization} user with `SuperUser` or `ClusterAdmin` privileges.
<2> For `<engine-fqdn>`, specify the fully qualified domain name of the {rh-virtualization} environment.
+
For example:
+
----
curl -k -u rhvadmin:pw123 https://rhv-env.virtlab.example.com/ovirt-engine/api
----

NOTE: The Bootstrap node provides a temporary control plane while the installation program creates the cluster. After it creates the cluster, the installation program removes the bootstrap node and releases its resources.
