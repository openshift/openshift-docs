// Module included in the following assemblies:
// * networking/configuring-network-operator.adoc

////
TODO

This may be two assemblies for additionalNetworks and kubeProxy respectively
////

[id="network-modifying-config-{context}"]
= Modifying network configuration in a running cluster

The Network Operator reconciles the state of the cluster against a desired
configuration.

// "You can also create new additionalNetworks"
You can modify only `kubeProxy` configuration parameters in a running cluster.

.Prerequisites

* Install the `oc` command line interface.
* Log in to a running cluster as a cluster administrator.

.Procedure

. Use the following command to edit the `Network.operator.openshift.io` Custom
Resource (CR):
+
----
$ oc edit network.operator.openshift.io cluster
----
+
The following example output shows a `Network.operator.openshift.io` CR that has
been configured with default values.
+
// TODO
// Verify this output by running the command on a running cluster
// Is apiVersion: config.openshift.io/v1 correct?
[source,yaml]
----
# Please edit the object below. Lines beginning with a '#' will be ignored,
# and an empty file will abort the edit. If an error occurs while saving this file will be
# reopened with the relevant failures.
#
apiVersion: config.openshift.io/v1
kind: Network
metadata:
  name: cluster
spec:
  clusterNetwork:
  - cidr: 10.128.0.0/14
    hostPrefix: 23
  networkType: OpenShiftSDN
  serviceNetwork:
  - 172.30.0.0/16
status:
  clusterNetwork:
  - cidr: 10.128.0.0/14
    hostPrefix: 23
  clusterNetworkMTU: 8951
  networkType: OpenShiftSDN
  serviceNetwork:
  - 172.30.0.0/16
----

. Add the following code to the `spec` field in the
`Network.operator.openshift.io` CR:
+
[source,yaml]
----
spec:
  deployKubeProxy: false
  kubeProxyConfig:
   iptablesSyncPeriod: 30s
   bindAddress: 0.0.0.0
   proxyArguments:
   - "iptables-min-sync-period": ["30s"]
----

. Save the file and exit the text editor.
+
The syntax is validated by the `oc` command when you save the file and exit the
editor. If your modifications contain a syntax error, the editor opens the file
and displays an error message.
