// This module is included in the following assemblies:
// * create/remote-pipelines-tasks-resolvers.adoc

// // *openshift_pipelines/remote-pipelines-tasks-resolvers.adoc
:_mod-docs-content-type: PROCEDURE
[id="resolver-cluster-specify_{context}"]
= Specifying a pipeline, task, or step action from the same cluster using the cluster resolver

When creating a pipeline run, you can specify a pipeline that exists on the same cluster. When creating a pipeline or a task run, you can specify a task that exists on the the same cluster. When creating a step within a task, you can specify a `StepAction` definition that exists on the the same cluster.

.Procedure

* To specify a pipeline, task, or `StepAction` definition from the same cluster, use the following reference format in the `pipelineRef`, `taskRef`, or `step.ref` spec:
+
[source,yaml]
----
# ...
  resolver: cluster
  params:
  - name: name
    value: <name>
  - name: namespace
    value: <namespace>
  - name: kind
    value: [pipeline|task|stepaction]
# ...
----
+
.Supported parameters for the cluster resolver
|===
| Parameter | Description | Example value

| `name`
| The name of the resource to fetch.
| `some-pipeline`

| `namespace`
| The namespace in the cluster containing the resource.
| `other-namespace`

| `kind`
| The kind of the resource to fetch.
| `pipeline`

|===
+
If the pipeline or task requires additional parameters, provide these parameters in `params`.

.Examples

The following example pipeline run references a pipeline from the same cluster:

[source,yaml]
----
apiVersion: tekton.dev/v1
kind: PipelineRun
metadata:
  name: cluster-pipeline-reference-demo
spec:
  pipelineRef:
    resolver: cluster
    params:
    - name: name
      value: some-pipeline
    - name: namespace
      value: test-namespace
    - name: kind
      value: pipeline
  params:
  - name: sample-pipeline-parameter
    value: test
----

The following example pipeline references a task from the same cluster:

[source,yaml]
----
apiVersion: tekton.dev/v1
kind: Pipeline
metadata:
  name: pipeline-with-cluster-task-reference-demo
spec:
  tasks:
  - name: "cluster-task-reference-demo"
    taskRef:
      resolver: cluster
      params:
      - name: name
        value: some-task
      - name: namespace
        value: test-namespace
      - name: kind
        value: task
    params:
    - name: sample-task-parameter
      value: test
----

The following example task run references a task from the same cluster:

[source,yaml]
----
apiVersion: tekton.dev/v1
kind: TaskRun
metadata:
  name: cluster-task-reference-demo
spec:
  taskRef:
    resolver: cluster
    params:
    - name: name
      value: some-task
    - name: namespace
      value: test-namespace
    - name: kind
      value: task
  params:
  - name: sample-task-parameter
    value: test
----

The following example task includes a step that references a `StepAction` definition from the same cluster:

[source,yaml]
----
apiVersion: tekton.dev/v1
kind: Task
metadata:
  name: cluster-stepaction-reference-demo
spec:
  steps:
  - name: example-step
    ref:
      resolver: cluster
      params:
      - name: name
        value: some-step
      - name: namespace
        value: test-namespace
      - name: kind
        value: stepaction
  params:
  - name: sample-stepaction-parameter
    value: test
----