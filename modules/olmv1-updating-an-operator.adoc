// Module included in the following assemblies:
//
// * operators/olm_v1/olmv1-installing-an-operator-from-a-catalog.adoc

:_content-type: PROCEDURE

[id="olmv1-updating-an-operator_{context}"]
= Updating an Operator

You can update your Operator by manually editing your Operator's custom resource (CR) and applying the changes.

.Prerequisites

* You have a catalog installed.
* You have an Operator installed.

.Procedure

. Run the following command to inspect your Operator's package contents in the catalog to find which channels and versions are available for updating:
+
[source,terminal]
----
$ oc get package <catalog_name>-<operator_name> -o yaml
----
+
.Example command
[source,terminal]
----
$ oc get package redhat-operators-quay-operator -o yaml
----

. Edit your Operator's CR to update the channel to `stable-3.9` and the version to `3.9.1`:, as shown in the following example:
+
.Example `test-operator.yaml` CR
[source,yaml]
----
apiVersion: operators.operatorframework.io/v1alpha1
kind: Operator
metadata:
  name: quay-example
spec:
  packageName: quay-operator
  channel: stable-3.9 <1>
  version: 3.9.1 <2>
----
<1> Update the channel to `stable-3.9`.
<2> Update the version to `3.9.1`

. Run the following command to apply the update to the cluster:
+
[source,terminal]
----
$ oc apply -f test-operator.yaml
----
+
.Example output
[source,text]
----
operator.operators.operatorframework.io/quay-example configured
----
+
[TIP]
====
You can run the following command to patch and apply the changes to your Operator's channel and version from the CLI:
+
[source,terminal]
----
$ oc patch operator.operators.operatorframework.io/quay-example -p \
  '{"spec":{"channel":"stable-3.9","version":"3.9.1"}}' \
  --type=merge
----
+
.Example output
[source,text]
----
operator.operators.operatorframework.io/quay-example patched
----
====

.Verification

* Run the following command verify that the channel and version updates have been applied:
+
[source,terminal]
----
$ oc get operator.operators.operatorframework.io/quay-example -o yaml
----
+
.Example output
[source,yaml]
----
apiVersion: operators.operatorframework.io/v1alpha1
kind: Operator
metadata:
  annotations:
    kubectl.kubernetes.io/last-applied-configuration: |
      {"apiVersion":"operators.operatorframework.io/v1alpha1","kind":"Operator","metadata":{"annotations":{},"name":"quay-example"},"spec":{"channel":"stable-3.9","packageName":"quay-operator","version":"3.9.1"}}
  creationTimestamp: "2023-10-06T01:50:25Z"
  generation: 5
  name: quay-example
  resourceVersion: "83322"
  uid: 7e782643-71c2-4355-80ff-e8cc61bd44a1
spec:
  channel: stable-3.9 <1>
  packageName: quay-operator
  version: 3.9.1 <2>
status:
  conditions:
  - lastTransitionTime: "2023-10-06T02:12:30Z"
    message: resolved to "registry.redhat.io/quay/quay-operator-bundle@sha256:4864bc0d5c18a84a5f19e5e664b58d3133a2ac2a309c6b5659ab553f33214b09"
    observedGeneration: 5
    reason: Success
    status: "True"
    type: Resolved
  - lastTransitionTime: "2023-10-06T02:12:30Z"
    message: installed from "registry.redhat.io/quay/quay-operator-bundle@sha256:4864bc0d5c18a84a5f19e5e664b58d3133a2ac2a309c6b5659ab553f33214b09"
    observedGeneration: 5
    reason: Success
    status: "True"
    type: Installed
  installedBundleResource: registry.redhat.io/quay/quay-operator-bundle@sha256:4864bc0d5c18a84a5f19e5e664b58d3133a2ac2a309c6b5659ab553f33214b09
  resolvedBundleResource: registry.redhat.io/quay/quay-operator-bundle@sha256:4864bc0d5c18a84a5f19e5e664b58d3133a2ac2a309c6b5659ab553f33214b09
----
<1> Verify that the channel is updated to `stable-3.9`.
<2> Verify that the version is updated to `3.9.1`.
