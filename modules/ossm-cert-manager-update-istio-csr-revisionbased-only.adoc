// Module included in the following assemblies:
//
// * service-mesh-docs-main/install/ossm-cert-manager-assembly.adoc

:_mod-docs-content-type: PROCEDURE
[id="updating-istio-csr-revision-based-only_{context}"]
= Updating istio-csr agents with revision-based update strategies

If you deployed your Istio resource using the revision based update strategy, you must pass all revisions each time you update your control plane. You must perform the update in the following order:

. Update the `istio-csr` deployment with the new revision.
. Update the value of `Istio.spec.version` parameter/field.

.Example update for RevisionBased control plane

In this example, the `controlplane` is being updated from `v1.23.0` to `1.23.1.`

. Update the `istio-csr` deployment with the new revision by running the following command:
+
[source, terminal]
----
$ helm upgrade cert-manager-istio-csr jetstack/cert-manager-istio-csr \
--wait \
  --reuse-values \
  --set "app.istio.revisions={<old_revision>,<new_revision>}"
----
where:
`old_revision` :: Specifies the old revision in the `<istio-name>-v<major_version>-<minor_version>-<patch_version>` format. For example: `default-v1-23-0`.
`new_revision` :: Specfies the new revision in the `<istio-name>-v<major_version>-<minor_version>-<patch_version>` format. For example: `default-v1-23-1`.

. Update the `istio.spec.version` in the `Istio` object similar to the following example:
+
.Example `istio.yaml` file
[source, yaml]
----
apiVersion: sailoperator.io/v1alpha1
kind: Istio
metadata:
  name: default
spec:
  version: <new_revision> # <1>
----
<1> Update to the new revision prefixed with the letter _v_, such as `v1.23.1`

. Remove the old revision from your `istio-csr` deployment by running the following command:
+
[source, terminal]
----
helm upgrade cert-manager-istio-csr jetstack/cert-manager-istio-csr \
  --install \
  --namespace cert-manager \
  --wait \
  --reuse-values \
  --set "app.istio.revisions={default-v1-23-1}"
----


// Additional resources For information about how to install the cert-manager Operator for OpenShift Container Platform, see: [Installing the cert-manager Operator for Red Hat OpenShift](https://docs.openshift.com/container-platform/4.16/security/cert_manager_operator/cert-manager-operator-install.html).
//temporary comment out so hopefully builds pass