// Module included in the following assemblies:
//
// * service-mesh-docs-main/install/ossm-cert-manager-assembly.adoc

:_mod-docs-content-type: PROCEDURE
[id="updating-istio-csr-revision-based-only_{context}"]
= Updating istio-csr if using RevisionBased update strategy

If you set `spec.updateStrategy` to `RevisionBased` when creating your `Istio` resource, then `istio-csr` requires you to pass all revisions each time you upgrade your `RevisionBased` control plane. To do this, you need to follow this order each time you upgrade:

. Update `istio-csr` deployment with new revision.
. Update `Istio.spec.version`.

[id="example-update-revision-based-control-plane_{context}"]
== Example update for RevisionBased control plane

In this example, the `controlplane` is being updated from `v1.23.0` to `1.23.1.`

. Update `istio-csr` deployment with the new revision:
+
[source, terminal]
----
helm upgrade cert-manager-istio-csr jetstack/cert-manager-istio-csr \
  --install \
  --namespace cert-manager \
  --wait \
  --reuse-values \
  --set "app.istio.revisions={default-v1-23-0,default-v1-23-1}"
----

. Update `istio.spec.version.` in the `Istio` object:
+
.Example `istio.yaml`
[source, yaml]
----
apiVersion: sailoperator.io/v1alpha1
kind: Istio
metadata:
  name: default
spec:
  version: v1.23.1
----

. Remove the old revision from your `istio-csr` deployment:
+
[source, terminal]
----
helm upgrade cert-manager-istio-csr jetstack/cert-manager-istio-csr \
  --install \
  --namespace cert-manager \
  --wait \
  --reuse-values \
  --set "app.istio.revisions={default-v1-23-1}"
----


// Additional resources For information about how to install the cert-manager Operator for OpenShift Container Platform, see: [Installing the cert-manager Operator for Red Hat OpenShift](https://docs.openshift.com/container-platform/4.16/security/cert_manager_operator/cert-manager-operator-install.html).
//temporary comment out so hopefully builds pass