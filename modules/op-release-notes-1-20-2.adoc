// This module is included in the following assemblies:
// * release_notes/op-release-notes-1-20.adoc

:_mod-docs-content-type: REFERENCE
[id="op-release-notes-1-20-2_{context}"]
= Release notes for {pipelines-title} 1.20.2

With this update, {pipelines-title} General Availability (GA) 1.20.2 is available on {OCP} 4.16 and later versions.

[id="fixed-issues-1-20-2_{context}"]
== Fixed issues

.Pipelines as Code

{pac} defaults to Artifact Hub when hub-catalog-type is empty::
Before this update, when `hub-catalog-type` was empty, {pac} defaulted the hub type to Artifact Hub. This behavior caused issues for users who were still using Tekton Hub and had configured a Tekton Hub URL. With this fix, {pac} determines the hub type by calling the Artifact hub API, ensuring the correct hub type is used.

.Operator 

Custom hub catalog configuration is preserved during conversion::
Before this update, the `Tekton` Operator removed the `catalog-{INDEX}-type` field during conversion, which caused the loss of custom hub catalog types. As a result, custom hub catalog configurations were broken, preventing users from configuring custom Tekton Hub, Artifact Hub, or other custom hubs through the `TektonConfig` custom resource (CR). With this update, the `Tekton` Operator preserves the `catalog-{INDEX}-type` field in its config map and you can configure custom hub catalogs using the `TektonConfig` CR.

.User interface

Pagination works correctly for archived PipelineRun::
Before this update, scrolling failed to load additional archived `PipelineRun` results. This occurred because the UI client expected the `nextPageToken` field, while the API returned `next_page_token`. This mismatch prevented the `onScroll` callback from creating the next page request, causing pagination to stop after the first page. With this update, pagination functions correctly when the `data_source` filter is set to `archived` and the UI is updated to support `next_page_token`.

.Tekton Results

The defaultRetention field takes precedence over the deprecated maxRetention field::
Before this update, if the deprecated `maxRetention` field was carried over during an upgrade, the configuration behavior was inconsistent. With this update, the `defaultRetention` field correctly takes precedence over the deprecated field. As a result, the retention policy remains consistent with the `TektonConfig` custom resource (CR) specification, and the system no longer relies on the `tekton-results-config-results-retention-policy` config map.

.Pipelines

Pipeline creation failure due to Operator Webhook panic::
Before this update, an incorrect variable substitution in a `v1beta1` Pipeline matrix could cause the Operator Webhook to panic, resulting in pipeline creation failures. With this update, the Operator Webhook handles incorrect variable substitutions in `v1beta1` Pipelines gracefully and no longer crashes.

[id="known-issues-1-20-2_{context}"]
== Known issues

maxRetention field not prioritized after upgrade to {pipelines-title} Operator 1.20::
After you upgrade to {pipelines-title} Operator 1.20, the system no longer supports the `maxRetention` field for configuring data retention limits. If you have a custom value configured in the deprecated `maxRetention` field, the system ignores it and uses the `defaultRetention` value instead. As a result, your data retention behavior might change unexpectedly after the upgrade.
+
To work around this problem, copy your existing `maxRetention` value and configure the `defaultRetention` field in the `TektonConfig` custom resource (CR) after the upgrade.

Custom catalogs default to artifacthub after upgrade::
With this update, after upgrading to version {pipelines-title} v1.20.2, custom catalogs that were configured in earlier releases default to `catalog-type: artifacthub`. The previous releases in {pipelines-title} did not support the `catalog-type` field, so the upgrade process assigns the default value even if the catalog URL points to Tekton Hub. For example, a catalog with the URL `https://api.custom.hub/v1` is set to `catalog-type: artifacthub` instead of `catalog-type: tektonhub`.
+
To work around this problem, manually update the `catalog-type` field to `tektonhub` in the `TektonConfig` custom resource.

