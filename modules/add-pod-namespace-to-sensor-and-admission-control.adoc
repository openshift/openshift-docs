// Module included in the following assemblies:
//
// * upgrade/upgrade-from-45.adoc
:_mod-docs-content-type: PROCEDURE
[id="add-pod-namespace-to-sensor-and-admission-control_{context}"]
= Adding POD_NAMESPACE to sensor and admission-control deployments

[role="_abstract"]
When upgrading to version 4.6 or later from a version earlier than 4.6, you must patch the sensor and admission-control deployments  to set the `POD_NAMESPACE` environment variable.

[NOTE]
====
If you are using Kubernetes, use `kubectl` instead of `oc` for the commands listed in this procedure.
====

.Procedure

. Patch sensor to ensure `POD_NAMESPACE` is set by running the following command:
+
[source,terminal,subs=attributes+]
----
$ [[ -z "$(oc -n stackrox get deployment sensor -o yaml | grep POD_NAMESPACE)" ]] && oc -n stackrox patch deployment sensor --type=json -p '[{"op":"add","path":"/spec/template/spec/containers/0/env/-","value":{"name":"POD_NAMESPACE","valueFrom":{"fieldRef":{"fieldPath":"metadata.namespace"}}}}]'
----
. Patch admission-control to ensure `POD_NAMESPACE` is set by running the following command:
+
[source,terminal,subs=attributes+]
----
$ [[ -z "$(oc -n stackrox get deployment admission-control -o yaml | grep POD_NAMESPACE)" ]] && oc -n stackrox patch deployment admission-control --type=json -p '[{"op":"add","path":"/spec/template/spec/containers/0/env/-","value":{"name":"POD_NAMESPACE","valueFrom":{"fieldRef":{"fieldPath":"metadata.namespace"}}}}]'
----