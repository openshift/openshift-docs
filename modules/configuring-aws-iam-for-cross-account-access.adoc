:_newdoc-version: 2.18.4
:_template-generated: 2025-10-19
:_mod-docs-content-type: PROCEDURE

[id="configuring-aws-iam-for-cross-account-access_{context}"]
= Configuring AWS IAM for cross-account access

You can configure {aws-short} Identity Access Management (IAM) for cross-account access.

.Prerequisites
* You have administrator permissions.

.Procedure

. Create an initial role in your cluster account.
+
Provide only those permissions that are required to assume a target role.
This is the account you will use in the authentication spec of the `ClusterLogForwarder` custom resource (CR).
This role authenticates using a token or access key credentials.
+
[source,json]
----
{
    "Version": "2012-10-17",
    "Statement": [
        {
            "Effect": "Allow",
            "Action": "sts:AssumeRole",
            "Resource": "arn:aws:iam::<target-account>:role/target-logging-role"
        }
    ]
}
----

. In your target role, create a trust policy and specify the initial cluster role, and optionally an external id.
+
[source,json]
----
{
    "Version": "2012-10-17",
    "Statement": [
        {
            "Effect": "Allow",
            "Principal": {
                "AWS": "arn:aws:iam::<cluster-account>:role/initial-role"
            },
            "Action": "sts:AssumeRole",
            "Condition": {
                "StringEquals": {
                    "sts:ExternalId": "<your-unique-external-id>"
                }
            }
        }
    ]
}
----

. Configure CloudWatch permissions in the target role:
+
[source,json]
----
{
    "Version": "2012-10-17",
    "Statement": [
        {
            "Effect": "Allow",
            "Action": [
                "logs:CreateLogGroup",
                "logs:CreateLogStream", 
                "logs:PutLogEvents",
                "logs:DescribeLogGroups",
                "logs:DescribeLogStreams"
            ],
            "Resource": "*"
        }
    ]
}
---- 
