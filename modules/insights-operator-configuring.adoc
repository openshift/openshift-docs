// Module included in the following assemblies:
//
// * support/remote_health_monitoring/using-insights-operator.adoc


:_mod-docs-content-type: CONCEPT
[id="insights-operator-configuring_{context}"]
= Configuring {insights-operator}

[role="_abstract"]
{insights-operator} configuration is a combination of the default Operator configuration and the configuration that is stored in either the *insights-config* `ConfigMap` object in the `openshift-insights` namespace, OR in the support secret in the `openshift-config` namespace.

When a `ConfigMap` object or support secret exists, the contained attribute values override the default Operator configuration values. If both a `ConfigMap` object _and_ a support secret exist, the Operator reads the `ConfigMap` object.

The `ConfigMap` object does not exist by default, so an {product-title} cluster administrator must create it.

//[NOTE]
//====
//{red-hat-lightspeed} encourages cluster administrators to use the config-map configuration method. Support secrets will continue to be supported in the near future but will eventually be deprecated.
//====

[id="insights-operator-configuring-configmap_{context}"]
== ConfigMap object configuration structure

This example of an *insights-config* `ConfigMap` object (`config.yaml` configuration) shows configuration options by using standard YAML formatting.

[source,yaml]
----
apiVersion: v1
kind: ConfigMap
metadata:
  name: insights-config
  namespace: openshift-insights
data:
  config.yaml: |
    dataReporting:
      uploadEndpoint: https://console.redhat.com/api/ingress/v1/upload
      storagePath: /var/lib/insights-operator
      downloadEndpoint: https://console.redhat.com/api/insights-results-aggregator/v2/cluster/%s/reports
      conditionalGathererEndpoint: https://console.redhat.com/api/gathering/gathering_rules
    sca:
        disabled: false
        endpoint: https://api.openshift.com/api/accounts_mgmt/v1/entitlement_certificates
        interval: 8h0m0s
    alerting:
        disabled: false
    proxy:
        httpProxy: http://example.com
        httpsProxy: https://example.com
        noProxy: test.org
----

**Configurable attributes and default values**

The following table describes the available configuration attributes:

[NOTE]
====
The *insights-config* `ConfigMap` object follows standard YAML formatting, wherein child values are below the parent attribute and indented two spaces. For the *Obfuscation* attribute, enter values as bulleted children of the parent attribute.
====

.{insights-operator} configurable attributes
[cols=".^2l,.^3a,.^1a,.^1a",options="header"]
|====
|Attribute name|Description|Value type|Default value

|alerting:
    disabled: false
|Disables {insights-operator} alerts to the cluster Prometheus instance.
|Boolean
|`false`

|clusterTransfer:
    endpoint: <url>
|The endpoint for checking and downloading cluster transfer data.
|URL
|https://api.openshift.com/api/accounts_mgmt/v1/cluster_transfers/

|clusterTransfer:
    interval: 1h0m0s
|Sets the frequency for checking available cluster transfers.
|Time interval
|`24h`

|dataReporting:
    interval: 30m0s
|Sets the data gathering and upload frequency.
|Time interval
|`2h`

|dataReporting:
    uploadEndpoint: <url>
|Sets the upload endpoint.
|URL
|https://console.redhat.com/api/ingress/v1/upload

|dataReporting:
    storagePath: <path>
|Configures the path where archived data gets stored.
|File path
|/var/lib/insights-operator

|dataReporting:
    downloadEndpoint: <url>
|Specifies the endpoint for downloading the latest {red-hat-lightspeed} analysis.
|URL
|https://console.redhat.com/api/ingress/v1/download

|dataReporting:
    conditionalGathererEndpoint: <url>
|Sets the endpoint for providing conditional gathering rule definitions.
|URL
|https://console.redhat.com/api/gathering/gathering_rules


|dataReporting:
    obfuscation:
    - networking
|Enables the global obfuscation of IP addresses and the cluster domain name.
|String
|Not applicable

|dataReporting:
    obfuscation:
    - workload_names
|Enables the obfuscation of Data Validation Operator data. The cluster resource ID is only visible in the archive file and not the resource name.
|String
|Not applicable

|proxy:
    httpProxy: http://example.com
    httpsProxy: http://example.com
    noProxy: test.org
|Set custom proxy for {insights-operator}.
|URL
|No default

|sca:
    interval: 8h0m0s
|Specifies the frequency of the simple content access (SCA) entitlements download.
|Time interval
|`2h`

|sca:
    endpoint: <url>
|Specifies the endpoint for downloading the simple content access (SCA) entitlements.
|URL
|https://api.openshift.com/api/accounts_mgmt/v1/entitlement_certificates

|sca:
    disabled: false
|Disables the simple content access entitlements download.
|Boolean
|`false`
|====
