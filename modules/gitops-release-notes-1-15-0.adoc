// Module included in the following assembly:
//
// * release_notes/gitops-release-notes-1-15-0.adoc

:_mod-docs-content-type: REFERENCE

[id="gitops-release-notes-1-15-0_{context}"]
= Release notes for {gitops-title} 1.15.0

[role="_abstract"]
{gitops-title} 1.15.0 is now available on {OCP} 4.14, 4.15, 4.16, and 4.17.

[id="errata-updates-1-15.0_{context}"]
== Errata updates

[id="RHEA-2024:11002-gitops-1-15-0-security-update-advisory_{context}"]
=== RHEA-2024:11002 - {gitops-title} 1.15.0 security update advisory

Issued: 2024-12-12

The list of security fixes that are included in this release are documented in the following advisory:

* link:https://access.redhat.com/errata/RHEA-2024:11002[RHEA-2024:11002]

If you have installed the {gitops-title} Operator in the default namespace, run the following command to view the container images in this release:

[source,terminal]
----
$ oc describe deployment gitops-operator-controller-manager -n openshift-gitops-operator
----

[id="new-features-1-15-0_{context}"]
== New features

* With this update, {gitops-title} supports the addition of extra volumes and volume mounts to the `ApplicationSet` Controller components. You can configure these additional resources by specifying the `.spec.applicationSet.volumes` and `.spec.applicationSet.volumeMounts` fields in the Argo CD Custom Resource (CR). link:https://issues.redhat.com/browse/GITOPS-5739[GITOPS-5739]
+
.Example
[source,YAML]
----
apiVersion: argoproj.io/v1beta1
kind: ArgoCD
metadata:
  name: argocd-example
spec:
  applicationSet:
    volumes:
      - name: <volume_name> #<1>
        emptyDir: {} #<2>
    volumeMounts:
      - name: <volume_name> #<3>
        mountPath: <mount_path> #<4>
----
<1> Specifies the name of the `volume` for the Argo CD `ApplicationSet` Controller.
<2> Specifies the `volume` type. It can be any Kubernetes supported volume type, such as `emptyDir`, `hostPath`, `configMap`, and so on.
<3> Specifies the name of the volume to be mounted, which must match the name of the `volume` defined in volumes.
<4> Specifies the path inside the container where the volume will be mounted.

* With this update, users can add custom labels and annotations to the server, repo-server, applicationset-controller, and application-controller pods. This enhancement improves observability for external systems that depend on resource labels or annotations for monitoring purposes. The following fields are introduced in the Argo CD CR to support this functionality:
+
--
** `.spec.server.labels`
** `.spec.server.annotations`
** `.spec.repo.labels`
** `.spec.repo.annotations`
** `.spec.controller.labels`
** `.spec.controller.annotations`
** `.spec. applicationSet.labels`
** `.spec. applicationSet.annotations` 
--
+
For more information, see link:https://argocd-operator.readthedocs.io/en/latest/usage/custom_labels_annotations/[Custom Annotations and Labels]. link:https://issues.redhat.com/browse/GITOPS-5674[GITOPS-5674]

* Before this update, users could not configure some replicas for the Argo Rollouts controller by using the `RolloutManager` custom resource (CR). With this update, high availability (HA) support is introduced by adding a new `.spec.ha` field to the `RolloutManager` CR.
+
When you enable high availability, the {gitops-shortname} Operator automatically sets the number of replicas to 2, the leader election is activated, and default anti-affinity rules are applied to ensure redundancy and reliability. link:https://issues.redhat.com/browse/GITOPS-5622[GITOPS-5622]

* With this update, the Argo CD multi-source application functionality in {gitops-shortname} Operator is promoted from Technology Preview (TP) to General Availability (GA). Use this feature to define and manage applications with multiple source repositories. link:https://issues.redhat.com/browse/GITOPS-5511[GITOPS-5511]

* With this update, you can now use Kubernetes TLS-type secrets to configure custom TLS certificates for Routes in the Argo CD CR. Previously, TLS data had to be embedded directly in the Argo CD CR as plain text, which could pose security risks due to the sensitive nature of TLS information.
+
To enhance security, you must use Kubernetes secrets to manage TLS data. The following fields are introduced in the Argo CD CR to reference Kubernetes secrets of type `kubernetes.io/tls` containing TLS data:
+
--
** `.spec.server.route.tls.externalCertificate`
** `.spec.applicationSet.webhookServer.route.tls.externalCertificate`
** `.spec.prometheus.route.tls.externalCertificate`
** `.spec.grafana.route.tls.externalCertificate`
--
+
For more information about configuring a route for custom TLS certificate, see examples in link:https://argocd-operator.readthedocs.io/en/latest/usage/routes/#custom-tls-certificates[Custom TLS certificates for Routes]. link:https://issues.redhat.com/browse/GITOPS-5232[GITOPS-5232]

* With this update, Restricted pod security admission (PSA) labels are applied to the `openshift-gitops` namespace to ensure compliance with {OCP} standards. If you are running additional workloads in the `openshift-gitops` namespace, ensure they comply with restricted PSA requirements. If compliance with restricted PSA is not feasible, use a user-defined, cluster-scoped Argo CD instance. In such instances, PSA labels are not applied or controlled by the {gitops-shortname} Operator. link:https://issues.redhat.com/browse/GITOPS-5221[GITOPS-5221]

* Before this update, `trafficmanagement` and `metric` plugins could not be configured by using the `RolloutManager` CR in Argo Rollouts. With this update, you can now specify `trafficmanagement` and `metric` plugins in the `RolloutManager` CR. The {gitops-shortname} Operator automatically updates the config map when these plugin fields are added, modified, or removed. This enhancement allows users to manage `trafficmanagement` and `metric` plugins natively through the `RolloutManager` CR, eliminating the need for manual config map updates. link:https://issues.redhat.com/browse/GITOPS-4217[GITOPS-4217]

* With this update, the *Sources* tab in the Details panel of a multi-source application now includes two new buttons:
+
--
** *Add Source*: Opens a new form-based panel for adding a new source entry. You can specify the repository URL and other source-specific details in this panel.
** *Delete*: Allows you to remove a specific source from the application.
--
+
link:https://issues.redhat.com/browse/GITOPS-4175[GITOPS-4175]

* With this update, users can now enable or disable the Argo Rollouts UI in Argo CD instances by setting a new boolean field, `enableRolloutsUI`, in the server component of the Argo CD CR. link:https://issues.redhat.com/browse/GITOPS-3604[GITOPS-3604]
+
.Example
[source,YAML]
----
apiVersion: argoproj.io/v1beta1
kind: ArgoCD
metadata:
  name: argocd
spec:
  server:
    enableRolloutsUI: true #<1>
----
<1> Set this value to `true` to configure the `enableRolloutsUI` field.

* With this update, you can access documentation on configuring the `ApplicationSet` controller in the Argo CD CR to use different policies. For more information, see link:https://argocd-operator.readthedocs.io/en/latest/reference/applicationSet/#applicationset-controller-policies[ApplicationSet Controller policies]. link:https://issues.redhat.com/browse/GITOPS-5236[GITOPS-5236]

[id="fixed-issues-1-15-0_{context}"]
== Fixed issues

* Before this update, when the desired state for an existing Ingress changed the host, the new host information was not applied. This update fixes the issue by adding Ingress checks to ensure the Ingress is updated when the host changes. If there is a change in the Ingress host, it will be correctly updated with the new value, ensuring that the desired state is reflected. link:https://issues.redhat.com/browse/GITOPS-5386[GITOPS-5386]

* Before this update, when the desired state for the server service type changes, for example, from `ClusterIP` to `NodePort`, the change was not applied automatically to the cluster without first deleting the resource. This update fixes the issue by adding a server service check to apply changes to the server service. If the desired state for the server service type changes, it is applied automatically to the cluster without deleting the resource. link:https://issues.redhat.com/browse/GITOPS-5385[GITOPS-5385]

* Before this update, users were unable to set a custom image for the `ApplicationSet` Controller after specifying it in the Argo CD CR. This update fixes the issue by allowing users to set a custom image for the `ApplicationSet` Controller. link:https://issues.redhat.com/browse/GITOPS-5395[GITOPS-5395]

* Before this update, Argo CD was unable to retrieve the correct TLS certificate for Helm OCI registries if the URL contained a path or port number. This update fixes the issue by using a fix in upstream Argo CD that ensures the URL is correctly parsed, allowing Argo CD to retrieve and return a valid TLS certificate. link:https://issues.redhat.com/browse/GITOPS-5081[GITOPS-5081]

[id="deprecated-features-1-15-0_{context}"]
== Deprecated and removed features

[id="removal-of-application-manager-cli-kam_{context}"]
=== Removal of {gitops-title} Application Manager CLI, kam

* With this release, support for the {gitops-title} Application Manager command-line interface (CLI), `kam`, has been removed. The `kam` component is no longer included in new installations, and all references have been removed from the {gitops-title} documentation. link:https://issues.redhat.com/browse/GITOPS-4466[GITOPS-4466]
+
To remove `kam` resources after an update, run the following command:
+
[source,YAML]
----
$ oc delete deployment,service,route kam -n openshift-gitops
----

[id="breaking-change-1-15-0_{context}"]
== Breaking change

[id="updated-openshift-api-schemas-and-insecureEdgeTerminationPolicy-field-change_{context}"]
=== Updated OpenShift API schemas and `insecureEdgeTerminationPolicy` field change

* With this update, the OpenShift API schemas used by the {gitops-title} Operator have been changed to include the latest fields from the Route API, resulting in a breaking change. If the following fields are configured with the *Disable* option in the Argo CD CR, they must be changed to *None* before updating to ensure compatibility with the new schema:
+
--
** `.spec.server.route.tls.insecureEdgeTerminationPolicy`
** `.spec.applicationSet.webhookServer.route.tls.insecureEdgeTerminationPolicy`
** `.spec.prometheus.route.tls.insecureEdgeTerminationPolicy`
** `.spec.grafana.route.tls.insecureEdgeTerminationPolicy`
--
+
link:https://issues.redhat.com/browse/GITOPS-5808[GITOPS-5808]