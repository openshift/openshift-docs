:_newdoc-version: 2.18.4
:_template-generated: 2025-06-03
:_mod-docs-content-type: PROCEDURE

[id="deploying-a-clusterlogforwarder-observability-custom-resource_{context}"]
= Deploying a ClusterLogForwarder observability custom resource

Deploy a `ClusterLogForwarder` observability custom resource (CR) by using the {oc-first} command. The following procedure demonstrates using Lokistack as the log store.

.Prerequisites
* You have administrator permissions.
* You installed the {oc-first}.
* You have created a service account and granted it the required permissions.
* You have created a config map or a secret to be used for authentication and TLS.
* You have installed LokiStack.

.Procedure
. Create a ClusterLogForwarder observability custom resource (CR).
+
[source,yaml]
----
apiVersion: observability.openshift.io/v1
kind: ClusterLogForwarder
metadata:
  name: collector
  namespace: openshift-logging
spec:
  serviceAccount:
    name: <Name_of_service_account>
  outputs:
  - name: default-lokistack
    type: lokiStack
    lokiStack:
      target:
        name: <Name_of_LokiStack>
        namespace: openshift-logging
      authentication:
        token:
          from: serviceAccount
    tls:
      ca:
        key: service-ca.crt
        configMapName: openshift-service-ca.crt
  pipelines:
  - name: default-logstore
    inputRefs:
    - application
    - infrastructure
    outputRefs:
    - default-lokistack
----

. Deploy the CR by running the following command:
+
[source,terminal]
----
$ oc create -f <file_name>.yaml
----
