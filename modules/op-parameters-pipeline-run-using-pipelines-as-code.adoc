// This module is included in the following assemblies:
// * pac/creating-pipeline-runs-pac.adoc

:_mod-docs-content-type: REFERENCE
[id="parameters-pipeline-run-using-pipelines-as-code_{context}"]
= Dynamic variables in a pipeline run specification

You can use dynamic variables in a pipeline run specification to provide information about the commit that triggered the pipeline run and to use the temporary GitHub App token for Github API operations.

[IMPORTANT]
====
Using {pac} dynamic variables in default values for pipeline or task parameters is currently not supported. You can use a dynamic variable in a `value:` field, but not in a `default:` field.
====

[id="commits-parameters-pipeline-run-using-pipelines-as-code_{context}"]
== Commit and URL information

You can specify the parameters of your commit and URL by using dynamic, expandable variables with the `{{<var>}}` format. Currently, you can use the following variables:

* `{{repo_owner}}`: The repository owner.
* `{{repo_name}}`: The repository name.
* `{{repo_url}}`: The repository full URL.
* `{{revision}}`: Full SHA revision of a commit.
* `{{sender}}`: The username or account ID of the sender of the commit.
* `{{source_branch}}`: The branch name where the event originated.
* `{{target_branch}}`: The branch name that the event targets. For push events, it is the same as the `source_branch`.
* `{{pull_request_number}}`: The pull or merge request number, defined only for a `pull_request` event type.
* `{{git_auth_secret}}`: The secret name that is generated automatically with the Git provider token for checking out private repos.

[id="token-parameters-pipeline-run-using-pipelines-as-code_{context}"]
== Temporary GitHub App token for GitHub API operations

You can use the temporary installation token generated by {pac} from the GitHub App to access the GitHub API. The GitHub App generates a key for private repositories in the `git-provider-token` key. You can use the `{{git_auth_secret}}` dynamic variable in pipeline runs to access this key.

For example, if your pipeline run must add a comment to a pull request, you can use the a {pac} annotation to fetch the `github-add-comment` task definition from {tekton-hub}, and then define the task that adds the comment, as shown in the following example:

[source,yaml]
----
apiVersion: tekton.dev/v1
kind: PipelineRun
metadata:
  name: pipeline-with-comment
annotations:
  pipelinesascode.tekton.dev/task: "github-add-comment"
spec:
  pipelineSpec:
    tasks:
      - name: add-sample-comment
        taskRef:
          name: github-add-comment
        params:
          - name: REQUEST_URL
            value: "{{ repo_url }}/pull/{{ pull_request_number }}" <1>
          - name: COMMENT_OR_FILE
            value: "Pipelines as Code IS GREAT!"
          - name: GITHUB_TOKEN_SECRET_NAME
            value: "{{ git_auth_secret }}"
          - name: GITHUB_TOKEN_SECRET_KEY
            value: "git-provider-token"
----
<1> By using the dynamic variables, you can reuse this snippet template for any pull request from any repository that you use with {pac}.

[NOTE]
====
On GitHub Apps, the generated installation token is available for 8 hours and scoped to the repository from where the events originate. You can configure the scope differently, but the expiration time is determined by GitHub.
====
