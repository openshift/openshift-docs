// Module included in the following assemblies:
//
// * observability/monitoring/managing-alerts.adoc

:_mod-docs-content-type: PROCEDURE
[id="configuring-alert-receivers_{context}"]
= Configuring different alert receivers for default platform alerts and user-defined alerts

You can configure different alert receivers for default platform alerts and user-defined alerts to ensure the following results:

* All default platform alerts are sent to a receiver owned by the team in charge of these alerts.
* All user alerts are sent to another receiver so that the team can focus only on platform alerts.

You can achieve this by using the `openshift_io_alert_source="platform"` label that is added by the Cluster Monitoring Operator to all platform alerts.

.Prerequisites

ifndef::openshift-dedicated,openshift-rosa[]
* You have access to the cluster as a user with the `cluster-admin` cluster role.
endif::openshift-dedicated,openshift-rosa[]
ifdef::openshift-dedicated,openshift-rosa[]
* You have access to the cluster as a user with the `dedicated-admin` role.
endif::openshift-dedicated,openshift-rosa[]
* You have installed the OpenShift CLI (`oc`).
* You have configured at least two alert receivers.

.Procedure

To configure different alert receivers from the CLI:

. Print the Alertmanager configuration into the `alertmanager.yaml` file:
+
[source,terminal]
----
$ oc -n openshift-monitoring get secret alertmanager-main --template='{{ index .data "alertmanager.yaml" }}' | base64 --decode > alertmanager.yaml
----
+
. Edit the `alertmanager.yaml` file as follows:
+
[source,yaml]
----
...
route:
  routes:
    - matchers:
        - '"openshift_io_alert_source=platform"'
      receiver: <defaul-platform-alert-receiver> # <1>
    - matchers:
        - '"openshift_io_alert_source!=platform"'
      receiver: <user-defined-alert-receiver> # <2>
...
----
<1> Replace `<defaul-platform-alert-receiver>` with the receiver where you want to send all the default platform alerts.
<2> Replace `<user-defined-alert-receiver>` with the receiver where you want to send all the user-defined alerts.

. Apply the changes in the `alertmanager.yaml` file:
+
[source,terminal]
----
$ oc -n openshift-monitoring create secret generic alertmanager-main --from-file=alertmanager.yaml --dry-run=client -o=yaml |  oc -n openshift-monitoring replace secret --filename=-
----

To configure different alert receivers from the {product-title} web console:

. In the *Administrator* perspective of the web console, go to *Administration* -> *Cluster Settings* -> *Configuration* -> *Alertmanager* -> *YAML* page.

. Edit the YAML configuration file as follows:
+
[source,yaml]
----
...
route:
  routes:
    - matchers:
        - '"openshift_io_alert_source=platform"'
      receiver: <defaul-platform-alert-receiver> # <1>
    - matchers:
        - '"openshift_io_alert_source!=platform"'
      receiver: <user-defined-alert-receiver> # <2>
...
----
<1> Replace `<defaul-platform-alert-receiver>` with the receiver where you want to send all the default platform alerts.
<2> Replace `<user-defined-alert-receiver>` with the receiver where you want to send all the user-defined alerts.

. Click *Save* to save the changes.
