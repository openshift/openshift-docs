// Module included in the following assemblies:
//
// * scalability_and_performance/telco-hub-rds.adoc

:_mod-docs-content-type: CONCEPT
[id="telco-hub-managed-cluster-updates-and-upgrades_{context}"]
= Managed cluster updates

Description::
+
--
The upgrade of the {product-title} version, Day 2 Operator version, and configuration updates to managed clusters can be applied by declaring the required version in the `Policy` CRs that target the clusters to be upgraded.

Policy controllers periodically check for policy compliance.
If the result is negative, a violation report is created.
If the policy remediation action is set to "enforce" the violations are remediated according to the updated policy.
If the policy remediation action is set to "inform", the process ends with a non-compliant status report and responsibility to initiate the upgrade is left to the user to perform during an appropriate maintenance window.

The Topology Aware Lifecycle Manager ({cgu-operator}) extends {rh-rhacm} with features to manage the rollout of upgrades or configuration throughout the lifecycle of the fleet of clusters.
It operates in progressive, limited size batches of clusters.
When upgrades to {product-title} or the Day 2 Operators are required, {cgu-operator} progressively rolls out the updates by stepping through the set of policies and switching them to an "enforce" policy to push the configuration to the managed cluster.

The CR that {cgu-operator} uses to build the remediation plan is the `ClusterGroupUpgrade` CR.

You can use Image-based upgrade (IBU) with the Lifecycle Agent as an alternative upgrade path for the {sno} cluster platform version.
IBU uses an OCI image generated from a dedicated seed cluster to install {sno} on the target cluster.

{cgu-operator} uses the `ImageBasedGroupUpgrade` CR to roll out image based upgrades to a set of identified clusters.
--

Limits and requirements::
* You can perform direct upgrades for {sno} clusters using image-based upgrade for {product-title} <4.y> to <4.y+2>, and <4.y.z> to <4.y.z+n>.
* Image-based upgrade uses custom images that are specific to the hardware platform that the clusters are running on.
Different hardware platforms require separate seed images.

Engineering considerations::
* In Edge deployments where potentially disruptive events must be carefully managed with respect to timing and rollout, changes to managed clusters must be applied under controlled conditions.
All policies should be set to "inform" to have visibility into the compliance while avoiding automatic enforcement.
Similarly, Day 2 Operator subscriptions must be set to manual to avoid updates being applied outside of maintenance windows.
* The recommended upgrade methodology for {sno} clusters is Image-based upgrade.
