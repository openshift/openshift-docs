// This module is included in the following assemblies:
// * secure/using-tekton-chains-for-openshift-pipelines-supply-chain-security.adoc

:_mod-docs-content-type: PROCEDURE
[id="creating-mounting-mongo-server-url-secret_{context}"]
= Creating and mounting the Mongo server URL secret

[role="_abstract"]
You can use a secret to store the value of the Mongo server URL to use for `docdb` storage (`MONGO_SERVER_URL`). You must create this secret, mount it on the {tekton-chains} controller, and set the `storage.docdb.mongo-server-url-dir` parameter to the directory where you mount the secret.

.Prerequisites

* You installed the {oc-first} utility.
* You have logged in to your {OCP} cluster with administrative rights for the `openshift-pipelines` namespace.

.Procedure

. Create a secret named `mongo-url` with the `MONGO_SERVER_URL` file that has the Mongo server URL value by entering the following command:
+
[source, terminal]
----
$ oc create secret generic mongo-url -n tekton-chains \
  --from-file=MONGO_SERVER_URL=<path>/MONGO_SERVER_URL
----
+
Replace `<path>/MONGO_SERVER_URL` with the full path and name of the `MONGO_SERVER_URL` file that has the Mongo server URL value.

. In the `TektonConfig` custom resource (CR), in the `chain` section, configure mounting the secret on the {tekton-chains} controller and set the `storage.docdb.mongo-server-url-dir` parameter to the directory where you mount the secret, as shown in the following example:
+
.Example configuration for mounting the `mongo-url` secret
[source,yaml]
----
apiVersion: operator.tekton.dev/v1
kind: TektonConfig
metadata:
  name: config
spec:
# ...
  chain:
    disabled: false
    storage.docdb.mongo-server-url-dir: /tmp/mongo-url
    options:
      deployments:
        tekton-chains-controller:
          spec:
            template:
              spec:
                containers:
                - name: tekton-chains-controller
                  volumeMounts:
                  - mountPath: /tmp/mongo-url
                    name: mongo-url
                volumes:
                -  name: mongo-url
                   secret:
                    secretName: mongo-url
# ...
----
