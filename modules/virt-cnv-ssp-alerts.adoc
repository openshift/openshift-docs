// Module included in the following assemblies:
//
// * virt/logging_events_monitoring/virt-events.html/virt-virtualization-alerts.adoc
:_content-type: REFERENCE
[id="virt-cnv-ssp-alerts_{context}"]
= SSP alerts

SSP alerts provide information about problems for the {VirtProductName} SSP Operator.

//SSPCommonTemplatesModificationReverted Alert
[id="SSPCommonTemplatesModificationReverted_{context}"]
== SSPCommonTemplatesModificationReverted alert

.Description

The SSP Operator's reconciliation procedure changes one or more of the common templates. If you or a script make any changes to a common template, then the Operator reverts the changes.

.Reason

Losing manual changes to the templates occurs.

.Troubleshoot

Do not manually modify common templates.

* Check the logs of the SSP Operator pods.
+
[source,terminal]
----
$ export NAMESPACE="$(oc get deployment -A | grep ssp-operator | awk '{print $1}')"
----
+
[source,terminal]
----
$ oc -n $NAMESPACE logs --tail=-1 -l control-plane=ssp-operator
----
Look for lines to find the names of the restored Common Templates. For example:
+
[source,terminal]
----
Changes reverted in common template: <template name>
----

.Resolution

Open a support issue and provide the information gathered in the troubleshooting process.

//SSPFailingToReconcile Alert
[id="SSPFailingToReconcile_{context}"]
== SSPFailingToReconcile alert

.Description

The SSP Operator’s pod is up, but the pod's reconcile cycle consistently fails. This failure includes failure to update the resources for which it is responsible, failure to deploy the template validator, or failure to deploy or update the common templates.

.Reason

If the SSP Operator fails to reconcile, then the deployment of dependent components fails, reconciliation of component changes fails, or both. Additionally, the updates to the common templates and template validator reset and fail.

.Troubleshoot

. Check the ssp-operator pod's logs for errors:
+
[source,terminal]
----
$ export NAMESPACE="$(oc get deployment -A | grep ssp-operator | awk '{print $1}')"
----
+
[source,terminal]
----
$ oc -n $NAMESPACE describe pods -l control-plane=ssp-operator
----
+
[source,terminal]
----
$ oc -n $NAMESPACE logs --tail=-1 -l control-plane=ssp-operator
----

. Verify that the template validator is up. If the template validator is not up, then check the pod’s logs for errors.
+
[source,terminal]
----
$ export NAMESPACE="$($ oc get deployment -A | grep ssp-operator | awk '{print $1}')"
----
+
[source,terminal]
----
$ oc -n $NAMESPACE get pods -l name=virt-template-validator
----
+
[source,terminal]
----
$ oc -n $NAMESPACE describe pods -l name=virt-template-validator
----
+
[source,terminal]
----
$ oc -n $NAMESPACE logs --tail=-1 -l name=virt-template-validator
----

.Resolution

Open a support issue and provide the information gathered in the troubleshooting process.

//SSPHighRateRejectedVms Alert
[id="SSPHighRateRejectedVms_{context}"]
== SSPHighRateRejectedVms alert

.Description
You or a script is continuously trying to create invalid virtual machines, causing VM creation or modification failures.

.Reason

There is no immediate effect. However, a large number of invalid virtual machines indicates a problem. For example, a script consistently fails to create or modify VMs.

.Troubleshoot

The template validator validates and rejects the virtual machines. Find more information in the virtual machine pods' logs.

* Check the logs of the template validator pods:
+
[source,terminal]
----
$ export NAMESPACE="$(oc get deployment -A | grep ssp-operator | awk '{print $1}')"
----
+
[source,terminal]
----
$ oc -n $NAMESPACE logs --tail=-1 -l name=virt-template-validator
----
Look for lines that contain clues to the source of the invalid VMs. For example:
+
[source,terminal]
----
{"component":"kubevirt-template-validator","level":"info","msg":"evalution summary for ubuntu-3166wmdbbfkroku0:\nminimal-required-memory applied: FAIL, value 1073741824 is lower than minimum [2147483648]\n\nsucceeded=false","pos":"admission.go:25","timestamp":"2021-09-28T17:59:10.934470Z"}
----

.Resolution

Open a support issue and provide the information gathered in the troubleshooting process.

//SSPOperatorDown Alert
[id="SSPOperatorDown_{context}"]
== SSPOperatorDown alert

.Description

The SSP Operator deploys and reconciles the common templates and the template validator.

.Reason

If the SSP Operator is down, then the deployment of dependent components fails, reconciliation of component changes fails, or both. Additionally, the updates to the common template and template validator reset and fail.

.Troubleshoot

. Check ssp-operator's pod namespace:
+
[source,terminal]
----
$ export NAMESPACE="$(oc get deployment -A | grep ssp-operator | awk '{print $1}')"
----

. Verify that the ssp-operator’s pod is currently down.
+
[source,terminal]
----
$ oc -n $NAMESPACE get pods -l control-plane=ssp-operator
----

. Check the ssp-operator's pod description and logs.
+
[source,terminal]
----
$ oc -n $NAMESPACE describe pods -l control-plane=ssp-operator
----
+
[source,terminal]
----
$ oc -n $NAMESPACE logs --tail=-1 -l control-plane=ssp-operator
----

.Resolution

Open a support issue and provide the information gathered in the troubleshooting process.

//SSPTemplateValidatorDown Alert
[id="SSPTemplateValidatorDown_{context}"]
== SSPTemplateValidatorDown alert

.Description

The template validator validates that virtual machines (VMs) do not violate their assigned templates.

.Reason

If every template validator pod is down, then the template validator fails to validate VMs against their assigned templates.

.Troubleshoot

. Check the namespaces of the ssp-operator pods and the virt-template-validator pods.
+
[source,terminal]
----
$ export NAMESPACE_SSP="$(oc get deployment -A | grep ssp-operator | awk '{print $1}')"
----
+
[source,terminal]
----
$ export NAMESPACE="$(oc get deployment -A | grep virt-template-validator | awk '{print $1}')"
----

. Verify that the virt-template-validator’s pod is currently down.
+
[source,terminal]
----
$ oc -n $NAMESPACE get pods -l name=virt-template-validator
----

. Check the pod description and logs of the ssp-operator and the virt-template-validator.
+
[source,terminal]
----
$ oc -n $NAMESPACE_SSP describe pods -l name=ssp-operator
----
+
[source,terminal]
----
$ oc -n $NAMESPACE_SSP logs --tail=-1 -l name=ssp-operator
----
+
[source,terminal]
----
$ oc -n $NAMESPACE describe pods -l name=virt-template-validator
----
+
[source,terminal]
----
$ oc -n $NAMESPACE logs --tail=-1 -l name=virt-template-validator
----

.Resolution

Open a support issue and provide the information gathered in the troubleshooting process.
