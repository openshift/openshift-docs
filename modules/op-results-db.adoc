// This module is included in the following assembly:
//
// * records/using-tekton-results-for-openshift-pipelines-observability.adoc

:_mod-docs-content-type: PROCEDURE
[id="results-db_{context}"]
= Configuring an external database server

{tekton-results} stores data in a PostgreSQL database. By default, the installation includes an internal PostgreSQL instance intended for testing and nonproduction use. The default instance does not provide production-grade capabilities, such as automated backups, performance tuning, storage lifecycle management, or support for database-level modifications through the {pipelines-shortname} Operator.

For production environments or business-critical workloads, you can configure {tekton-results} to connect to an external PostgreSQL-compatible database that is present in your environment.


.Procedure

. Create a secret with the credentials for connecting to your PostgreSQL server by entering the following command:
+
[source,terminal]
----
$ oc create secret generic tekton-results-postgres \
  --namespace=openshift-pipelines \
  --from-literal=POSTGRES_USER=<user> \
  --from-literal=POSTGRES_PASSWORD=<password>
----

. Edit the `TektonConfig` custom resource (CR) by using the following command:
+
[source,terminal]
----
$ oc edit TektonConfig config
----
+
Make the following changes in the `result` spec:
+
[source,yaml]
----
apiVersion: operator.tekton.dev/v1alpha1
kind: TektonConfig
metadata:
  name: config
spec:
  result:
    is_external_db: true
    db_host: database.example.com # <1>
    db_port: 5342 # <2>
----
<1> Provide the host name of your PostgreSQL server.
<2> Provide the port number of your PostgreSQL server.
