// This module is included in the following assembly:
//
// * records/using-tekton-results-for-openshift-pipelines-observability.adoc

:_content-type: PROCEDURE
[id="results-db_{context}"]
= Preparing a secret with the database credentials

{tekton-results} uses a PostgreSQL database to store data. You can configure the installation to use either a PostgreSQL server that is automatically installed with {tekton-results} or an external PostgreSQL server that already exists in your deployment. In both cases, provide a secret with the database credentials.

.Procedure

Complete one of the following steps:

* If you do not need to use an external PostgreSQL server, create a secret with the database user named `result` and a random password in the `openshift-pipelines` namespace by entering the following command:
+
[source,terminal]
----
$ oc create secret generic tekton-results-postgres \
  --namespace=openshift-pipelines \
  --from-literal=POSTGRES_USER=result \
  --from-literal=POSTGRES_PASSWORD=$(openssl rand -base64 20)
----
+
[NOTE]
====
In this command and in subsequent commads, if you configured a custom target namespace for {pipelines-shortname}, use the name of this namespace instead of `openshift-pipelines`.
====

* If you want to use an external PostgreSQL database server to store {tekton-results} data, create a secret with the credentials for this server by entering the following command:
+
[source,terminal]
----
$ oc create secret generic tekton-results-postgres \
  --namespace=openshift-pipelines \
  --from-literal=POSTGRES_USER=<user> \ # <1>
  --from-literal=POSTGRES_PASSWORD=<password> #<2>
----
+
Replace `<user>` with the username for the PostgreSQL user that {tekton-results} must use. Replace `<password>` with the password for the same account.
