// Module included in the following assemblies:
//
// * nodes/scheduling/secondary_scheduler/nodes-secondary-scheduler-configuring.adoc

:_mod-docs-content-type: PROCEDURE
[id="nodes-secondary-scheduler-configuring-console_{context}"]
= Deploying a secondary scheduler

[role="_abstract"]
After you have installed the {secondary-scheduler-operator}, you can deploy a secondary scheduler to apply custom placement logic for specific pods.

.Prerequisites

ifndef::openshift-rosa,openshift-dedicated[]
* You are logged in to {product-title} as a user with the `cluster-admin` role.
endif::openshift-rosa,openshift-dedicated[]
ifdef::openshift-rosa,openshift-dedicated[]
* You are logged in to {product-title} as a user with the `dedicated-admin` role.
endif::openshift-rosa,openshift-dedicated[]
* You have access to the {product-title} web console.
* The {secondary-scheduler-operator-full} is installed.

.Procedure

. Log in to the {product-title} web console.
. Create config map to hold the configuration for the secondary scheduler.
.. Navigate to *Workloads* -> *ConfigMaps*.
.. Click *Create ConfigMap*.
.. In the YAML editor, enter the config map definition that contains the necessary `KubeSchedulerConfiguration` configuration. For example:
+
[source,yaml]
----
apiVersion: v1
kind: ConfigMap
metadata:
  name: "secondary-scheduler-config"
  namespace: "openshift-secondary-scheduler-operator"
data:
  "config.yaml": |
    apiVersion: kubescheduler.config.k8s.io/v1
    kind: KubeSchedulerConfiguration
    leaderElection:
      leaderElect: false
    profiles:
      - schedulerName: secondary-scheduler
        plugins:
          score:
            disabled:
              - name: NodeResourcesBalancedAllocation
              - name: NodeResourcesLeastAllocated
----
+
where:

`metadata.name`:: Specifies the name of the config map. This is used in the *Scheduler Config* field when creating the `SecondaryScheduler` CR.
`metadata.namespace`:: Specifies the namespace to create the config map in. The namespace must be `openshift-secondary-scheduler-operator`.
`data."config.yaml".kind`:: Specifies the `KubeSchedulerConfiguration` resource for the secondary scheduler. For more information, see link:https://kubernetes.io/docs/reference/config-api/kube-scheduler-config.v1/#kubescheduler-config-k8s-io-v1-KubeSchedulerConfiguration[`KubeSchedulerConfiguration`] in the Kubernetes API documentation.
`data."config.yaml".profiles.schedulerName`:: Specifies the name of the secondary scheduler. Pods that set their `spec.schedulerName` field to this value are scheduled with this secondary scheduler.
`data."config.yaml".profiles.plugins`:: Specifies the plugins to enable or disable for the secondary scheduler. For a list default scheduling plugins, see link:https://kubernetes.io/docs/reference/scheduling/config/#scheduling-plugins[Scheduling plugins] in the Kubernetes documentation.

.. Click *Create*.

. Create the `SecondaryScheduler` CR:
.. Navigate to *Ecosystem* -> *Installed Operators*.
.. Select *{secondary-scheduler-operator-full}*.
.. Select the *Secondary Scheduler* tab and click *Create SecondaryScheduler*.
.. The *Name* field defaults to `cluster`; do not change this name.
.. The *Scheduler Config* field defaults to `secondary-scheduler-config`. Ensure that this value matches the name of the config map created earlier in this procedure.
.. In the *Scheduler Image* field, enter the image name for your custom scheduler.
+
[IMPORTANT]
====
Red Hat does not directly support the functionality of your custom secondary scheduler.
====

.. Click *Create*.
