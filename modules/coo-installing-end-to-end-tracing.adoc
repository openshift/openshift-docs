// Module included in the following assemblies:

// * installing/installing-end-to-end-observability.adoc

:_mod-docs-content-type: PROCEDURE
[id="distributed-tracing_{context}"]
= Distributed tracing

The distributed tracing capability installs the OpenTelemetry Collector, Tempo and the distributed tracing UI plugin.

.Procedure

. Install distributed tracing by using the `ObservabilityInstaller` resource.
+
[source,yaml]
----
apiVersion: observability.openshift.io/v1alpha1
kind: ObservabilityInstaller
metadata:
  name: tracing
  namespace: observability # <1>
spec:
  capabilities:
    tracing:
      enabled: true  # <2>
      operators:
        install: true # <3>
      storage:
        objectStorage: # <4>
...
----
<1> Namespace where the `ObservabilityInstaller` CR is created. The namespace should contain the secrets referenced in the object storage configuration.
<2> Enables the tracing capability. This installs the OpenTelemetry Collector, Tempo and all necessary configuration.
<3> Installs the operators required by the tracing capability. The default is `true`.
<4> Required object storage configuration for the tracing capability. This is used to store traces in an object storage service.

. Configure S3 object storage
+
--
[source,yaml]
----
      storage:
        objectStorage:
          s3:
            bucket: <bucket_name> # <1>
            endpoint: <s3_endpoint> # <2>
            accessKeyID: <access_key_id> # <3>
            accessKeySecret: # <4>
              name: s3-access-secret
              key: access_key_secret
            region: us-east-1 # <5>
----
<1> Name of the bucket to store data in.
<2> Endpoint of the S3-compatible object storage service.
<3> Access key ID for the S3-compatible object storage service.
<4> Secret containing the access key secret for the S3-compatible object storage service.
<5> AWS region for the S3 bucket.
--
+
Use the following command to create the secret containing the access key:
+
[source,bash]
----
$ oc create secret generic s3-access-secret \
--from-literal=access_key_secret="secret"
----
