// Module included in the following assemblies:
//
// * nodes/containers/using-shared-memory.adoc

[id="setting-up-posix-shared-memory_{context}"]
= Setting up POSIX Shared Memory


The following procedure shows how to set up POSIX shared memory between two containers.

.Procedure

1. Create the pod YAML file and specify the tmpfs volume for each container, as shown in the `shared-memory.yaml` file.
+
====
.shared-memory.yaml
[source,yaml]
----
---
apiVersion: v1
id: hello-openshift
kind: Pod
metadata:
  name: hello-openshift
  labels:
    name: hello-openshift
spec:
  volumes: <1>
    - name: dshm
      emptyDir:
        medium: Memory
  containers:
    - image: memory-creator <2>
      name: memory-creator-app
      ports:
        - containerPort: 8080
          hostPort: 6061
      volumeMounts:
        - mountPath: /dev/shm
          name: dshm
    - image: memory-user <3>
      name: memory-user-app
      ports:
        - containerPort: 8081
          hostPort: 6062
      volumeMounts:
        - mountPath: /dev/shm
          name: dshm
----
<1> Specifies the tmpfs volume `dshm`.
<2> Create the `memory-creator-app` container using the ephemeral storage volume `dshm`, which is mounted to `/dev/shm` to enables POSIX shared memory.
<3> Create the `memory-user-app` container also using the ephemeral storage volume `dshm` mounted to `/dev/shm` to enables POSIX shared memory.
====

2. Create the shared memory pod using the pod YAML file:
+
----
$ oc create -f shared-memory.yaml
----
