// Module included in the following assemblies:
//
// * argocd_applications/synchronizing-an-application-using-gitops-argocd-cli.adoc
// * declarative_clusterconfig/configuring-an-openshift-cluster-by-deploying-an-application-with-cluster-configurations.adoc

:_mod-docs-content-type: PROCEDURE
[id="gitops-argocd-cli-synchronizing-an-application-in-core-mode_{context}"]
= Synchronizing an application in core mode by using the GitOps CLI

[role="_abstract"]
You can synchronize applications in `core` mode by using the {gitops-shortname} `argocd` CLI.

This sample workflow walks you through the process of configuring Argo CD to recursively sync the content of the `cluster` directory to the `cluster-configs` application. The directory defines the {OCP} cluster configurations and the `spring-petclinic` namespace on the cluster.

.Prerequisites

* You have installed the {gitops-title} Operator on your {OCP} cluster.
* You have installed the OpenShift CLI (`oc`).
* You have installed the {gitops-title} `argocd` CLI. 

.Procedure

. Log in to the {OCP} cluster by using the `oc` CLI tool:
+
[source,terminal]
----
$ oc login -u <username> -p <password> <server_url>
----
+
.Example
[source,terminal]
----
$ oc login -u kubeadmin -p '<password>' https://api.crc.testing:6443
----

. Check whether the context is set correctly in the `kubeconfig` file:
+
[source,terminal]
----
$ oc config current-context
----

. Set the default namespace of the current context to `openshift-gitops`:
+
[source,terminal]
----
$ oc config set-context --current --namespace openshift-gitops
----

. Set the following environment variable to override the Argo CD component names:
+
[source,terminal]
----
$ export ARGOCD_REPO_SERVER_NAME=openshift-gitops-repo-server
----

. Because the application is configured with the `none` sync policy, you must manually trigger the sync operation:
+
[source,terminal]
----
$ argocd app sync --core openshift-gitops/app-cluster-configs
----

. List the application to confirm that the application has the `Healthy` and `Synced` statuses:
+
[source,terminal]
----
$ argocd app list --core
----