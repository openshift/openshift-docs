// Module included in the following assemblies:
//
// * security/tls-profiles.adoc

[id="tls-profiles-ingress-understanding_{context}"]
= Understanding TLS security profiles

// TODO: Update to be generic for all 3
You can use a TLS (Transport Layer Security) profile to define which TLS ciphers are required by the Ingress Controllers.

A TLS security profile defines the TLS ciphers that the Kubernetes API server must use when connecting with the kubelet to protect communication between the kubelet and the Kubernetes API server.

You can specify one of the following TLS security profiles:

.TLS security profiles
[cols="1,2a",options="header"]
|===
|Profile
|Description

|`Old`
|This profile is intended for use with legacy clients or libraries. The profile is based on link:https://wiki.mozilla.org/Security/Server_Side_TLS#Old_backward_compatibility[recommended configurations].

The `Old` profile requires a minimum TLS version of 1.1.

|`Intermediate`
|This profile is the recommended configuration for the majority of clients. It is the  default TLS security profile for the kubelet and Kubernetes control plane. The profile is based on link:https://wiki.mozilla.org/Security/Server_Side_TLS#Intermediate_compatibility_.28recommended.29[recommended configurations].

The `Intermediate` profile requires a minimum TLS version of 1.2.

|`Modern`
|This profile is intended for use with modern clients that have no need for backwards compatibility. This profile is based on link:https://wiki.mozilla.org/Security/Server_Side_TLS#Modern_compatibility[recommended configurations].

The `Modern` profile requires a minimum TLS version of 1.3:

// TODO: I think this means that the modern profile isn't even supported on ingress. Maybe we can lose it all together?
[IMPORTANT]
====
The HAProxy Ingress controller image does not support TLS `1.3` and because the `Modern` profile requires TLS `1.3`, it is not supported. The Ingress Operator converts the `Modern` profile to `Intermediate`.

The Ingress Operator also converts the TLS `1.0` of an `Old` or `Custom` profile to `1.1`, and TLS `1.3` of a `Custom` profile to `1.2`.
====

// TODO: find the right place/way to note this:
*This profile is only available for the Ingress Controller.*

|`Custom`
|This profile allows you to define the TLS version and ciphers to use.

[WARNING]
====
Use caution when using a `Custom` profile, because invalid configurations can cause problems.
====

|===

[NOTE]
====
When using the Old, Intermediate, and Modern profile types, the effective profile configuration is subject to change between releases. For example, given a specification to use the Intermediate profile deployed on release X.Y.Z, an upgrade to release X.Y.Z+1 may cause a new profile configuration to be applied to the Ingress Controller, resulting in a rollout.
====

// TODO: Maybe include how to view the ciphers?
