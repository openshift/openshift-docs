// Module included in the following assemblies:
//
// * security/tls-profiles.adoc

[id="tls-profiles-understanding_{context}"]
= Understanding TLS profiles

You can use a TLS (Transport Layer Security) profile to define which TLS ciphers are required by the kubelet when it is acting as an HTTP server. The kubelet uses its HTTP/GRPC server to communicate with the Kubernetes API server, which sends commands to pods, gathers logs, and run exec commands on pods through the kubelet.

A TLS profile defines the TLS ciphers that the Kubernetes API server must use when connecting with the kubelet to protect communication between the kubelet and the Kubernetes API server.

[NOTE]
====
By default, when the kubelet acts as a client with the Kubernetes API server, it automatically negotiates the TLS parameters with the API server.
====

When defining a TLS security profile for the kubelet HTTP server, you use the `tlsSecurityProfile` parameter in a `KubeletConfig` custom resource (CR) to specify a predefined or custom profile for specific nodes.

You can specify one of the following TLS security profile types:

[NOTE]
====
When using the Old, Intermediate, and Modern profile types, the effective profile configuration is subject to change between releases. For example, given a specification to use the Intermediate profile deployed on release X.Y.Z, an upgrade to release X.Y.Z+1 may cause a new profile configuration to be applied to the Ingress controller, resulting in a rollout.
====


* `Old`. This is a predefined profile intended for use with legacy clients or libraries. The profile is based on link:https://wiki.mozilla.org/Security/Server_Side_TLS#Recommended_configurations[recommended configurations].
+
The `Old` profile uses the following TLS cipher suites and requires a minimum TLS version of 1.0:
+
--
* TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256
* TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256
* TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384
* TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384
* TLS_ECDHE_ECDSA_WITH_CHACHA20_POLY1305_SHA256
* TLS_ECDHE_RSA_WITH_CHACHA20_POLY1305_SHA256
* TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA256
* TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256
* TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA
* TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA
* TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA
* TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA
* TLS_RSA_WITH_AES_128_GCM_SHA256
* TLS_RSA_WITH_AES_256_GCM_SHA384
* TLS_RSA_WITH_AES_128_CBC_SHA256
* TLS_RSA_WITH_AES_128_CBC_SHA
* TLS_RSA_WITH_AES_256_CBC_SHA
* TLS_RSA_WITH_3DES_EDE_CBC_SHA
--

* `Intermediate`. This is a predefined profile, which is the default TLS security profile for the kubelet. The profile is based on link:https://wiki.mozilla.org/Security/Server_Side_TLS#Recommended_configurations[recommended configurations].
+
The `Intermediate` profile uses the following TLS cipher suites and requires a minimum TLS version of 1.2:
+
--
* TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256
* TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256
* TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384
* TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384
* TLS_ECDHE_ECDSA_WITH_CHACHA20_POLY1305_SHA256,
* TLS_ECDHE_RSA_WITH_CHACHA20_POLY1305_SHA256
--

* `Modern` Use with modern clients that support TLS 1.3 with no need for backwards compatibility.
+
.Sample `Modern` profile configuration
[source,yaml]
----
spec:
  tlsSecurityProfile:
    type: Modern
----

* `Custom`. This profile allows you to define the TLS ciphers and version to use.
+
[WARNING]
====
Use caution when using a `Custom` profile, because invalid configurations can cause problems.
====
