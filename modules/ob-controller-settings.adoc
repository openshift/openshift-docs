// This module is included in the following assembly:
//
// * about/overview-openshift-builds.adoc

:_mod-docs-content-type: REFERENCE
[id="controller-settings_{context}"]
= Controller settings

[role="_abstract"] 

The controller is configured on the {ocp-product-title} cluster with some default values. However, you can set or modify a few controller settings by using environment variables defined in the `controller.yaml` file.
The following environment variables are available for use:

.Controller settings
[options="header"]
|===

| Environment variable | Description

| `CTX_TIMEOUT` | Overrides the default context timeout that is used for all custom resource definition reconciliation operations. The default value is `5` seconds.

| `REMOTE_ARTIFACTS_CONTAINER_IMAGE` | Specifies the container image that is used for the `.spec.sources` remote artifacts download. By default, the environment variable uses the `quay.io/quay/busybox:latest` container image.

| `TERMINATION_LOG_PATH` | Denotes the path of the termination log. The default value is `/dev/termination-log`.

| `GIT_ENABLE_REWRITE_RULE` | Enables Git wrapper to set up an  `insteadOf` Git config rewrite rule URL for the respective source hostname. The default value is `false`.

| `GIT_CONTAINER_TEMPLATE` | Denotes the JSON representation of a container template, which is used for steps that clone a Git repository. The default value is `{"image": "ghcr.io/shipwright-io/build/git:latest", "command": ["/ko-app/git"], "env": [{"name": "HOME", "value": "/shared-home"}], "securityContext":{"allowPrivilegeEscalation": false, "capabilities": {"drop": ["ALL"]}, "runAsUser": 1000,"runAsGroup": 1000}}`. The `args` and `name` properties are ignored as they are set by the build controller.

| `GIT_CONTAINER_IMAGE` | Denotes a custom container image for Git clone steps. If both the `GIT_CONTAINER_TEMPLATE` and `GIT_CONTAINER_IMAGE` variables specify an image, the image specified in the `GIT_CONTAINER_IMAGE` variable takes precedence.

| `BUNDLE_IMAGE_CONTAINER_TEMPLATE` | Denotes the JSON representation of a container template, which is used for steps that pull a bundle image to obtain the packaged source code. The default value is `{"image": "ghcr.io/shipwright-io/build/bundle:latest", "command": ["/ko-app/bundle"], "env": [{"name": "HOME","value": "/shared-home"}], "securityContext":{"allowPrivilegeEscalation": false, "capabilities": {"drop": ["ALL"]}, "runAsUser":1000,"runAsGroup":1000}}`. The `args` and `name` properties are ignored as they are set by the build controller.

| `BUNDLE_IMAGE_CONTAINER_IMAGE` | Denotes a custom container image  that pulls a bundle image to obtain the packaged source code. If both the `BUNDLE_IMAGE_CONTAINER_TEMPLATE` and `BUNDLE_IMAGE_CONTAINER_IMAGE` variables specify an image, the image specified in the `BUNDLE_IMAGE_CONTAINER_IMAGE` variable takes precedence.

| `IMAGE_PROCESSING_CONTAINER_TEMPLATE` | Denotes the JSON representation of a container template, which is used for steps that process the image. The default value is `{"image": "ghcr.io/shipwright-io/build/image-processing:latest", "command": ["/ko-app/image-processing"], "env": [{"name": "HOME","value": "/shared-home"}], "securityContext": {"allowPrivilegeEscalation": false, "capabilities": {"add": ["DAC_OVERRIDE"], "drop": ["ALL"]}, "runAsUser": 0, "runAsgGroup": 0}}`. The `args` and `name` properties are ignored as they are set by the build controller.

| `IMAGE_PROCESSING_CONTAINER_IMAGE` | Denotes a custom container image, which is used for steps that process the image. If both the `IMAGE_PROCESSING_CONTAINER_TEMPLATE` and `IMAGE_PROCESSING_CONTAINER_IMAGE` variables specify an image, the image specified in the `IMAGE_PROCESSING_CONTAINER_IMAGE` variable takes precedence.

| `WAITER_IMAGE_CONTAINER_TEMPLATE` | Denotes the JSON representation of a container template that waits for local source code to be uploaded to it. The default value is `{"image":"ghcr.io/shipwright-io/build/waiter:latest", "command": ["/ko-app/waiter"], "args": ["start"], "env": [{"name": "HOME","value": "/shared-home"}], "securityContext":{"allowPrivilegeEscalation": false, "capabilities": {"drop": ["ALL"]}, "runAsUser":1000,"runAsGroup":1000}}`. The `args` and `name` properties are ignored as they are set by the build controller.

| `WAITER_IMAGE_CONTAINER_IMAGE` | Denotes a custom container image that waits for local source code to be uploaded to it. If both the `WAITER_IMAGE_CONTAINER_TEMPLATE` and `WAITER_IMAGE_CONTAINER_IMAGE` variables specify an image, the image specified in the `WAITER_IMAGE_CONTAINER_IMAGE` variable takes precedence.

| `BUILD_CONTROLLER_LEADER_ELECTION_NAMESPACE` | Sets the namespace that is used to store the `shipwright-build-controller` lock. By default, the lock is in the same namespace as the build controller.

| `BUILD_CONTROLLER_LEASE_DURATION` | Overrides the `LeaseDuration` field, which is the duration for non-controller nodes to wait before acquiring the controller job forcefully.

| `BUILD_CONTROLLER_RENEW_DEADLINE` | Overrides the `RenewDeadline` field, which is the duration for the acting controller node to reacquire the controller job.

| `BUILD_CONTROLLER_RETRY_PERIOD` | Overrides the `RetryPeriod` field, which is the duration for the controller selector nodes to wait before trying to select a new controller.

| `BUILD_MAX_CONCURRENT_RECONCILES` | Denotes the number of concurrent reconciles by the build controller. The default value is `0`.

| `BUILDRUN_MAX_CONCURRENT_RECONCILES` | Denotes the number of concurrent reconciles by the build run controller. The default value is `0`.

| `BUILDSTRATEGY_MAX_CONCURRENT_RECONCILES` | Denotes the number of concurrent reconciles by the build strategy controller. The default value is `0`.

| `CLUSTERBUILDSTRATEGY_MAX_CONCURRENT_RECONCILES` | Denotes the number of concurrent reconciles by the cluster build strategy controller. The default value is `0`.

| `KUBE_API_BURST` | Denotes the burst to use for the Kubernetes API client. The default value is `0`.

| `KUBE_API_QPS` | Denotes the QPS to use for the Kubernetes API client. The default value is `0`.

|===
