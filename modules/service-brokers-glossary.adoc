// Module included in the following assemblies:
//
// <List assemblies here, each on a new line>
//service_brokers/provisioning-managed-services.adoc

// This module can be included from assemblies using the following include statement:
// /con_service-brokers-glossary.adoc[leveloffset=+1]

// The file name and the ID are based on the module title. For example:
// * file name: con_my-concept-module-a.adoc
// * ID: [id='con_my-concept-module-a_{context}']
// * Title: = My concept module A
//
// The ID is used as an anchor for linking to the module. Avoid changing
// it after the module has been published to ensure existing links are not
// broken.
//
// The `context` attribute enables module reuse. Every module's ID includes
// {context}, which ensures that the module has a unique ID even if it is
// reused multiple times in a guide.
//
// In the title, include nouns that are used in the body text. This helps
// readers and search engines find information quickly.
// Do not start the title with a verb. See also _Wording of headings_
// in _The IBM Style Guide_.
[id="service-brokers-glossary_{context}"]
= Service brokers Glossary

//tag::service-brokers-glossary-cluster-service-broker[]
Cluster Service Broker::
A _cluster service broker_ is a server that conforms to the OSB API specification
and manages a set of one or more services. The software could be hosted within|
your own {product-title} cluster or elsewhere.
+
Cluster administrators can create `ClusterServiceBroker` API resources
representing cluster service brokers and register them with their {product-title}
cluster. This allows cluster administrators to make new types of managed services
using that cluster service broker available within their cluster.
+
A `ClusterServiceBroker` resource specifies connection details for a cluster
service broker and the set of services (and variations of those services) to
{product-title} that should then be made available to users. Of special note is
the `authInfo` section, which contains the data used to authenticate with the
cluster service broker.
+
.Example `ClusterServiceBroker` Resource
----
apiVersion: servicecatalog.k8s.io/v1beta1
kind: ClusterServiceBroker
metadata:
  name: BestCompanySaaS
spec:
  url: http://bestdatabase.example.com
  authInfo:
    basic:
      secretRef:
        namespace: test-ns
        name: secret-name
----
//end::service-brokers-glossary-cluster-service-broker[]

//tag::service-brokers-glossary-cluster-service-class[]
Cluster Service Class::
Also synonymous with "service" in the context of the service catalog, a _cluster
service class_ is a type of managed service offered by a particular cluster
service broker. Each time a new cluster service broker resource is added to the
cluster, the service catalog controller connects to the corresponding cluster
service broker to obtain a list of service offerings. A new `ClusterServiceClass`
resource is automatically created for each.
+
[NOTE]
====
{product-title} also has a core concept called
which are separate Kubernetes resources related to internal load balancing.
These resources are not to be confused with how the term is used in the context
of the service catalog and OSB API.
====
+
.Example `ClusterServiceClass` Resource
----
apiVersion: servicecatalog.k8s.io/v1beta1
kind: ClusterServiceClass
metadata:
  name: smallDB
  brokerName: BestDataBase
  plans: [...]
----
//end::service-brokers-glossary-cluster-service-class[]

//tag::service-brokers-glossary-cluster-service-plan[]
Cluster Service Plan::
A _cluster service plan_ is represents tiers of a cluster service class. For example, a
cluster service class may expose a set of plans that offer varying degrees of
quality-of-service (QoS), each with a different cost associated with it.
//end::service-brokers-glossary-cluster-service-plan[]

//tag::service-brokers-glossary-service-instance[]
Service Instance::
A _service instance_ is a provisioned instance of a cluster service class. When a
user wants to use the capability provided by a service class, they can create a
new service instance.
+
When a new `ServiceInstance` resource is created, the service catalog controller
connects to the appropriate cluster service broker and instructs it to provision
the service instance.
+
.Example `ServiceInstance` Resource
----
apiVersion: servicecatalog.k8s.io/v1beta1
kind: ServiceInstance
metadata:
  name: my_db
  namespace: test-ns
spec:
  externalClusterServiceClassName: smallDB
  externalClusterServicePlanName: default
----
//end::service-brokers-glossary-service-instance[]

//tag::service-brokers-glossary-application[]
Application::
The term _application_ refers to the {product-title} deployment artifacts, for
example pods running in a user's project, that will use a _service instance_.
//end::service-brokers-glossary-application[]

Credentials::
_Credentials_ are information needed by an application to communicate with a
service instance.

Service Binding::
A _service binding_ is a link between a service instance and an application.
These are created by cluster users who wish for their applications to reference
and use a service instance.
+
Upon creation, the service catalog controller creates a Kubernetes secret
containing connection details and credentials for the service instance. Such
secrets can be mounted into pods as usual. There is also integration with
`PodPresets`, which allow you to express how the secret should be consumed, and
in which pods.
+
.Example `ServiceBinding` Resource
----
apiVersion: servicecatalog.k8s.io/v1beta1
kind: ServiceBinding
metadata:
  name: myBinding
  namespace: test-ns
spec:
  instanceRef:
    name: my_db
  parameters:
    securityLevel: confidential
  secretName: mySecret
----

Parameters::
A _parameter_ is a special field available to pass additional data to the cluster
service broker when using either service bindings or service instances. The only
formatting requirement is for the parameters to be valid YAML (or JSON). In the
above example, a security level parameter is passed to the cluster service broker
in the service binding request. For parameters that need more security, place
them in a secret and reference them using `parametersFrom`.
+
.Example Service Binding Resource Referencing a Secret
----
apiVersion: servicecatalog.k8s.io/v1beta1
kind: ServiceBinding
metadata:
  name: myBinding
  namespace: test-ns
spec:
  instanceRef:
    name: my_db
  parametersFrom:
    - secretKeyRef:
        name: securityLevel
        key: myKey
  secretName: mySecret
----

[discrete]
== Additional resources

* A bulleted list of links to other material closely related to the contents of the concept module.
* For more details on writing concept modules, see the link:https://github.com/redhat-documentation/modular-docs#modular-documentation-reference-guide[Modular Documentation Reference Guide].
* Use a consistent system for file names, IDs, and titles. For tips, see _Anchor Names and File Names_ in link:https://github.com/redhat-documentation/modular-docs#modular-documentation-reference-guide[Modular Documentation Reference Guide].
