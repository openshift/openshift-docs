:_newdoc-version: 2.18.4
:_template-generated: 2025-04-28
:_mod-docs-content-type: CONCEPT

[id="example-of-forwarding-logs-to-cloudwatch_{context}"]
= Example of forwarding logs to CloudWatch

You can forward logs to external Elasticsearch with Logging 6. The following example shows the complete spec for forwarding logs to CloudWatch in Logging 6.x.

.Example spec using long-lived static credentials from a secret
[source,yaml]
----
apiVersion: observability.openshift.io/v1
kind: ClusterLogForwarder
metadata:
  name: my-forwarder
spec:
  serviceAccount:
    name: logging-admin
  outputs:
  - name: my-cw
    type: cloudwatch
    cloudwatch:
      groupName: my-cluster-{.log_type||"unknown"}
      region: us-east-1
      authentication:
        type: awsAccessKey
        awsAccessKey:
          keyId:
            secretName: cw-secret
            key: aws_access_key_id
          keySecret:
            secretName: cw-secret
            key: aws_secret_access_key
  pipelines:
  - name: my-cw-logs
    inputRefs:
      - application
      - infrastructure
    outputRefs:
      - my-cw
----

Alternative to using using long-lived static credentials from a secret, you can use short-lived tokens.

.Example snippet of using short-lived tokens
[source,yaml]
----
...
    cloudwatch:
      authentication:
        type: iamRole
        iamRole:
          roleARN:
            secretName: role-for-sts
            key: credentials
          token:
            from: serviceAccount
...
----

You can also use a static token (self-generated token).

. Example snippet of using role and static token
[sourc,yaml]
----
...
    cloudwatch:
      authentication:
        type: iamRole
        iamRole:
          roleARN:
            secretName: role-for-sts
            key: credentials
          token:
            from: secret
            secret:
              key: token
              name: cw-token
...
----

////
[role="_additional-resources"]
.Additional resources
* link:https://github.com/redhat-documentation/modular-docs#modular-documentation-reference-guide[Modular Documentation Reference Guide]
* xref:some-module_{context}[]
////