// Module included in the following assembly:
//
// * declarative_clusterconfig/configuring-an-openshift-cluster-by-deploying-an-application-with-cluster-configurations.adoc

:_mod-docs-content-type: PROCEDURE
[id="configuring-respectRBAC-using-the-cli_{context}"]
= Configuring respectRBAC using the CLI

You can configure the `respectRBAC` feature by using the CLI.

.Procedure

. Create a YAML object file, for example, `argo-cd-resource.yaml`, to configure the `respectRBAC` feature: 
+
.Example `ArgoCD` YAML to create the `respectRBAC` feature
[source,yaml]
----
apiVersion: argoproj.io/v1beta1
kind: ArgoCD
metadata:
  name: example-argocd #<1>
spec:
  controller:
    respectRBAC: strict #<2>
----
<1> Specify the name of the Argo CD instance.
<2> You can specify the value of the `.spec.controller.respectRBAC` key in the `ArgoCD` resource as `normal` or `strict`. Consider setting the value as `normal` to balance accuracy and speed as resource listing is a lightweight operation. Set the value as `strict` if Argo CD reports errors indicating that it cannot access resources when you set the value as `normal`. Setting `strict` increases the number of API calls to the server and it is more accurate compared to `normal` as Argo CD performs additional validations of RBAC resources to determine permissions.

. Apply the changes to the YAML file by running the following command:
+
[source,terminal]
----
$ oc apply -f argocd-resource.yaml -n <argocd_instance_name> #<1>
----
<1> Replace `argocd-resource.yaml` with the name of the YAML file that defines the `ArgoCD` resource and `<argocd_instance_name>` with the namespace that hosts `ArgoCD`.
+
. Verify that the status of the `.status.phase` field is `Available` by running the following command:
+
[source,terminal]
----
$ oc get argocd <argocd_instance_name> -n <argocd_namespace> -o jsonpath='{.status.phase}' #<1>
----
<1> Replace `<argocd_instance_name>` with the name of your Argo CD instance, for example, `example-argocd`.

. Verify that the `resource.respectRBAC` parameter in the `ConfigMap` resource is updated successfully:
.. To retrieve the contents of the `argocd-cm` config map, run the following command:
+
[source,terminal]
----
$ oc get cm argocd-cm -n <argocd_namespace> -o yaml
----
.. Verify that the `argocd-cm` `ConfigMap` contains the `resource.respectRBAC` parameter and ensure its value is set to either `strict` or `normal`.