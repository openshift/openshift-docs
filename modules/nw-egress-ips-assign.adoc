// Module included in the following assemblies:
//
// * networking/ovn_kubernetes_network_provider/configuring-egress-ips-ovn.adoc

:_mod-docs-content-type: PROCEDURE
[id="nw-egress-ips-assign_{context}"]
= Assigning an egress IP address to a namespace

You can assign one or more egress IP addresses to a namespace or to specific pods in a namespace.

.Prerequisites

* Install the OpenShift CLI (`oc`).
* Log in to the cluster as a cluster administrator.
* Configure at least one node to host an egress IP address.

.Procedure

. Create an `EgressIP` object.
+
.. Create a `<egressips_name>.yaml` file where `<egressips_name>` is the name of the object.
+
.. In the file that you created, define an `EgressIP` object, as in the following example:
+
[source,yaml]
----
apiVersion: k8s.ovn.org/v1
kind: EgressIP
metadata:
  name: egress-project1
spec:
  egressIPs:
  - 192.168.127.10
  - 192.168.127.11
  namespaceSelector:
    matchLabels:
      env: qa
----

. To create the object, enter the following command.
+
[source,terminal]
----
$ oc apply -f <egressips_name>.yaml
----
+
--
where:

`<egressips_name>`:: Replace `<egressips_name>` with the name of the object.
--
+
.Example output
[source,terminal]
----
egressips.k8s.ovn.org/<egressips_name> created
----

. Optional: Store the `<egressips_name>.yaml` file so that you can make changes later.

. Add labels to the namespace that requires egress IP addresses. To add a label to the namespace of an `EgressIP` object defined in step 1, run the following command:
+
[source,terminal]
----
$ oc label ns <namespace> env=qa
----
+
--
where:

`<namespace>`:: Replace `<namespace>` with the namespace that requires egress IP addresses.
--

.Verification

* To show all egress IP addresses that are in use in your cluster, enter the following command:
+
[source,terminal]
----
$ oc get egressip -o yaml
----
+
[NOTE]
====
The command `oc get egressip` only returns one egress IP address regardless of how many are configured. This is not a bug and is a limitation of Kubernetes. As a workaround, you can pass in the `-o yaml` or `-o json` flags to return all egress IPs addresses in use.
====
+
.Example output
+
[source,terminal]
----
# ...
spec:
  egressIPs:
  - 192.168.127.10
  - 192.168.127.11
# ...
----