// This module is used in the following assemblies:

// * configure/ols-configuring-openshift-lightspeed.adoc

:_mod-docs-content-type: PROCEDURE
[id="ols-configuring-openshift-lightspeed-with-a-trust-certificate-required-by-llm-provider_{context}"]
= Configuring {ols-long} with a trust certificate using CLI

Configure {ols-long} with a trust certificate required by a Large Language Model (LLM) provider.

[NOTE]
====
If the LLM provider you are using requires a trust certificate to authenticate the {ols-long} service you must perform this procedure. If the LLM provider does not require a trust certificate to authenticate the service then you should skip this procedure.
====

.Procedure

. Copy the contents of the certificate file and paste it into a file called `caCertFileName`.
+
.Example file.
[source,yaml,subs="attributes,verbatim"]
----
kind: ConfigMap
apiVersion: v1
metadata:
  name: trusted-certs
  namespace: openshift-lightspeed
data:
  caCertFileName: |
    -----BEGIN CERTIFICATE-----
    .
    .
    .
    -----END CERTIFICATE-----  
----

. Create a `ConfigMap` object called `trusted-certs` by running the following command:
+
[source,terminal]
----
$ oc create configmap trusted-certs --from-file=caCertFileName
----

. Update the custom resource file to include the name of the `ConfigMap` object that contains one or more CA certificates required to connect to your LLM provider.
+
.Example {rhelai} CR file
[source,yaml,subs="attributes,verbatim"]
----
apiVersion: ols.openshift.io/v1alpha1
kind: OLSConfig
metadata:
  name: cluster
spec:
  ols:
    defaultProvider: rhelai
    defaultModel: models/granite-7b-redhat-lab
    additionalCAConfigMapRef:
      name: trusted-certs <1>
----
<1> If the LLM provider requires a CA certificate to connect from OLS to the API for the LLM provider then you must also add that cert to the ConfigMap. The ConfigMap should contain the full certificate in the data field with a unique name as the key and the value of the certificate. 
