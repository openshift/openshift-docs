// Module included in the following assemblies:
//
// * cloud_experts_tutorials/cloud-experts-consistent-egress-ip.adoc

:_mod-docs-content-type: PROCEDURE
[id="cloud-experts-consistent-egress-ip-capacity_{context}"]
= Ensuring capacity

[role="_abstract"]
The number of IP addresses assigned to each node is limited for each public cloud provider. 

.Procedure 
* Verify sufficient capacity by running the following command:
+
[source,terminal]
----
$ oc get node -o json | \
    jq '.items[] |
        {
            "name": .metadata.name,
            "ips": (.status.addresses | map(select(.type == "InternalIP") | .address)),
            "capacity": (.metadata.annotations."cloud.network.openshift.io/egress-ipconfig" | fromjson[] | .capacity.ipv4)
        }'
----
+
*For example*:
+
[source,terminal]
---
{
  "name": "ip-10-10-145-88.ec2.internal",
  "ips": [
    "10.10.145.88"
  ],
  "capacity": 14
}
{
  "name": "ip-10-10-154-175.ec2.internal",
  "ips": [
    "10.10.154.175"
  ],
  "capacity": 14
}
---