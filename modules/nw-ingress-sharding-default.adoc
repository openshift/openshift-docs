// Module include in the following assemblies:
//
// * ingress-operator.adoc
// * networking/configuring-ingress-cluster-traffic-ingress-controller.adoc

:_mod-docs-content-type: PROCEDURE
[id="nw-ingress-sharding-default_{context}"]
= Sharding the default Ingress Controller

[role="_abstract"]
You can restrict an Ingress Controller from servicing routes with specific labels by using either namespace selectors or route selectors.

After creating a new Ingress shard, there might be routes that are admitted to your new Ingress shard that are also admitted by the default Ingress Controller. This is because the default Ingress Controller has no selectors and admits all routes by default.

The following procedure restricts the default Ingress Controller from servicing your newly sharded `finance`, `ops`, and `dev`, routes by using a namespace selector. This adds further isolation to Ingress shards.

[IMPORTANT]
====
You must keep all of {product-title}'s administration routes on the same Ingress Controller. Therefore, avoid adding additional selectors to the default Ingress Controller that exclude these essential routes.
====

.Prerequisites

* You installed the {oc-first}.
* You are logged in as a project administrator.

.Procedure

. Modify the default Ingress Controller by running the following command:
+
[source,terminal]
----
$ oc edit ingresscontroller -n openshift-ingress-operator default
----

. Edit the Ingress Controller to contain a `namespaceSelector` that excludes the routes with any of the `finance`, `ops`, and `dev` labels:
+
[source,yaml]
----
apiVersion: operator.openshift.io/v1
kind: IngressController
metadata:
  name: default
  namespace: openshift-ingress-operator
spec:
  namespaceSelector:
    matchExpressions:
      - key: name
        operator: NotIn
        values:
          - finance
          - ops
          - dev
----
+
The default Ingress Controller no longer serves the namespaces labeled with `name:finance`, `name:ops`, and `name:dev`.
