// Module included in the following assemblies:
//
// * operating/manage-user-access/configure-google-workspace-identity.adoc
:_content-type: PROCEDURE
[id="configure-oidc-identity-provider_{context}"]
= Configuring an OIDC identity provider

You can configure {rh-rhacscs-first} to use your OpenID Connect (OIDC) identity provider.

.Prerequisites
* You must have already configured an application in your identity provider, such as Google Workspace.
* You must have permissions to configure identity providers in {product-title-short}.

.Procedure
. On the {product-title-short} portal, navigate to *Platform Configuration* -> *Access Control*.
. Click *Create auth provider* and select *OpenID Connect* from the drop-down list.
. Enter information in the following fields:
** *Name*: A name to identify your authentication provider; for example, *Google Workspace*. The integration name is shown on the login page to help users select the correct sign-in option.
** *Callback mode*: Select *Auto-select (recommended)*, which is the default value, unless the identity provider requires another mode.
+
[NOTE]
====
`Fragment` mode is designed around the limitations of Single Page Applications (SPAs). Red Hat only supports the `Fragment` mode for early integrations and does not recommended using it for later integrations.
====
** *Issuer*: The root URL of your identity provider; for example, `\https://accounts.google.com` for Google Workspace.
See your identity provider documentation for more information.
+
[NOTE]
====
If you are using {product-title-short} version 3.0.49 and later, for *Issuer* you can perform these actions:

* Prefix your root URL with `https+insecure://` to skip TLS validation.
This configuration is insecure and Red Hat does not recommended it.
Only use it for testing purposes.
* Specify query strings; for example, `?key1=value1&key2=value2` along with the root URL.
{product-title-short} appends the value of *Issuer* as you entered it to the authorization endpoint.
You can use it to customize your provider's login screen.
For example, you can optimize the Google Workspace login screen to a specific hosted domain by using the link:https://developers.google.com/identity/protocols/oauth2/openid-connect#hd-param[`hd` parameter], or preselect an authentication method in `PingFederate` by using the link:https://docs.pingidentity.com/bundle/pingfederate-93/page/nfr1564003024683.html[`pfidpadapterid` parameter].
====
** *Client ID*: The OIDC Client ID for your configured project.
** *Client Secret*: Enter the client secret provided by your identity provider (IdP). If you are not using a client secret, which is not recommended, select *Do not use Client Secret*.

. Assign a *Minimum access role* for users who access {product-title-short} using the selected identity provider.
+
[TIP]
====
Set the *Minimum access role* to *Admin* while you complete setup. Later, you can return to the *Access Control* page to set up more tailored access rules based on user metadata from your identity provider.
====

. To add access rules for users and groups accessing {product-title-short}, click *Add new rule* in the *Rules* section. For example, to give the *Admin* role to a user called `administrator`, you can use the following key-value pairs to create access rules:
+
|===
| *Key* | *Value*
|Name
|administrator
|Role
|Admin
|===
. Click *Save*.

.Verification
. On the {product-title-short} portal, navigate to *Platform Configuration* -> *Access Control*.
. Select the *Auth providers* tab.
. Select the authentication provider for which you want to verify the configuration.
. Select *Test login* from the *Auth Provider* section header.
The *Test login* page opens in a new browser tab.
. Log in with your credentials.
** If you logged in successfully, {product-title-short} shows the `User ID` and `User Attributes` that the identity provider sent for the credentials that you used to log in to the system.
** If your login attempt failed, {product-title-short} shows a message describing why the identity provider's response could not be processed.
. Close the *Test Login* browser tab.
