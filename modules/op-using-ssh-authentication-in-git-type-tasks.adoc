// This module is included in the following assemblies:
// * secure/authenticating-pipelines-repos-using-secrets.adoc
:_mod-docs-content-type: REFERENCE

[id="op-using-ssh-authentication-in-git-type-tasks_{context}"]
= SSH Git authentication in tasks

You can directly invoke Git commands in the steps of a task and use SSH authentication, but you must complete an additional step.

{pipelines-shortname} provides the SSH files in the `/tekton/home/.ssh` directory and sets the `$HOME` variable to `/tekton/home`. However, Git SSH authentication ignores the `$HOME` variable and uses the home directory specified in the `/etc/passwd` file for the user. Therefore, a step that uses Git command must symlink the `/tekton/home/.ssh` directory to the home directory of the associated user.

For example, if the task runs as the `root` user, the step must include the following command before Git commands:

[source,yaml]
----
apiVersion: tekton.dev/v1
kind: Task
metadata:
  name: example-git-task
spec:
  steps:
    - name: example-git-step
#     ...
      script:
        ln -s $HOME/.ssh /root/.ssh
#     ...
----

However, explicit symlinks are not necessary when you use a pipeline resource of the `git` type or the `git-clone` task available in the Tekton catalog.

As an example of using SSH authentication in `git` type tasks, refer to link:https://github.com/openshift-pipelines/pipelines-examples/blob/main/v1/taskruns/authenticating-git-commands.yaml[authenticating-git-commands.yaml].
