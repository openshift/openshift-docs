//
// Module included in the following assemblies:
//
// * storage/container_storage_interface/persistent-storage-csi-azure.adoc
//

:_mod-docs-content-type: PROCEDURE
[id="persistent-storage-csi-azure-disk-perf-plus-sc_{context}"]
= Creating a storage class to use performance plus enhanced disks

The following procedure explains how to create a storage class to use performance plus enhanced Azure disks.

.Prerequisites

* Access to a Microsoft Azure cluster with cluster-admin privileges.

* Access to an Azure disk with performance plus enabled. 
+
For information about enabling performance plus on disks, see the Microsoft Azure storage documentation.

.Procedure

To create a storage class to use performance plus enhanced disks:

. Create a storage class using the following example YAML file:
+
.Example storage class YAML file
[resource,yaml]
----
apiVersion: storage.k8s.io/v1
kind: StorageClass
metadata:
  name: <azure-disk-performance-plus-sc> <1>
provisioner: disk.csi.azure.com <2>
parameters:
  skuName: Premium_LRS <3>
  cachingMode: ReadOnly
  enablePerformancePlus: "true" <4>
reclaimPolicy: Delete
volumeBindingMode: WaitForFirstConsumer
allowVolumeExpansion: true
----
<1> Name of the storage class.
<2> Specifies the Azure Disk Container Storage Interface (CSI) driver provisioner.
<3> Specifies the Azure disk type SKU. In this example, `Premium_LRS` for Premium SSD Locally Redundant Storage. 
<4> Enables Azure Disk performance plus.

. Create a persistent volume claim (PVC) that uses this storage class by using the following example YAML file:
+
.Example PVC YAML file
[source,yaml]
----
apiVersion: v1
kind: PersistentVolumeClaim
metadata:
  name: <my-azure-pvc> <1>
spec:
  accessModes:
    - ReadWriteOnce
  storageClassName: <azure-disk-performance-plus-sc> <2>
  resources:
    requests:
      storage: 513Gi <3>
----
<1> PVC name.
<2> Reference the performance plus storage class.
<3> Any disk size smaller than 513GiB is automatically rounded up.
