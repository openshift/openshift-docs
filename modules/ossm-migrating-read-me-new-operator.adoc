// Module included in the following assemblies:
//
// * service-mesh-docs-main/about/ossm-migrating-read-me.adoc

//Start of an overall Migrating section.
//Section is most likely to be reworked/restructured with OSSM 2 to OSSM 3 migration guides for GA. Unknown how many migration guides there are at this time (11/11/2024). It would be beneficial to be able to link from differences to the relevent migration guide so that users A) understand the change, esp significant changes like new operator, installing tracing and Kiali separately, gateways, etc.

:_mod-docs-content-type: CONCEPT
[id="ossm-migrating-read-me-new-operator_{context}"]
= New Operator: The {SMProductName} 3 Operator

{SMProductName} 3 is a major update with a feature set closer to the link:https://istio.io/[Istio project]. Whereas {SMProduct} 2 was based on the midstream Maistra project, {SMProduct} 3 is based directly on Istio. This means {SMProduct} 3 is managed using a different, simplified Operator and provides greater support for the latest stable features of Istio.

This alignment with the Istio project along with lessons learned in the first two major releases of {SMProduct} have resulted in the following changes:

[id="ossm-maistra-to-istio_{context}"]
== From Maistra to Istio

{SMProduct} 1 and 2 were based on Istio, and included additional functionality that was maintained as part of the midstream Maistra project, but not part of the upstream Istio project. While this provided extra features to {SMProduct} users, the effort to maintain Maistra meant that {SMProduct} 2 was usually several releases behind Istio, and did not support major features like multi-cluster deployment. Since the release of {SMProduct} 1 and 2, Istio has matured to cover most of the use cases addressed by Maistra.

Basing {SMProduct} 3 directly on Istio ensures that {SMProduct} 3 supports users on the latest stable Istio features while Red{nbsp}Hat contributes directly to the Istio community on behalf of its customers.

[id="ossm-service-mesh-3-operator_{context}"]
== {SMProduct} 3 Operator

{SMProduct} 3 uses an Operator that is maintained upstream as the Sail Operator in the *istio-ecosystem* organization on GitHub. The {SMProduct} 3 Operator is smaller in scope and includes significant changes from the Operator used in {SMProduct} 2:

* The `{istio}` resource replaces the `ServiceMeshControlPlane` resource.
* The `IstioCNI` resource manages the {istio} Container Network Interface (CNI).
* Red{nbsp}Hat OpenShift Observability components are installed and configured separately.

[id="ossm-about-operator-component-versioning_{context}"]
== About Operator and component versioning

All {product-title} Operators use versioning and manage at least one underlying component (operand), which is often versioned independently through a custom resource definition (CRD).

In {SMProduct} 2, the `ServiceMeshControlPlane` resource managed multiple operands, including {istio}, Kiali, and Jaeger. Each component maintained its own version containing the following three levels of versioning:

* The Operator version
* The `ServiceMeshControlPlane` version
* The individual component versions

For example, the {SMProduct} 2.6 Operator managed the 2.6 version of the control plane, which included {istio} 1.20, Kiali 1.73, and other component versions. Each Operator version also supported multiple control plane versions. The {SMProduct} 2.6 Operator supported versions 2.4, 2.5, and 2.6 of the control plane.

{SMProduct} 3 simplifies versioning by limiting Operator management to the {istio} resource. The {istio} resource is responsible only for the {istio} component and does not manage Kiali or other components. So, the {istio} resource specifies only the {istio} component version.

Each {SMProduct} release supports the latest available {istio} version for that Operator version. For example, {SMProduct} 3.0.0 supports {istio} 1.24.0. While the Operator might contain other {istio} versions to support upgrades, product support, including patches for Common Vulnerabilities and Exposures (CVEs), covers only the latest {istio} version in a given Operator release. For each Operator release, update to the most recent {istio} version available.

//Note for later: update "Red{nbsp}Hate OpenShift Observability" with appropriate attribute when that attribute has been added to the Service Mesh stand alone _attributes file.
//Note that as of 11/18/2024, no attributes in OCP main _attributes file use Red{nbsp}Hat. OCP main _attributes are not in line with current style.