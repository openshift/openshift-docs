////
This TASK module included in the following assemblies:
- configuring-kiali.adoc
////

[id="ossm-kiali-configure-grafana_{context}"]
= Configuring Kiali for Grafana

When installing Kiali as part of {ProductName}, the following Grafana configuration has already been performed by the Operator.

* Grafana has been enabled by default.
* Ingress has been enabled by default.
* A ServiceAccount has been added for Grafana.

Kiali can automatically detect the Grafana URL.  However if you have a custom Grafana installation that is not easily auto-detectable by Kiali, you must update the Grafana URL value in the Kiali custom resource.

When properly configured, there is a link to the Grafana dashboard from the following pages in the Kiali console:

* Inbound Metrics and Outbound Metrics tabs on the Workload Details page.
* Inbound Metrics tab on the Services Details page.

.Example Kiali custom resource
[source,yaml]
----
apiVersion: kiali.io/v1alpha1
kind: Kiali
metadata:
  name: kiali
spec:
    external_services:
      grafana:
        url: http://grafana-istio-system.127.0.0.1.nip.io

----

.Procedure
. Log into the OpenShift console as a user with cluster-admin privileges.
. Navigate to Catalog > Installed Operators and select the Kiali operator.
. Click the Kiali tab at the top of the page.
. If you have not yet deployed a Kiali instance:
.. Click the *Create Kiali* button.
.. Edit the YAML file to point to the Grafana URL.
.. Click *Create*.
. If you have already deployed a Kiali instance:
.. Click the instance name.
.. Click the YAML tab.
.. Edit the YAML file to point to the Grafana URL.
.. Click *Save*.
.. Click *Reload*.
