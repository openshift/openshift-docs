// Module included in the following assemblies:
//
// * installing/disconnected_install/installing-mirroring-disconnected-v2.adoc

:_mod-docs-content-type: CONCEPT
[id="oc-mirror-workflows-delete-v2_{context}"]
= Deleting the images from disconnected environment

In v2, a new input type called `DeleteImageSetConfiguration` has been introduced. This is used to configure image deletion, preventing the accidental deletion of required or deployed images by avoiding the use of an `ImageSetConfig`.

The new sub command allows the users to execute the delete workflow with the `DeleteImageSetConfiguration`.

[NOTE]
====
In v2, automatic pruning is no longer performed. In v1, when an item (such as an operator) was removed from the image set configuration, it would be automatically pruned from the container registry. To prevent unintended deletions, v2 introduces a specific file named DeleteImageSetConfiguration. 
====

Using the DeleteImageSetConfiguration below as an example, oc-mirror will remove: 

* All images of {product-title} release 4.13.3.

* The catalog image redhat-operator-index `v4.12`.

* The `aws-load-balancer-operator` v0.0.1 bundle and all its related images.

* The additional images `ubi` and `ubi-minimal` referenced by their corresponding digests.

.Example of `DeleteImageSetConfig`:
[source,yaml]
----
apiVersion: mirror.openshift.io/v2alpha1
kind: DeleteImageSetConfiguration
delete:
  platform:
    channels:
      - name: stable-4.13 
        minVersion: 4.13.3
        maxVersion: 4.13.3
  operators:
    - catalog: registry.redhat.io/redhat/redhat-operator-index:v4.12
      packages:
      - name: aws-load-balancer-operator
         minVersion: 0.0.1
         maxVersion: 0.0.1
  additionalImages: 
    - name: registry.redhat.io/ubi8/ubi@sha256:bce7e9f69fb7d4533447232478fd825811c760288f87a35699f9c8f030f2c1a6
    - name: registry.redhat.io/ubi8/ubi-minimal@sha256:8bedbe742f140108897fb3532068e8316900d9814f399d676ac78b46e740e34e
----
