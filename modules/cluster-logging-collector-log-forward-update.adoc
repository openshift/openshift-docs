// Module included in the following assemblies:
//
// * logging/cluster-logging-external.adoc

// Might not be needed. See https://issues.redhat.com/browse/LOG-654

[id="cluster-logging-collector-log-forward-update_{context}"]
= Updating log forwarding custom resources

After updating to the Log Forwarding API GA, you will need to modify or recreate any existing Log Forwarding CRs that you have.

If you edit your existing CRs, you must make the following modifications:

.Updated Log Forwarding CR
[sourcce,yaml]
----
apiVersion: "logging.openshift.io/v1" <1>
kind: "ClusterLogForwarder" <2>
metadata:
  name: instance
  namespace: openshift-logging
spec:
  outputs:
   - name: elasticsearch
     type: "elasticsearch"
     url: https://elasticsearch.openshift-logging.svc:9200 <3>
  pipelines:
   - name: mylogs
      inputRefs: <4>
        - infrastructure
        - application   
        - audit
     outputRefs:
     - elasticsearch
----

<1> Change the API from `apiVersion: "logging.openshift.io/v1alpha1"` to `apiVersion: "logging.openshift.io/v1"`.
<2> Change the object kind from `kind: "LogForwarding"` to `kind: ClusterLogForwarder`.
<3> Change the output parameter from `spec.outputs.endpoint` to `spec.output.url` and include the URL prefix.
<4> Change the pipelines:
* `spec.pipelines.inputSource` to `spec.pipelines.inputRefs`
* `logs.infra` to `infrastructure`
* `logs.app` to `application`
* `logs.audut` to `audit`
