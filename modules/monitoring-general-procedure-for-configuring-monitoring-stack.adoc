// Module included in the following assemblies:
//
// monitoring/configuring-monitoring-stack.adoc

[id='general-procedure-for-configuring-monitoring-stack-{context}']
= General procedure for configuring monitoring stack

You can configure the Prometheus Cluster Monitoring stack using ConfigMaps. ConfigMaps configure the cluster monitoring operator, which in turn configures components of the stack. The following procedure shows how to configure the stack.

.Prerequisites

* Make sure you have the `cluster-monitoring-config` ConfigMap object with the `data/config.yaml` section. See "Creating cluster monitoring ConfigMap" for instructions.

.Procedure

. Start editing the `cluster-monitoring-config` ConfigMap:
+
----
oc -n openshift-monitoring edit configmap cluster-monitoring-config
----

. Put your configuration under `data/config.yaml` as key-value pair *_component - configuration for the component_*:
+
[subs="quotes"]
  apiVersion: v1
  kind: ConfigMap
  metadata:
   name: *cluster-monitoring-config*
   namespace: *openshift-monitoring*
  data:
   config.yaml: |
     *_component_*:
       *_configuration for the component_*
+
Substitute *_component_* and *_configuration for the component_* accordingly.
+
For example, create this ConfigMap to configure a persistent volume claim (PVC) for Prometheus:
+
[subs="quotes"]
  apiVersion: v1
  kind: ConfigMap
  metadata:
   name: cluster-monitoring-config
   namespace: openshift-monitoring
  data:
   config.yaml: |
     *prometheusK8s*:
       *volumeClaimTemplate:
        spec:
          resources:
            requests:
              storage: 40Gi*
+
Here, *prometheusK8s* defines the Prometheus component and the following lines define its configuration.

// FIXME perhaps link to the document about ConfigMaps?
// .Additional resources

// * See https://docs.openshift.com/enterprise/3.2/dev_guide/configmaps.html
