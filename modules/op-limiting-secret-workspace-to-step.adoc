// This module is included in the following assemblies:
// * secure/authenticating-pipelines-and-tasks-using-secrets.adoc
:_mod-docs-content-type: PROCEDURE
[id="op-limiting-secret-workspace-to-step_{context}"]
= Limiting a secret to particular steps using workspaces

[role="_abstract"]
When you provide authentication secrets by using workspaces and define the workspace in a task, by default the workspace is available to all steps in the task.

To limit a secret to specific steps, define the workspace both in the task specification and in the step specification.

.Procedure

* Add the `workspaces:` definition under both the task specification and the step specification, as in the following example:
+
.Example task definition where only one step can access the credentials workspace
[source,yaml,subs="attributes+"]
----
apiVersion: tekton.dev/v1beta1
kind: Task
metadata:
  name: git-clone-build
spec:
  workspaces:
    - name: ssh-directory
      description: |
        A .ssh directory with private key, known_hosts, config, etc.
# ...
  steps:
    - name: clone
      workspaces:
        - name: ssh-directory
# ...
    - name: build
# ...
----
+
`spec.workspaces`:: The definition of the `ssh-directory` workspace in the task specification.
`spec.steps.workspaces`:: The definition of the `ssh-directory` workspace in the step specification. The authentication information is available to this step as the `$(workspaces.ssh-directory.path)` directory.
`spec.steps.build`:: As this step does not include a definition of the `ssh-directory` workspace, the authentication information is not available to this step.