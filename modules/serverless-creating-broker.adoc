// Module included in the following assemblies:
//
// * serverless/knative_eventing/serverless-using-brokers.adoc

[id="serverless-creating-broker_{context}"]
= Creating a broker manually

To create a broker, you must create a service account for each namespace, and give that service account the required RBAC permissions.

.Prerequisites
* Knative Eventing is installed on your cluster, which includes the required cluster role.

.Procedure

. Create the `ServiceAccount` objects.
.. Create the `eventing-broker-ingress` object:
+
[source,terminal]
----
$ oc -n <namespace> create serviceaccount eventing-broker-ingress
----
.. Create the `eventing-broker-filter` object:
+
[source,terminal]
----
$ oc -n <namespace> create serviceaccount eventing-broker-filter
----
. Give RBAC permissions to the `eventing-broker-ingress` and `eventing-broker-filter` objects that you have created:
+
[source,terminal]
----
$ oc -n default create rolebinding eventing-broker-ingress \
  --clusterrole=eventing-broker-ingress \
  --serviceaccount=default:eventing-broker-ingress
----
+
[source,terminal]
----
$ oc -n default create rolebinding eventing-broker-filter \
  --clusterrole=eventing-broker-filter \
  --serviceaccount=default:eventing-broker-filter
----
. Create a broker YAML file:
+
[source,yaml]
----
apiVersion: eventing.knative.dev/v1beta1
kind: Broker
metadata:
  namespace: default
  name: default <1>
----
<1> This example uses the name `default`, but you can replace this with any other valid name.
. Apply the broker YAML file:
+
[source,terminal]
----
$ oc apply -f <filename>
----
