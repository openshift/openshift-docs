// Module included in the following assemblies:
//
// * operating/manage-compliance/scheduling-compliance-scans-and-assessing-profile-compliance.adoc

:_mod-docs-content-type: PROCEDURE
[id="customizing-and-automating-your-compliance-scans_{context}"]
= Customizing and automating your compliance scans

By creating a compliance scan schedule, you can customize and automate your compliance scans to align with your operational requirements.

[NOTE]
====
You can only have one schedule that scans the same profile on the same cluster. This means that you cannot create multiple scan schedules for the same profile on a single cluster.
====

.Prerequisites

* You have installed the Compliance Operator version 1.6.0 or later.
+
For more information about how to install the Compliance Operator, see "Using the Compliance Operator with {product-title}".
+ 
[NOTE]
====
** Currently, the compliance feature and the Compliance Operator evaluate only infrastructure and platform compliance.

** To use the compliance feature, you must run the Compliance Operator on a {osp} cluster.
====

.Procedure

. In the {product-title-short} portal, click *Compliance -> OpenShift Schedules*.
. Click *Create scan schedule*.
. In the *Create scan schedule* page, provide the following information:

** *Name*: Enter a name to identify different compliance scans.

** *Description*: Specify the reason for each compliance scan.

** *Schedule*: Adjust the scan schedule to fit your required schedule:

*** *Frequency*: From the drop-down list, select how often you want to run the scan. If you do not select a frequency, `Daily` is selected automatically.
+
The following values are associated with how often you want to perform the scan:

**** `Daily`
**** `Weekly`
**** `Monthly`

*** *On day(s)*: From the list, select one or more days of the week on which you want to perform the scan. 
+
The following values are associated with the days of the week on which you want to perform the scan:

**** `Monday`
**** `Tuesday` 
**** `Wednesday`
**** `Thursday`
**** `Friday`
**** `Saturday`
**** `Sunday`
**** `The first of the month`
**** `The middle of the month`
+
[NOTE]
====
These values are only applicable if you specify the frequency of scan as `Weekly` or `Monthly`.
====

*** *Time*: Start to type the time in `hh:mm` at which you want to run the scan. From the list that is displayed, select a time.

. Click *Next*.
. Select one or more healthy clusters that you want to include in the scan.
. Click *Next*.
. Select one or more profiles that you want to include in the scan.
. Click *Next*.
. Optional: To configure email delivery destinations for manually triggered reports, perform the following steps:
+
[NOTE]
====
You can add one or more delivery destinations.
====

.. Expand *Add delivery destination*.
.. In the *Delivery destination* page, provide the following information:
*** *Email notifier*: Select an email notifier from the drop-down list.
+
Optional: To configure the setting for a new email notifier integration, perform the following steps:

... From *Select a notifier* drop-down list, click *Create email notifier*.

... In the *Create email notifier* page, provide the following information:
**** *Integration name*: Enter a unique name for the email notifier. This name helps you identify and manage this specific email notifier configuration.
**** *Email server*: Specify the address of the SMTP server that you want to use to send the emails.
**** *Username*: Enter the username that is required for authentication with the SMTP server. This is often the email address used for sending the emails.
**** *Password*: Enter the password associated with the SMTP username. This password is used for authentication with the SMTP server.
**** *From*: This address usually represents the sender of the emails and is visible to the recipients. This is optional.
**** *Sender*: Enter the name of the sender, which is displayed together with the _From_ email address. This name helps recipients identify who sent the email.
**** *Default recipient*: Enter the default email address that should receive the notifications if no specific recipient is specified. This ensures that there is always a recipient for the emails.
**** *Annotation key for recipient*: Specify the annotation key to define a recipient that you want to notify about the policy violations related to a specific deployment or namespace. This is optional.
**** Optional: Select the *Enable unauthenticated SMTP* checkbox, if your SMTP server does not require authentication. This is not recommended due to security reasons.
**** Optional: Select the *Disable TLS certificate validation (insecure)* checkbox, if you want to disable TLS certificate validation. This is not recommended due to security reasons.
**** Optional: In the *Use STARTTLS (requires TLS to be disabled)* field, select the type of STARTTLS for securing the connection to the SMTP server from the drop-down list. 
+
[IMPORTANT]
====
To use this option, you must disable TLS certificate validation.
====
+
The following values are associated with the type of STARTTLS for securing the connection to the SMTP server:

***** `Disabled`
+
Data is not encrypted.
***** `Plain`
+
Encodes username and password in base64.
***** `Login`
+
Sends username and password as separate base64-encoded strings for added security.
... Click *Save integration*.
 
*** *Distribution list*: Enter one or more comma-separated email addresses of the recipients who should receive the report.

*** *Email template*: The default template is automatically applied.
+
Optional: To customize the email subject and body as needed, perform the following steps:

.... Click the pencil icon.
.... In the *Edit email template* page, provide the following information:
***** *Email subject*: Enter the desired subject line for the email. This subject is displayed in the recipient's inbox and should clearly indicate the purpose of the email.
***** *Email body*: Compose the text of the email. This is the main content of the email and can include text, placeholders for dynamic content and any formatting necessary to get your message across effectively.
.... Click *Apply*.

. Click *Next*.
. Review your scan configuration, and then click *Save*.

.Verification

. In the {product-title-short} portal, click *Compliance -> OpenShift Schedules*.
. Select the compliance scan that you have created.
. In the *Clusters* section, verify that the operator status is healthy.
. Optional: To edit the scan schedule, perform the following steps:
.. From the *Actions* drop-down list, which is in the upper right of the page, select *Edit scan schedule*.
.. Make your changes.
.. Click *Save*.
. Optional: To manually send a scan report:
+
[NOTE]
====
* You can only send a scan report manually if you have configured an email delivery destination.
* Compliance reporting is only available for clusters running Compliance Operator version 1.6.0 or later.
====
** From the *Actions* drop-down list, which is in the upper right of the page, select *Send report*.
+
You receive a confirmation that you have requested to send a report.
. Optional: To download a scan report, perform the following steps:
+
[NOTE]
====
Compliance reporting is only available for clusters running Compliance Operator version 1.6.0 or later.
====
.. From the *Actions* drop-down list, which is in the upper right of the page, select *Generate download*.
+
You receive a confirmation that the report generation has started.
.. Click the *All report jobs* tab.
.. Optional: Set *View only my jobs* to on.
.. Locate the report job that you created.
.. Wait until the download is complete, and then click *Ready for download*.
.. Optional: To delete the report job, click the overflow menu {kebab} and then select *Delete download*.