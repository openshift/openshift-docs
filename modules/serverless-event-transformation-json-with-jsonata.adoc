// Module included in the following assemblies:
//
// serverless/eventing/serverless-event-transformation.adoc

:_mod-docs-content-type: CONCEPT
[id="serverless-event-transformation-json-with-jsonata_{context}"]
= Event transformations for JSON with JSONata

JSONata is a lightweight query and transformation language for JSON data. Within Knative EventTransform, JSONata expressions provide an important way to reshape events. You can use them to extract values from event data, promote specific fields to CloudEvent attributes, restructure entire payloads, add computed values, and even apply conditional logic to control how events are transformed.

You can specify a JSONata expression in the `spec.jsonata.expression` field of the `EventTransform` resource. The expression maps the incoming CloudEvent into a new CloudEvent as shown in the following example: 

.Example of simple event transformation using JSONata
[source,yaml]
----
apiVersion: eventing.knative.dev/v1alpha1
kind: EventTransform
metadata:
  name: simple-transform
spec:
  jsonata:
    expression: |
      {
        "specversion": "1.0",
        "id": id,
        "time": time,
        "type": "transformed.type",
        "source": "transform.simple",
        "data": data
      }
----

[id="serverless-event-transformation-cloudevent-structure-jsonata_{context}"]
== CloudEvent structure in JSONata

When you use JSONata in an `EventTransform`, the input to the expression is the full CloudEvent object, which includes all standard attributes and the event payload.

The output of your JSONata expression must produce a valid CloudEvent. At a minimum, the following fields are required to ensure compliance with the CloudEvents specification:

[cols="1,1,1",options="header"]
|====

|Field
|Requirement
|Description

|`specversion`
|Must be `1.0`
|Identifies the CloudEvents specification version.

|`id`
|Unique string
|Serves as the unique identifier for the event.

|`type`
|Required
|Indicates the event type, such as `com.example.object.created`.

|`source`
|Required
|Identifies the context in which the event occurred.

|`data`
|Required
|Contains the event payload being delivered.

|====

By explicitly constructing these fields in your JSONata expression, you ensure that the transformed event is valid while still applying reshaping, enrichment, or conditional logic as needed.