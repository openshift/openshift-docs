:_newdoc-version: 2.18.4
:_template-generated: 2025-10-19
:_mod-docs-content-type: CONCEPT

[id="example-clusterlogforwarder-configuration-for-cross-account-forwarding_{context}"]
= Example ClusterLogForwarder configuration for cross-account forwarding

The following example illustrates using cross-account `AssumeRole` field configuration when forwarding logs to CloudWatch.

.`ClusterLogForwarder` resource with `AssumeRole` authentication
[source,yaml]
----
apiVersion: observability.openshift.io/v1
kind: ClusterLogForwarder
metadata:
  name: cross-account-example
  namespace: openshift-logging
spec:
  serviceAccount:
    name: my-sa
  outputs:
    - name: cw-cross-account
      type: cloudwatch
      cloudwatch:
        groupName: my-logs-{.log_type||"unknown"}
        region: us-east-1
        authentication:
          type: iamRole
          iamRole:
            roleARN:
              secretName: initial-role-secret
              key: role_arn
            token:
              from: serviceAccount
          # Cross-account assume role configuration
          assumeRole:
            roleARN:
              secretName: cross-account-secret
              key: assume_role_arn
            externalID: "my-unique-id-1234"
  pipelines:
    - name: cross-account-logs
      inputRefs:
        - application
      outputRefs:
        - cw-cross-account
----
* `authentication.assumeRole.roleARN`: Reference to a secret containing the ARN of the role to assume in the target account.
* `authentication.assumeRole.externalID`: A string containing the external ID to enforce for assuming the role. This can provide additional security by ensuring only entities with knowledge of the external ID can assume the role.

Session names for assumed role sessions are automatically generated by the {clo} to provide meaningful identification in AWS CloudTrail logs for auditing purposes. The Operator generates session names using cluster metadata as follows:

* Primary format: `{clusterId}-{clfName}-{outputName}`.
* Fallback format (if cluster metadata unavailable): `output-{outputName}`.
* Always truncated to 64 characters maximum (AWS requirement).
* Uses first 8 characters of cluster ID for uniqueness.
