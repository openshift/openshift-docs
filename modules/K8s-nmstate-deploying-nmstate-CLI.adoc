// This is included in the following assemblies:
//
// networking/k8s_nmstate/k8s-nmstate-about-the-kubernetes-nmstate-operator.adoc

:_content-type: PROCEDURE
[id="installing-the-kubernetes-nmstate-operator_CLI_{context}"]
= Installing the Kubernetes NMState Operator using the CLI
You can install the Kubernetes NMState cluster by using the {product-title} CLI (oc).

testing this to add to new branch.
. Create the namespace for the nmstate operator:

[source,terminal]
----
$ cat 1_nmstate_ns.yaml
----

.Example output
[source,yaml]
----
apiVersion: v1
kind: Namespace
metadata:
  labels:
    kubernetes.io/metadata.name: openshift-nmstate
    name: openshift-nmstate
  name: openshift-nmstate
spec:
  finalizers:
  - kubernetes
----

.. Add the nmstate operator:

[source, terminal]
----
oc create -f 1_nmstate_ns.yaml
----

.Example output
[source,terminal]
----
namespace/openshift-nmstate created
----

. Create the OperatorGroup:
[source, terminal]
----
$ cat 2_nmstate_og.yaml
----
.Example output
[source,yaml]
----
  apiVersion: operators.coreos.com/v1
  kind: OperatorGroup
  metadata:
    annotations:
      olm.providedAPIs: NMState.v1beta1.nmstate.io
    generateName: openshift-nmstate-
    name: openshift-nmstate-tn6k8
    namespace: openshift-nmstate
  spec:
    targetNamespaces:
    - openshift-nmstate

----
.. Add the OperatorGroup:
[source, terminal]
----
oc create -f 2_nmstate_og.yaml
----

.Example output
[source,terminal]
----
operatorgroup.operators.coreos.com/openshift-nmstate-tn6k8 created
----

. Create the subscription:
[source,terminal]
----
cat 3_nmstate_subscription.yaml
----
.Example output
[source,yaml]
----
apiVersion: operators.coreos.com/v1alpha1
kind: Subscription
metadata:
  labels:
    operators.coreos.com/kubernetes-nmstate-operator.openshift-nmstate: ""
  name: kubernetes-nmstate-operator
  namespace: openshift-nmstate
spec:
  channel: stable
  installPlanApproval: Automatic
  name: kubernetes-nmstate-operator
  source: redhat-operators
  sourceNamespace: openshift-marketplace
----

.. Add the subscription:
[source, terminal]
----
oc create -f 3_nmstate_subscription.yaml
----
.Example output
[source,terminal]
----
operatorgroup.operators.coreos.com/openshift-nmstate-operator created
----

. Create instance of the nmstate operator:
[source,terminal]
----
cat 3_nmstate_instance.yaml
----
.Example output
[source,yaml]
----
  apiVersion: nmstate.io/v1beta1
  kind: NMState
  metadata:
    name: nmstate
  spec:
    nodeSelector:
      beta.kubernetes.io/arch: amd64
----
.... Add the nmstate instance:
[source, terminal]
----
oc create -f 4_nmstate_instance.yaml
----
.Example output
[source,terminal]
----
nmstate.nmstate.io/nmstate created
----
