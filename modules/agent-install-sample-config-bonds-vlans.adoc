// Module included in the following assemblies:
//
// * installing/installing-with-agent-based-installer/preparing-to-install-with-agent-based-installer.adoc

:_mod-docs-content-type: REFERENCE
[id="agent-install-sample-config-bonds-vlans_{context}"]
= Example: Bonds and VLAN interface node network configuration

The following `agent-config.yaml` file is an example of a manifest for bond and VLAN interfaces.

[source,yaml]
----
  apiVersion: v1alpha1
  kind: AgentConfig
  rendezvousIP: 10.10.10.14
  hosts:
    - hostname: master0
      role: master
      interfaces:
       - name: enp0s4
         macAddress: 00:21:50:90:c0:10
       - name: enp0s5
         macAddress: 00:21:50:90:c0:20
      networkConfig:
        interfaces:
          - name: <vlan_interface_name>
            type: vlan
            state: up
            vlan:
              base-iface: bond0
              id: 300
            ipv4:
              enabled: true
              address:
                - ip: 10.10.10.14
                  prefix-length: 24
              dhcp: false
          - name: <bond_interface_name>
            type: bond
            state: up
            mac-address: <mac_address>
            ipv4:
              enabled: false
            ipv6:
              enabled: false
            link-aggregation:
              mode: <bond_mode>
              options:
                miimon: <mii_monitoring_frequency>
              port:
               - enp0s4
               - enp0s5
        dns-resolver:
          config:
            server:
              - 10.10.10.11
              - 10.10.10.12
        routes:
          config:
            - destination: 0.0.0.0/0
              next-hop-address: <gateway>
              next-hop-interface: <next_hop_interface>
              table-id: 254
----
where:

<vlan_interface_name>:: Specifies the name of the VLAN interface.
<bond_interface_name>:: Specifies the name of the bond interface.
<mac_address>:: Specifies the MAC address of the interface.
<bond_mode>:: Specifies the bonding mode.
<mii_monitoring_frequency>:: Specifies the MII link monitoring frequency in milliseconds. This example inspects the bond link every 150 milliseconds.
<gateway>:: Specifies the next hop address for the node traffic. This must be in the same subnet as the IP address set for the specified interface.
<next_hop_interface>:: Specifies the next hop interface for the node traffic.
