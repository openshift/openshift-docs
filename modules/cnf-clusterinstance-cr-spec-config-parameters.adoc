// Module included in the following assemblies:
//
// * edge_computing/installing_with_siteconfig_operator/cnf-understanding-siteconfig-operator.adoc

:_mod-docs-content-type: REFERENCE
[id="cnf-clusterinstance-config-reference_{context}"]
= ClusterInstance CR configuration parameters

You can specify the installation configurations by using following fields in the `ClusterInstance` CR:

.ClusterInstance CR spec configuration parameters
[cols="3", options="header"]
|====
|Field
|Required
|Description

|`additionalNTPSources`
|No
a|Specify the NTP sources that needs to be added to all cluster hosts.
They are added to any NTP sources that were configured through other means.

|`baseDomain`
|Yes
|Specify the base domain used for the deployed cluster.

|`caBundleRef`
|No
|Reference the `ConfigMap` object that contains the new bundle of trusted certificates for the host. The `tls-ca-bundle.pem` entry in the `ConfigMap` object is written to `/etc/pki/ca-trust/extracted/pem/tls-ca-bundle.pem`.

|`clusterLabels`
|No
a|Configure cluster labels to correspond to the binding rules in the `PolicyGenerator` or `PolicyGenTemplate` CRs that you define.
`PolicyGenerator` CRs use the `policyDefaults.placement.labelSelector` field.
`PolicyGenTemplate` CRs use the `bindingRules` field.

|`clusterName`
|Yes
|Specify name of the cluster.

|`clusterNetwork`
|No
|Specify the list of the IP address pools for pods.

|`clusterType`
|No
a|Specify the cluster type.
The following values are supported:

`SNO`:: {sno}
`HighlyAvailable`:: Multi-node OpenShift
//check the official name for MNO

|`cpuPartitioningMode`
|No
a|Determine clusters to be set up for CPU workload partitioning at install time.
Configure workload partitioning by setting the value for `cpuPartitioningMode` to `AllNodes`.
To complete the configuration, specify the `isolated` and `reserved` CPUs in the `PerformanceProfile` CR.
The default value is `None`.

|`diskEncryption`
|No
|Enable or disable disk encryption for cluster 

|`extraAnnotations`
|No
|Specify additional cluster-level annotations to be applied to the rendered templates.

|`extraManifestsRefs`
|No
|Specify the list of the `ConfigMap` object references that contain additional manifests to be applied to the cluster.

|`holdInstallation`
|No
a|Set to `true` to prevent installation when using the Assisted Installer.
You can complete the inspection and validation steps, but after the `RequirementsMet` condition becomes `true`, the installation does not begin until the `holdInstallation` field is set to `false`.

|`ignitionConfigOverride`
|No
|Specify the user overrides for the initial Ignition configuration.

|`installConfigOverrides`
|No
|Define install configuration parameters.

|`machineNetwork`
|No
|Specify the list of the IP address pools for machines.

|`networkType`
|No
|Specify the Container Network Interface (CNI) plugin to install. The default value is `OpenShiftSDN` for IPv4, and `OVNKubernetes` for IPv6 or {sno} clusters.

|`proxy`
|No
|Define the proxy settings used for the install configuration of the cluster.

|`pullSecretRef`
|Yes
a|Configure the `pull-secret` CR for pulling images.
When creating the `pull-secret` CR, use the same namespace as the `ClusterInstance` CR that provisions the host.
//is it a CR? Isn't it an object where the kind is Secret?

|`serviceNetwork`
|No
|Specify the list of the IP address pools for services.

|`sshPublicKey`
|No
a|Specify the public Secure Shell (SSH) key to provide access to instances.
This key is added to the host to allow SSH access.

|`suppressedManifests`
|No
|Specify a list of cluster-level manifests to exclude from the template rendering process.

|`nodes`
|Yes
|Specify the configuration parameters for each node.

|`templateRefs`
|Yes
a|Specify the list of the references to cluster-level templates.
A cluster-level template consists of a `ConfigMap` object, in which the keys of the data field represent the kind of the installation manifests.
Cluster-level templates are instantiated once per cluster in the `ClusterInstance` CR.
|====

.ClusterInstance CR spec.nodes configuration parameters
[cols="3", options="header"]
|====

|Field
|Required
|Description

|`automatedCleaningMode`
|No
a|Set the value to `metadata` to enable the removal of the disk's partitioning table only, without fully wiping the disk.
The default value is `disabled`.

|`bmcAddress`
|Yes
a|BMC address that you use to access the host.
Applies to all cluster types.
For more information about BMC addressing, see the "Additional resources" section.
[NOTE]
====
In far edge Telco use cases, only virtual media is supported for use with {ztp}.
====

|`bmcCredentialsName`
|Yes
a|Configure the `bmh-secret` CR that you separately create with the host BMC credentials.
When creating the `bmh-secret` CR, use the same namespace as the `ClusterInstance` CR that provisions the host.

|`bootMACAddress`
|Yes
a|Specify the MAC address that PXE boots.
It is required for `libvirt` VMs driven by virtual BMC.

|`bootMode`
|No
a|Set the boot mode for the host to `UEFI`.
The default value is `UEFI`.
Use `UEFISecureBoot` to enable secure boot on the host.
The following values are supported:

* `UEFI`
* `UEFISecureBoot`
* `legacy`

|`extraAnnotations`
|No
|Specify additional node-level annotations to be applied to the rendered templates.

|`hostName`
|Yes
|Define the host name.

|`installerArgs`
|No
|Specify the user overrides for the host's CoreOS installer arguments.

|`ignitionConfigOverride`
|No
a|Specify the user overrides for the initial Ignition configuration.
Use this field to assign partitions for persistent storage.
Adjust disk ID and size to the specific hardware.

|`ironicInspect`
|No
|Specify if automatic introspection runs during registration of the bare metal host.

|`nodeLabels`
|No
a|Specify custom roles for your nodes in your managed clusters.
These are additional roles are not used by any {product-title} components, only by the user.
When you add a custom role, it can be associated with a custom machine config pool that references a specific configuration for that role.
Adding custom labels or roles during installation makes the deployment process more effective and prevents the need for additional reboots after the installation is complete.

|`nodeNetwork`
|No
|Configure the network settings for the node.

|`role`
|No
|Configure the role of the node, such as `master` or `worker`.

|`rootDeviceHints`
|No
a|Specify the device for deployment.
Identifiers that are stable across reboots are recommended.
For example, `wwn: <disk_wwn>` or `deviceName: /dev/disk/by-path/<device_path>`. `<by-path>` values are preferred.
For a detailed list of stable identifiers, see the "About root device hints" section.
You can also specify the name, model, size, or vendor of the device.

|`suppressedManifests`
|No
|Specify a list of node-level manifests to exclude from the template rendering process.

|`templateRefs`
|Yes
|Specify the list of the references to node-level templates.
A node-level template consists of a `ConfigMap` object, in which the keys of the data field represent the kind of the installation manifests.
Node-level templates are instantiated once for each node in the `ClusterInstance` CR.
|====
