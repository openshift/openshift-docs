// Module included in the following assemblies:
//
// * upgrade/upgrade-from-44.adoc
:_mod-docs-content-type: PROCEDURE
[id="upgrade-scanner_{context}"]
= Upgrading Scanner

You can update Scanner to the latest version by using the `roxctl` CLI.

.Prerequisites
* If you deploy images from a private image registry, you must first push the new image into your private registry, then edit the commands in the following section to use the name of your private image registry.

.Procedure
. If you have created custom scanner configurations, you must apply those changes before updating the scanner configuration file.
.. Generate Scanner using the following `roxctl` command:
+
[source,terminal]
----
$ roxctl -e "$ROX_CENTRAL_ADDRESS" scanner generate
----
.. Apply the TLS secrets YAML file:
* If you use {ocp}, enter the following command:
+
[source,terminal]
----
$ oc apply -f scanner-bundle/scanner/02-scanner-03-tls-secret.yaml
----
* If you use Kubernetes, enter the following command:
+
[source,terminal]
----
$ kubectl apply -f scanner-bundle/scanner/02-scanner-03-tls-secret.yaml
----
.. Apply the Scanner configuration YAML file:
* If you use {ocp}, enter the following command:
+
[source,terminal]
----
$ oc apply -f scanner-bundle/scanner/02-scanner-04-scanner-config.yaml
----
* If you use Kubernetes, enter the following command:
+
[source,terminal]
----
$ kubectl apply -f scanner-bundle/scanner/02-scanner-04-scanner-config.yaml
----
. Update the Scanner image:
* If you use {ocp}, enter the following command:
+
[source,terminal,subs=attributes+]
----
$ oc -n stackrox set image deploy/scanner scanner=registry.redhat.io/advanced-cluster-security/rhacs-scanner-rhel8:{rhacs-version}
----
* If you use Kubernetes, enter the following command:
+
[source,terminal,subs=attributes+]
----
$ kubectl -n stackrox set image deploy/scanner scanner=registry.redhat.io/advanced-cluster-security/rhacs-scanner-rhel8:{rhacs-version}
----

. Update the Scanner database image:
* If you use {ocp}, enter the following command:
+
[source,terminal,subs=attributes+]
----
$ oc -n stackrox set image deploy/scanner-db db=registry.redhat.io/advanced-cluster-security/rhacs-scanner-db-rhel8:{rhacs-version} init-db=registry.redhat.io/advanced-cluster-security/rhacs-scanner-db-rhel8:{rhacs-version}
----
* If you use Kubernetes, enter the following command:
+
[source,terminal,subs=attributes+]
----
$ kubectl -n stackrox set image deploy/scanner-db db=registry.redhat.io/advanced-cluster-security/rhacs-scanner-db-rhel8:{rhacs-version} init-db=registry.redhat.io/advanced-cluster-security/rhacs-scanner-db-rhel8:{rhacs-version}
----

.Verification

* Check that the new pods have deployed successfully:

** If you use {ocp}, enter the following command:
+
[source,terminal]
----
$ oc get pod -n stackrox --watch
----

** If you use Kubernetes, enter the following command:
+
[source,terminal]
----
$ kubectl get pod -n stackrox --watch
----
