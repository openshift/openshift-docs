// Module included in the following assemblies:
//
// * installing/installing_rhv/installing-rhv-custom.adoc
// * installing/installing_rhv/installing-rhv-default.adoc

[id="installing-rhv-verifying-the-rhv-environment_{context}"]
= Verifying the requirements for the {rh-virtualization} environment

Verify that the {rh-virtualization} environment meets the requirements to install and run an {product-title} cluster. Not meeting these requirements can cause failures.

[IMPORTANT]
====
These requirements are based on the resource allocations in the virtual machine template the installation program uses to create control plane and compute machines. These resources include vCPUs, memory, and storage. If you change the virtual machine template or increase the number of {product-title} machines, adjust these requirements.
====

.Procedure

. Check the {rh-virtualization} version.
.. In the {rh-virtualization} Administration Portal, click the *?* help icon in the upper-right corner and select *About*.
.. In the window that opens, confirm that the **{rh-virtualization} Software Version** is **4.3.9** or higher.

. Inspect the data center, cluster, and storage.
.. In the {rh-virtualization} Administration Portal, click *Compute* -> *Data Centers*.
.. Confirm the data center where you plan to install {product-title} displays a green up arrow, meaning it is "Up".
.. Click the name of that data center.
.. In the data center details, on the *Storage* tab, confirm the storage domain where you plan to install {product-title} is *Active*.
.. Record the *Domain Name* for use later on.
.. Confirm *Free Space* has at least 230 GiB.
.. Confirm that the storage domain meets link:https://access.redhat.com/solutions/4770281[these etcd backend performance requirements], which can be link:https://access.redhat.com/solutions/3780861[measured using the fio performance benchmarking tool].
.. In the data center details, click the *Clusters* tab.
.. Find the {rh-virtualization} cluster where you plan to install {product-title}. Record the cluster name for use later on.

. Inspect the {rh-virtualization} host resources.
.. In the {rh-virtualization} Administration Portal, click *Compute > Clusters*.
.. Click the cluster where you plan to install {product-title}.
.. In the cluster details, click the *Hosts* tab.
.. Inspect the hosts and confirm they have a combined total of at least 28 *Logical CPU Cores* available _exclusively_ for the {product-title} cluster.
.. Record the number of available *Logical CPU Cores* for use later on.
.. Confirm that these CPU cores are distributed so each of the seven virtual machines created during installation can have four cores.
.. Confirm that, all together, the hosts have 112 GiB of *Max free Memory for scheduling new VMs* distributed to meet the requirements for each of the following {product-title} machines:
** 16 GiB required for the bootstrap machine
** 16 GiB required for each of the three control plane machines
** 16 GiB for each of the three compute machines
.. Record the amount of *Max free Memory for scheduling new VMs* for use later on.
+
. Verify that the virtual network for installing {product-title} has access to the {rh-virtualization} Manager’s REST API. From a virtual machine on this network, use a curl command with the {rh-virtualization} Manager’s REST API. Use the following format:
+
----
curl -k -u <username>@<profile>:<password> \ <1>
https://<engine-fqdn>/ovirt-engine/api <2>
----
<1> For `<username>`, specify the user name of an {rh-virtualization} administrator. For `<profile>`, specify the login profile, which you can get by going to the {rh-virtualization} Administration Portal login page and reviewing the *Profile* dropdown list. For `<password>`, specify the admin password.
<2> For `<engine-fqdn>`, specify the fully qualified domain name of the {rh-virtualization} environment.
+
For example:
+
----
$ curl -k -u rhvadmin@internal:pw123 \
https://rhv-env.virtlab.example.com/ovirt-engine/api
----
