// Module included in the following assemblies:
//
// * operators/olm_v1/olmv1-installing-an-operator-from-a-catalog.adoc

:_content-type: PROCEDURE

[id="olmv1-installing-an-operator_{context}"]
= Installing an Operator

You can install an Operator from a catalog by creating an Operator custom resource (CR) and applying it to the cluster.

.Prerequisite

* You have added a catalog to your cluster.
* You have inspected the details of an Operator to find what version you want to install.

.Procedure

. Create an Operator CR, similar to the following example:
+
.Example `test-operator.yaml` CR
[source,yaml]
----
apiVersion: operators.operatorframework.io/v1alpha1
kind: Operator
metadata:
  name: quay-example
spec:
  packageName: quay-operator
  channel: stable-3.8
  version: 3.8.12
----

. Run the following command to apply the Operator CR to the cluster:
+
[source,terminal]
----
$ oc apply -f test-operator.yaml
----
+
.Example output
[source,text]
----
operator.operators.operatorframework.io/quay-example created
----

.Verification

. Run the following command to view the Operator's CR in the YAML format:
+
[source,terminal]
----
$ oc get operator.operators.operatorframework.io/quay-example -o yaml
----
+
.Example output
[source,text]
----
apiVersion: operators.operatorframework.io/v1alpha1
kind: Operator
metadata:
  annotations:
    kubectl.kubernetes.io/last-applied-configuration: |
      {"apiVersion":"operators.operatorframework.io/v1alpha1","kind":"Operator","metadata":{"annotations":{},"name":"quay-example"},"spec":{"channel":"stable-3.8","packageName":"quay-operator","version":"3.8.12"}}
  creationTimestamp: "2023-10-06T01:50:25Z"
  generation: 1
  name: quay-example
  resourceVersion: "65292"
  uid: 7e782643-71c2-4355-80ff-e8cc61bd44a1
spec:
  channel: stable-3.8
  packageName: quay-operator
  version: 3.8.12
status:
  conditions:
  - lastTransitionTime: "2023-10-06T01:50:25Z"
    message: resolved to "registry.redhat.io/quay/quay-operator-bundle@sha256:bf26c7679ea1f7b47d2b362642a9234cddb9e366a89708a4ffcbaf4475788dc7"
    observedGeneration: 1
    reason: Success
    status: "True"
    type: Resolved
  - lastTransitionTime: "2023-10-06T01:50:38Z"
    message: installed from "registry.redhat.io/quay/quay-operator-bundle@sha256:bf26c7679ea1f7b47d2b362642a9234cddb9e366a89708a4ffcbaf4475788dc7"
    observedGeneration: 1
    reason: Success
    status: "True"
    type: Installed
  installedBundleResource: registry.redhat.io/quay/quay-operator-bundle@sha256:bf26c7679ea1f7b47d2b362642a9234cddb9e366a89708a4ffcbaf4475788dc7
  resolvedBundleResource: registry.redhat.io/quay/quay-operator-bundle@sha256:bf26c7679ea1f7b47d2b362642a9234cddb9e366a89708a4ffcbaf4475788dc7
----
. Run the following command to get information about your Operator's bundle:
+
[source,terminal]
----
$ oc get bundle
----
+
.Example output
[source,text]
----
NAME                    TYPE    PHASE      AGE
quay-example-b4v8v8     image   Unpacked   78s
----

. Run the following command to get information about your Operator's bundle deployment:
+
[source,terminal]
----
$ oc get bundledeployment
----
+
.Example output
[source,text]
----
NAME           ACTIVE BUNDLE         INSTALL STATE           AGE
quay-example   quay-example-b4v8v8   InstallationSucceeded   117s
----

. Run the following command to get information about your Operator's controller manager pod:
+
[source,terminal]
----
$ oc get pod -n quay-operator-system
----
+
.Example output
[source,text]
----
NAME                                     READY   STATUS    RESTARTS   AGE
quay-operator.v3.8.12-6677b5c98f-2kdtb   1/1     Running   0          2m28s
----

