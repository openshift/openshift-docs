// Module included in the following assemblies
//
// * about/serverless-release-notes.adoc

:_mod-docs-content-type: REFERENCE
[id="serverless-rn-1-37-0_{context}"]
= Red{nbsp}Hat {ServerlessProductName} 1.37

[role="_abstract"]
{ServerlessProductName} 1.37 is now available. New features, updates, fixed issues, and known issues that pertain to {ServerlessProductName} on {ocp-product-title} are included in the following notes:

[id="new-features-1-37-0_{context}"]
== New features

[id="new-features-eventing-1-37-0_{context}"]
=== {ServerlessProductName} Eventing

* {ServerlessProductName} now uses Knative Eventing 1.17.

* {ServerlessProductName} now uses Knative for Apache Kafka 1.17.

* Knative Eventing now supports the ability to define authorization policies that restrict which entities can send events to Eventing custom resources. This enables greater control and security within event-driven architectures. This functionality is now available as a Technology Preview feature.

[id="new-features-serving-1-37-0_{context}"]
=== {ServerlessProductName} Serving

* {ServerlessProductName} now uses Knative Serving 1.17.

* {ServerlessProductName} now uses Kourier 1.17.

* {ServerlessProductName} now uses Knative (`kn`) CLI 1.17.

* Integration with {SMProductName} 3.x is now available as a Technology Preview feature.

[id="new-features-functions-1-37-0_{context}"]
=== {ServerlessProductName} Functions

* The `kn func` CLI plugin now uses `func` 1.17.

* Python runtime for {ServerlessProductName} Functions are now Generally Available (GA).

* The Func MCP server is now available as a Developer Preview feature.

[id="new-features-osl-1-37-0_{context}"]
=== {ServerlessLogicProductName}

* {ServerlessLogicProductName} introduces a new data index mutation named `ExecuteAfter`, which enables you to create and execute a new workflow instance that can reuse the output of a previously completed workflow as its input.
+
The `ExecuteAfter` mutation accepts the following arguments:
+
** `processId`: Specifies the process ID of the workflow definition to execute.
** `processVersion`: Specifies the process version of the workflow definition to execute.
** `completedInstanceId` (optional): Specifies the ID of a previously completed workflow whose output serves as input for the new workflow instance.
** `input` (optional): Specifies the additional input data, which the system merges with the output of the `completedInstanceId`, if you provide it.
** `excludeProperties` (optional): Specifies the list of properties that the system does not copy from the `completedInstanceId` output into the new workflow instance input.

* {ServerlessLogicProductName} container images now use the {op-system-base} UBI 9 parent image, aligning the {ServerlessLogicProductShortName} components with the {op-system-base} 9 runtime environment.

* {ServerlessLogicOperatorName} now uses a simplified `ClusterServiceVersion` (CSV) naming schema that removes the `rhel9` suffix. For example, the CSV name is now `logic-operator.v1.37.0`.

* {ServerlessLogicProductName} now provides a landing web application for the Jobs Service and Data Index services, offering users a centralized entry point to access and explore these services.

* {ServerlessLogicProductName} now supports dynamic URLs and security configurations for OpenAPI function calls in workflows, enabling workflows to adapt securely to different environments and endpoints.

* {ServerlessLogicProductName} now includes a new guide that explains how to configure Maven mirrors in builder and devmode images.

* {ServerlessLogicProductName} now supports token exchange by introducing JSON Web Token (JWT) token parsing for SonataFlow workflows. This feature adds a new Quarkus add-on, `sonataflow-addons-quarkus-jwt-parser`, which enables workflows to parse JWT tokens and extract user claims to generate personalized responses.

[id="fixed-issues-1-37-0_{context}"]
== Fixed issues

[id="fixed-issues-eventing-1-37-0_{context}"]
=== {ServerlessProductName} Eventing

* Before this update, the `KafkaSource` dispatcher stopped committing offsets when the offsets of produced events were not consecutive integers, for example, when events were produced within a Kafka transaction. This behavior caused the dispatcher to stall and prevented subsequent events from being processed.
+
With this update, the `KafkaSource` dispatcher has been fixed to handle such empty offsets correctly. Additionally, the default Kafka consumer configuration for `KafkaSource` has been updated to `isolation.level=read_committed`. When Kafka transactions are used to produce events into a Kafka topic, the `KafkaSource` now processes only the events from committed transactions.

[id="fixed-issues-osl-1-37-0_{context}"]
=== {ServerlessLogicProductName}

* Before this update, the Sleep state removed tokens from the workflow context when used within a sub-flow. This issue is now fixed, ensuring that tokens remain available throughout the workflow execution.

* Before this update, converting a project to a Quarkus project using the Kn workflow plugin generated incorrect Maven repositories. This issue is now fixed, and the conversion process generates the correct Maven repositories.

* Before this update, the {ServerlessLogicProductName} Builder image downloaded `plexus-utils` version 1.1. This issue is now fixed, and the Builder image no longer downloads this dependency.

[id="known-issues-1-37-0_{context}"]
== Known issues

[id="known-issues-eventing-1-37-0_{context}"]
=== {ServerlessProductName} Eventing

* The `EventTransform` custom resource definition (CRD) is currently not compatible with {SMProductName}. The `EventTransform` resource does not provide a way to configure Istio-specific labels or annotations required for integration with {SMProductName}. As a result, the `EventTransform` component cannot function properly in environments where {SMProductName} is enabled.

[id="known-issues-serving-1-37-0_{context}"]
=== {ServerlessProductName} Serving

* In some cases, cluster-scoped resources such as webhook configurations are not removed during the uninstallation, reinstallation, or upgrade of the `KnativeServing` or Serverless Operator components. When this occurs, the reconciliation of `KnativeServing` fails, and the installation process becomes stuck with an error similar to the following example:
+
[source,text]
----
failed to apply non rbac manifest: Internal error occurred: failed calling webhook "webhook.serving.knative.dev": failed to call webhook: Post "https://webhook.knative-serving.svc:443/?timeout=10s": no endpoints available for service "webhook"
----

* When the `serving.knative.openshift.io/disableRoute=true` annotation is applied to a Knative Service, the service displays an invalid URL in the `.status.url` field. The URL shown does not resolve to the Knative Service and can be misleading. Additionally, both the OpenShift Console UI and the Knative client (`kn`) CLI display this invalid address in multiple locations. The corresponding Knative Route is also created, and its `.status.url` field contains the same invalid URL.

[id="known-issues-functions-1-37-0_{context}"]
=== {ServerlessProductName} Functions

* Some operations of the {ServerlessProductName} Function MCP server, such as build and deploy, fail when triggered from the Cursor IDE using its built-in agent. When invoking these operations, the Cursor agent sends a malformed request for any optional parameters. Although the parameter values appear correctly formatted, for example, `"quay.io/myuser"`, the {ServerlessProductName} Function MCP API returns the following error message:
+
[source,text]
----
Error calling tool: Parameter 'optionalStr' must be of type null,string, got string
----

[id="known-issues-knative-cli-1-37-0_{context}"]
=== Knative client (`kn`) CLI

* As of {ServerlessProductName} 1.37 release, the `kn` client is built with {op-system-base} 9 dependencies and cannot run on {op-system-base} 8. Attempting to run the binary on {op-system-base} 8 displays an error similar to the following:
+
[source,text]
----
kn: /lib64/libc.so.6: version `GLIBC_2.33' not found (required by kn)
----

* As of {ServerlessProductName} 1.37 release, the `kn` client binary downloaded from the *Command Line Tools* page in the {ocp-product-title} web console is not signed with the Red{nbsp}Hat certificate for macOS and Windows platforms. This issue affects the binaries available directly through the {ocp-product-title} console. To obtain properly signed binaries, download them from the link:https://mirror.openshift.com/pub/cgw/serverless/[Official OpenShift Serverless downloads mirror] instead.

[id="known-issues-osl-1-37-0_{context}"]
=== {ServerlessLogicProductName}

* In disconnected cluster environments, the `logic-swf-builder-rhel9` image attempts to download the `plexus-utils-1.1.jar` dependency during the build process. As external network access is restricted in disconnected setups, this behavior can result in build failures or timeouts. 

* If you apply a `SonataFlow` custom resource (CR) to an OpenShift cluster and the first `SonataFlowBuild` fails for any reason, the Operator does not create the workflow deployment even after the build issue is resolved. As a result, the workflow remains undeployed until you manually reapply or rebuild it.
