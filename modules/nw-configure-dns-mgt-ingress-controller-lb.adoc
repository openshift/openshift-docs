// Module included in the following assemblies:
//
// * networking/ingress-operator.adoc

:_content-type: PROCEDURE
[id="nw-configure-dns-mgt-ingress-controller-lb_{context}"]
= Configuring an Ingress Controller to disable DNS management

As a cluster administrator, you can create or modify an Ingress Controller to specify whether a DNS record is needed or not. This is part of the Day 2 operations.
You need this in instances where the required DNS zone is different from the cluster DNS zone and may not be hosted in the specific cloud provider.

In such scenarios, the Operator reports a degraded state after attempting to provision the required resources in the cloud provider because the specified DNS can not be created.
You now have more control over specific Ingress Controllers on how they manage the associated wildcard DNS records.

[NOTE]
====
This feature is supported on new or customized Ingress Controllers.
====

.Prerequisites

* Install the OpenShift CLI (`oc`).
* Log in as a user with `cluster-admin` privileges.
* DNS record created.

.Procedure

. Modify an `IngressController` custom resource to set `dnsManagementPolicy`:
+
[source,terminal]
----
oc -n openshift-ingress-operator patch ingresscontrollers/<name> --type=merge --patch='{"spec":{"endpointPublishingStrategy":{"loadBalancer":{"dnsManagementPolicy":"Unmanaged"}}}}'
----
+
[NOTE]
====
Once you update `.spec.endpointPublishingStrategy.loadBalancer.dnsManagementPolicy` field to `Unmanaged`, the existing DNS record must denote the same using the `dnsManagementPolicy` field. You can either retain or delete the DNS record in the cloud provider.
If the domain on the Ingress Controller does not match with `dnsConfig.Spec.BaseDomain` , the policy is automatically set to `Unmanaged`.
====
+
.Sample Ingress Controller configuration
+
[source,yaml]
----
apiVersion: operator.openshift.io/v1
kind: IngressController
metadata:
  namespace: openshift-ingress-operator
  name: <name> <1>
spec:
  domain: <domain> <2>
  endpointPublishingStrategy:
    type: LoadBalancerService
    loadBalancer:
      scope: Internal <3>
      dnsManagementPolicy: Unmanaged <4>
----
<1> Replace `<name>` with a name for the `IngressController` object.
<2> Specify the `domain` for the application published by the controller.
<3> Specify a value of `Internal` to use an internal load balancer.
<4> `dnsManagementPolicy` indicates if the Ingress Controller is managing the lifecycle of the wildcard DNS record associated with the load balancer.
By default , the value is `Managed`. The valid values are `Managed` and `Unmanaged`.

. Save the file to apply the changes.
+
[source,terminal]
----
oc apply -f <name>.yaml <1>
----

. Optional: You can delete the associated DNS record in the cloud provider.

[NOTE]
====
You can use the same workflow to create an `IngressController` custom resource where DNS is managed externally.
====
