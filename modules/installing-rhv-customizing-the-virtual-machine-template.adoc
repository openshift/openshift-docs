// Module included in the following assemblies:
//
// * installing/installing_rhv/installing-rhv-custom.adoc

[id="installing-rhv-customizing-the-virtual-machine-template_{context}"]
= Customizing the {rh-virtualization} virtual machine template

Optional: You can customize the {rh-virtualization-first} virtual machine template the installation program uses to create the {product-title} master and worker nodes. For example, you can modify the virtual machine template so the cluster nodes have larger 120 GiB disks instead of the smaller default disk size.

[IMPORTANT]
====
To install and run {product-title} on {rh-virtualization-first} without failures, calculate the additional resources required for any customizations you make. Then, ensure that the {rh-virtualization} environment has these additional resources.
====

.Procedure
. From the installer machine, open the RHV Administration Portal and go to *Compute* -> *Virtual machines*.
. Check that the cluster has sufficient resources for the customizations you intend to make.
. Create a new working directory that contains a *copy* of the `install-config.yaml` file.
+
NOTE: Running the installation program deletes this copy of the `install-config.yaml` file.
+
. Run the installation program from the command line. For example:
+
----
$ sudo ./openshift-install create cluster --dir <a-working-directory>
----
+
. Watch the Administration Portal for new virtual machines being created by the installation program.
. When you see the new virtual machines, return to the command line and enter kbd:[ctrl+c] to interrupt the installation program.
. Connect to the created virtual machines and locate the template that was just created.
For example, with a cluster named `test`, the virtual machines and template would be named something like `test-vjhkb-master-0` and a template named something like `test-vjhkb-rhcos`.
. Rename the template to something like `rhcos-ocp-4.4`.
. Create a virtual machine from the template.
. Change the virtual machine characteristics. For example, extend the disk size to 120 GiB.
. Make a new template from the updated virtual machine and name it something like `rhcos-ocp-4.4-120gb`.
. On the command line, set the image override shell variable to use this new template. For example:
+
----
$ export OPENSHIFT_INSTALL_OS_IMAGE_OVERRIDE=<new-vm-template-name> <1>
----
<1> For <new-vm-template-name>, specify the name of your customized virtual machine template.
+
NOTE: Later, after you run the installation program again, verify that the virtual machines in the new cluster contain the expected customizations.
