// Module included in the following assembly:
//
// * virt/storage/storage_config/virt-automatic-bootsource-updates.adoc

:_content-type: PROCEDURE
[id="virt-managing-auto-update-all-system-boot-sources_{context}"]
= Managing automatic updates for system-defined boot sources

Disabling automatic boot source imports and updates can lower resource usage. In disconnected environments, disabling automatic boot source updates prevents `CDIDataImportCronOutdated` alerts from filling up logs.

To disable automatic updates for all system-defined boot sources, turn off the `enableCommonBootImageImport` feature gate by setting the value to `false`. Setting this value to `true` re-enables the feature gate and turns automatic updates back on.

[NOTE]
====
Custom boot sources are not affected by this setting.
====

.Disabling automatic boot source updates for _all_ system-defined boot sources

* Set the `spec.featureGates.enableCommonBootImageImport` field in the `HyperConverged` custom resource (CR) to `false`. For example:
+
[source,terminal,subs="attributes+"]
----
$ oc patch hyperconverged kubevirt-hyperconverged -n {CNVNamespace} \
  --type json -p '[{"op": "replace", "path": \
  "/spec/featureGates/enableCommonBootImageImport", \
  "value": false}]'
----

.Re-enabling automatic boot source updates for _all_ system-defined boot sources

* Set the `spec.featureGates.enableCommonBootImageImport` field in the `HyperConverged` CR to `true`. For example:
+
[source,terminal,subs="attributes+"]
----
$ oc patch hyperconverged kubevirt-hyperconverged -n {CNVNamespace} \
  --type json -p '[{"op": "replace", "path": \
  "/spec/featureGates/enableCommonBootImageImport", \
  "value": true}]'
----

.Disabling automatic boot source updates for a _single_ system-defined boot source

Automatic updates are enabled by default for system-defined boot sources, but these boot sources are not listed in the CR. You must add a single boot source to the CR before you can disable it.

. Open the `HyperConverged` CR in your default editor by running the following command:
+
[source,terminal,subs="attributes+"]
----
$ oc edit hyperconverged kubevirt-hyperconverged -n {CNVNamespace}
----

. Add the boot source to `spec.dataImportCronTemplates` and set the value of the `dataimportcrontemplate.kubevirt.io/enable` annotation to `false`.
+
--
For example:
[source,yaml]
----
apiVersion: hco.kubevirt.io/v1beta1
kind: HyperConverged
metadata:
  name: kubevirt-hyperconverged
spec:
  dataImportCronTemplates:
  - metadata:
      annotations:
        dataimportcrontemplate.kubevirt.io/enable: false
      name: rhel8-image-cron
# ...
----
--

. Save the file.

