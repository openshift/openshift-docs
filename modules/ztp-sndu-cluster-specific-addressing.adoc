// Module included in the following assemblies:
//
// * *scalability_and_performance/ztp-configuring-single-node-cluster-deployment-during-installation.adoc

:_content-type: CONCEPT
[id="ztp-sndu-cluster-specific-addressing_{context}"]
= Cluster specific addressing

After networking has been configured, you need to configure the specific addresses for the
single node distributed unit  (DU). The following example shows the configuration for IPv4 and
IPv6 addresses. You need to customize these settings for the specific environment of the single node DU.

[source,yaml]
----
apiVersion: agent-install.openshift.io/v1beta1
kind: NMStateConfig
metadata:
    labels:
        nmstate-label: sno-du-1
    name: sno-du-1
    namespace: sno-du-1
spec:
    config:
        dns-resolver:
            config:
                server:
                    - 10.19.42.41 <1>
        interfaces:
            - ipv4:
                Address: <2>
                    - 10.16.231.3/24
                    - 10.16.231.28/24
                    - 10.16.231.31/24
                dhcp: false
                enabled: true
              ipv6:
                Address: <3>
                    - 2620:52:0:10e7:e42:a1ff:fe8a:601/64
                    - 2620:52:0:10e7:e42:a1ff:fe8a:602/64
                    - 2620:52:0:10e7:e42:a1ff:fe8a:603/64
                dhcp: false
                enabled: true
              macAddress: "00:00:00:01:20:30"
              name: eno1
              type: ethernet
        Routes: <4>
            config:
                - destination: 0.0.0.0/0
                  next-hop-address: 10.16.231.254
                  next-hop-interface: eno1
                  table-id: 254
    Interfaces: <5>
        - name: eno1
          macAddress: "00:00:00:01:20:30"
----
<1> Configure the DNS entries.
<2> Configure “eno1” IPv4 connectivity.  In this case, it is assumed there is a dual stack.
<3> Configure “eno1” IPv6 connectivity.  In this case, it is assumed there is a dual stack.
<4> The default route configuration.
<5> The interface name and MAC address.


Here is an example of a single stack ipv6:

[source,yaml]
----
apiVersion: agent-install.openshift.io/v1beta1
kind: NMStateConfig
metadata:
  name: nmstate-sno
  namespace: test-sno
  labels:
    nmstate-label: test-sno-nmstate
spec:
  config:
    interfaces:
      - name: eno1
        type: ethernet
        state: up
        mac-address: 0C:42:A1:8A:74:EC
        ipv4:
          enabled: false
        ipv6:
          enabled: true
          address:
          - ip: 2620:52::10e7:e42:a1ff:fe8a:900
            prefix-length: 64
    dns-resolver:
      config:
        search:
        - clus2.t5g.lab.eng.bos.redhat.com
        server:
        - 2620:52:0:1310::1f6
    routes:
      config:
      - destination: ::/0
        next-hop-interface: eno1
        next-hop-address: 2620:52:0:10e7::fc
        table-id: 254
  interfaces:
    - name: "eno1"
      macAddress: "0C:42:A1:8A:74:EC"
----
