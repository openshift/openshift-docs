// Module included in the following assemblies:
//
// * security/zero_trust_workload_identity_manager/zero-trust-manager-reconciliation.adoc

:_mod-docs-content-type: PROCEDURE
[id="zero-trust-manager-restart-reconciliation_{context}"]

= Resuming Operator reconciliation by annotation

.Procedure

Follow these steps to restart the reconciliation process:

. Run the `oc annotate` command, adding a hyphen (`-`) at the end of the annotation name. This removes the annotation from the cluster resource.
+
[source,terminal]
----
$ oc annotate SpireServer cluster -n zero-trust-workload-identity-manager ztwim.openshift.io/create-only-
----

. Restart the controller by running the following command:
+
[source,terminal]
----
$ oc rollout restart deploy/zero-trust-workload-identity-manager-controller-manager -n zero-trust-workload-identity-manager
----

.Verification
* Check the status of the `SpireServer` resource to confirm that the `create-only` mode is disabled. The `status` must be `false` and the `reason` must be `CreateOnlyModeDisabled`.
+
[source,terminal]
----
$ oc get SpireServer cluster -o yaml
----

.Example output
[source,yaml]
----
status:
  conditions:
  - lastTransitionTime: "2025-09-03T12:13:39Z"
    message: Create-only mode is enabled via ztwim.openshift.io/create-only annotation
    reason: CreateOnlyModeDisabled
    status: "False"
    type: CreateOnlyMode
----

Once `create-only` mode is enabled, it persists until the Operator pod restarts, even if the annotation is removed. To exit this mode, you might need to remove or unset the annotation and restart the Operator pod.
