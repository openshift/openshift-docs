// Module included in the following assemblies:
//
// * observability/logging/log_collection_forwarding/configuring-log-forwarding.adoc

:_mod-docs-content-type: PROCEDURE
[id="cluster-logging-collector-log-forward-gcp_{context}"]
= Forwarding logs to Google Cloud Platform (GCP)

You can forward logs to link:https://cloud.google.com/logging/docs/basic-concepts[Google Cloud Logging].

[IMPORTANT]
====
Forwarding logs to GCP is not supported on Red{nbsp}Hat OpenShift on AWS.
====

.Prerequisites

* {clo} has been installed.

.Procedure

. Create a secret using your link:https://cloud.google.com/iam/docs/creating-managing-service-account-keys[Google service account key].
+
[source,terminal,subs="+quotes"]
----
$ oc -n openshift-logging create secret generic gcp-secret --from-file google-application-credentials.json=<your_service_account_key_file.json>
----

. Create a `ClusterLogForwarder` Custom Resource YAML using the template below:
+
[source,yaml]
----
apiVersion: observability.openshift.io/v1
kind: ClusterLogForwarder
metadata:
  name: <log_forwarder_name>
  namespace: openshift-logging
spec:
  serviceAccount: 
    name: <service_account_name> #<1>
  outputs:
    - name: gcp-1
      type: googleCloudLogging
      googleCloudLogging:
        authentication:
          credentials:
            secretName: gcp-secret
            key: google-application-credentials.json
        id:
          type : project
          value: openshift-gce-devel #<2>
        logId : app-gcp #<3>
  pipelines:
    - name: test-app
      inputRefs: #<4>
        - application
      outputRefs:
        - gcp-1
----

<1> The name of your service account.
<2> Set a `project`, `folder`, `organization`, or `billingAccount` field and its corresponding value, depending on where you want to store your logs in the GCP resource hierarchy.
<3> Set the value to add to the `logName` field of the log entry. The value can be a combination of static and dynamic values consisting of field paths followed by `||`, followed by another field path or a static value. A dynamic value must be encased in single curly brackets `{}` and must end with a static fallback value separated with `||`. Static values can only contain alphanumeric characters along with dashes, underscores, dots and forward slashes.
<4> Specify the the names of inputs, defined in the `input.name` field for this pipeline. You can also use the built-in values `application`, `infrastructure`, `audit`.

[role="_additional-resources"]
.Additional resources
* link:https://cloud.google.com/billing/docs/concepts[Google Cloud Billing Documentation]
* link:https://cloud.google.com/logging/docs[Cloud Logging documentation] for Google GCP.
* link:https://cloud.google.com/logging/docs/view/logging-query-language[Google Cloud Logging Query Language Documentation]
