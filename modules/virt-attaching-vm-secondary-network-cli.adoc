// Module included in the following assemblies:
//
// * virt/vm_networking/virt-connecting-vm-to-linux-bridge.adoc

:_mod-docs-content-type: PROCEDURE
[id="virt-attaching-vm-secondary-network-cli_{context}"]
= Configuring a VM network interface by using the CLI

[role="_abstract"]
You can configure a virtual machine (VM) network interface for a bridge network by using the command line.

.Prerequisites

* You have installed the {oc-first}.
* Shut down the virtual machine before editing the configuration. If you edit a running virtual machine, you must restart the virtual machine for the changes to take effect.

.Procedure

. Add the bridge interface and the network attachment definition to the VM configuration as in the following example:
+
[source,yaml]
----
apiVersion: kubevirt.io/v1
kind: VirtualMachine
metadata:
  name: example-vm
spec:
  template:
    spec:
      domain:
        devices:
          interfaces:
            - bridge: {}
              name: bridge-net
# ...
      networks:
        - name: bridge-net
          multus:
            networkName: bridge-network
----
+
where:

`spec.template.spec.domain.devices.interface`:: Specifies the name of the bridge interface.
`spec.template.spec.networks.name`:: Specifies the name of the network. This value must match the `name` value of the corresponding `spec.template.spec.domain.devices.interfaces` entry.
`spec.template.spec.networks.multus.networkName`:: Specifies the name of the network attachment definition. 

. Apply the configuration:
+
[source,terminal]
----
$ oc apply -f example-vm.yaml
----

. Optional: If you edited a running virtual machine, you must restart it for the changes to take effect.
+
[NOTE]
====
When running {VirtProductName} on {ibm-z-name} using OSA, RoCE, or HiperSockets interfaces, you must register the MAC address of the device. For more information, see link:https://www.ibm.com/docs/en/linux-on-systems?topic=choices-osa-interface-traffic-forwarding[OSA interface traffic forwarding] (IBM documentation).
====