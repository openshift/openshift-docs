// Module included in the following assemblies:
//
// * logging/efk-logging-kibana.adoc

[id="efk-logging-kibana-scaling-{context}"]
= Scaling Kibana for redundancy

You can scale the Kibana deployment for redundancy.

.Prerequisites

* If needed, get the name of the Cluster Logging Custom Resource in the `openshift-logging` project:

----
$ oc get ClusterLogging
NAME       AGE
instance   112m
----

* Set cluster logging to the unmanaged state. In managed state, the Cluster Logging Operator reverts changes made to the `logging-curator` configuration map.

.Procedure

Edit the Cluster Logging Custom Resource (CR) in the `openshift-logging` project: 

[source,yaml]
----
$ oc edit ClusterLogging instance

apiVersion: "logging.openshift.io/v1"
kind: "ClusterLogging"
metadata:
  name: "clusterlogging"

....

spec:
    visualization:
      type: "kibana"
      kibana:
        replicas: 1 <1>
        resources:
        proxy:
          resources: <2>
            limits:
              cpu:
              memory:
            requests:
              cpu:
              memory:
---- 

<1> Specify the number of Kibana nodes.
<2> Specify the CPU and memory limits for each node.
