// This module is included in the following assemblies:
// * pac/using-pipelines-as-code-repos.adoc

:_mod-docs-content-type: PROCEDURE
[id="pac-configuring-github-app-manually_{context}"]
= Configuring a GitHub App manually and creating a secret for {pac}

You can use the GitHub user interface to create a GitHub app. Then you must create a secret that configures {pac} to connect to GitHub app.

If you created additional {pac} controllers to support additional GitHub apps, you must use this procedure for the additional controllers.

.Procedure
. Sign in to your GitHub account.

. In the GitHub menu, select **Settings** -> **Developer settings** -> **GitHub Apps**, then click **New GitHub App**.

. Provide the following information in the GitHub App form:

* **GitHub Application Name**: `{pipelines-shortname}`
* **Homepage URL**: OpenShift Console URL
* **Webhook URL**: The {pac} route or ingress URL. You can find it by running the following command:
+
[source,terminal]
----
$ echo https://$(oc get route -n openshift-pipelines pipelines-as-code-controller -o jsonpath='{.spec.host}')
----
+
Alternatively, to configure the GitHub app for an additional {pac} controller, replace `pipelines-as-code-controller` with the name of the controller that you configured, as in the following example:
+
.Example command
[source,terminal]
----
$ echo https://$(oc get route -n openshift-pipelines pac_controller_2 -o jsonpath='{.spec.host}')
----

* **Webhook secret**: An arbitrary secret. You can generate a secret by running the following command:
+
[source,terminal]
----
$ openssl rand -hex 20
----

. Select the following items in the **Repository permissions** section:

* **Checks**: `Read & Write`
* **Contents**: `Read & Write`
* **Issues**: `Read & Write`
* **Metadata**: `Read-only`
* **Pull request**: `Read & Write`

. Select the following item in the **Organization permissions** section:

* **Members**: `Read-only`

. Subscribe to the following events:

* **Check run**
* **Check suite**
* **Commit comment**
* **Issue comment**
* **Pull request**
* **Push**

. Click **Create GitHub App**.

. On the **Details** page of the newly created GitHub App, note the **App ID** displayed at the top.

. In the **Private keys** section, click **Generate Private key** to automatically generate and download a private key for the GitHub app. Securely store the private key for future reference and usage.

. Install the created App on a repository that you want to use with {pac}.

. Configure {pac} to access the newly created GitHub App by entering the following command:
+
[source,terminal]
----
$ oc -n openshift-pipelines create secret generic pipelines-as-code-secret \ # <1>
        --from-literal github-private-key="$(cat <PATH_PRIVATE_KEY>)" \ <2>
        --from-literal github-application-id="<APP_ID>" \ <3>
        --from-literal webhook.secret="<WEBHOOK_SECRET>" <4>
----
<1> If you created additional {pac} controllers to support additional GitHub apps and you are configuring the app for an additional controller, replace `pipelines-as-code-secret` with the name that you configured in the `secretName` parameter for the controller.
<2> The path to the private key you downloaded while configuring the GitHub App.
<3> The **App ID** of the GitHub App.
<4> The webhook secret provided when you created the GitHub App.

[NOTE]
====
{pac} works automatically with GitHub Enterprise by detecting the header set from GitHub Enterprise and using it for the GitHub Enterprise API authorization URL.
====
