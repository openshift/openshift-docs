// This module is included in the following assemblies:
// * create/using-manual-approval.adoc

:_mod-docs-content-type: CONCEPT
[id="op-behavior-of-approvaltask-with-groups-and-users_{context}"]
= Behavior of ApprovalTask with groups and users

[role="_abstract"]
You can define complex approval policies by combining individual users and groups in a single definition. This allows you to specify the total number of required approvals from different stakeholders, such as a tech lead, a QA engineer, and a member of the security team.

You can assign approval responsibility to a group. When a group is configured as an approver, the controller tracks individual approvals from group members and updates the group's overall approval state automatically.

.Example Initial ApprovalTask created by the controller with a group approver
[source,yaml]
----
spec:
  approvers:
  - name: dev-team
    type: Group
    input: pending
----

As group members approve or reject the task, their individual actions appear in the `users` list. The groupâ€™s approval state changes automatically as soon as the necessary member-level approvals are recorded.

.Example Group member approvals recorded by the controller
[source,yaml]
----
spec:
  approvers:
  - name: dev-team
    type: Group
    input: approve
    users:
    - name: alice
      input: approve  # Alice has approved
    - name: bob
      input: approve  # Bob has approved
----

ApprovalTask also supports scenarios where approvals are required from both individual users and groups. You can combine users and groups in a single approval definition while specifying the total number of required approvals. This allows pipelines to enforce more granular approval policies, such as requiring sign-off from a tech lead, a QA engineer, and a member of the security team.

[IMPORTANT]
====
The following YAML represents a runtime `ApprovalTask` object created automatically by the Manual Approval Gate controller when a `PipelineRun` pauses at an approval step. Do not apply this manifest. It is provided for debugging and inspection only.
====

[source,yaml]
----
apiVersion: openshift-pipelines.org/v1alpha1
kind: ApprovalTask
metadata:
  name: mixed-approval
  namespace: default
spec:
  approvers:
  - name: tech-lead
    type: User
    input: pending
  - name: qa-team
    type: Group
    input: pending
    users:
    - name: <user_1>
      input: approve
    - name: <user_2>
      input: approve
  - name: security-team
    type: Group
    input: pending
  numberOfApprovalsRequired: 3
  description: "Requires an approval from the tech lead, a QA team member, and a security team member"
----