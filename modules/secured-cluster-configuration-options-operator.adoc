// Module included in the following assemblies:
//
// * installing/installing_ocp/install-secured-cluster-config-options-ocp.adoc
:_mod-docs-content-type: CONCEPT
[id="secured-cluster-configuration-options-operator_{context}"]
= Secured Cluster services configuration options

When you create a Central instance, the Operator lists the following configuration options for the `Central` custom resource.

[id="required-configuration-settings_{context}"]
== Required Configuration Settings

[cols="1,3"]
|===
| Parameter | Description

| `centralEndpoint`
| The endpoint of Central instance to connect to, including the port number.
If using a non-gRPC capable load balancer, use the WebSocket protocol by prefixing the endpoint address with `wss://`.
If you do not specify a value for this parameter, Sensor attempts to connect to a Central instance running in the same namespace.

| `clusterName`
| The unique name of this cluster, which shows up in the {product-title-short} portal.
After you set the name by using this parameter, you cannot change it again.
To change the name, you must delete and re-create the object.

|===

[id="admission-controller-settings_{context}"]
== Admission controller settings

[cols="1,3"]
|===
| Parameter | Description

| `admissionControl.listenOnCreates`
| Specify `true` to enable preventive policy enforcement for object creations.
The default value is `true`.

| `admissionControl.listenOnEvents`
| Specify `true` to enable monitoring and enforcement for Kubernetes events, such as `port-forward` and `exec` events.
It is used to control access to resources through the Kubernetes API.
The default value is `true`.

| `admissionControl.listenOnUpdates`
| Specify `true` to enable preventive policy enforcement for object updates.
It will not have any effect unless `Listen On Creates` is set to `true` as well.
The default value is `true`.

| `admissionControl.nodeSelector`
| If you want this component to only run on specific nodes, you can configure a node selector using this parameter.

| `admissionControl.tolerations`
| If the node selector selects tainted nodes, use this parameter to specify a taint toleration key, value, and effect for Admission Control. This parameter is mainly used for infrastructure nodes.

| `admissionControl.hostAliases`
| Use this parameter to inject hosts and IP addresses into the pod's hosts file.

| `admissionControl.resources.limits`
| Use this parameter to override the default resource limits for the admission controller.

| `admissionControl.resources.requests`
| Use this parameter to override the default resource requests for the admission controller.

| `admissionControl.bypass`
a| Use one of the following values to configure the bypassing of admission controller enforcement:

    * `BreakGlassAnnotation` to enable bypassing the admission controller via the `admission.stackrox.io/break-glass` annotation.
    * `Disabled` to disable the ability to bypass admission controller enforcement for the secured cluster.

The default value is `BreakGlassAnnotation`.

| `admissionControl.contactImageScanners`
a| Use one of the following values to specify if the admission controller must connect to the image scanner:

    * `ScanIfMissing` if the scan results for the image are missing.
    * `DoNotScanInline` to skip scanning the image when processing the admission request.

The default value is `DoNotScanInline`.

| `admissionControl.timeoutSeconds`
| Use this parameter to specify the maximum number of seconds {product-title-short} must wait for an admission review before marking it as fail open. If the admission webhook does not receive information that it is requesting before the end of the timeout period, it fails, but in fail open status, it still allows the operation to succeed. For example, the admission controller would allow a deployment to be created even if a scan had timed out and {product-title-short} could not determine if the deployment violated a policy. Beginning in release 4.5, Red{nbsp}Hat reduced the default timeout setting for the {product-title-short} admission controller webhooks from 20 seconds to 10 seconds, resulting in an effective timeout of 12 seconds within the `ValidatingWebhookConfiguration`. This change does not negatively affect {ocp} users because {ocp} caps the timeout at 13 seconds.
|===

[id="scanner-configuration-settings_{context}"]
== Scanner configuration

Use Scanner configuration settings to modify the local cluster scanner for the integrated OpenShift image registry.

[cols="1,3"]
|===
| Parameter | Description

| `scanner.analyzer.nodeSelector`
| Specify a node selector label as `label-key: label-value` to force Scanner to only schedule on nodes with the specified label.

| `scanner.analyzer.tolerations`
| If the node selector selects tainted nodes, use this parameter to specify a taint toleration key, value, and effect for Scanner.

| `scanner.analyzer.hostAliases`
| Use this parameter to inject hosts and IP addresses into the pod's hosts file.

| `scanner.analyzer.resources.requests.memory`
| The memory request for the Scanner container. Use this parameter to override the default value.

| `scanner.analyzer.resources.requests.cpu`
| The CPU request for the Scanner container. Use this parameter to override the default value.

| `scanner.analyzer.resources.limits.memory`
| The memory limit for the Scanner container. Use this parameter to override the default value.

| `scanner.analyzer.resources.limits.cpu`
| The CPU limit for the Scanner container. Use this parameter to override the default value.

| `scanner.analyzer.scaling.autoscaling`
| If you set this option to `Disabled`, {product-title} disables autoscaling on the Scanner deployment. The default value is `Enabled`.

| `scanner.analyzer.scaling.minReplicas`
| The minimum number of replicas for autoscaling. The default value is `2`.

| `scanner.analyzer.scaling.maxReplicas`
| The maximum number of replicas for autoscaling. The default value is `5`.

| `scanner.analyzer.scaling.replicas`
| The default number of replicas. The default value is `3`.

| `scanner.analyzer.tolerations`
| If the node selector selects tainted nodes, use this parameter to specify a taint toleration key, value, and effect for Scanner.

| `scanner.db.nodeSelector`
| Specify a node selector label as `label-key: label-value` to force Scanner DB to only schedule on nodes with the specified label.

| `scanner.db.hostAliases`
| Use this parameter to inject hosts and IP addresses into the pod's hosts file.

| `scanner.db.resources.requests.memory`
| The memory request for the Scanner DB container. Use this parameter to override the default value.

| `scanner.db.resources.requests.cpu`
| The CPU request for the Scanner DB container. Use this parameter to override the default value.

| `scanner.db.resources.limits.memory`
| The memory limit for the Scanner DB container. Use this parameter to override the default value.

| `scanner.db.resources.limits.cpu`
| The CPU limit for the Scanner DB container. Use this parameter to override the default value.

| `scanner.db.tolerations`
| If the node selector selects tainted nodes, use this parameter to specify a taint toleration key, value, and effect for Scanner DB.

| `scanner.scannerComponent`
| If you set this option to `Disabled`, {product-title} does not deploy the Scanner deployment. Do not disable the Scanner on {ocp} clusters. The default value is `AutoSense`.

| `scannerV4.db.nodeSelector`
| If you want this component to only run on specific nodes, you can use this parameter to configure a node selector.

| `scannerV4.db.tolerations`
| If the node selector selects tainted nodes, use this parameter to specify a taint toleration key, value, and effect for Scanner V4 DB. This parameter is mainly used for infrastructure nodes.

| `scannerV4.db.resources.limits`
| Use this parameter to override the default resource limits for Scanner V4 DB.

| `scannerV4.db.resources.requests`
| Use this parameter to override the default resource requests for Scanner V4 DB.

| `scannerV4.db.persistence.persistentVolumeClaim.claimName`
|The name of the PVC to manage persistent data for Scanner V4.
If no PVC with the given name exists, it is created. The default value is `scanner-v4-db` if not set. To prevent data loss, the PVC is not removed automatically when Central is deleted.

| `scannerV4.indexer.nodeSelector`
| If you want this component to only run on specific nodes, you can use this parameter to configure a node selector.

| `scannerV4.indexer.tolerations`
| If the node selector selects tainted nodes, use this parameter to specify a taint toleration key, value, and effect for the Scanner V4 Indexer. This parameter is mainly used for infrastructure nodes.

| `scannerV4.indexer.resources.limits`
| Use this parameter to override the default resource limits for the Scanner V4 Indexer.

| `scannerV4.indexer.resources.requests`
| Use this parameter to override the default resource requests for the Scanner V4 Indexer.

| `scannerV4.indexer.scaling.autoScaling`
| When enabled, the number of Scanner V4 Indexer replicas is managed dynamically based on the load, within the limits specified.

| `scannerV4.indexer.scaling.maxReplicas`
| Specifies the maximum replicas to be used in the Scanner V4 Indexer autoscaling configuration.

| `scannerV4.indexer.scaling.minReplicas`
| Specifies the minimum replicas to be used in the Scanner V4 Indexer autoscaling configuration.

| `scannerV4.indexer.scaling.replicas`
| When autoscaling is disabled for the Scanner V4 Indexer, the number of replicas is always configured to match this value.

| `scannerV4.monitoring.exposeEndpoint`
| Configures a monitoring endpoint for Scanner V4. The monitoring endpoint allows other services to collect metrics from Scanner V4, provided in a Prometheus-compatible format. Use `Enabled` to expose the monitoring endpoint. When you enable monitoring, {product-title-short} creates a new service, `monitoring`, with port 9090, and a network policy allowing inbound connections to the port. By default, this is not enabled.

| `scannerV4.scannerComponent`
| Enables Scanner V4. The default value is `default`, which is disabled. To enable Scanner V4, set this parameter to `Enabled`.

|===

[id="image-configuration-settings_{context}"]
== Image configuration

Use image configuration settings when you are using a custom registry.

[cols="1,3"]
|===
| Parameter | Description

| `imagePullSecrets.name`
| Additional image pull secrets to be taken into account for pulling images.

|===

[id="per-node-settings_{context}"]
== Per node settings

Per node settings define the configuration settings for components that run on each node in a cluster to secure the cluster.
These components are Collector and Compliance.

[cols="1,3a"]
|===
| Parameter | Description

| `perNode.collector.collection`
| The method for system-level data collection.
The default value is `CORE_BPF`.
Red{nbsp}Hat recommends using `CORE_BPF` for data collection.
If you select `NoCollection`, Collector does not report any information about the network activity and the process executions.
Available options are `NoCollection` and `CORE_BPF`. The `EBPF` option is available only for version 4.4 and earlier.

| `perNode.collector.imageFlavor`
| The image type to use for Collector. You can specify it as `Regular` or `Slim`.
This value is deprecated. `Regular` and `Slim` images are identical.

| `perNode.collector.resources.limits`
| Use this parameter to override the default resource limits for Collector.

| `perNode.collector.resources.requests`
| Use this parameter to override the default resource requests for Collector.

| `perNode.compliance.resources.requests`
| Use this parameter to override the default resource requests for Compliance.

| `perNode.compliance.resources.limits`
| Use this parameter to override the default resource limits for Compliance.

| `perNode.taintToleration`
| To ensure comprehensive monitoring of your cluster activity, {product-title}  runs services on every node in the cluster, including tainted nodes by default.
If you do not want this behavior, specify `AvoidTaints` for this parameter. The default value is `TolerateTaints`.

|===

[id="sensor-configuration-settings_{context}"]
== Sensor configuration

This configuration defines the settings of the Sensor components, which runs on one node in a cluster.

[cols="1,3"]
|===
| Parameter | Description

| `sensor.nodeSelector`
| If you want Sensor to only run on specific nodes, you can configure a node selector.

| `sensor.tolerations`
| If the node selector selects tainted nodes, use this parameter to specify a taint toleration key, value, and effect for Sensor. This parameter is mainly used for infrastructure nodes.

| `sensor.hostAliases`
| Use this parameter to inject hosts and IP addresses into the pod's hosts file.

| `sensor.resources.limits`
| Use this parameter to override the default resource limits for Sensor.

| `sensor.resources.requests`
| Use this parameter to override the default resource requests for Sensor.
|===

[id="general-and-miscellaneous-settings-secured-cluster_{context}"]
== General and miscellaneous settings

[cols="1,3"]
|===
| Parameter | Description

| `customize.annotations`
| Allows specifying custom annotations for the Central deployment.

| `customize.envVars`
| Advanced settings to configure environment variables.

| `egress.connectivityPolicy`
| Configures whether {product-title} should run in online or offline mode.
In offline mode, automatic updates of vulnerability definitions and kernel modules are disabled.

| `misc.createSCCs`
| Set this to `true` to create SCCs for Central.
It may cause issues in some environments.

|`network.policies`
a| To provide security at the network level, {product-title-short} creates default `NetworkPolicy` resources in the namespace where secured cluster resources are installed. These network policies allow ingress to specific components on specific ports. If you do not want {product-title-short} to create these policies, set this parameter to `Disabled`. The default value is `Enabled`.

[WARNING]
====
Disabling creation of default network policies can break communication between {product-title-short} components. If you disable creation of default policies, you must create your own network policies to allow this communication.
====

| `overlays`
| See "Customizing the installation using the Operator with overlays".

| `tls.additionalCAs`
| Additional trusted CA certificates for the secured cluster.
These certificates are used when integrating with services using a private certificate authority.

|===
