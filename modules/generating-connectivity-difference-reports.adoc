// Module included in the following assemblies:
//
// * operating/build-time-network-policy-tools.adoc

:_mod-docs-content-type: PROCEDURE
[id="generating-connectivity-difference-reports_{context}"]
= Generating connectivity difference reports by using the roxctl netpol connectivity diff command

[role="_abstract"]
Generate a report on connectivity differences between two sets of Kubernetes manifests, including network policies by using the `roxctl netpol connectivity diff` command .

.Prerequisites

* You have two folders, `dir1` and `dir2`, each containing Kubernetes manifests, including network policies.

.Procedure

* To find the connectivity differences between the Kubernetes manifests in the specified directories, run the following command:
+
[source,terminal,subs="+quotes"]
----
$ roxctl netpol connectivity diff --dir1=<folder_path_1> --dir2=<folder_path_2> [flags] <1>
----
+
<1> Specify the path to the folders, which can include sub-folders that contain YAML resources and network policies for analysis. The command scans the entire sub-folder trees for both the directories.
+
For example, `<folder_path_1>` is link:https://github.com/np-guard/netpol-analyzer/tree/main/tests/netpol-analysis-example-minimal[`netpol-analysis-example-minimal/`] and `<folder_path_2>` is link:https://github.com/np-guard/netpol-analyzer/tree/main/tests/netpol-diff-example-minimal[`netpol-diff-example-minimal/`]. Optionally, you can also specify parameters to change the behavior of the command.

[NOTE]
====
The command considers all YAML files that you can accept by using `kubectl apply -f`, and the YAML files then become valid inputs for your `roxctl netpol connectivity diff` command.
====

.Example output

[cols="1,2,2,1,1,1",options="header"]
|===

|diff-type |source |destination |dir 1 |dir 2 |workloads-diff-info

|changed
|default/frontend[Deployment]
|default/backend[Deployment]
|TCP 9090
|TCP 9090,UDP 53
|

|added
|0.0.0.0-255.255.255.255
|default/backend[Deployment]
|No Connections
|TCP 9090
|

|===

The semantic difference report gives you an overview of the connections that were changed, added, or removed in `dir2` compared to the connections allowed in `dir1`. When you review the output, each line represents one allowed connection that was added, removed, or changed in `dir2` compared to `dir1`.

If applicable, the `workloads-diff-info` provides additional details about added or removed workloads related to the added or removed connection.

For example, if a connection from workload `A` to workload `B` is removed because workload `B` was deleted, the `workloads-diff-info` indicates that workload `B` was removed. However, if such a connection was removed only because of network policy changes and neither workload `A` nor `B` was deleted, the `workloads-diff-info` is empty.
