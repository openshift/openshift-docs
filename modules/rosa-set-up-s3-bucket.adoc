// Module included in the following assemblies:
//
// * security/rosa-configuring-the-log-forwarder.adoc
:_mod-docs-content-type: PROCEDURE
[id="rosa-set-up-s3-bucket.adoc_{context}"]
= Setting up the _S3_ bucket

Set up the `S3` bucket for the log forwarder to send logs to by completing the following steps: 

.Procedure

. Create the `S3` bucket by running the following command: 
+
[source,terminal]
----
$ aws s3api create-bucket \
    --bucket <your_s3_bucket_name> \
    --region <your_aws_region> \
    --create-bucket-configuration LocationConstraint=<cluster_aws_region>
----
+
. Go to your chosen ROSA cluster and configure the log forwarder to use the `S3` bucket by applying the following JSON sample:  
+
[source,json]
----
 "Version": "2012-10-17",
    "Statement": [
        {
            "Sid": "AllowCentralLogDistributionWrite",
            "Effect": "Allow",
            "Principal": {
                "AWS": "arn:aws:iam::859037107838:role/ROSA-CentralLogDistributionRole-241c1a86"
            },
            "Action": "s3:PutObject",
            "Resource": "arn:aws:s3:::<your_s3_bucket_name>/*",
            "Condition": {
                "StringEquals": {
                    "s3:x-amz-acl": "bucket-owner-full-control"
                }
            }
        }
    ]
}
----
+
. Attached the policy to the `S3` role by running the following command: 
+
[source,terminal]
----
$ 	aws s3api put-bucket-policy \
    --bucket <your_s3_bucket_name> \
    --policy file://s3-bucket-policy.json
----
+