:_content-type: PROCEDURE
[id="cluster-logging-loki-storage-secret-tech-preview_{context}"]
:FeatureName: Loki
include::snippets/technology-preview.adoc[]

= Creating object storage secret

.Create s3 bucket
[source, terminal]
----
aws s3api create-bucket --bucket $LOKI_BUCKET_NAME --region $AWS_DEFAULT_REGION
aws s3api create-bucket --bucket $LOKI_BUCKET_NAME --region $AWS_DEFAULT_REGION --create-bucket-configuration LocationConstraint=$AWS_DEFAULT_REGION
----

.Create Storage Secret
[source, terminal]
----
oc -n "${NAMESPACE}" delete secret ${SECRETNAME}
oc -n "${NAMESPACE}" create secret generic ${SECRETNAME} \
    --from-literal=endpoint=${ENDPOINT} \
    --from-literal=region=${REGION} \
    --from-literal=bucketnames=${LOKI_BUCKET_NAME} \
    --from-literal=AWS_ACCESS_KEY_ID=${AWS_ACCESS_KEY_ID} \
    --from-literal=access_key_secret=${AWS_SECRET_ACCESS_KEY}
----
