// Module included in the following assemblies:
//
// * serverless/serving-creating-managing-apps.adoc

[id="interacting-serverless-apps-http2-gRPC_{context}"]
= Interacting with a serverless application that uses HTTP2 or gRPC

{ServerlessProductName} supports only insecure or edge-terminated routes.
Insecure or edge-terminated routes do not support HTTP2 on {product-title}.
These routes also do not support gRPC because gRPC is transported by HTTP2.

If you use HTTP2 or gRPC protocols in your serverless application, you must call the application using the ingress gateway directly.
To do this you must find the ingress gateway's public address, and the application's URL.

.Procedure

. Find the application URL by entering:
+
[source,terminal]
----
$ oc get ksvc <service_name>
----
+
.Example output
[source,terminal]
----
NAME            URL                                                                                       LATESTCREATED         LATESTREADY           READY     REASON
event-display   http://event-display-default.apps.ci-ln-jpht6ft-d5d6b.origin-ci-int-aws.dev.rhcloud.com   event-display-jhv9g   event-display-jhv9g   True
----

. Find the ingress gateway's public address:
+
[source,terminal]
----
$ oc -n knative-serving-ingress get svc kourier
----
+
.Example output:
+
[source,terminal]
----
NAME      TYPE           CLUSTER-IP     EXTERNAL-IP                                                               PORT(S)                      AGE
kourier   LoadBalancer   172.30.92.61   ac7dce4468c79425eb748fe3190ffffc-1619071527.us-east-1.elb.amazonaws.com   80:32107/TCP,443:30284/TCP   145m
----
+
The public address is surfaced in the `EXTERNAL-IP` field.
In this case, it would be `ac7dce4468c79425eb748fe3190ffffc-1619071527.us-east-1.elb.amazonaws.com`.

. Manually set the host header of your HTTP request to the application’s host, but direct the request itself against the public address of the ingress gateway.
+
.Example command
[source,terminal]
----
$ curl -H "Host: event-display-default.apps.ci-ln-jpht6ft-d5d6b.origin-ci-int-aws.dev.rhcloud.com" ac7dce4468c79425eb748fe3190ffffc-1619071527.us-east-1.elb.amazonaws.com
----
+
.Example output
[source,terminal]
----
Hello Serverless!
----
// didn't work for me? Just no output.
+
You can also make a gRPC request by setting the authority to the application’s host, while directing the request against the ingress gateway directly:
+
[source,yaml]
----
grpc.Dial(
    "a83e86291bcdd11e993af02b7a65e514-33544245.us-east-1.elb.amazonaws.com:80",
    grpc.WithAuthority("hello-default.example.com:80"),
    grpc.WithInsecure(),
)
----
+
[NOTE]
====
Ensure that you append the respective port, 80 by default, to both hosts as shown in the previous example.
====
