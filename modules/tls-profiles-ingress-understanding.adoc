// Module included in the following assemblies:
//
// * security/tls-profiles.adoc

[id="tls-profiles-ingress-understanding_{context}"]
= Understanding TLS profiles for the Ingress Controllers

You can use a TLS (Transport Layer Security) profile to define which TLS ciphers are required by the Ingress Controllers. 

A TLS profile defines the TLS ciphers that the Kubernetes API server must use when connecting with the kubelet to protect communication between the kubelet and the Kubernetes API server.

You can specify one of the following TLS security profile types:

[NOTE]
====
When using the Old, Intermediate, and Modern profile types, the effective profile configuration is subject to change between releases. For example, given a specification to use the Intermediate profile deployed on release X.Y.Z, an upgrade to release X.Y.Z+1 may cause a new profile configuration to be applied to the Ingress controller, resulting in a rollout.
====

* `Old`. This is a predefined profile intended for use with legacy clients or libraries. The profile is based on link:https://wiki.mozilla.org/Security/Server_Side_TLS#Recommended_configurations[recommended configurations].
+
The `Old` profile uses the following TLS cipher suites and requires a minimum TLS version of 1.1:
+
--
* TLS_AES_128_GCM_SHA256
* TLS_AES_256_GCM_SHA384
* TLS_CHACHA20_POLY1305_SHA256
* ECDHE-ECDSA-AES128-GCM-SHA256
* ECDHE-RSA-AES128-GCM-SHA256
* ECDHE-ECDSA-AES256-GCM-SHA384
* ECDHE-RSA-AES256-GCM-SHA384
* ECDHE-ECDSA-CHACHA20-POLY1305
* ECDHE-RSA-CHACHA20-POLY1305
* DHE-RSA-AES128-GCM-SHA256
* DHE-RSA-AES256-GCM-SHA384
* DHE-RSA-CHACHA20-POLY1305
* ECDHE-ECDSA-AES128-SHA256
* ECDHE-RSA-AES128-SHA256
* ECDHE-ECDSA-AES128-SHA
* ECDHE-RSA-AES128-SHA
* ECDHE-ECDSA-AES256-SHA384
* ECDHE-RSA-AES256-SHA384
* ECDHE-ECDSA-AES256-SHA
* ECDHE-RSA-AES256-SHA
* DHE-RSA-AES128-SHA256
* DHE-RSA-AES256-SHA256
* AES128-GCM-SHA256
* AES256-GCM-SHA384
* AES128-SHA256
* AES256-SHA256
* AES128-SHA
* AES256-SHA
* DES-CBC3-SHA
--

* `Intermediate`. This is a predefined profile, which is the default TLS security profile for the kubelet. The profile is based on link:https://wiki.mozilla.org/Security/Server_Side_TLS#Recommended_configurations[recommended configurations].
+
The `Intermediate` profile uses the following TLS cipher suites and requires a minimum TLS version of 1.2:
+
--
* TLS_AES_128_GCM_SHA256
* TLS_AES_256_GCM_SHA384
* TLS_CHACHA20_POLY1305_SHA256
* ECDHE-ECDSA-AES128-GCM-SHA256
* ECDHE-RSA-AES128-GCM-SHA256
* ECDHE-ECDSA-AES256-GCM-SHA384
* ECDHE-RSA-AES256-GCM-SHA384
* ECDHE-ECDSA-CHACHA20-POLY1305
* ECDHE-RSA-CHACHA20-POLY1305
* DHE-RSA-AES128-GCM-SHA256
* DHE-RSA-AES256-GCM-SHA384
--

// Modern ciphers from https://github.com/openshift/api/blob/master/config/v1/types_tlssecurityprofile.go#L86-L103
* `Modern` This is a predefined profile for use with modern clients that have no need for backwards compatibility.
+
The `Modern` profile uses the following TLS cipher suites and requires a minimum TLS version of 1.3:
+
--
* TLS_AES_128_GCM_SHA256
* TLS_AES_256_GCM_SHA384
* TLS_CHACHA20_POLY1305_SHA256
--
+
[IMPORTANT]
====
The HAProxy Ingress controller image does not support TLS `1.3` and because the `Modern` profile requires TLS `1.3`, it is not supported. The Ingress Operator converts the `Modern` profile to `Intermediate`.

The Ingress Operator also converts the TLS `1.0` of an `Old` or `Custom` profile to `1.1`, and TLS `1.3` of a `Custom` profile to `1.2`.
====

* `Custom`. This profile allows you to define the TLS ciphers and version to use.
+
[WARNING]
====
Use caution when using a `Custom` profile, because invalid configurations can cause problems.
====

