// Module included in the following assemblies:
//
// * security/zero_trust_workload_identity_manager/zero-trust-manager-spire-federation.adoc

:_mod-docs-content-type: PROCEDURE
[id="zero-trust-manager-install-ztwim-operator_{context}"]
= Installing {zero-trust-full}

[role="_abstract"]
Install the {zero-trust-full} on both clusters to securely manage workload identities. This installation is required to support federation and maintains proper Operator functionality across your environment.

.Prerequisites

* Access to two {product-title} 4.18+ clusters

* Must have `cluster-admin` access on both clusters

* The `oc` CLI is installed

* The `envsubst` variable is available.

.Procedure

. Run the following code on both clusters:
+
[source,yaml]
----
$ oc apply -f - <<EOF
---
# 1. Namespace for the operator
apiVersion: v1
kind: Namespace
metadata:
  name: zero-trust-workload-identity-manager
  labels:
    openshift.io/cluster-monitoring: "true"

---
# 2. OperatorGroup
apiVersion: operators.coreos.com/v1
kind: OperatorGroup
metadata:
  name: zero-trust-workload-identity-manager-og
  namespace: zero-trust-workload-identity-manager
spec:
  upgradeStrategy: Default

---
# 3. Subscription
apiVersion: operators.coreos.com/v1alpha1
kind: Subscription
metadata:
  name: openshift-zero-trust-workload-identity-manager
  namespace: zero-trust-workload-identity-manager
spec:
  source: redhat-operators
  sourceNamespace: openshift-marketplace
  name: openshift-zero-trust-workload-identity-manager
  channel: stable-v1
EOF
----

. Wait for the Operator to install. You can watch the installation process by running the following command:
+
[source,terminal]
----
$ oc get csv -n zero-trust-workload-identity-manager -w
----
+
The following is an example of the expected output once the installation process is complete:
+
[source,terminal]
----
NAME                                        DISPLAY                               VERSION  PHASE
zero-trust-workload-identity-manager.v1.0.0 Zero Trust Workload Identity Manager  1.0.0    Succeeded
----

. Press `Ctrl+C` once `Succeeded` displays.

.Verification

* To verify that the Operator pod is running, run the followin command:
+
[source,terminal]
----
$ oc get pods -n zero-trust-workload-identity-manager
----
+
The following is an example verification that the pods are running.
+
[source,terminal]
----
NAME                                                          READY  STATUS    RESTARTS    AGE
zero-trust-workload-identity-manager-controller-manager-xxxxx 1/1    Running   0           2m
----

