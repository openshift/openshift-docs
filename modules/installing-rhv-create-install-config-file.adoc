// Module included in the following assemblies:
//
// * installing/installing_rhv/installing-rhv-custom.adoc

[id="installing-rhv-installing-rhv-create-install-config-file_{context}"]
= Creating an installation configuration file

To create the `install-config.yaml` configuration file without installing an {product-title} cluster, run the installer with the `create install-config` subcommand.

.Procedure

. On the installer machine, go to the directory that has the installation program and run it.
+
----
$ sudo ./openshift-install create install-config --dir=assets-dir <1>
----
<1> For `<assets-dir>`, specify a new directory name for the installation program to create and save files. For example, name the asset directory `my-custom-config`.
+
. Respond to the following installation program prompts for information.
+
[NOTE]
====
* For more information about a prompt, enter kbd:[?].
* The order of the prompts might vary from the order shown here.
====
+
.. For `SSH Public Key`, select the public key on the installer machine, such as `~/.ssh/id_rsa.pub`, that will be used to authenticate connections with the new {product-title} cluster. Only the owner of this public key can ssh to the new nodes. Optionally, after the installation, you can add and replace keys using the Machine Config Operator (MCO).
.. For `Platform`, select `ovirt`.
.. For `Enter oVirt's API endpoint URL`, enter the URL of the {rh-virtualization} API using this format:
+
----
<ovirt-admin>:<password> \ <1>
https://<engine-fqdn>/ovirt-engine/api <2>
----
<1> For `<ovirt-admin>` and `<password>`, specify the username and password of an {rh-virtualization} user with `SuperUser` or `ClusterAdmin` privileges.
<2> For `<engine-fqdn>`, specify the fully qualified domain name of the {rh-virtualization} environment.
+
For example:
+
----
admin:pw123 https://rhv-env.virtlab.example.com/ovirt-engine/api
----
+
.. For `Is the installed oVirt certificate trusted?`, enter `Yes` since you have already set up a CA certificate.
.. For `oVirt's CA bundle`, if you entered `Yes` for the preceding question, copy the certificate from `/etc/pki/ca-trust/source/anchors/ca.pem` and paste it here. Then, press `Enter` twice. Otherwise, if you entered `No` for the preceding question, this question does not appear.
.. For `Enter the oVirt engine username`, enter the {rh-virtualization} admin user name and profile using this format:
+
----
<username>@<profile> <1>
----
<1> For `<username>`, specify the username of an {rh-virtualization} admin user with `SuperUser` or `ClusterAdmin` privileges.. For `<profile>`, specify the login profile. To get the login profile, visit the login screen for the {rh-virtualization} Administration Portal and review the dropdown list of login profiles. Together, the user name and profile should look similar to this example:
+
----
admin@internal
----
+
.. For `Enter password`, enter the {rh-virtualization} admin password.
.. For `Select the oVirt cluster`, select the cluster for installing {product-title}.
.. For `Select the oVirt storage domain`, select the storage domain for installing {product-title}.
.. For `Select the oVirt network`, select a virtual network that has access to the {rh-virtualization} Manager REST API.
.. For `Enter the internal API Virtual IP`, enter the static IP address you set aside for the cluster’s REST API.
.. For `Enter the internal DNS Virtual IP`, enter the static IP address you set aside for the cluster’s internal DNS service.
.. For `Enter the ingress IP`, enter the static IP address you reserved for the wildcard apps domain.
.. For `Base domain`, enter the base domain of the {product-title} cluster. If this cluster is exposed to the outside world, this must be a valid domain recognized by DNS infrastructure. For example, enter: `virtlab.example.com`
.. For `Cluster name`, enter the name of the cluster. For example, `ocp-cluster`. Use cluster name from the the externally registered/resolvable DNS entries you created for the {product-title} REST API and apps domain names. The installation program also gives this name to the cluster in the {rh-virtualization} environment.
.. For `Pull secret`, copy the pull secret from the `pull-secret.txt` file you downloaded earlier and paste it here. You can also get a copy of the same pull secret from the link:https://cloud.redhat.com/openshift/install/pull-secret[Pull Secret] page on the {cloud-redhat-com} website.

When you finish responding to the prompts, the installer creates the `install-config.yaml` configuration file.
