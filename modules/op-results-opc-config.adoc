// This module is included in the following assembly:
//
// * records/using-tekton-results-for-openshift-pipelines-observability.adoc

:_mod-docs-content-type: PROCEDURE
[id="results-opc-config_{context}"]
= Configuring the opc utility for querying results by pipeline run and task run names

[role="_abstract"]
Before you can query results from {tekton-results} by pipeline run and task run names, you must configure the `opc` utility.

.Prerequisites

* You installed the `opc` utility.
* You logged on to the {OCP} cluster by using the {oc-first}.

.Procedure

. Create an authentication token for the {tekton-results} API by entering the following command:
+
[source,terminal]
----
$ oc create token <service_account>
----
+
Replace `<service_account>` with the name of an {OCP} service account that has read access to the namespaces where {pipelines-shortname} ran the pipeline runs and task runs.
+
Save the string that this command outputs.

. Complete one of the following steps:

** Configure the `opc` utility interactively by entering the following command:
+
[source,terminal]
----
$ opc results config set
----
+
Reply to the prompts that the utility displays. For `Token`, enter the authentication token that you created.

** Configure the `opc` utility from a command by entering the following command:
+
[source,terminal]
----
$ opc results config set --host="https://tekton-results.example.com" --token="<token>"
----
+
Replace the host name with the fully qualified domain name of your {tekton-results} route. Replace `<token>` with the authentication token that you generated.

.Verification

* You can view the configuration that you set for the `opc` utility by entering the following command:
+
[source,terminal]
----
$ opc results config view
----
+
.Example output
[source,terminal]
----
api-path: ""
apiVersion: results.tekton.dev/v1alpha2
host: https://tekton-results.openshiftapps.com
insecure-skip-tls-verify: "true"
kind: Client
token: sha256~xyz
----
