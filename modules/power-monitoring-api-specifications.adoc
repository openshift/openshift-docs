// Automatically generated by 'kepler.system.sustainable.computing.io'. Do not edit.
:_mod-docs-content-type: REFERENCE
[id="power-monitoring-api-specifications_{context}"]
= PowerMonitoring API specifications

PowerMonitor


PowerMonitor is the schema for the PowerMonitor API.

[cols="1,1,4,1", options="header"]
|===
| Name
| Type
| Description
| Required

| *apiVersion*
| string
| `kepler.system.sustainable.computing.io/v1alpha1`
| true

| *kind*
| string
| `PowerMonitor`
| true

| *metadata*
| object
| Refer to the Kubernetes API documentation for the fields of the `metadata` field.
| true

| *spec*
| object
| `PowerMonitorSpec` defines the desired state of the Power Monitor.
| false

| *status*
| object
| `PowerMonitorStatus` defines the observed state of the Power Monitor.
| false
|===

---

== PowerMonitor.spec

`PowerMonitorSpec` defines the desired state of the Power Monitor.

[cols="1,1,4,1", options="header"]
|===
| Name
| Type
| Description
| Required

| *kepler*
| object
| Defines the configuration for the Kepler components.
| true
|===

---

== PowerMonitor.spec.kepler


[cols="1,1,4,1", options="header"]
|===
| Name
| Type
| Description
| Required

| *config*
| object
| Defines the Kepler ConfigMap settings.
| false

| *deployment*
| object
| Defines the Kepler DaemonSet deployment settings.
| false
|===

---

== PowerMonitor.spec.kepler.config

[cols="1,1,4,1", options="header"]
|===
| Name
| Type
| Description
| Required

| *additionalConfigMaps*
| []object
| A list of ConfigMap names that will be merged with the default ConfigMap. These must exist in the same namespace as the PowerMonitor components.
| false

| `*logLevel*`
| string
|
The level of logs to expose.

_Default_: `info`
| false

| `*maxTerminated*`
| integer
|
Controls terminated workload tracking. A negative value tracks unlimited workloads, zero disables tracking, and a positive value tracks the top N workloads by energy consumption.

_Format_: `int32`

_Default_: `500`
| false

| *metricLevels*
| []enum
|
Specifies which metric levels to export. Valid values are combinations of `node`, `process`, `container`, `vm`, and `pod`.

_Default_: `[node, pod, vm]`
| false

| *sampleRate*
| string
|
The interval for monitoring resources (e.g., "5s", "1m"). Must be a positive duration.

_Default_: `5s`
| false

| *staleness*
| string
|
How long to wait before considering calculated power values as stale (e.g., "500ms", "5s"). Must be a positive duration.

_Default_: `500ms`
| false
|===

---

== PowerMonitor.spec.kepler.config.additionalConfigMaps[index]

`ConfigMapRef` defines a reference to a ConfigMap.

[cols="1,1,4,1", options="header"]
|===
| Name
| Type
| Description
| Required

| *name*
| string
| The name of the ConfigMap.
| true
|===

---

== PowerMonitor.spec.kepler.deployment

[cols="1,1,4,1", options="header"]
|===
| Name
| Type
| Description
| Required

| *nodeSelector*
| map[string]string
|
Defines which nodes the pod is scheduled on.

_Default_: `map[kubernetes.io/os:linux]`
| false

| *secrets*
| []object
| Secrets to be mounted in the power monitor containers.
| false

| *security*
| object
| If set, defines the security mode and allowed `SA` names.
| false

| *tolerations*
| []object
|
If specified, defines the pod's tolerations.

_Default_: `[map[operator:Exists]]`
| false
|===

---

== PowerMonitor.spec.kepler.deployment.secrets[index]

`SecretRef` defines a reference to a Secret to be mounted.

Mount Path Cautions:
Exercise caution when setting mount paths for secrets. Avoid mounting secrets to critical system paths
that may interfere with Kepler's operation or container security:
- /etc/kepler - Reserved for Kepler configuration files
- /sys, /proc, /dev - System directories that should remain read-only
- /usr, /bin, /sbin, /lib - System binaries and libraries
- / - Root filesystem

[cols="1,1,4,1", options="header"]
|===
| Name | Type | Description | Required

| *mountPath*
| string
| The path where the secret should be mounted in the container.
| true

| *name*
| string
| The name of the secret in the same namespace as the Kepler deployment.
| true

| *readOnly*
| boolean
|
Specifies whether the secret should be mounted as read-only.

_Default_: `true`
| false
|===

---

== PowerMonitor.spec.kepler.deployment.security

If set, defines the security mode and allowed `SA` names.

[cols="1,1,4,1", options="header"]
|===
| Name
| Type
| Description
| Required

| *allowedSANames*
| []string
| A list of service account names that are allowed to access the metrics endpoint.
| false

| *mode*
| enum
|
The security mode.

_Enum_: `none`, `rbac`
| false
|===

---

== PowerMonitor.spec.kepler.deployment.tolerations[index]

The pod this toleration is attached to tolerates any taint that matches the triple `<key,value,effect>` using the matching `<operator>`.

[cols="1,1,4,1", options="header"]
|===
| Name
| Type
| Description
| Required

| *effect*
| string
| The taint effect to match. Allowed values are `NoSchedule`, `PreferNoSchedule`, and `NoExecute`. Empty means match all effects.
| false

| *key*
| string
| The taint key that the toleration applies to. Empty means match all taint keys.
| false

| *operator*
| string
| A key's relationship to the value. Valid operators are `Exists` and `Equal`. Defaults to `Equal`.
| false

| *tolerationSeconds*
| integer
|
The period of time the toleration (with effect `NoExecute`) tolerates the taint. If not set, it tolerates the taint forever.

_Format_: `int64`
| false

| *value*
| string
| The taint value the toleration matches. If the operator is `Exists`, the value should be empty.
| false
|===

---

== PowerMonitor.status

`PowerMonitorStatus` defines the observed state of the Power Monitor.

[cols="1,1,4,1", options="header"]
|===
| Name
| Type
| Description
| Required

| *conditions*
| []object
| Represents the latest available observations of the power-monitor.
| true

| *kepler*
| object
| Defines the observed state of the Kepler components.
| false
|===

---

== PowerMonitor.status.conditions[index]

[cols="1,1,4,1", options="header"]
|===
| Name
| Type
| Description
| Required

| *lastTransitionTime*
| string
|
The last time the condition transitioned from one status to another.

_Format_: `date-time`
| true

| *message*
| string
| A human-readable message indicating details about the transition.
| true

| *reason*
| string
| A programmatic identifier for the condition's last transition.
| true

| *status*
| string
| The status of the condition, which can be one of `True`, `False`, or `Unknown`.
| true

| *type*
| string
| The type of Kepler condition, such as `Reconciled` or `Available`.
| true

| *observedGeneration*
| integer
|
The `.metadata.generation` that the condition was set based upon.

_Format_: `int64`

_Minimum_: 0
| false
|===

---

== PowerMonitor.status.kepler

[cols="1,1,4,1", options="header"]
|===
| Name
| Type
| Description
| Required

| *currentNumberScheduled*
| integer
|
The number of nodes running at least one `power-monitor` pod as intended.

_Format_: `int32`
| true

| *desiredNumberScheduled*
| integer
|
The total number of nodes that should be running the `power-monitor` pod.

_Format_: `int32`
| true

| *numberMisscheduled*
| integer
|
The number of nodes running the `power-monitor` pod that are not supposed to.

_Format_: `int32`
| true

| *numberReady*
| integer
|
The number of nodes that should be running the `power-monitor` pod and have at least one pod with a `Ready` condition.

_Format_: `int32`
| true

| *numberAvailable*
| integer
|
The number of nodes that should be running the `power-monitor` pod and have at least one pod running and available.

_Format_: `int32`
| false

| *numberUnavailable*
| integer
|
The number of nodes that should be running the `power-monitor` pod and have no pods running and available.

_Format_: `int32`
| false

| *updatedNumberScheduled*
| integer
|
The total number of nodes that are running an updated `power-monitor` pod.

_Format_: `int32`
| false
|===