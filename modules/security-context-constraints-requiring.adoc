[id="requiring-scc"]
= Requiring a security context constraint

You can configure a required SCC to be applied to workloads.
This is useful in scenarios where you either want to pin to a concrete SCC
or prevent preempting your required SCC with any other SCC available in the cluster.

This is accomplished by setting a pod manifest annotation named `openshift.io/required-scc`
whose value contains the name of the SCC that is supposed to be pinned.

This annotation can be set on any resource that allows setting a pod manifest template,
i.e. `Deployment` or `DaemonSet`.

The following is an example `openshift.io/required-scc` annotation:

[source,yaml]
----
apiVersion: config.openshift.io/v1
kind: Deployment
apiVersion: apps/v1
spec:
...
  template:
    metadata:
      annotations:
        openshift.io/required-scc: "my-scc" <1>
...
----
<1> Specifies the required SCC name to be pinned to the deployment

The required SCC must be applicable to the workload using the same rules as all other SCCs in the system.
An SCC is considered applicable if the requesting user creating the pod or the pod's service account
have `use` permissions for the required SCC in the requested pod's namespace.

[NOTE]
====
If the requested SCC does not exist in the cluster, admission will fail with an error.

If the requested SCC does exist, any other SCC available in the system is ignored
and the requested SCC is the only one being considered for admission.

If the SCC not applicable to the workload, admission will fail with an error.

Changing the annotation is allowed if it is changed in the underlying pod template,
causing the old pod to be deleted and a new pod to be created.
However admission will fail if the annotation will be changed directly in the live pod's manifest.
====
