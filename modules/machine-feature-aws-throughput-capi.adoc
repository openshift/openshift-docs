// Module included in the following assemblies:
//
// * machine_management/cluster_api_machine_management/cluster_api_provider_configurations/cluster-api-config-options-aws.adoc

:_mod-docs-content-type: PROCEDURE
[id="machine-feature-aws-throughput-capi_{context}"]
= Configuring storage throughput for gp3 drives

[role="_abstract"]
You can improve performance for high traffic services by increasing the throughput of gp3 storage volumes in an {aws-short} cluster. You can configure the storage throughput for the root volume, non root volumes, or both.

include::snippets/apply-machine-configuration-method.adoc[tag=method-machine-template]

.Prerequisites

* You use gp3 storage volume(s).

.Procedure

* On the machine template in which you want to configure throughput, add the `throughput` parameter:
+
[source,yaml]
----
apiVersion: infrastructure.cluster.x-k8s.io/v1beta2
kind: AWSMachineTemplate
# ...
spec:
  template:
    spec:
      nonRootVolumes:
      - throughput: <throughput_value>
      rootVolume:
        throughput: <throughput_value>
# ...
----
where:

`<throughput_value>`:: Specifies a value in MiB/s between 125 and 2,000. This value can only be modified on gp3 volumes. The default value is 125. You can set the throughput value for the root volume and non root volumes separately.