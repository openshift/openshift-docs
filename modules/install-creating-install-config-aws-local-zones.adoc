// Module included in the following assemblies:
// * installing/installing_aws/installing-aws-localzone.adoc

:_mod-docs-content-type: PROCEDURE
[id="install-creating-install-config-aws-local-zones_{context}"]
= Modifying an installation configuration file to use {aws-service-name-full}

Modify an `install-config.yaml` file to include {aws-service-name-full}.

.Prerequisites

* You have configured an AWS account.
* You added your AWS keys and region to your local AWS profile by running `aws configure`.
* You have read the configuration limitations that apply when you specify the installation program to
  automatically create subnets for your {product-title} cluster. See the section named "Cluster limitations in {aws-service-name-full}".
* You opted in to the {aws-service-name-single} group for each zone.
* You created an `install-config.yaml` file by using the procedure "Creating the installation configuration file".

.Procedure

. Modify the `install-config.yaml` file by specifying {aws-service-name-single} names in the `platform.aws.zones` property
  of the edge compute pool. For example:
+
[source,yaml]
ifdef::aws-localzones[]
----
...
platform:
  aws:
    region: <region_name> <1>
compute:
- name: edge
  platform:
    aws:
      zones: <2>
        - <local_zone_name>
#...
----
endif::aws-localzones[]
ifdef::aws-wavelength[]
----
...
platform:
  aws:
    region: <region_name> <1>
compute:
- name: edge
  platform:
    aws:
      zones: <2>
        - <wavelength_zone_name>
#...
----
endif::aws-wavelength[]
<1> The AWS Region name.
<2> The list of {aws-service-name-single} names that must belong in the same AWS Region.
+
.Example of a configuration to install a cluster in the `us-west-2` AWS Region that extends edge nodes to {aws-service-name-full} in `Los Angeles` and `Las Vegas` locations.
+
ifdef::aws-localzones[]
[source,yaml]
----
apiVersion: v1
baseDomain: example.com
metadata:
  name: cluster-name
platform:
  aws:
    region: us-west-2
compute:
- name: edge
  platform:
    aws:
      zones:
        - us-west-2-lax-1a
        - us-west-2-lax-1b
        - us-west-2-las-1a
pullSecret: '{"auths": ...}'
sshKey: 'ssh-ed25519 AAAA...'
#...
----
endif::aws-localzones[]
ifdef::aws-wavelength[]
[source,yaml]
----
apiVersion: v1
baseDomain: example.com
metadata:
  name: cluster-name
platform:
  aws:
    region: us-west-2
compute:
- name: edge
  platform:
    aws:
      zones:
        - us-west-2-wl1-lax-wlz-1
        - us-west-2-wl1-las-wlz-1
pullSecret: '{"auths": ...}'
sshKey: 'ssh-ed25519 AAAA...'
#...
----
endif::aws-wavelength[]

. Deploy your cluster.
