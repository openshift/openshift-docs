// Module included in the following assemblies:
//
// * configuring/cluster-logging-collector.adoc


:_newdoc-version: 2.18.4
:_template-generated: 2025-08-05
:_mod-docs-content-type: PROCEDURE

[id="configuring-the-collector-to-listen-for-connections-as-a-syslog-server_{context}"]
= Configuring the collector to listen for connections as a syslog server

You can configure your log collector to collect journal format infrastructure logs by specifying `syslog` as a receiver input in the `ClusterLogForwarder` custom resource (CR).

:feature-name: Syslog receiver input
include::snippets/logging-http-sys-input-support.adoc[]

Prerequisites

* You have administrator permissions.
* You have installed the {oc-first}.
* You have installed the {clo}.

.Procedure

. Grant the `collect-infrastructure-logs` cluster role to the service account by running the following command:
+
.Example binding command
[source,terminal]
----
$ oc adm policy add-cluster-role-to-user collect-infrastructure-logs -z logcollector
----

. Modify the `ClusterLogForwarder` CR to add configuration for the `syslog` receiver input:
+
.Example `ClusterLogForwarder` CR
[source,yaml]
----
apiVersion: observability.openshift.io/v1
kind: ClusterLogForwarder
metadata:
  name: <clusterlogforwarder_name> #<1>
  namespace: <namespace>
# ...
spec:
  serviceAccount:
    name: <service_account_name> # <1>
  inputs:
    - name: syslog-receiver # <2>
      type: receiver
      receiver:
        type: syslog # <3>
        port: 10514 # <4>
  outputs:
  - name: <output_name>
    lokiStack:
      authentication:
        token:
          from: serviceAccount
      target:
        name: logging-loki
        namespace: openshift-logging
    tls: # <5>
      ca:
        key: service-ca.crt
        configMapName: openshift-service-ca.crt
    type: lokiStack
# ...      
  pipelines: # <6>
    - name: syslog-pipeline
      inputRefs:
        - syslog-receiver
      outputRefs:
        - <output_name>
# ...
----
<1> Use the service account that you granted the `collect-infrastructure-logs` permission in the previous step.
<2> Specify a name for your input receiver.
<3> Specify the input receiver type as `syslog`.
<4> Optional: Specify the port that the input receiver listens on. This must be a value between `1024` and `65535`.
<5> If TLS configuration is not set, the default certificates will be used. For more information, run the command `oc explain clusterlogforwarders.spec.inputs.receiver.tls`.
<6> Configure a pipeline for your input receiver.

. Apply the changes to the `ClusterLogForwarder` CR by running the following command:
+
[source,terminal]
----
$ oc apply -f <filename>.yaml
----

. Verify that the collector is listening on the service that has a name in the `<clusterlogforwarder_resource_name>-<input_name>` format by running the following command:
+
[source,terminal]
----
$ oc get svc
----
+
.Example output
+
[source,terminal,options="nowrap"]
----
NAME                        TYPE        CLUSTER-IP       EXTERNAL-IP   PORT(S)            AGE
collector                   ClusterIP   172.30.85.239    <none>        24231/TCP          33m
collector-syslog-receiver   ClusterIP   172.30.216.142   <none>        10514/TCP          2m20s
----
+
In this example output, the service name is `collector-syslog-receiver`.

.Verification

. Extract the certificate authority (CA) certificate file by running the following command:
+
[source,terminal]
----
$ oc extract cm/openshift-service-ca.crt -n <namespace>
----
+
[NOTE]
====
If the CA in the cluster where the collectors are running changes, you must extract the CA certificate file again.
====

. As an example, use the `curl` command to send logs by running the following command:
+
[source,terminal]
----
$ curl --cacert <openshift_service_ca.crt> collector-syslog-receiver.<namespace>.svc:10514  “test message”
----
+
Replace <openshift_service_ca.crt> with the extracted CA certificate file.

////
. As an example, send logs by running the following command:
+
[source,terminal]
----
$ logger --tcp --server  collector-syslog-receiver.<ns>.svc:10514  “test message”
----
////
