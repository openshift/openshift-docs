// Module included in the following assemblies:
//
// * service-mesh-docs-main/metrics/ossm-metrics.adoc

:_mod-docs-content-type: PROCEDURE
[id="ossm-config-openshift-monitoring-only_{context}"]
= Configuring OpenShift Monitoring with Service Mesh

[role="_abstract"]
You can integrate {SMProductName} with user-workload monitoring to enable observability in your service mesh. User-workload monitoring provides access to essential built-in tools and is required to run Kiali, the dedicated console for {istio}.

.Prerequisites

* You have installed the {SMProductName} Operator.

* You have enabled the user-workload monitoring.
+
[NOTE]
====
You can enable user-workload monitoring by applying the `ConfigMap` change for metrics integration. For more information, see link:https://docs.redhat.com/en/documentation/openshift_container_platform/latest/html/monitoring/configuring-user-workload-monitoring[Configuring user workload monitoring].
====

.Procedure

. Create a `ServiceMonitor` resource that monitors the {istio} control plane, similar to the following example:
+
[source,yaml]
----
apiVersion: monitoring.coreos.com/v1
kind: ServiceMonitor
metadata:
  name: istiod-monitor
  namespace: istio-system
spec:
  targetLabels:
  - app
  selector:
    matchLabels:
      istio: pilot
  endpoints:
  - port: http-monitoring
    interval: 30s
----

. To validate that the `ServiceMonitor` resource is monitoring the {istio} control plane, go to the {ocp-short-name} Console, navigate to *Observe* -> *Metrics*, and run the query `istio_requests_total`. Confirm that the metrics for the {istio} request are displayed.
+
[NOTE]
====
The **Metrics** implementation can take a few minutes for the query to return results.
====
