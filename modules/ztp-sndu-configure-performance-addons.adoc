// Module included in the following assemblies:
//
// * *scalability_and_performance/ztp-configuring-single-node-cluster-deployment-during-installation.adoc

:_content-type: CONCEPT
[id="ztp-sndu-configure-performance-addons_{context}"]
= Configure performance addons

This is a key configuration for the single node distributed unit (DU).  Many of the real time capabilities
and service assurance is configured here.  Use the following example:

[source,yaml]
----
apiVersion: performance.openshift.io/v1
kind: PerformanceProfile
metadata:
    name: perfprofile-policy
spec:
    additionalKernelArgs:
        - idle=poll
    cpu:
        isolated: 2-19,22-39 <1>
        reserved: 0-1,20-21     <2>
    hugepages:
        defaultHugepagesSize: 1G
        pages:
            - count: 32 <3>
              size: 1G <4>
    machineConfigPoolSelector:
        pools.operator.machineconfiguration.openshift.io/master: ""
    net:
        userLevelNetworking: true <5>
    nodeSelector:
        node-role.kubernetes.io/master: ""
    numa:
        topologyPolicy: restricted
    realTimeKernel:
        enabled: true    <6>
----
<1> Set the isolated CPUs. Make sure the HT pairs all match.
<2> Set the reserved CPUs. In this case, a hyperthreaded pair was allocated on `NUMA 0` and a pair on `NUMA 1`.
<3> Set the huge page size.
<4> Set the huge page number.
<5> This setting isolates the CPUs from networking interrupts.
<6> This setting installs the real time linux kernel.
