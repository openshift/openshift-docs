// Module included in the following assemblies:

// * observability/cluster_observability_operator/ui_plugins/troubleshooting-ui-plugin.adoc

:_mod-docs-content-type: PROCEDURE
include::_attributes/common-attributes.adoc[]
[id="coo-troubleshooting-ii-plugin-using_{context}"]
= Using the {coo-full} Troubleshooting Panel UI plugin
:icons: font

.Prerequisites
* You have access to the {ocp-product-title} cluster as a user with the `cluster-admin` cluster role.
* You have logged in to the {ocp-product-title} web console.
* You have installed the {coo-full}.
* You have installed the {coo-full} troubleshooting UI plugin.

[NOTE]
====
The troubleshooting panel can display additional signals if the following Red Hat provided components are installed in their recommended namespace.

* **Logs:**
** `{ocp-product-title} Logging` (collection)
** `{ocp-product-title} Loki Operator` (store)
* **Network events:**
** `{ocp-product-title} Network observability` (collection)
** `{ocp-product-title} Loki Operator` (store)
* **Traces:** `{ocp-product-title} Distributed Tracing` (collection and store)
====

[NOTE]
====
Users with `ClusterRole/view` (for example `kube:admin`) will get the most complete results.
Other users will see more restricted graphs, showing only data that they have permission to see.
====

.Procedure
The **Troubleshooting Panel** is a side-panel that shows a graph of resources and signals related to the information displayed in the main console (in this example the `apiserver` Deployment).
You can use the troubleshooting panel on most console pages - resources, alerts, metrics, logs, traces, network observability and more.

. Open the Application Launcher {launch}, click the **Signal Correlation** menu item.
+
image::coo-troubleshooting-panel-link.png[Open panel]
+
. Click **Focus** to show a correlation graph starting from the resources or signals in the main console display (in this example the `apiserver` Deployment).
+
image::coo-troubleshooting-panel-graph.png[Troubleshooting Panel]
+
[arabic]
.. **Focus** will re-calculate the graph from the main console at any time.
.. {sync} refreshes the graph that is currently displayed.
.. The root (top) node represents the resource in the main console window.
.. First degree neighbors - directly related to the initial resource.
.. Second degree neighbors - indirectly related via first-degree neighbors.
+
. Clicking on a node opens the data in the main console. For example if we click on the Log node:

image::coo-troubleshooting-panel-log.png[Viewing Logs]

== Advanced controls

The **Advanced** button opens additional controls over the correlation search,
these are *experimental* and may change in a future release.
They provide access to additional features of the {korrel8r} upstream project that powers the correlation search.

image::coo-troubleshooting-panel-advanced.png[Advanced Controls]

. **Recent** The search is limited to recent results, by default in the last day.
. **Range** Allows searching an explicit date/time range in the past.
. **Distance** Searches up to the given distance from the starting point.
    Each correlation rule (edge in the graph) is a "step", the distance is the maximum number of steps.
. **Goal Class** Instead of a distance, select a goal: a resource or signal type.
    Searches for paths from the start to the goal type. The path length is not limited.
    See the {korrel8r} project documentation for more about correlation classes.
. **Query** The {korrel8r} query representing the starting point for the search.
    See the {korrel8r} project documentation for more about correlation queries.
    Clicking **Focus** will reset the query to reflect the current console page.
    Clicking **Sync** will re-run the current query and update the graph.
