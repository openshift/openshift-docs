// Module included in the following assemblies:
//
// * installation/installing-customizations-cloud.adoc

[id='installation-about-custom-{context}']
= About the custom installation

The custom installation is divided into four phases:

* Initialization, where you create and customize the installation configuration
file 
* Rendering, where you provide YAML files that describe further customizations
* Preparing, where the system creates assets based on the rendered data
* Launching, where you create the cluster in your cloud.

During initialization, you generate and customize a cluster configuration file that
defines high level configuration and topology and specifies your cloud provider
credentials. This configuration file contains a limited set of parameters that
most clusters require.

During rendering, you do a thing with a bunch of yaml files that allows you to
provide more customization to your cluster. You can specify ...

During the preparing phase, the assets that you render...

Finally, you launch the installation. The installer first creates the
infrastructure for the cluster, such as the load balancers, security groups, and
VPCs, and then creates an initial configuration on a bootstrap master node.
The bootstrap master then completes the configuration of the cluster by 
self-configuring and loading other components. By default, all the cluster nodes
run Red Hat CoreOS as the operating system.

After the installation and configuration process is complete, instructions for 
connecting to the cluster displays.

[discrete]
== Key concepts

Before you complete a customized installation, review the following key concepts.

[discrete]
=== Targets

The {product-title} installer operates on the notion of creating and destroying
targets. Similar to other tools that operate on a graph of dependencies, like
`make` and `systemd`, each target represents a subset of the dependencies in the
graph. The main target in the installer creates a cluster, but the other targets
allow the user to interrupt this process and use or modify the intermediate
artifacts, such as the the Kubernetes manifests that are installed into the
cluster. Only the immediate dependencies of a target are written to disk by the
installer, but you can run the installer multiple times to update more
dependencies.

The installer can create the following targets:

`install-config`::
The installation configuration contains the main parameters
for the installation process. This configuration provides you with more options
than the interactive prompts and comes pre-populated with default values.
`manifest-templates`:: These are the unrendered Kubernetes manifest templates
that `manifests` target uses. This target is unstable.
`manifests`::
You can generate the Kubernetes manifests that will be installed on the cluster.
This target is unstable.
`ignition-configs`::
These files contain the Ignition configurations for the bootstrap, master, and
worker machines.
`cluster`::
This target provisions the cluster and its associated infrastructure.

The following targets can be destroyed by the installer:

`cluster`::
This destroys the created cluster and its associated infrastructure.
`bootstrap`::
This destroys the bootstrap infrastructure.

[discrete]
=== Multiple invocations

Because you must run the installer to generate the assets that you need to
customize your installation, you can run the installer multiple times. The
installation state is stored in a hidden file in the asset directory which 
contains all of the intermediate artifacts. Storing the artifacts in this way
lets you pause installation and modify the intermediate artifacts.

For example, if you wanted to create a different number of worker machines, you
must first run the installer with the `install-config` target with the
`openshift-install create install-config` command. After you provide the required
parameters to the interactive installer, it writes the installation
configuration into the target directory. You can then modify the installation
configuration and run the installer with the `cluster` target with the
`openshift-install create cluster` command. The installer reads the install
configuration from disk, removes it from the target directory, and creates a
cluster from the provided configuration.
