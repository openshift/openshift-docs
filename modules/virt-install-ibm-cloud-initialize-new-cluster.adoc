// Module included in the following assemblies:
//
// * virt/install/virt-install-ibm-cloud-bm-nodes.adoc

:_mod-docs-content-type: PROCEDURE
[id="virt-install-ibm-cloud-initialize-new-cluster_{context}"]
= Initializing the new cluster configuration

[role="_abstract"]
Initialize the new cluster configuration using the {VirtProductName} Assisted Installer service and Samba on the Bastion virtual server instance.

.Procedure
. Log in to the *Assisted Installer* service.

. Create a new cluster. The new cluster has the following properties:

* *Cluster name*: The name used to identify the cluster under the base domain.
* *Base domain*: The domain used to provision the bare-metal nodes.

. Click *Next*.

. Click *Generate Discovery ISO*.

. Provide your public SSH RSA key when prompted. 

. Copy and save the generated `wget` command for the ISO file. This will be used later to connect to the cluster nodes.

. Install Samba server on the Bastion virtual server instance:
+
[source,terminal]
----
$ dnf install samba
----

. Enable Samba server on the Bastion virtual server instance:
+
[source,terminal]
----
$ systemctl enable smb --now
----

. Configure NAT rules for the Samba server:
+
[source,terminal]
----
$ firewall-cmd --permanent --zone=FedoraWorkstation --add-service=samba
$ firewall-cmd --reload
----

. Configure a root user password:
+
[source,terminal]
----
$ sudo smbpasswd -a root
----

. Create a share directory:
+
[source,terminal]
----
$ mkdir <share_directory>
----
+
Replace `<share_directory>` with the share directory name.

. Navigate to the share directory and download the Assisted Installer ISO file using the generated `wget` command.
