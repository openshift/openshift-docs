// Module included in the following assemblies:
//
// * configuration/reissue-internal-certificates.adoc

:_mod-docs-content-type: PROCEDURE
[id="reissue-internal-certificates-secured-cluster_{context}"]
= Reissuing internal certificates for secured clusters by using init bundles

Secured clusters contain the Collector, Sensor, Admission Control, and local Scanner components. These components use a built-in server certificate for authentication when communicating with other {rh-rhacs-first} components.

The {product-title-short} portal shows an information banner when the Central certificate is about to expire.

[NOTE]
====
The information banner only appears 15 days before the certificate expiry date.
====

.Prerequisites

* You have `write` permission for the `Administration` resource.
* You have the `Admin` user role to create init bundles.

[IMPORTANT]
====
Store the init bundle securely because it contains secrets.
You can use the same bundle on multiple secured clusters.
====

.Procedure

. Choose the appropriate method to generate an init bundle:

** To generate an init bundle by using the user interface (UI), perform the following steps:
... In the {product-title-short} portal, click *Platform Configuration* -> *Clusters*.
... Click *Init bundles*.
... To create a new init bundle, click *Create bundle*.
... Enter a name for the cluster init bundle.
... Choose the appropriate platform of the secured clusters:
+
The following values are associated with the platform of the secured clusters:

**** `OpenShift`
**** `EKS`
**** `AKS`
**** `GKE`

... Choose the appropriate installation method for the secured cluster services from the drop-down list:
+
The following values are associated with the installation method for the secured cluster services:

**** `Operator (recommended)`
**** `Helm chart`

... Click *Download*.
+
[IMPORTANT]
====
You can only download the YAML file once when you create an init bundle.
Store the YAML file securely because it contains secrets.
====

** To generate an init bundle by using the `roxctl` CLI, run the following command:
+
[source,terminal]
----
$ roxctl -e <endpoint> -p <admin_password> central \
  init-bundles generate --output-secrets <bundle_name> \
  init-bundle.yaml
----

. To create the necessary resources on each secured cluster, run the following command:
+
[source,terminal]
----
$ oc -n stackrox apply -f <init-bundle.yaml>
----