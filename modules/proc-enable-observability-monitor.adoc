
// Module included in the following assemblies:
//
// *observability/observability.adoc

:_mod-docs-content-type: PROCEDURE
[id="enable-observability-monitor_{context}"]
= Enabling observability in {prodname}

[role="_abstract"]
Enabling observability for {prodname} components configures integration between {prodname} components, including any gateways, and the Prometheus Operator installed in your {ocp} cluster when user monitoring is enabled.

This feature works by creating a set of ServiceMonitors and PodMonitors, which instruct Prometheus to scrape metrics from {prodname} and Gateway components. These scraped metrics are then used in the {prodname} example dashboards and alerts.

[IMPORTANT]
====
You must perform these steps on each {ocp} cluster that you want to use {prodname} on.
====

.Prerequisites

* You configured observability metrics.

.Procedure

. To enable observability for Kuadrant and any gateways, set `enable: true` in the `observability` section in your `Kuadrant` Custom Resource:
+
[source,bash]
----
apiVersion: kuadrant.io/v1beta1
kind: Kuadrant
metadata:
  name: kuadrant-sample
spec:
  observability:
    enable: true
----
+
When enabled, {prodname} creates ServiceMonitors and PodMonitors for its components in the {prodname} Operator namespace. A single set of monitors is also created in each Gateway namespace to scrape metrics from any gateways, and in the corresponding Gateway system namespace, in this case, the `istio-system` namespace.

.Verification

. Check the created monitors by running the following command:
+
[source,bash]
----
$ kubectl get servicemonitor,podmonitor -A -l kuadrant.io/observability=true
----
+
[NOTE]
====
You can delete and re-create monitors as required. Monitors are only ever created or deleted, and not updated or reverted. If you decide the default monitors are not suitable, you can set `enable: false` and create your own `ServiceMonitor` or `PodMonitor` definitions, or configure Prometheus directly.
====
