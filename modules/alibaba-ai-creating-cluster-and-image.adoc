// Module included in the following assemblies:
//
// * installing/installing_alibaba/installing-alibaba-assisted-installer.adoc

:_mod-docs-content-type: PROCEDURE
[id="create-cluster-and-image_{context}"]
= Creating a cluster and Discovery image in Assisted Installer

Create a cluster using {ai-full}, and download the generated ISO image. 

.Prerequisites

* You have access to an {product-title} account with cluster administrator access.
* You have installed the {oc-first}.

.Procedure

. Log in to the link:https://console.redhat.com/[Red Hat Hybrid Cloud Console].

. In the *Red Hat OpenShift* tile, select *OpenShift*. 

. In the menu, click *Clusters*.

. Click *Create cluster*.

. Click the *Datacenter* tab.

. Under *Assisted Installer*, click *Create cluster*.

. Set the cluster details:

.. Enter a designated identifier for the cluster in the *Cluster name* field. 
+
[NOTE]
====
The cluster resources are assigned with domain names under `$CLUSTER_NAME.$BASE_DOMAIN`. For example, if `developers.redhat.com` is the base domain, and `somecluster` is the cluster name, the Kubernetes API will be served at `api.somecluster.developers.redhat.com`.
====

.. Enter a base domain for the cluster in the *Base domain* field. This can be any domain managed by the organization. All subdomains for the cluster will use this base domain.
+
[NOTE]
====
The base domain must be a valid DNS name. You must not have a wildcard domain set up for the base domain.
====

.. Select the OpenShift Container Platform version to install. For an Alibaba installation using Assisted Installer, you must select OpenShift 4.15.11 or later.

.. In the *OpenShift version* field, select OpenShift 4.15.10 or later.

.. Leave the other settings as default, and click *Next*.

. On the *Operators* page, leave the default settings and click *Next*.

. On the *Host discovery* page: 

.. Click *Add hosts*.

.. For *Provisioning type*, select *Full image file: Provision with phusical media* to download the larger full image. 

.. Add an SSH public key so that you can connect to the cluster nodes as the core user. Having a login to the cluster nodes can provide you with debugging information during the installation:

... If you do not have an existing SSH key pair on your local machine, follow the steps in link:https://access.redhat.com/documentation/en-us/openshift_container_platform/4.15/html-single/installing/index#ssh-agent-using_installing-platform-agnostic[Generating a key pair for cluster node SSH access].

... In the *SSH public key* field, click *Browse* to upload the `id_rsa.pub` file containing the SSH public key. Alternatively, drag and drop the file into the field from the file manager. To see the file in the file manager, select *Show hidden files* in the menu.

.. Optional: If the cluster hosts are behind a firewall that requires the use of a proxy, select *Configure cluster-wide proxy settings*. Enter the username, password, IP address and port for the HTTP and HTTPS URLs of the proxy server.

.. Click *Generate Discovery ISO* and *Download Discovery ISO* to download the full Discovery ISO to your local system. Then click *Close*.
