// Module included in the following assemblies:
//
// * logging/api_reference/logging-5-8-reference.adoc

:_mod-docs-content-type: REFERENCE
[id="clf-cr-api-ref-5-8_{context}"]
= ClusterLogForwarder API

The `ClusterLogForwarder` custom resource (CR) is the schema for the `ClusterLogForwarder` API.

.Specifications
[cols="3",options="header"]
|===
|Property
|Type
|Description

|spec
|object
|Defines the desired behavior for the `ClusterLogForwarder` CR.

|status
|object
|Defines the observed state of the `ClusterLogForwarder` CR.
|===

== .spec

The `ClusterLogForwarder` object `spec` syntax defines how logs should be forwarded to remote targets.

Type:: object

.Specifications
[options="header"]
|======================
|Property|Type|Description

|filters|array|  Filters are applied to log records passing through a pipeline.
|inputs|array|  *(optional)* Inputs are named filters for log messages to be forwarded.
|outputDefaults|object|  *(optional)* DEPRECATED OutputDefaults specify forwarder config explicitly for the
|outputs|array|  *(optional)* Outputs are named destinations for log messages.
|pipelines|array|  Pipelines forward the messages selected by a set of inputs to a set of outputs.
|serviceAccountName|string|  *(optional)* ServiceAccountName is the serviceaccount associated with the clusterlogforwarder
|======================

== .spec.filters[]

Filter defines a filter for log messages.
See [FilterTypeSpec] for a list of filter types.

Type:: array

.Specifications
[options="header"]
|======================
|Property|Type|Description

|kubeAPIAudit|object|  *(optional)*
|name|string|  Name used to refer to the filter from a `pipeline`.
|type|string|  Type of filter.
|======================

== .spec.inputs[]

InputSpec defines a selector of log messages.

Type:: array

.Specifications
[options="header"]
|======================
|Property|Type|Description

|application|object|  *(optional)* Application, if present, enables named set of `application` logs that
|name|string|  Name used to refer to the input of a `pipeline`.
|receiver|object|  Receiver to receive logs from non-cluster sources.
|======================

== .spec.inputs[].application

Application log selector.
All conditions in the selector must be satisfied (logical AND) to select logs.

Type:: object

.Specifications
[options="header"]
|======================
|Property|Type|Description

|containerLimit|object|  *(optional)* Container limit applied to each container of the pod(s) selected
|namespaces|array|  *(optional)* Namespaces from which to collect application logs.
|selector|object|  *(optional)* Selector for logs from pods with matching labels.
|======================

== .spec.inputs[].application.containerLimit

Type:: object

.Specifications
[options="header"]
|======================
|Property|Type|Description

|maxRecordsPerSecond|int|  MaxRecordsPerSecond is the maximum number of log records
|======================

////
== .spec.inputs[].application.namespaces[]

Type:: array
////

== .spec.inputs[].application.selector

A label selector is a label query over a set of resources.

Type:: object

.Specifications
[options="header"]
|======================
|Property|Type|Description

|matchLabels|object|  *(optional)* matchLabels is a map of {key,value} pairs. A single {key,value} in the matchLabels
|======================

////
== .spec.inputs[].application.selector.matchLabels

Type:: object
////

== .spec.inputs[].receiver

ReceiverSpec is a union of input Receiver types.

The fields of this struct define the set of known Receiver types.

Type:: object

.Specifications
[options="header"]
|======================
|Property|Type|Description

|http|object|
|======================

== .spec.inputs[].receiver.http

HTTPReceiver receives encoded logs as a HTTP endpoint.

Type:: object

.Specifications
[options="header"]
|======================
|Property|Type|Description

|format|string|  Format is the format of incoming log data.
|port|int|  *(optional)* Port the Service and the HTTP listener listen on.
|======================

== .spec.outputDefaults

Type:: object

.Specifications
[options="header"]
|======================
|Property|Type|Description

|elasticsearch|object|  *(optional)* Elasticsearch OutputSpec default values
|======================

== .spec.outputDefaults.elasticsearch

ElasticsearchStructuredSpec is spec related to structured log changes to determine the elasticsearch index

Type:: object

.Specifications
[options="header"]
|======================
|Property|Type|Description

|enableStructuredContainerLogs|bool|  *(optional)* EnableStructuredContainerLogs enables multi-container structured logs to allow
|structuredTypeKey|string|  *(optional)* StructuredTypeKey specifies the metadata key to be used as name of elasticsearch index
|structuredTypeName|string|  *(optional)* StructuredTypeName specifies the name of elasticsearch schema
|======================

== .spec.outputs[]

Output defines a destination for log messages.

Type:: array

.Specifications
[options="header"]
|======================
|Property|Type|Description

|syslog|object|  *(optional)*
|fluentdForward|object|  *(optional)*
|elasticsearch|object|  *(optional)*
|kafka|object|  *(optional)*
|cloudwatch|object|  *(optional)*
|loki|object|  *(optional)*
|googleCloudLogging|object|  *(optional)*
|splunk|object|  *(optional)*
|http|object|  *(optional)*
|limit|object|  *(optional)* Limit of the aggregated logs to this output from any given
|name|string|  Name used to refer to the output from a `pipeline`.
|secret|object|  *(optional)* Secret for authentication.
|tls|object|  TLS contains settings for controlling options on TLS client connections.
|type|string|  Type of output plugin.
|url|string|  *(optional)* URL to send log records to.
|======================

== .spec.outputs[].limit

Type:: object

.Specifications
[options="header"]
|======================
|Property|Type|Description

|maxRecordsPerSecond|int|  MaxRecordsPerSecond is the maximum number of log records
|======================

== .spec.outputs[].secret

OutputSecretSpec is a secret reference containing name only, no namespace.

Type:: object

.Specifications
[options="header"]
|======================
|Property|Type|Description

|name|string|  Name of a secret in the namespace configured for log forwarder secrets.
|======================

== .spec.outputs[].tls

OutputTLSSpec contains options for TLS connections that are agnostic to the output type.

Type:: object

.Specifications
[options="header"]
|======================
|Property|Type|Description

|insecureSkipVerify|bool|  If InsecureSkipVerify is true, then the TLS client will be configured to ignore errors with certificates.
|securityProfile|object|  TLSSecurityProfile is the security profile to apply to the output connection
|======================

== .spec.outputs[].tls.securityProfile

Type:: object

.Specifications
[options="header"]
|======================
|Property|Type|Description

|custom|object|  *(optional)* custom is a user-defined TLS security profile. Be extremely careful using a custom
|intermediate|object|  *(optional)* intermediate is a TLS security profile based on:
|modern|object|  *(optional)* modern is a TLS security profile based on:
|old|object|  *(optional)* old is a TLS security profile based on:
|type|string|  *(optional)* type is one of Old, Intermediate, Modern or Custom. Custom provides
|======================

== .spec.outputs[].tls.securityProfile.custom

Type:: object

.Specifications
[options="header"]
|======================
|Property|Type|Description

|ciphers|array|  ciphers is used to specify the cipher algorithms that are negotiated
|minTLSVersion|string|  minTLSVersion is used to specify the minimal version of the TLS protocol
|======================

////
== .spec.outputs[].tls.securityProfile.intermediate

Type:: object

== .spec.outputs[].tls.securityProfile.modern

Type:: object

== .spec.outputs[].tls.securityProfile.old

Type:: object
////

== .spec.pipelines[]

PipelinesSpec link a set of inputs to a set of outputs.

Type:: array

.Specifications
[options="header"]
|======================
|Property|Type|Description

|detectMultilineErrors|bool|  *(optional)* DetectMultilineErrors enables multiline error detection of container logs
|filterRefs|array|  *(optional)* Filters lists the names of filters to be applied to records going through this pipeline.
|inputRefs|array|  InputRefs lists the names (`input.name`) of inputs to this pipeline.
|labels|object|  *(optional)* Labels applied to log records passing through this pipeline.
|name|string|  *(optional)* Name is optional, but must be unique in the `pipelines` list if provided.
|outputRefs|array|  OutputRefs lists the names (`output.name`) of outputs from this pipeline.
|parse|string|  *(optional)* Parse enables parsing of log entries into structured logs
|======================

////
== .spec.pipelines[].filterRefs[]

Type:: array

== .spec.pipelines[].inputRefs[]

Type:: array

== .spec.pipelines[].labels

Type:: object

== .spec.pipelines[].outputRefs[]

Type:: array
////

== .status

ClusterLogForwarderStatus defines the observed state of ClusterLogForwarder

Type:: object

.Specifications
[options="header"]
|======================
|Property|Type|Description

|conditions|object|  Conditions of the log forwarder.
|filters|Conditions|  Filters maps filter name to condition of the filter.
|inputs|Conditions|  Inputs maps input name to condition of the input.
|outputs|Conditions|  Outputs maps output name to condition of the output.
|pipelines|Conditions|  Pipelines maps pipeline name to condition of the pipeline.
|======================

////
== .status.conditions

Type:: object

== .status.filters

Type:: Conditions

== .status.inputs

Type:: Conditions

== .status.outputs

Type:: Conditions

== .status.pipelines

Type:: Conditions
////
