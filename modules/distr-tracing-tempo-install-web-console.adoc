// Module included in the following assemblies:
//
//* distr_tracing_tempo/distr-tracing-tempo-installing.adoc

:_content-type: PROCEDURE
[id="distr-tracing-tempo-install-web-console_{context}"]
= Installing the {TempoShortName} by using the OpenShift web console

You can install the {TempoShortName} in the OpenShift web console.

.Prerequisites

* You are logged in to the OpenShift xref:https://docs.openshift.com/container-platform/latest/web_console/web-console.html[web console] as a xref:https://docs.openshift.com/container-platform/latest/admin_solutions/user_role_mgmt.html#creating-a-cluster-administrator[cluster administrator with the `cluster-admin` role].
// https://docs.openshift.com/container-platform/latest/web_console/web-console.html
// https://docs.openshift.com/container-platform/latest/admin_solutions/user_role_mgmt.html#creating-a-cluster-administrator

* You are using a supported provider of object storage: link:https://www.redhat.com/en/technologies/cloud-computing/openshift-data-foundation[Red Hat OpenShift Data Foundation], link:https://min.io/[MinIO], link:https://aws.amazon.com/s3/[Amazon S3], link:https://azure.microsoft.com/en-us/products/storage/blobs/[Azure Blob Storage], link:https://cloud.google.com/storage/[Google Cloud Storage].

.Procedure

. Install the {TempoOperator}:

.. In the *Administrator* view of the OpenShift web console, go to *Operators* -> *OperatorHub* and search for `{TempoOperator}`.

.. Select *{TempoOperator}* that is *OpenShift Operator for Tempo* -> *Install* -> *Install* -> *View Operator*.
+
[IMPORTANT]
====
This installs the Operator with the default presets:

* *Update channel* -> *stable*
* *Installation mode* -> *All namespaces on the cluster*
* *Installed Namespace* -> *openshift-operators*
* *Update approval* -> *Automatic*
====

.. In the *Details* tab of the installed Operator page, under *ClusterServiceVersion details*, verify that the installation *Status* is *Succeeded*.

. Create a Secret for your object storage bucket.
+
You can do this in the *Administrator* view of the OpenShift web console: go to *Workloads* -> *Secrets* -> *Create* -> *From YAML*.
+
--
include::snippets/distr-tracing-tempo-required-secret-parameters.adoc[]
--
+
--
include::snippets/distr-tracing-tempo-secret-example.adoc[]
--

. Create a namespace for the *TempoStack* instance that you will create in the next step.
+
You can do this in the *Administrator* view of the OpenShift web console: go to *Home* -> *Projects* -> *Create Project*.


. Create a *TempoStack* instance.
+
NOTE: You can create multiple *TempoStack* instances in separate namespaces on the same cluster.
+
You can create a *TempoStack* instance as follows:

.. Go to *Operators* -> *Installed Operators*.
+
[TIP]
====
You can use the *Project:* dropdown list to select the namespace that you created for the *TempoStack* instance in the previous step.
====

.. Select *TempoStack* -> *Create TempoStack* -> *YAML view*.

.. In the *YAML view*, customize the `TempoStack` custom resource (CR):
+
[source,yaml]
----
apiVersion: tempo.grafana.com/v1alpha1
kind: TempoStack
metadata:
  name: sample
  namespace: <namespace_from_previous_step>
spec:
  storageSize: 1Gi
  storage:
    secret:
      name: <secret-name> <1>
      type: <secret-provider> <2>
  template:
    queryFrontend:
      jaegerQuery:
        enabled: true
        ingress:
          route:
            termination: edge
          type: route
----
<1> The value of `name` in the `metadata` of the Secret.
<2> The accepted values are `azure` for Azure Blob Storage, `gcs` for Google Cloud Storage, and `s3` for Amazon S3 or MinIO or Red Hat OpenShift Data Foundation.
+
.TempoStack CR for AWS S3 and MinIO storage
====
[source,yaml]
----
apiVersion: tempo.grafana.com/v1alpha1
kind: TempoStack
metadata:
  name: simplest
  namespace: tempostacknamespace
spec:
  storageSize: 1Gi
  storage:
    secret:
      name: minio-test
      type: s3
  resources:
    total:
      limits:
        memory: 2Gi
        cpu: 2000m
  template:
    queryFrontend:
      jaegerQuery:
        enabled: true
        ingress:
          route:
            termination: edge
          type: route
----
The stack deployed in this example is configured to receive Jaeger Thrift over HTTP and OpenTelemetry Protocol (OTLP), which permits visualizing the data with the Jaeger UI.
====

.. Select *Create*.

link:https://github.com/openshift/openshift-docs/pull/62410/files#r1284564005[Waiting for SME input for the following:]

.Verification

. Use the *Project:* dropdown list to select the namespace of the *TempoStack* instance.

. Verify that the `status` of all TempoStack `components` is `Running` and the `conditions` are `type: Ready`.

. Go to *Workloads* -> *Pods* to verify that all the TempoStack component pods are running.

. Go to *Networking* -> *Route* to get the Route for the TempoStack query UI.

.Additional resources

* link:https://operatorhub.io/[OperatorHub.io]
* link:https://docs.openshift.com/container-platform/latest/operators/admin/olm-adding-operators-to-cluster.html#olm-installing-from-operatorhub-using-web-console_olm-adding-operators-to-a-cluster[Installing from OperatorHub using the web console]
* link:https://docs.openshift.com/container-platform/latest/operators/user/olm-creating-apps-from-installed-operators.html[Creating applications from installed Operators]
