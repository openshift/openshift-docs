// Module included in the following assemblies:
//
// * post_installation_configuration/aws-compute-edge-tasks.adoc

:_mod-docs-content-type: CONCEPT
[id="post-install-existing-local-zone-subnet_{context}"]
= Creating network requirements in existing VPC to use {aws-service-name-full}

If you want a Machine API to create an Amazon EC2 instance in a remote zone location,
you must create a subnet in a {aws-service-name-single} location. You can use any provisioning tool,
such as Ansible or Terraform, to create subnets in the existing Virtual Private Cloud (VPC).
You can configure the CloudFormation template to meet your requirements.

ifdef::aws-localzones[]
The following subsections include steps that use CloudFormation templates. Considering the
limitation of NAT Gateways in {aws-service-name-full}, CloudFormation templates support only public subnets.
You can reuse the template to create public subnets for each edge location to where you need to extend your cluster.
endif::aws-localzones[]
ifdef::aws-wavelength[]
The following subsections include steps that use CloudFormation templates to create the network requirements
to extend existing VPC to use {aws-service-name-short}. The resources will be created:

. 1 VPC Carrier Gateway associated to the provided VPC ID
. 1 VPC Route Table for Wavelength with default route entry to VPC Carrier Gateway 
. 2 VPC Subnets, public and private. The public subnet is associated to the public route table for AWS Wavelength.
 The private subnet is associated to the provided route table ID.

Considering the limitation of NAT Gateways in {aws-service-name-full}, the provided CloudFormation templates support only
associating the private subnets with provided route table ID which is attached a valid NAT Gateway in the Region.
endif::aws-wavelength[]