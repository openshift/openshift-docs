// Module included in the following assemblies:
//
// * hardware_accelerators/amd-gpu-operator.adoc

:_content-type: PROCEDURE
[id="amd-creating-internal-registry_{context}"]
= Creating the internal registry

.Procedure

. Check for an existing internal registry:
+
[source,terminal]
----
$ oc get pods -n openshift-image-registry
----
+
.Example output
[source,terminal]
----
NAME                                               READY   STATUS    RESTARTS   AGE
cluster-image-registry-operator-79ffc48786-crfkc   1/1     Running   0          37m
node-ca-nsknt                                      1/1     Running   0          20m
----

. Configure the storage of the local image registry:
+
[source,terminal]
----
$ oc patch configs.imageregistry.operator.openshift.io cluster --type merge --patch '{"spec":{"storage":{"emptyDir":{}}}}'
config.imageregistry.operator.openshift.io/cluster patched
----

. Enable the local image registry:
+
[source,terminal]
----
$ oc patch configs.imageregistry.operator.openshift.io cluster --type merge --patch '{"spec":{"managementState":"Managed"}}'
config.imageregistry.operator.openshift.io/cluster patched
----

. Check that the image registry is running:
+
[sourcee,terminal]
----
$ oc get pods -n openshift-image-registry 
----
+
.Example output
[source,terminal]
----
NAME                                               READY   STATUS    RESTARTS   AGE
cluster-image-registry-operator-79ffc48786-crfkc   1/1     Running   0          57m
image-registry-749f6bf957-2jqtj                    1/1     Running   0          87s
node-ca-nsknt                                      1/1     Running   0          41m
----

