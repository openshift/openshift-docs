// Module included in the following assemblies:
//
// * monitoring/config-map-reference-for-the-cluster-monitoring-operator.adoc

:_content-type: REFERENCE
[id="thanosruler-reference_{context}"]
= thanosRuler reference

These settings configure the Thanos Ruler component for user-defined projects.

.Configuration options

[source,yaml]
----
thanosRuler:
  # Contains configuration settings for how Thanos Ruler communicates 
  # with additional Alertmanager instances, including configuring the URL scheme, the connection timeout, and the authentication method.
  # default: nil
  additionalAlertmanagerConfigs: AdditionalAlertmanagerConfig
  # Defines the log level for Alertmanager.
  # Possible values are: error, warn, info, debug.
  # default: nil
  logLevel: <string>
  # Defines the nodes on which the pods are scheduled.
  nodeSelector: v1.NodeSelector
  # Defines resource requests and limits for single pods.
  resources: v1.ResourceRequirements
  # Defines how long Prometheus retains data. 
  # Default is '24h'.
  # The setting must match the regular expression 
  # [0-9]+(ms|s|m|h|d|w|y) 
  # (milliseconds seconds minutes hours days weeks years).
  retention: <string>
  # Defines tolerations for the pods.
  tolerations: v1.Toleration
  # Allows a user to configure persistent storage for the Alertmanager pods.
  # If enabled, a user can configure storageClass and size of volume.
  volumeClaimTemplate: v1.PersistentVolumeClaim
----

.Example

[source,yaml]
----
apiVersion: v1
kind: ConfigMap
metadata:
  name: user-workload-monitoring-config
  namespace: openshift-user-workload-monitoring
data:
  config.yaml: |
    thanosRuler:
      additionalAlertmanagerConfigs:
      - apiVersion: v2
        scheme: https
        bearerToken:
          name: alertmanager1-bearer-token
          key: token
        staticConfigs:
        - alertmanager1-remote.com
      logLevel: debug
      nodeSelector:
        kubernetes.io/os: linux
      resources:
        requests:
          cpu: 100m
          memory: 100Mi
      retention: 24h
      tolerations:
        - operator: "Exists"
      volumeClaimTemplate:
        spec:
          resources:
            requests:
              storage: 15Gb
----
