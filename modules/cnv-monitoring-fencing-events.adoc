// Module included in the following assemblies:
//
// * cnv/cnv_users_guide/cnv-fencing-nodes.adoc

[id="cnv-monitoring-fencing-events_{context}"]

= Monitoring fencing events

If a node is unhealthy for longer than 5 minutes, and the node is permitted to be 
fenced, the `MachineHealthCheck` controller creates a `MachineRemediation` object 
for the node, which controls the remediation strategy.

Monitor the fencing event by observing  the logs of the related Pods for the 
`MachineHealthCheck` controller and the `MachineRemediation` object. 
These are located in the `openshift-machine-api` namespace.

.Procedure

. List the Pods in the `openshift-machine-api` namespace to find the unique name
of the `machine-health-check` Pod:
+
----
$ oc -n openshift-machine-api get pods
----

. (Optional) Check the log for the `machine-health-check-<random-string>` Pod to see the 
health status of the nodes:
+
----
$ oc -n openshift-machine-api logs machine-health-check-747c499557-48f9v
----
+ 
The log message for an unhealthy node will match the following:
+
----
...
I0923 01:49:58.807177       1 machinehealthcheck_controller.go:360] Machine <node-name> has been unhealthy for too long, creating machine remediation 
...
----

. Check the log for the  `machine-remediation-<random-string>` Pod to monitor 
the status of the remediation and the node.
+
----
$ oc -n openshift-machine-api logs machine-remediation-cb97bc8b5-w2lsc
----

