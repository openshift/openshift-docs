// Module included in the following assemblies:
//
// * installing/installing_aws/installing-aws-localzone.adoc
// * installing/installing_aws/installing-aws-wavelength.adoc

ifeval::["{context}" == "installing-aws-localzone"]
:localzones:
endif::[]

:_mod-docs-content-type: CONCEPT
[id="installation-aws-cluster-network-mtu_{context}"]
= Customizing Cluster Network MTU

Customize the Cluster Network MTU when deploying a cluster on AWS.

The Cluster Network MTU is automatically adjusted to the lower value
accepted by the network plugin when installing a cluster with support
of {aws-service-name-full}.

If the {aws-service-name-single} support higher MTU in between EC2 Instances in
the {aws-service-name-single} and EC2 instances in the Region, you might need
to manually configure the higher value to increase the network performance of
the cluster network.

For more information of the MTU supported for each zone for the flow:
"Traffic that goes from one instance to another between a
{aws-service-name-single} and the Region that uses a private IP address".
See link:https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/network_mtu.html[Network maximum transmission unit (MTU) for your EC2 instance].

The `install-config.yaml` field `networking.clusterNetworkMTU` allows you to customize the
MTU for the new cluster.

ifdef::localzones[]
The following example show `install-config.yaml` files that use the edge machine pool.

.Configuration that uses an edge pool with a custom cluster network MTU
[source,yaml]
----
apiVersion: v1
baseDomain: devcluster.openshift.com
metadata:
  name: edge-zone
networking:
  clusterNetworkMTU: 8901
compute:
- name: edge
  platform:
    aws:
      zones:
      - us-west-2-lax-1a
      - us-west-2-lax-1b
platform:
  aws:
    region: us-west-2
pullSecret: '{"auths": ...}'
sshKey: ssh-ed25519 AAAA...
----
endif::localzones[]

ifeval::["{context}" == "installing-aws-localzone"]
:!localzone:
endif::[]