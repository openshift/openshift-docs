// Module filename: nw-networkoperator-crd.adoc
// Module included in the following assemblies:
//
// * networking/configuring-network-operator.adoc

[id='network-networkoperator-default-crd-{context}']
= Network Operator Custom Resource networkoperator.openshift.io

The `NetworkConfig` configuration in a `networkoperator.openshift.io`
Custom Resource (CR) object stores the advanced settings for the
`Network Operator`.

The following parameters are set in the `config.openshift.io` (CR),
and are copied to the `networkoperator.openshift.io` CR object by
`openshift-install` before the cluster is created.

* `cidr`
* `hostPrefix`
* `networkType`
* `serviceNetwork`

== Default NetworkConfig CR object in a running cluster

The following CR displays the default configuration for the Network Operator
and explains both the parameters you can configure and valid parameter values:

[source,yaml]
----
apiVersion: networkoperator.openshift.io/v1
kind: NetworkConfig
spec:
  clusterNetworks:
  - cidr: 10.128.0.0/14 <1>
    hostSubnetLength: 9 <2>
  serviceNetwork: 172.30.0.0/16 <3>
  defaultNetwork: <4>
    type: OpenShiftSDN <5>
    openshiftSDNConfig:
      mode: NetworkPolicy <6>
      mtu: 1450 <7>
      vxlanPort: 4789 <8>
  deployKubeProxy: false <9>
  kubeProxyConfig: <10>
    bindAddress: 0.0.0.0 <11>
    iptablesSyncPeriod: 30s <12>
    proxyArguments: <13>
      iptables-min-sync-period:
      - 30s
----

<1> `cidr`: A block of IP addresses from which pod IPs are allocated.
{product-title} uses the Classless Inter-Domain Routing (CIDR) standard to
allocate IP addresses. The
'OpenShiftSDN' network plugin supports multiple ClusterNetworks.
The address blocks for multiple ClusterNetworks must not overlap.
This parameter is set in the `config.openshift.io` object.
<2> `hostPrefix`: The address size to assign to each individual node.
When a new node is added to the cluster, 2^(32-`hostPrefix`) addresses are
allocated:
when `hostPrefix` is set to /23, each node has 512 pod IP addresses.
This parameter is set in the `config.openshift.io` object.
<3> `serviceNetwork`: A block of IP addresses for services.
`OpenShiftSDN` allows only one serviceNetwork block.
This parameter is set in the `config.openshift.io` object.
<4> `defaultnetwork`: This is a header for the parameters that
specify the default pod network.
<5> `NetworkType`: The Network plugin that is to be deployed.
`OpenShiftSDN` is the only plugin supported in {product-name} {product-version}.
This parameter is set in the `config.openshift.io` object.
<6> `mode`: Configures the isolation mode for `OpenShiftSDN`.
The allowed values are `Multitenant`, `Subnet`, or `NetworkPolicy`.
The default is `NetworkPolicy`.
<7> `mtu`: The Maximum Transmission Unit (MTU) for the VXLAN overlay network.
The default is the MTU of the node that the cluster-network-operator is first
run on, minus 50 bytes for overhead. If the nodes in your cluster do not
have the same MTU, then you must set this explicitly.
<8> `VXLANPort`: The port to use for all VXLAN packets. The default
is 4789.
<9> `DeployKubeProxy` specifies whether or not a standalone `kube-proxy` should
be deployed by the operator. Some network providers include `kube-proxy`.
If unset, the plugin will attempt to select
the correct value, which is false when `OpenShiftSDN` and `ovn-kubernetes` are
used, and true otherwise.
<10> `kubeProxyConfig`: The parameters in this section specify the desired
`kube-proxy` configuration.
If you do not specify the parameter values, the Network Operator chooses
sensible defaults.
//Currently only `OpenShiftSDN` consumes this.
//+optional
<11> `bindAddress`: The IP address for `kube-proxy` to serve on.
The default is 0.0.0.0.
<12> `iptablesSyncPeriod` The refresh period for `iptables` rules.
The default is 30s.
<13> `proxyArguments`: This section contains additional arguments to pass to the
`kube-proxy` process.

//Use External openvswitch If true, then assume the nodes already have a running
//openvswitch. ?? +optional
//Currently, we only support a single entry here.

Use the following command to view the `NetworkConfig.networkoperator`
CR object in a running cluster.
[source]
----
$ oc get NetworkConfig.networkoperator.openshift.io default -o yaml
----
