//Module included in the following assemblies:
//
// * sandboxed_containers/deploying_sandboxed_containers.adoc

:_content-type: PROCEDURE
[id="sandboxed-containers-create-kataconfig-resource-web-console_{context}"]
= Creating the KataConfig custom resource in the web console

You must create one `KataConfig` custom resource (CR) to enable installing `kata` as a `RuntimeClass` on your cluster nodes.

.Prerequisites

* You have installed {product-title} {product-version} on your cluster.
* You have access to the cluster as a user with the `cluster-admin` role.
* You have installed the {sandboxed-containers-operator}.

[NOTE]
====
Kata is installed on all worker nodes by default. If you want to install `kata` as a `RuntimeClass` only on specific nodes, you can add labels to those nodes, then define the label in the `KataConfig` CR when you create it.
====

.Procedure

. From the *Administrator* perspective in the web console, navigate to *Operators* â†’ *Installed Operators*.

. Select the {sandboxed-containers-operator} from the list of operators.

. In the *KataConfig* tab, click *Create KataConfig*.

. In the *Create KataConfig* page, select to configure the `KataConfig` CR via *YAML view*.

. Copy and paste the following manifest into the *YAML view*:

+
[source,yaml]
----
apiVersion: kataconfiguration.openshift.io/v1
kind: KataConfig
metadata:
  name: cluster-kataconfig
----
+
If you want to install `kata` as a `RuntimeClass` only on selected nodes, include the label in the manifest:

+
[source,yaml]
----
 apiVersion: kataconfiguration.openshift.io/v1
 kind: KataConfig
 metadata:
   name: cluster-kataconfig
 spec:
   kataConfigPoolSelector:
     matchLabels:
      <label_key>: '<label_value>' <1>
----
<1> Labels in `kataConfigPoolSelector` only support single values; `nodeSelector` syntax is not supported.

. Click *Create*.

The new `KataConfig` CR is created and begins to install `kata` as a `RuntimeClass` on the worker nodes.

[IMPORTANT]
====
{sandboxed-containers-first} installs Kata only as a secondary, optional runtime on the cluster and not as the primary runtime.
====

.Verification

. In the *KataConfig* tab, select the new `KataConfig` CR.

. In the *KataConfig* page, select the *YAML* tab.

. Monitor the *installationStatus* field in the status.
+
A message appears each time there is an update. Click *Reload* to view the updated `KataConfig` CR.
+
Once the value of *Completed nodes* equals the number of worker or labeled nodes, the installation is complete. The status also contains a list of nodes where the installation is completed.
