// Module included in the following assemblies:
//
// * argocd_application_sets/progressive-sync-in-openshift-gitops.adoc

:_mod-docs-content-type: PROCEDURE
[id="gitops-creating-appset-sync-manifest-using-rollingsync_{context}"]
= Creating an ApplicationSet manifest using RollingSync

To configure Progressive Sync, you must select one of two strategies, `RollingSync` or `AllAtOnce`. The Progressive Sync status is displayed in the {gitops-shortname} Operator Web UI when the `rollingSync` strategy is defined in the `ApplicationSet` manifest.

.Procedure

. Set the `RollingSync` parameter for the `applicationSet` spec. The following example contains a sample YAML configuration.
+
.Example enabling `rollingsync` parameter to use Progressive Sync
[source,yaml]
----
apiVersion: argoproj.io/v1alpha1
kind: ApplicationSet
metadata:
  name: guestbook-rollingsync
  namespace: openshift-gitops
spec:
  generators:
    - list:
        elements:
          - cluster: in-cluster
            env: dev
          - cluster: in-cluster
            env: qa
          - cluster: in-cluster
            env: prod
  strategy:
    type: RollingSync
    rollingSync:
      steps:
        - matchExpressions:
            - key: envLabel
              operator: In
              values: [dev]
        - matchExpressions:
            - key: envLabel
              operator: In
              values: [qa]
          maxUpdate: 0
        - matchExpressions:
            - key: envLabel
              operator: In
              values: [prod]
          maxUpdate: 10%
  template:
    metadata:
      name: 'guestbook-{{.env}}'
      labels:
        envLabel: '{{.env}}'
    spec:
      project: default
      source:
        repoURL: https://github.com/your-org/your-repo.git
        targetRevision: HEAD
        path: guestbook/{{.env}}
      destination:
        server: https://kubernetes.default.svc
        namespace: guestbook-{{.env}}
----

. Apply the YAML file by running the following command. 
+
[source,terminal]
----
$ oc apply -f guestbook-rollingsync.yaml
----
+
[NOTE]
====
* When deploying an application by using the `ApplicationSet` controller, the Argo CD controller will only manage an application in its own namespace. If an application is created in another namespace, it will not be recognized.

* `RollingSync` updates application groups sequentially based on `matchExpressions`, and the `rollingSync.steps` field defines which groups to sync and in what order using label selectors.
====

. Verify that {gitops-title} Operator has enabled Progressive Sync in the Argo CD Web UI by completing the following steps:
.. In the Argo CD Web UI, navigate to the *Argo CD Application details* page for your deployed application.
.. In the *Application Status* panel, a new section, `PROGRESSIVE SYNC` appears if the Progressive Sync feature is enabled successfully for your application.
+
The Progressive Sync panel displays the following information:

.Progressive Sync status fields
[options="header"]
|===
|Field | Description
|Progressive Sync Status |Health status: `Waiting`, `Pending`, `Progressing`, `Healthy`, or `Error`
|Wave |Current rollout wave number
|Last Transition |Timestamp of the last state change
|Message |Additional details or error messages
|===