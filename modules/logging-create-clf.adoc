// Module included in the following assemblies:
//
// * configuring/log_collection_forwarding/log-forwarding.adoc

:_mod-docs-content-type: REFERENCE
[id="logging-create-clf_{context}"]
= Creating a log forwarder

To create a log forwarder, create a `ClusterLogForwarder` custom resource (CR). This CR defines the service account, permissible input log types, pipelines, outputs, and any optional filters.

[IMPORTANT]
====
You need administrator permissions for the namespace where you create the `ClusterLogForwarder` CR.
====

.`ClusterLogForwarder` CR example
[source,yaml]
----
apiVersion: observability.openshift.io/v1
kind: ClusterLogForwarder
metadata:  
  name: <log_forwarder_name>
  namespace: <log_forwarder_namespace>
spec:
  outputs:                       # <1>
    - name: <output_name>
      type: <output_type> 
  inputs:                        # <2>
    - name: <input_name>  
      type: <input_type>  
  filters:                       # <3>
    - name: <filter_name>
      type: <filter_type> 
  pipelines:
    - inputRefs:
      - <input_name>             #<4>
    - outputRefs:
      - <output_name>            #<5>
    - filterRefs:
      - <filter_name>            #<6>
  serviceAccount:
    name: <service_account_name> #<7>
# ...
----
<1> The type of output that you want to forward logs to. The value of this field can be `azureMonitor`, `cloudwatch`, `elasticsearch`, `googleCloudLogging`, `http`, `kafka`, `loki`, `lokistack`, `otlp`, `splunk`, or `syslog`.
<2> A list of inputs. The names `application`, `audit`, and `infrastructure` are reserved for the default inputs.
<3> A list of filters to apply to records going through this pipeline. Each filter is applied in the order defined here. If a filter drops a records, subsequent filters are not applied.
<4> This value should be the same as the input name. You can also use the default input names `application`, `infrastructure`, and `audit`.
<5> This value should be the same as the output name.
<6> This value should be the same as the filter name.
<7> The name of your service account.


// To be followed up on by adding input examples / docs:
////
spec:
  inputs:
  - name: chatty-app
    type: application
    selector:
        matchLabels:
          load: heavy
  pipelines:
  - inputRefs:
    - chatty-app
    - infrastructure
  - outputRefs:
    - default
////
