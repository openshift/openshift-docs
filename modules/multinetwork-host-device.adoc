// admin_guide/multinetwork.adoc
ifdef::context[:parent-context: {context}]

[id='multinetwork-host-device-{context}']
= Configuring additional interfaces using host devices

The host-device plugin plumbs an existing network devices on a node into a pod directly.

For example, let's create an dummy device using the dummy module to back our virtual device. We'll name this device `exampledevice0`

[source,bash]
----
modprobe dummy
lsmod | grep dummy
| ip link set name exampledevice0 dev dummy0
----

Also label that host in this case, so we can assign a pod to wind up where that device exists...

[source,bash]
----
oc label nodes {your-worker-node-name} exampledevice=true
oc get nodes --show-labels
----

Now let's create a custom resource to refer to this configuration:

[source,bash]
----
cat <<EOF | oc create -f -
| apiVersion: "k8s.cni.cncf.io/v1"
kind: NetworkAttachmentDefinition
metadata:
  name: hostdevice-example
spec:
  config: '{
      "cniVersion": "0.3.0",
      "type": "host-device",
      "device": "exampledevice0"
    }'
EOF
----

And create a pod which refers to this name in the annotation and has a nodeselector to assign it to the machine where we created the alias.

[source,bash]
----
cat <<EOF | oc create -f -
| apiVersion: v1
kind: Pod
metadata:
  name: hostdevicesamplepod
  annotations:
    k8s.v1.cni.cncf.io/networks: hostdevice-example
spec:
  containers:
** name: hostdevicesamplepod
    command: ["/bin/bash", "-c", "sleep 2000000000000"]
    image: centos/tools
  nodeSelector:
    exampledevice: "true"
EOF
----

You can now view the additional interface create by executing the `ip` command such as:

[source,bash]
----
oc exec hostdevicesamplepod -- ip a
----
