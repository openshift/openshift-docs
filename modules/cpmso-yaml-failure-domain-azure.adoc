// Module included in the following assemblies:
//
// * machine_management/cpmso-configuration.adoc

:_mod-docs-content-type: REFERENCE
[id="cpmso-yaml-failure-domain-azure_{context}"]
= Sample {azure-short} failure domain configuration

[role="_abstract"]
To prevent downtime for your application due to the failure of a single {azure-first} region, you can configure failure domains in the control plane machine set.
To use failure domains, you configure appropriate values in the `failureDomains` section of the `ControlPlaneMachineSet` custom resource (CR).

The control plane machine set concept of a failure domain is analogous to the {azure-short} concept of an link:https://learn.microsoft.com/en-us/azure/azure-web-pubsub/concept-availability-zones[_Azure availability zone_].
The `ControlPlaneMachineSet` CR spreads control plane machines across more than one failure domain when possible.

When configuring {azure-short} failure domains in the control plane machine set, you must specify the availability zone name.
An {azure-short} cluster uses a single subnet that spans more than one zone.

.Sample Azure failure domain values
[source,yaml]
----
apiVersion: machine.openshift.io/v1
kind: ControlPlaneMachineSet
metadata:
  name: cluster
  namespace: openshift-machine-api
spec:
# ...
  template:
# ...
    machines_v1beta1_machine_openshift_io:
      failureDomains:
        azure:
        - zone: "1"
        - zone: "2"
        - zone: "3"
        platform: Azure
# ...
----
where:

`spec.template.machines_v1beta1_machine_openshift_io.failureDomains.azure.zone`::
Each instance of `zone` specifies an {azure-short} availability zone for a failure domain.
+
[NOTE]
====
If the cluster configuration uses a single zone for all failure domains, you configure the `zone` parameter in the provider specification instead of in the failure domain configuration.
====

`spec.template.machines_v1beta1_machine_openshift_io.failureDomains.platform`::
Specifies the cloud provider platform name.
Do not change this value.