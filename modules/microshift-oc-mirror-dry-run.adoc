// Module included in the following assemblies:
//
// * microshift_running_apps/microshift_operators/microshift-operators-oc-mirror-disconnected.adoc

:_mod-docs-content-type: PROCEDURE
[id="microshift-oc-mirror-dry-run_{context}"]
= Performing a dry run

[role="_abstract"]
You can use oc-mirror to perform a dry run so that you can review the list of images to be mirrored. By using a dry run, you can catch any errors with your image set configuration early or use the generated list of images with other tools to conduct mirroring.

.Prerequisites

* You have access to the internet to obtain the necessary container images.
* You installed the {oc-first}.
* You installed the oc-mirror CLI plugin.
* You created the image set configuration file.

.Procedure

. Run the `oc mirror` command with the `--dry-run` flag to perform a dry run:
+
[source,terminal,subs="+quotes"]
----
$ oc-mirror --config _<ImageSetConfig.yaml>_ docker://localhost:5000 --workspace file://_<outm2m>_ --dry-run --v2
----
where:

`ImageSetConfig.yaml`:: Specifies the name of the image set configuration file that you created.
`docker://localhost:5000`:: Specifies the mirror registry. Nothing is mirrored to this registry when you use the `--dry-run` flag.
`--workspace file://_<outm2m>_`:: Insert the address of the workspace path.
`--dry-run`:: The dry run flag generates the dry run artifacts and not an actual image set file.
`--v2`:: Specifies oc mirror v2.
+
.Example output
[source,terminal]
----
2025/08/25 15:50:44  [INFO]   : üëã Hello, welcome to oc-mirror
2025/08/25 15:50:44  [INFO]   : ‚öô  setting up the environment for you...
2025/08/25 15:50:44  [INFO]   : üîÄ workflow mode: mirrorToMirror
2025/08/25 15:50:44  [INFO]   : üïµ  going to discover the necessary images...
2025/08/25 15:50:44  [INFO]   : üîç collecting release images...
2025/08/25 15:50:44  [INFO]   : üîç collecting operator images...
 ‚úì   (1m30s) Collecting catalog registry.redhat.io/redhat/redhat-operator-index:v4.20
2025/08/25 15:52:14  [INFO]   : üîç collecting additional images...
2025/08/25 15:52:14  [INFO]   : üìÑ list of all images for mirroring in : wspace/working-dir/dry-run/mapping.txt
2025/08/25 15:52:14  [INFO]   : mirror time     : 1m30.399585837s
2025/08/25 15:52:14  [INFO]   : üëã Goodbye, thank you for using oc-mirror
----

. Review the `mapping.txt` file that was generated by running the following command:
+
[source,terminal]
----
$ cat wspace/working-dir/dry-run/mapping.txt
----
+
.Example output
[source,terminal]
----
docker://registry.redhat.io/amq8/amq-broker-rhel9@sha256:47fd4ce2533496828aba37bd1f9715e2164d5c90bd0fc6b25e7e0786d723bf01=docker://mirror.com/amq8/amq-broker-rhel9:sha256-47fd4ce2533496828aba37bd1f9715e2164d5c90bd0fc6b25e7e0786d723bf01
docker://registry.redhat.io/amq8/amq-broker-init-rhel9@sha256:9cc48eecf1442ae04b8543fa5d4381a13bc2831390850828834d387006d1342b=docker://mirror.com/amq7/amq-broker-init-rhel9:sha256-9cc48eecf1442ae04b8543fa5d4381a13bc2831390850828834d387006d1342b
docker://registry.redhat.io/amq8/amq-broker-rhel9@sha256:bb6fbd68475a7852b4d99eea6c4ab313f9267da7963162f0d75375d7063409e7=docker://mirror.com/amq8/amq-broker-rhel9:sha256-bb6fbd68475a7852b4d99eea6c4ab313f9267da7963162f0d75375d7063409e7
docker://registry.redhat.io/amq8/amq-broker-rhel9@sha256:d42d713da0ce6806fdc6492b6342586783e6865a82a8647d3c4288439b1751ee=docker://mirror.com/amq8/amq-broker-rhel9:sha256-d42d713da0ce6806fdc6492b6342586783e6865a82a8647d3c4288439b1751ee
docker://registry.redhat.io/amq8/amq-broker-init-rhel9@sha256:ffffa9875f0379e9373f89f05eb06e5a193273bb04bc3aa5f85b044357b79098=docker://mirror.com/amq8/amq-broker-init-rhel9:sha256-ffffa9875f0379e9373f89f05eb06e5a193273bb04bc3aa5f85b044357b79098
----
