// Module included in the following assemblies:
// migration/migrating-openshift-3-to-4.adoc
[id='migration-understanding-cpma_{context}']
= Understanding the Control Plane Migration Assistant

The Control Plane Migration Assistant (CPMA) is a CLI-based tool that assists you in migrating the control plane from {product-title} 3.x to 4.x. The CPMA processes {product-title} 3.x configuration files and generates Custom Resource (CR) manifest files, which are consumed by {product-title} 4.x operators.

Because {product-title} 3 and 4 have significant configuration differences, not all parameters are processed. CPMA generates a report that describes whether features are supported fully, partially, or not at all.

.Configuration files

CPMA uses the Kubernetes and {product-title} APIs to access the following configuration files on an {product-title} 3 cluster:

* Master configuration file (default: *_/etc/origin/master/master-config.yaml_*)
* CRI-O configuration file (default: *_/etc/crio/crio.conf_*)
* etcd configuration file (default: *_/etc/etcd/etcd.conf_*)
* Image registries file (default: *_/etc/containers/registries.conf_*)
* Dependent configuration files:
** Password files (for example, HTPasswd)
** ConfigMaps
** Secrets

.CR Manifests

CPMA generates CR manifests for the following configurations:

* API server CA certificate: *_100_CPMA-cluster-config-APISecret.yaml_*
+
[NOTE]
====
If you are using an unsigned certificate, you must link:https://docs.openshift.com/container-platform/4.1/authentication/certificates/api-server.html#add-named-api-server_api-server-certificates[add the API server certificate].
====

* CRI-O: *_100_CPMA-crio-config.yaml_*
* Cluster resource quota: *_100_CPMA-cluster-quota-resource-x.yaml_*
* Project resource quota: *_100_CPMA-resource-quota-x.yaml_*
* Portable image registry (*_/etc/registries/registries.conf_*) and portable image policy (*_etc/origin/master/master-config.yam_*): *_100_CPMA-cluster-config-image.yaml_*
* OAuth providers: *_100_CPMA-cluster-config-oauth.yaml_*
* Project configuration: *_100_CPMA-cluster-config-project.yaml_*
* Scheduler: *_100_CPMA-cluster-config-scheduler.yaml_*
* SDN: *_100_CPMA-cluster-config-sdn.yaml_*
