// This module is included in the following assemblies:
// * secure/using-tekton-chains-for-openshift-pipelines-supply-chain-security.adoc

:_mod-docs-content-type: PROCEDURE

[id="chains-signing-secrets-skopeo_{context}"]
= Manually generating signing secrets with the skopeo tool

[role="_abstract"]
You can generate keys by using the `skopeo` tool and use them in the `cosign` signing scheme with {tekton-chains}.

.Prerequisites

* You installed the `skopeo` package on your Linux system.

.Procedure

. Generate a public/private key pair by running the following command:
+
[source,terminal]
----
$ skopeo generate-sigstore-key --output-prefix <mykey>
----
+
Replace `<mykey>` with a key name of your choice.
+
Skopeo prompts you for a passphrase for the private key and then creates the key files named `<mykey>.private` and `<mykey>.pub`.

. Encode the `<mykey>.pub` file by using the `base64` tool and running the following command:
+
[source,terminal]
----
$ base64 -w 0 <mykey>.pub > b64.pub
----

. Encode the `<mykey>.private` file by using the `base64` tool and running the following command:
+
[source,terminal]
----
$ base64 -w 0 <mykey>.private > b64.private
----

. Encode the passphrase by using the `base64` tool and running the following command:
+
[source,terminal]
----
$ echo -n '<passphrase>' | base64 -w 0 > b64.passphrase
----
+
Replace `<passphrase>` with the passphrase that you used for the key pair.

. Create the `signing-secrets` secret in the `openshift-pipelines` namespace by running the following command:
+
[source,terminal]
----
$ oc create secret generic signing-secrets -n openshift-pipelines
----

. Edit the `signing-secrets` secret by running the following command:
+
[source,terminal]
----
$ oc edit secret -n openshift-pipelines signing-secrets
----
+
Add the encoded keys in the data of the secret in the following way:
+
[source,yaml]
----
apiVersion: v1
data:
  cosign.key: <Encoded <mykey>.private>
  cosign.password: <Encoded passphrase>
  cosign.pub: <Encoded <mykey>.pub>
immutable: true
kind: Secret
metadata:
  name: signing-secrets
# ...
type: Opaque
----
+
`<Encoded <mykey>.private>`:: Replace with the content of the `b64.private` file.
`<Encoded passphrase>`:: Replace with the content of the `b64.passphrase` file. 
`<Encoded <mykey>.pub>`:: Replace with the content of the `b64.pub` file.
