// Module included in the following assemblies:
//
// * logging/efk-logging-fluentd.adoc

[id="efk-logging-collector-fluentd-v-rsyslog_{context}"]
= About Fluentd and Rsyslog

You can choose between Fluentd and Rsyslog as the logging collector. 

Some of the noteable differences between the two collectors are:

* No throttling in Rsyslog. With Fluentd, an administrator can reduce the rate at which the logs are read in by Fluentd before being processed. This feature is not currently available with Rsyslog.

* No _built-in_ support for remote syslog forwarding in rsyslog. With Fluentd, you can use the `secure-forward` plug-in to send a copy of its logs to an external log aggregator. This feature is not currently available with Rsyslog.
+
For Rsyslog, you can edit the Rsyslog configmap to add support for Syslog log forwarding using the *omfwd* module, see link:https://www.rsyslog.com/doc/v8-stable/configuration/modules/omfwd.html[]. To send logs to a different Rsyslog instance, you can the *omrelp* module, see link:https://www.rsyslog.com/doc/v8-stable/configuration/modules/omrelp.html[]

* The Event Router is not supported for the Rsyslog log collector.

* remote syslog

When switching between the two collectors can result in:

* A gap in messages between scale down of one collector and scale up of the other when reading from the tail.

* Duplicate messages between scale down of one collector and scale up of the other when reading from the head.
+
By default, Rsyslog reads from the head of the container log files, and from the start of the journal. Fluentd
reads container logs from the head and the journal log files from the end.

Switching from Fluentd to Rsyslog will lead to many duplicated messages and Rsyslog taking a long time to record the most current log entries.
+
You can configure Rsyslog to skip older entries in the journal and start reading from the end by setting the `RSYSLOG_JOURNAL_READ_FROM_TAIL`
parameter in the Rsyslog daemonset:
+
----
$ oc set env ds/rsyslog RSYSLOG_JOURNAL_READ_FROM_TAIL=true
----
+
Switching from Rsyslog to Fluentd presents the same problems. You can configure Fluentd to read from the beginning of the log files, which results duplicate records, or you can configure Fluentd to read from the tail of the log files, which results in missing records. Set the `JOURNAL_READ_FROM_TAIL`
parameter in the Fluentd daemonset:
+
----
$ oc set env ds/fluentd JOURNAL_READ_FROM_HEAD=true
$ oc set env ds/fluentd CONTAINER_READ_FROM_TAIL=false
----
