// Module included in the following assemblies:
//
// * virt/virtual_machines/advanced_vm_management/virt-configuring-usb-host-passthrough.adoc

:_mod-docs-content-type: PROCEDURE
[id="virt-configuring-vm-use-usb-device_{context}"]
= Connecting a USB device to a virtual machine

[role="_abstract"]
You can configure virtual machine (VM) access to a USB device. This configuration enables the VM to connect to USB hardware that is attached to an {product-title} node, as if the hardware and the VM are physically connected.

.Prerequisites

* You have installed the {oc-first}.
* You have attached the required USB device as a resource at the cluster level.

.Procedure

. In the `HyperConverged` custom resource (CR), find the assigned resource name of the USB device:
+
[source,terminal]
----
$ oc get hyperconverged kubevirt-hyperconverged -n openshift-cnv
----
+
*Example output*
+
[source, yaml]
----
# ...
  spec:  
    permittedHostDevices:
      usbHostDevices:
        - resourceName: kubevirt.io/peripherals
          selectors:
            - vendor: "045e"
              product: "07a5"
            - vendor: "062a"
              product: "4102"
            - vendor: "072f"
              product: "b100"
----

. Open the VM instance CR:
+
[source,terminal]
----
$ oc edit vmi <vmi_usb>
----
+
where:

<vmi_usb>:: Specifies the name of the `VirtualMachineInstance` CR.


. Edit the CR by adding the USB device, as shown in the following example:
+
*Example configuration*
+
[source, yaml]
----
apiVersion: kubevirt.io/v1
kind: VirtualMachineInstance
metadata:
  labels:
    special: vmi-usb
  name: vmi-usb
spec:
  domain:
    devices:
      hostDevices:
      - deviceName: kubevirt.io/peripherals
        name: local-peripherals <1>
# ...
----
<1> The name of the USB device.

. Apply the modifications to the VM configurations:
+
[source,terminal]
----
$ oc apply -f <filename>.yaml
----
+
where:

<filename>:: Specifies the name of the `VirtualMachineInstance` manifest YAML file.
