// Module included in the following assemblies:
//
// * integration/integrate-with-image-registries.adoc
:_module-type: PROCEDURE
[id="configuring-assumerole-without-iam_{context}"]
= Configuring AssumeRole without container IAM

[role="_abstract"]
If you want to use AssumeRole without container IAM, you must use an access and a secret key to authenticate as an link:https://docs.aws.amazon.com/IAM/latest/UserGuide/id_users_create.html[AWS user with programmatic access].

.Procedure
. If the user for which you want to assume role is in the same account as the ECR registry, create a new role with the desired permissions.
+
[NOTE]
====
When creating the role, you can choose any trusted entity as required. However, you must modify it after creation.
====
+
Otherwise, if the user is in a different account than the ECR registry, you must provide permissions to access the ECR registry and define its trust relationship:
+
[source,json]
----
{
    "Version": "2012-10-17",
    "Statement": [
        {
            "Sid": "VisualEditor0",
            "Effect": "Allow",
            "Action": "sts:AssumeRole",
            "Resource": "arn:aws:iam::<ecr-registry>:role/<assumerole-readonly>" <1>
        }
    ]
}
----
<1> Replace `<assumerole-readonly>` with the role you want to assume.
. Configure the trust relationship of the role by including the user ARN under the *Principal* field:
+
[source,json]
----
{
  "Version": "2012-10-17",
  "Statement": [
    {
      "Effect": "Allow",
      "Principal": {
        "AWS": [
          "arn:aws:iam::<ecr-registry>:user/<role-name>"
        ]
      },
      "Action": "sts:AssumeRole"
    }
  ]
}
----
