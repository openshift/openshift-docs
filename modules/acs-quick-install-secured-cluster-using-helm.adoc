// Module included in the following assemblies:
//
// * installing/installing_ocp/install-secured-cluster-ocp.adoc
// * installing/installing_other/install-secured-cluster-other.adoc
// * installing/installing_cloud_ocp/install-secured-cluster-cloud-ocp.adoc
// * installing/installing_cloud_other/install-secured-cluster-cloud-other.adoc
:_mod-docs-content-type: PROCEDURE
[id="installing-secured-cluster-services-quickly_{context}"]
= Installing the secured-cluster-services Helm chart without customization

ifeval::["{context}" == "install-secured-cluster-cloud-other"]
:cloud-svc:
endif::[]

ifeval::["{context}" == "install-secured-cluster-cloud-ocp"]
:cloud-svc:
endif::[]

ifeval::["{context}" == "install-secured-cluster-other"]
:k8:
endif::[]

ifeval::["{context}" == "install-secured-cluster-ocp"]
:openshift:
endif::[]

[role="_abstract"]
Use the following instructions to install the `secured-cluster-services` Helm chart to deploy the per-cluster and per-node components (Sensor, Admission controller, Collector, and Scanner-slim).

.Prerequisites
* You must have generated an {product-title-short} init bundle or CRS for your cluster.
* You must have access to the Red{nbsp}Hat Container Registry and a pull secret for authentication. For information about downloading images from `registry.redhat.io`, see link:https://access.redhat.com/RegistryAuthentication[Red{nbsp}Hat Container Registry Authentication].
ifndef::cloud-svc[]
* You must have the address that you are exposing the Central service on.
endif::cloud-svc[]
ifdef::cloud-svc[]
* You must have the *Central API Endpoint* address. You can view this information by choosing *Advanced Cluster Security* -> *ACS Instances* from the Red{nbsp}Hat Hybrid Cloud Console navigation menu, then clicking the ACS instance you created.
endif::[]

.Procedure
//Procedure for kubernetes - non-cloud
//do not show for openshift, cloud
ifndef::openshift,cloud-svc[]
* Run one of the following commands on your Kubernetes-based clusters:
** If you are using an init bundle, run the following command:
+
[source,terminal]
----
$ helm install -n stackrox --create-namespace \
    stackrox-secured-cluster-services rhacs/secured-cluster-services \
    -f <path_to_cluster_init_bundle.yaml> \
    -f <path_to_pull_secret.yaml> \
    --set clusterName=<name_of_the_secured_cluster> \
    --set centralEndpoint=<endpoint_of_central_service> \
    --set imagePullSecrets.username=<your redhat.com username> \
    --set imagePullSecrets.password=<your redhat.com password>
----
+
where:
+
--
`<path_to_cluster_init_bundle.yaml>`:: Specifies the path for the init bundle.
`<path_to_pull_secret.yaml>`:: Specifies the path for the pull secret for Red{nbsp}Hat Container Registry authentication.
`<endpoint_of_central_service>`:: Specifies the address and port number for Central. For example, `acs.domain.com:443`.
`<your redhat.com username>`:: Specifies the user name for your pull secret for Red{nbsp}Hat Container Registry authentication.
`<your redhat.com password>`:: Specifies the password for your pull secret for Red{nbsp}Hat Container Registry authentication.
--
** If you are using a CRS, run the following command:
+
[source,terminal]
----
$ helm install -n stackrox --create-namespace \
    stackrox-secured-cluster-services rhacs/secured-cluster-services \
    --set-file crs.file=<crs_file_name.yaml> \
    -f <path_to_pull_secret.yaml> \
    --set clusterName=<name_of_the_secured_cluster> \
    --set centralEndpoint=<endpoint_of_central_service> \
    --set imagePullSecrets.username=<your redhat.com username> \
    --set imagePullSecrets.password=<your redhat.com password>
----
+
where:
+
--
`<crs_file_name.yaml>`:: Specifies the name of the file in which the generated CRS has been stored.
`<path_to_pull_secret.yaml>`:: Specifies the path for the pull secret for Red{nbsp}Hat Container Registry authentication.
`<endpoint_of_central_service>`:: Specifies the address and port number for Central. For example, `acs.domain.com:443`.
`<your redhat.com username>`:: Specifies the user name for your pull secret for Red{nbsp}Hat Container Registry authentication.
`<your redhat.com password>`:: Specifies the password for your pull secret for Red{nbsp}Hat Container Registry authentication.
--
endif::openshift,cloud-svc[]

//Procedure for kubernetes - cloud
ifdef::cloud-svc[]
* Run the following command on your Kubernetes-based clusters:
** If you are using an init bundle, run the following command:
+
[source,terminal]
----
$ helm install -n stackrox --create-namespace \
    stackrox-secured-cluster-services rhacs/secured-cluster-services \
    -f <path_to_cluster_init_bundle.yaml> \
    -f <path_to_pull_secret.yaml> \
    --set clusterName=<name_of_the_secured_cluster> \
    --set centralEndpoint=<endpoint_of_central_service> \
    --set imagePullSecrets.username=<your redhat.com username> \
    --set imagePullSecrets.password=<your redhat.com password>
----
+
where:
+
--
`<path_to_cluster_init_bundle.yaml>`:: Specifies the path for the init bundle.
`<path_to_pull_secret.yaml>`:: Specifies the path for the pull secret for Red{nbsp}Hat Container Registry authentication.
`<endpoint_of_central_service>`:: Specifies the *Central API Endpoint* address. You can view this information by choosing *Advanced Cluster Security* -> *ACS Instances* from the Red{nbsp}Hat Hybrid Cloud Console navigation menu, and then clicking the {product-title-short} instance you created.
`<your redhat.com username>`:: Specifies the user name for your pull secret for Red{nbsp}Hat Container Registry authentication.
`<your redhat.com password>`:: Specifies the password for your pull secret for Red{nbsp}Hat Container Registry authentication.
--
endif::cloud-svc[]

//Procedure for OpenShift - non-cloud
//do not show for cloud
ifndef::cloud-svc[]

* Run one of the following commands on an {ocp} cluster:
** If you are using an init bundle, run the following command:
+
[source,terminal]
----
$ helm install -n stackrox --create-namespace \
    stackrox-secured-cluster-services rhacs/secured-cluster-services \
    -f <path_to_cluster_init_bundle.yaml> \
    -f <path_to_pull_secret.yaml> \
    --set clusterName=<name_of_the_secured_cluster> \
    --set centralEndpoint=<endpoint_of_central_service> \
    --set scanner.disable=false
----
+
where:
+
--
`<path_to_cluster_init_bundle.yaml>`:: Specifies the path for the init bundle.
`<path_to_pull_secret.yaml>`:: Specifies the path for the pull secret for Red{nbsp}Hat Container Registry authentication.
`<endpoint_of_central_service>`:: Specifies the address and port number for Central. For example, `acs.domain.com:443`.
`--set`:: Sets the value of the `scanner.disable` parameter to `false`, which means that Scanner-slim will be enabled during the installation. In Kubernetes, the secured cluster services now include Scanner-slim.
--
** If you are using a CRS, run the following command:
+
[source,terminal]
----
$ helm install -n stackrox --create-namespace \
    stackrox-secured-cluster-services rhacs/secured-cluster-services \
    --set-file crs.file=<crs_file_name.yaml> \
    -f <path_to_pull_secret.yaml> \
    --set clusterName=<name_of_the_secured_cluster> \
    --set centralEndpoint=<endpoint_of_central_service> \
    --set scanner.disable=false
----
+
where:
+
--
`<crs_file_name.yaml>`:: Specifies the name of the file in which the generated CRS has been stored.
`<path_to_pull_secret.yaml>`:: Specifies the `-f` option to specify the path for the pull secret for Red{nbsp}Hat Container Registry authentication.
`<endpoint_of_central_service>`:: Specifies specify the address and port number for Central. For example, `acs.domain.com:443`.
`--set`:: Sets the value of the `scanner.disable` parameter to `false`, which means that Scanner-slim will be enabled during the installation. In Kubernetes, the secured cluster services now include Scanner-slim.
--
endif::cloud-svc[]

//Procedure for OpenShift cloud
ifdef::cloud-svc[]

* Run one of the following commands on an {ocp} cluster:
** If you are using an init bundle, run the following command:
+
[source,terminal]
----
$ helm install -n stackrox --create-namespace \
    stackrox-secured-cluster-services rhacs/secured-cluster-services \
    -f <path_to_cluster_init_bundle.yaml> \
    -f <path_to_pull_secret.yaml> \
    --set clusterName=<name_of_the_secured_cluster> \
    --set centralEndpoint=<endpoint_of_central_service> \
    --set scanner.disable=false
----
+
where:
+
--
`<path_to_cluster_init_bundle.yaml>`:: Specifies the path for the init bundle.
`<path_to_pull_secret.yaml>`:: Specifies the path for the pull secret for Red{nbsp}Hat Container Registry authentication.
`<endpoint_of_central_service>`:: Specifies the *Central API Endpoint* address. You can view this information by choosing *Advanced Cluster Security* -> *ACS Instances* from the Red{nbsp}Hat Hybrid Cloud Console navigation menu, then clicking the {product-title-short} instance you created.
`--set`:: Sets the value of the `scanner.disable` parameter to `false`, which means that Scanner-slim will be enabled during the installation. In Kubernetes, the secured cluster services now include Scanner-slim.
--
** If you are using a CRS, run the following command:
+
[source,terminal]
----
$ helm install -n stackrox --create-namespace \
    stackrox-secured-cluster-services rhacs/secured-cluster-services \
    --set-file crs.file=<crs_file_name.yaml> \
    -f <path_to_pull_secret.yaml> \
    --set clusterName=<name_of_the_secured_cluster> \
    --set centralEndpoint=<endpoint_of_central_service> \
    --set scanner.disable=false
----
+
where:
+
--
`<crs_file_name.yaml>`:: Specifies the name of the file in which the generated CRS has been stored.
`<path_to_pull_secret.yaml>`:: Specifies the path for the pull secret for Red{nbsp}Hat Container Registry authentication.
`<endpoint_of_central_service>`:: Specifies the *Central API Endpoint* address. You can view this information by choosing *Advanced Cluster Security* -> *ACS Instances* from the Red{nbsp}Hat Hybrid Cloud Console navigation menu, then clicking the {product-title-short} instance you created.
`--set`:: Sets the value of the `scanner.disable` parameter to `false`, which means that Scanner-slim will be enabled during the installation. In Kubernetes, the secured cluster services now include Scanner-slim.
--
endif::cloud-svc[]