// Module included in the following assemblies:
//
// * logging/efk-logging-deploy.adoc

[id='efk-logging-deploy-playbook_{context}']
= Running the Ansible playbook for deploying the EFK stack

You can run an Ansible playbook to deploy the EFK stack in {product-title} 

The playbook deploys all resources needed to support the stack, such as
Secrets, ServiceAccounts, and DeploymentConfigs. 

.Procedure

. Run the playbook from the default OpenShift Ansible location
using the Ansible inventory file:
+
ifdef::openshift-origin[]
----
$ ansible-playbook playbooks/openshift-logging/config.yml
----
endif::openshift-origin[]
ifdef::openshift-enterprise[]
----
$ cd /usr/share/ansible/openshift-ansible
$ ansible-playbook [-i </path/to/inventory>] \
    playbooks/openshift-logging/config.yml
----
endif::openshift-enterprise[]
+
The playbook waits to deploy the component pods until the stack is running. If the wait steps fail, the
deployment could still be successful; it may be retrieving the component images
from the registry which can take up to a few minutes. 

. Run the following command to verify the deployment
+
----
$ oc get pods -w
----
+
When ready, the pod enter the *Running* status. 

.Procedure

If the pods do not run successfully:

. Run the following command to view details about the status of the pods during deployment by retrieving
associated events:
+
----
oc describe pods/<pod_name>
----

. Check the default system logs:
+
----
$ oc logs -f <pod_name>
----
