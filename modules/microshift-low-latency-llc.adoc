// Module included in the following assemblies:
//
// microshift_configuring/microshift_low_latency/microshift-low-latency.adoc

:_mod-docs-content-type: PROCEDURE
[id="microshift-low-latency-llc-enable_{context}"]
= Enabling last-level cache locality in {microshift-short}

[role="_abstract"]
You can align workloads with CPU cores that share the same last-level cache (LLC) to improve performance for latency-sensitive applications. To apply this alignment, enable the Kubernetes CPU Manager option `prefer-align-cpus-by-uncorecache`.

:FeatureName: Last-level cache (LLC) locality
include::snippets/technology-preview.adoc[]
:FeatureName!:

[WARNING]
====
This feature is part of a feature gate. After you enable feature gates, you cannot disable them or update {microshift-first}, and your cluster can become unstable or lose data. Enable feature gates only in non-production environments.
====

.Procedure

. Add the following content to `/etc/microshift/config.yaml`. If you already have a `kubelet` section from the earlier section, merge the `cpuManagerPolicyOptions` entry and ensure the feature gate is present.
+
[source,yaml]
----
apiServer:
  featureGates:
    featureSet: "CustomNoUpgrade"
    customNoUpgrade:
      enabled:
      - "CPUManagerPolicyBetaOptions"
kubelet:
  reservedSystemCPUs: "0"
  cpuManagerPolicy: static
  cpuManagerPolicyOptions:
    prefer-align-cpus-by-uncorecache: "true"
----

. To apply the configuration, restart {microshift-short} by running the following command:
+
[source,terminal,subs="+quotes"]
----
$ sudo systemctl restart microshift
----
