// Module included in the following assemblies:

// * service-mesh-docs-main/install/ossm-istio-ambient-mode.adoc

:_mod-docs-content-type: PROCEDURE
[id="ossm-enabling-cross-namespace-waypoint-usage_{context}"]
= Enabling cross-namespace waypoint usage

You can use a cross-namespace waypoint to allow resources in one namespace to route traffic through a waypoint deployed in a different namespace.

.Procedure

. Create a `Gateway` resource that allows workloads in the `bookinfo` namespace to use the `waypoint-default` from the `default` namespace similar to the following example:
+
.Example configuration
[source,yaml]
----
apiVersion: gateway.networking.k8s.io/v1
kind: Gateway
metadata:
  name: waypoint-default
  namespace: default
spec:
  gatewayClassName: istio-waypoint
  listeners:
  - name: mesh
    port: 15008
    protocol: HBONE
    allowedRoutes:
      namespaces:
        from: Selector
        selector:
          matchLabels:
            kubernetes.io/metadata.name: bookinfo
----

. Apply the cross-namespace waypoint by running the following command:
+
[source,terminal]
----
$ oc apply -f waypoint-default.yaml
----

. Add the labels required to use a cross-namespace waypoint:

.. Add the `istio.io/use-waypoint-namespace` label to specify the namespace where the waypoint resides by running the following command:
+
[source,terminal]
----
$ oc label namespace bookinfo istio.io/use-waypoint-namespace=default
----

.. Add the `istio.io/use-waypoint` label to specify the waypoint to use by running the following command:
+
[source,terminal]
----
$ oc label namespace bookinfo istio.io/use-waypoint=waypoint-default
----