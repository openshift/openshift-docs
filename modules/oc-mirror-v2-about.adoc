// Module included in the following assemblies:
//
<<<<<<< HEAD
// * installing/disconnected_install/about-installing-oc-mirror-v2.adoc
=======
// * installing/disconnected_install/installing-mirroring-disconnected.adoc
>>>>>>> db046a6924 (Restructured oc-mirror section to include both V1 and V2 changes.)
// * updating/updating_a_cluster/updating_disconnected_cluster/mirroring-image-repository.adoc

:_mod-docs-content-type: CONCEPT
[id="installation-oc-mirror-v2-about_{context}"]
<<<<<<< HEAD
= About oc-mirror plugin v2

The oc-mirror OpenShift CLI (`oc`) plugin is a single tool that mirrors all required {product-title} content and other images to your mirror registry.

To use the new Technology Preview version of oc-mirror, add the `--v2` flag to the oc-mirror plugin v2 command line.

oc-mirror plugin v2 has the following features:

* Verifies that the complete image set specified in the image set config is mirrored to the mirrored registry, regardless of whether the images were previously mirrored or not.

* Uses a cache system instead of metadata.

* Maintains minimal archive sizes by incorporating only new images into the archive.

* Generates mirroring archives with content selected by mirroring date.

* Can generate `ImageDigestMirrorSet` (IDMS), `ImageTagMirrorSet` (ITMS), instead of `ImageContentSourcePolicy` (ICSP) for the full image set, rather than just for the incremental changes.

* Saves filter Operator versions by bundle name.

* Does not perform automatic pruning. V2 now has a `Delete` feature, which grants users more control over deleting images.

* Introduces support for `registries.conf`. This change facilitates mirroring to multiple enclaves while using the same cache.
=======
= About the oc-mirror plugin V2


You can use the oc-mirror OpenShift CLI (`oc`) plugin to mirror all required {product-title} content and other images to your mirror registry by using a single tool. 

It provides the following features:

* Provides a centralized method to mirror {product-title} releases, Operators, helm charts, and other images.
* Maintains update paths for {product-title} and Operators.
* Uses a declarative image set configuration file to include only the {product-title} releases, Operators, and images that your cluster needs.
* Performs incremental mirroring, which reduces the size of future image sets.
* Prunes images from the target mirror registry that were excluded from the image set configuration since the previous execution.
* Optionally generates supporting artifacts for OpenShift Update Service (OSUS) usage.
* Use the existing workflow use case/s (as in v1)
- Mirror to Disk
- Disk to Mirror
- Mirror to Mirror
* Improve overall user experience
- Use of local caching mechanism
- Continue where you left off
- Save time for mirroring (especially for multiple enclaves)
- Geared for gitops (fail fast)
* Support multi tier complex enclaves 
- Partial or fully air-gapped
- Hub and spoke type air-gapped environments
- Generate archives (tar.gz diff)
-- By time (i.e from first mirror to latest)
-- Incremental
- History metadata
* OCI FBC support 
* Filtering of operators by selecting bundles 
* Generate all relevant metadata 
- IDMS - ImageDigestMirrorSet
- ITMS - ImageTagMirrorSet
- CatalogSource
- Use of templating
* Optionally generates artifacts for OSUS (Openshift Update Service)
* Implement delete functionality
- Use of DeleteImageSetConfig (kind)
- Delete remote registry (manifests only)
- Delete local cache 


When using the oc-mirror plugin, you specify which content to mirror in an image set configuration file. In this YAML file, you can fine-tune the configuration to only include the {product-title} releases and Operators that your cluster needs. This reduces the amount of data that you need to download and transfer. The oc-mirror plugin can also mirror arbitrary helm charts and additional container images to assist users in seamlessly synchronizing their workloads onto mirror registries.

The first time you run the oc-mirror plugin, it populates your mirror registry with the required content to perform your disconnected cluster installation or update. In order for your disconnected cluster to continue receiving updates, you must keep your mirror registry updated. To update your mirror registry, you run the oc-mirror plugin using the same configuration as the first time you ran it. The oc-mirror plugin references the metadata from the storage backend and only downloads what has been released since the last time you ran the tool. This provides update paths for {product-title} and Operators and performs dependency resolution as required.

[IMPORTANT]
====
When using the oc-mirror CLI plugin to populate a mirror registry, any further updates to the mirror registry must be made using the oc-mirror tool.
====
>>>>>>> db046a6924 (Restructured oc-mirror section to include both V1 and V2 changes.)
