:_newdoc-version: 2.18.4
:_template-generated: 2025-09-22
:_mod-docs-content-type: PROCEDURE

[id="enabling-automatic-stream-sharding_{context}"]
= Enabling automatic stream sharding

Loki provides automatic stream sharding mechanism. Automatic stream sharding helps with making Loki more resilient without having to configure additional stream labels. To enable automatic stream sharding, remove `perStream*` attributes under the limits part of the spec. 

.Prerequisites
* You have configured {loki-op}.

.Procedure
* Remove definitions of the `perStream*` attributes.
+
.Example CR with perStream* attributes
[source,yaml]
----
apiVersion: loki.grafana.com/v1
kind: LokiStack
metadata:
  name: logging-loki
  namespace: openshift-logging
spec:
...
  tenants:
    mode: openshift-logging
    limits:
      tenants:
        application:
          ingestion:
            perStreamRateLimit: 5
            perStreamRateLimitBurst: 15

----
+
.Example CR to enable automatic stream sharding
+
[source,yaml]
----
apiVersion: loki.grafana.com/v1
kind: LokiStack
metadata:
  name: logging-loki
  namespace: openshift-logging
spec:
...
  tenants:
    mode: openshift-logging
----
