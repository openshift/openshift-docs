// tag::snippets[]
apiVersion: machine.openshift.io/v1beta1
kind: MachineSet
metadata:
  labels:
    machine.openshift.io/cluster-api-cluster: <infrastructure_id> <1>
ifdef::azure-mapi[]
    machine.openshift.io/cluster-api-machine-role: <role>
    machine.openshift.io/cluster-api-machine-type: <role>
endif::azure-mapi[]
  name: <infrastructure_id>-<role>-<zone> <2>
  namespace: openshift-machine-api
spec:
  replicas: 1
  selector:
    matchLabels:
      machine.openshift.io/cluster-api-cluster: <infrastructure_id> <1>
      machine.openshift.io/cluster-api-machineset: <infrastructure_id>-<role>-<zone> <2>
  template:
    metadata:
      labels:
        machine.openshift.io/cluster-api-cluster: <infrastructure_id> <1>
        machine.openshift.io/cluster-api-machine-role: <role> <3>
        machine.openshift.io/cluster-api-machine-type: <role> <3>
        machine.openshift.io/cluster-api-machineset: <infrastructure_id>-<role>-<zone> <2>
    spec:
      metadata:
        labels:
ifndef::azure-mapi[]
          node-role.kubernetes.io/<role>: "" <3>
      taints: <4>
        - key: node-role.kubernetes.io/<role>
          effect: NoSchedule
      providerSpec: <5>
endif::azure-mapi[]
ifdef::azure-mapi[]
          machine.openshift.io/cluster-api-machineset: <machineset_name> <4>
          node-role.kubernetes.io/<role>: "" <3>
      taints: <5>
        - key: node-role.kubernetes.io/<role>
          effect: NoSchedule
      providerSpec: <6>
endif::azure-mapi[]
// end::snippets[]
