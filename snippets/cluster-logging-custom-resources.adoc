:_content-type: SNIPPET

[source,yaml]
----
kind: ClusterLogging
apiVersion: logging.openshift.io/v1
metadata:
  name: instance
  namespace: openshift-logging
spec:
  collection:
    type: fluentd
  logStore:
    elasticsearch:
      nodeCount: 3
      redundancyPolicy: SingleRedundancy
      resources:
        requests:
          memory: 2Gi
      storage:
        size: 200G
        storageClassName: gp2
    retentionPolicy:
      application:
        maxAge: 7d
    type: elasticsearch
  managementState: Managed
  visualization:
    kibana:
      replicas: 1
    type: kibana
----

[source,yaml]
----
apiVersion: logging.openshift.io/v1
kind: ClusterLogForwarder
metadata:
  name: instance
  namespace: openshift-logging
spec:
  outputs:
    - secret:
        name: elasticsearch
      syslog:
        rfc: RFC5424
      name: remote-elasticsearch
      type: elasticsearch
      url: 'remote.example.org:9200'
  pipelines:
    - inputRefs:
        - application
        - audit
        - infrastructure
      outputRefs:
        - default
      name: enable-default-log-store
    - inputRefs:
        - application
      outputRefs:
        - remote-elasticsearch
      name: forward-to-remote
----

[source,yaml]
----
kind: Elasticsearch
apiVersion: logging.openshift.io/v1
metadata:
  name: elasticsearch
  namespace: openshift-operators-redhat
spec:
  indexManagement:
    mappings:
      - aliases:
          - infra
          - logs.infra
        name: infra
        policyRef: infra-policy
    policies:
      - name: infra-policy
        phases:
          delete:
            minAge: 2d
            namespaceSpec:
              - minAge: 5h
                namespace: openshift-monitoring
            pruneNamespacesInterval: 24h
          hot:
            actions:
              rollover:
                maxAge: 8h
        pollInterval: 30m
  managementState: Managed
  nodeSpec:
    resources:
      limits:
        memory: 1Gi
      requests:
        cpu: 100m
        memory: 512Mi
  nodes:
    - nodeCount: 1
      roles:
        - client
        - data
        - master
      storage:
        size: 20G
  redundancyPolicy: ZeroRedundancy
----

[source,yaml]
----
kind: Kibana
apiVersion: logging.openshift.io/v1
metadata:
  name: kibana
  namespace: openshift-operators-redhat
spec:
  managementState: Managed
  nodeSelector: {}
  replicas: 1
  resources:
    limits:
      memory: 512Mi
    requests:
      memory: 512Mi
----
